<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <style>html, body {
  margin: 0;
  padding: 0;
}

.app {
  margin: 10px;
  padding: 0;
}

.files-list {
  margin: 10px 0 0;
  width: 100%;
  border-collapse: collapse;
}
.files-list__head {
  border: 1px solid #999;
}
.files-list__head > tr > th {
  padding: 10px;
  border: 1px solid #999;
  text-align: left;
  font-weight: normal;
  background: #ddd;
}
.files-list__body {
}
.files-list__file {
  cursor: pointer;
}
.files-list__file:hover {
  background: #ccf;
}
.files-list__file > td {
  padding: 10px;
  border: 1px solid #999;
}
.files-list__file > td:first-child::before {
  content: '\01F4C4';
  margin-right: 1em;
}
.files-list__file_low {
  background: #fcc;
}
.files-list__file_medium {
  background: #ffc;
}
.files-list__file_high {
  background: #cfc;
}
.files-list__file_folder > td:first-child::before {
  content: '\01F4C1';
  margin-right: 1em;
}

.file-header {
  border: 1px solid #999;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: sticky;
  top: 0;
  background: white;
}

.file-header__back {
  margin: 10px;
  cursor: pointer;
  flex-shrink: 0;
  flex-grow: 0;
  text-decoration: underline;
  color: #338;
}

.file-header__name {
  margin: 10px;
  flex-shrink: 2;
  flex-grow: 2;
}

.file-header__stat {
  margin: 10px;
  flex-shrink: 0;
  flex-grow: 0;
}

.file-content {
  margin: 10px 0 0;
  border: 1px solid #999;
  padding: 10px;
  counter-reset: line;
  display: flex;
  flex-direction: column;
}

.code-line::before {
    content: counter(line);
    margin-right: 10px;
}
.code-line {
  margin: 0;
  padding: 0.3em;
  height: 1em;
  counter-increment: line;
}
.code-line_covered {
  background: #cfc;
}
.code-line_uncovered {
  background: #fcc;
}
</style>
</head>
<body>
    <div id="root"></div>
    <script>
        var data = {"files":[{"path":["/","home","amaury","Documents","info5","0projet","app","src","app.rs"],"content":"use crate::models::utils::secret::Secret;\nuse crate::views::main_page::dashboard::Dashboard;\nuse crate::views::main_page::gantt::GanttChart;\nuse crate::views::menu::menu::Menu;\nuse crate::views::menu::tools::Tools;\nuse crate::views::view::View;\nuse crate::{\n    models::data_structure::application_context::ApplicationContext,\n    views::main_page::anthentification::Authentification,\n};\nuse eframe::egui::{self, CentralPanel, TopBottomPanel};\n\npub struct App {\n    pub dashboard_view: Dashboard,\n    pub gantt_view: GanttChart,\n    pub authentification_view: Authentification,\n    pub menu: Menu,\n    pub secret: Secret,\n    pub tools: Tools,\n    pub application_context: ApplicationContext,\n}\n\nimpl App {\n    pub fn new() -\u003e Self {\n        let app = App {\n            secret: Secret::default(),\n            dashboard_view: Dashboard::default(),\n            gantt_view: GanttChart::default(),\n            authentification_view: Authentification::default(),\n            menu: Menu::default(),\n            tools: Tools::default(),\n            application_context: ApplicationContext::default(),\n        };\n\n        app\n    }\n}\n\nimpl eframe::App for App {\n    fn update(\u0026mut self, ctx: \u0026egui::Context, _frame: \u0026mut eframe::Frame) {\n        self.secret.update(ctx);\n        self.secret.draw_snake_game(ctx);\n\n        TopBottomPanel::top(\"menu_bar\").show(ctx, |ui| {\n            self.menu.render(ui, \u0026mut self.application_context);\n        });\n\n        // Check for updates\n        self.application_context.check_data_update();\n\n        CentralPanel::default().show(ctx, |_ui| {\n            TopBottomPanel::top(\"tool_bar\").show(ctx, |ui| {\n                self.tools.render(ui, \u0026mut self.application_context);\n            });\n\n            CentralPanel::default().show(ctx, |ui| match self.application_context.view_type {\n                crate::views::view::ViewType::Dashboard =\u003e {\n                    self.dashboard_view\n                        .render(ui, \u0026mut self.application_context);\n                }\n                crate::views::view::ViewType::Gantt =\u003e {\n                    self.gantt_view.render(ui, \u0026mut self.application_context);\n                }\n                crate::views::view::ViewType::Authentification =\u003e {\n                    self.authentification_view\n                        .render(ui, \u0026mut self.application_context);\n                }\n            });\n        });\n\n        TopBottomPanel::bottom(\"status_bar\").show(ctx, |ui| {\n            ui.horizontal(|ui| {\n                // Display the current refresh rate\n                ui.with_layout(egui::Layout::right_to_left(egui::Align::Center), |ui| {\n                    if *self.application_context.is_refreshing.lock().unwrap() {\n                        ui.add(egui::Spinner::new());\n                        ui.label(t!(\"app.refreshing\"));\n                    }\n                });\n            });\n        });\n        ctx.request_repaint();\n    }\n}\n","traces":[{"line":24,"address":[5033792,5034344],"length":1,"stats":{"Line":0}},{"line":26,"address":[5033814],"length":1,"stats":{"Line":0}},{"line":27,"address":[5033827],"length":1,"stats":{"Line":0}},{"line":28,"address":[5033879],"length":1,"stats":{"Line":0}},{"line":29,"address":[5033931],"length":1,"stats":{"Line":0}},{"line":30,"address":[5033983],"length":1,"stats":{"Line":0}},{"line":31,"address":[5034035],"length":1,"stats":{"Line":0}},{"line":32,"address":[5034087],"length":1,"stats":{"Line":0}},{"line":40,"address":[5034368],"length":1,"stats":{"Line":0}},{"line":41,"address":[5034408],"length":1,"stats":{"Line":0}},{"line":42,"address":[5034429],"length":1,"stats":{"Line":0}},{"line":44,"address":[4393696],"length":1,"stats":{"Line":0}},{"line":45,"address":[4393728],"length":1,"stats":{"Line":0}},{"line":49,"address":[5034519],"length":1,"stats":{"Line":0}},{"line":51,"address":[5034531],"length":1,"stats":{"Line":0}},{"line":52,"address":[4393779,4393968],"length":1,"stats":{"Line":0}},{"line":53,"address":[4394000],"length":1,"stats":{"Line":0}},{"line":56,"address":[4393842,4394051,4394032],"length":1,"stats":{"Line":0}},{"line":58,"address":[4394101,4394108],"length":1,"stats":{"Line":0}},{"line":59,"address":[4394104],"length":1,"stats":{"Line":0}},{"line":62,"address":[4394125],"length":1,"stats":{"Line":0}},{"line":65,"address":[4394158,4394150],"length":1,"stats":{"Line":0}},{"line":66,"address":[4394154],"length":1,"stats":{"Line":0}},{"line":71,"address":[4394176],"length":1,"stats":{"Line":0}},{"line":72,"address":[4394189,4394224],"length":1,"stats":{"Line":0}},{"line":74,"address":[4394350,4395485,4394244,4394480],"length":1,"stats":{"Line":0}},{"line":75,"address":[4394714,4395425,4394505],"length":1,"stats":{"Line":0}},{"line":76,"address":[4394825],"length":1,"stats":{"Line":0}},{"line":77,"address":[4394989,4394884,4395430],"length":1,"stats":{"Line":0}},{"line":82,"address":[5034771],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":30},{"path":["/","home","amaury","Documents","info5","0projet","app","src","main.rs"],"content":"mod app;\nmod models;\nmod views;\n\n#[macro_use]\nextern crate rust_i18n;\ni18n!(\"src/i18n\");\n\n#[cfg(not(target_arch = \"wasm32\"))]\nfn main() -\u003e Result\u003c(), eframe::Error\u003e {\n    // Configure the native options\n    let options = eframe::NativeOptions::default();\n\n    // Start the native app\n    eframe::run_native(\n        \u0026t!(\"app.title\"),\n        options,\n        Box::new(|_cc| Ok(Box::new(app::App::new()))),\n    )\n}\n\n// When compiling to web using trunk:\n#[cfg(target_arch = \"wasm32\")]\nfn main() {\n    use eframe::wasm_bindgen::JsCast as _;\n\n    // Redirect `log` message to `console.log` and friends:\n    eframe::WebLogger::init(log::LevelFilter::Debug).ok();\n\n    let web_options = eframe::WebOptions::default();\n\n    wasm_bindgen_futures::spawn_local(async {\n        let document = web_sys::window()\n            .expect(\"No window\")\n            .document()\n            .expect(\"No document\");\n\n        let canvas = document\n            .get_element_by_id(\"the_canvas_id\")\n            .expect(\"Failed to find the_canvas_id\")\n            .dyn_into::\u003cweb_sys::HtmlCanvasElement\u003e()\n            .expect(\"the_canvas_id was not a HtmlCanvasElement\");\n\n        let start_result = eframe::WebRunner::new()\n            .start(\n                canvas,\n                web_options,\n                Box::new(|_cc| Ok(Box::new(app::App::new()))),\n            )\n            .await;\n\n        // Remove the loading text and spinner:\n        if let Some(loading_text) = document.get_element_by_id(\"loading_text\") {\n            match start_result {\n                Ok(_) =\u003e {\n                    loading_text.remove();\n                }\n                Err(e) =\u003e {\n                    loading_text.set_inner_html(\n                        \"\u003cp\u003e The app has crashed. See the developer console for details. \u003c/p\u003e\",\n                    );\n                    panic!(\"Failed to start eframe: {e:?}\");\n                }\n            }\n        }\n    });\n}\n\n#[cfg(test)]\nmod tests;\n","traces":[{"line":7,"address":[4906097,4906190,4906176,4906000,4906064,4906024],"length":1,"stats":{"Line":0}},{"line":10,"address":[4904800,4905973,4905894],"length":1,"stats":{"Line":0}},{"line":12,"address":[4904817],"length":1,"stats":{"Line":0}},{"line":16,"address":[4905090,4904863,4904978,4905286],"length":1,"stats":{"Line":0}},{"line":17,"address":[4905407],"length":1,"stats":{"Line":0}},{"line":18,"address":[4998541,4998512,4998656],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":6},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","data_structure","application_context.rs"],"content":"use super::cluster::Cluster;\nuse super::filters::JobFilters;\nuse super::job::Job;\nuse super::resource::Resource;\nuse super::strata::Strata;\nuse crate::models::data_structure::cpu::Cpu;\nuse crate::models::data_structure::host::Host;\nuse crate::models::data_structure::resource::ResourceState;\nuse crate::models::utils::utils::{get_clusters_for_job, get_hosts_for_job};\nuse crate::views::components::dashboard_components::job_table_sorting::JobSortable;\nuse crate::views::view::ViewType;\nuse chrono::{DateTime, Local};\nuse std::sync::mpsc::{channel, Receiver, Sender};\nuse std::sync::{Arc, Mutex};\n\n/*\n`ApplicationContext` is the central state container for the entire application.\nIt manages jobs, clusters, resources, and application state, including filtering mechanisms\nand communication channels for data updates.\n*/\npub struct ApplicationContext {\n    pub all_jobs: Vec\u003cJob\u003e,\n    pub swap_all_jobs: Vec\u003cJob\u003e, // Used to store all jobs when refreshing (and swapped with all_jobs when refreshing is done)\n    pub filtered_jobs: Vec\u003cJob\u003e, // Subset of all_jobs that match the filters\n\n    pub all_clusters: Vec\u003cCluster\u003e,\n    pub swap_all_clusters: Vec\u003cCluster\u003e, // Used to store all clusters when refreshing (and swapped with all_clusters when refreshing is done)\n\n    // Application view state\n    pub start_date: Arc\u003cMutex\u003cDateTime\u003cLocal\u003e\u003e\u003e,\n    pub end_date: Arc\u003cMutex\u003cDateTime\u003cLocal\u003e\u003e\u003e,\n    pub view_type: ViewType,\n    pub is_loading: bool,\n    pub user_connected: Option\u003cString\u003e,\n    pub is_refreshing: Arc\u003cMutex\u003cbool\u003e\u003e,\n    pub refresh_rate: Arc\u003cMutex\u003cu64\u003e\u003e,\n    pub filters: JobFilters,\n\n    // Communication channels for background data updates\n    pub jobs_receiver: Receiver\u003cVec\u003cJob\u003e\u003e,\n    pub jobs_sender: Sender\u003cVec\u003cJob\u003e\u003e,\n    pub resources_receiver: Receiver\u003cVec\u003cStrata\u003e\u003e,\n    pub resources_sender: Sender\u003cVec\u003cStrata\u003e\u003e,\n\n    pub font_size: i32,\n    pub see_all_jobs: bool,\n}\n\nimpl ApplicationContext {\n    pub fn check_job_update(\u0026mut self) {\n        if let Ok(new_jobs) = self.jobs_receiver.try_recv() {\n            self.swap_all_jobs = new_jobs;\n            self.is_loading = false;\n        }\n    }\n\n    /*\n    Checks for and processes any new resource data received from the background thread.\n     This method builds the hierarchical structure of clusters, hosts, CPUs, and resources\n     from the flat resource data received.\n     */\n    pub fn check_ressource_update(\u0026mut self) {\n        if let Ok(new_resources) = self.resources_receiver.try_recv() {\n            // for every resources get the cluster name with resource.cluster and if there is no cluster with this name in all_clusters add it to all_clusters\n            for resource in new_resources.iter() {\n                let cluster_name = resource.cluster.as_ref().unwrap_or(\u0026\"\".to_string()).clone();\n                if cluster_name == \"\" {\n                    continue;\n                }\n                if !self\n                    .swap_all_clusters\n                    .iter()\n                    .any(|cluster| cluster.name == cluster_name)\n                {\n                    // Add the cluster to all_clusters with one host being resource.host\n                    let new_cluster = Cluster {\n                        name: cluster_name.clone(),\n                        hosts: vec![Host {\n                            name: resource.host.as_ref().unwrap_or(\u0026\"\".to_string()).clone(),\n                            cpus: vec![Cpu {\n                                name: resource.cputype.as_ref().unwrap_or(\u0026\"\".to_string()).clone(),\n                                resources: vec![Resource {\n                                    id: resource.resource_id.unwrap_or(0),\n                                    state: match resource\n                                        .state\n                                        .as_ref()\n                                        .unwrap_or(\u0026\"\".to_string())\n                                        .as_str()\n                                    {\n                                        \"Dead\" =\u003e super::resource::ResourceState::Dead,\n                                        \"Alive\" =\u003e super::resource::ResourceState::Alive,\n                                        \"Absent\" =\u003e super::resource::ResourceState::Absent,\n                                        _ =\u003e super::resource::ResourceState::Unknown,\n                                    },\n                                    thread_count: resource.thread_count.unwrap_or(0) as i32,\n                                }],\n                                core_count: resource.core_count.unwrap_or(0) as i32,\n                                cpufreq: resource\n                                    .cpufreq\n                                    .as_ref()\n                                    .unwrap_or(\u0026\"\".to_string())\n                                    .parse::\u003cf32\u003e()\n                                    .unwrap_or(0.0),\n                                chassis: resource\n                                    .chassis\n                                    .as_ref()\n                                    .unwrap_or(\u0026\"\".to_string())\n                                    .clone(),\n                                resource_ids: vec![resource.resource_id.unwrap_or(0)],\n                            }],\n                            network_address: resource\n                                .network_address\n                                .as_ref()\n                                .unwrap_or(\u0026\"\".to_string())\n                                .clone(),\n                            resource_ids: vec![resource.resource_id.unwrap_or(0)],\n                            state: ResourceState::Unknown,\n                        }],\n                        resource_ids: vec![resource.resource_id.unwrap_or(0)],\n                        state: ResourceState::Unknown,\n                    };\n\n                    // Add the cluster to all_clusters\n                    self.swap_all_clusters.push(new_cluster);\n                } else {\n                    // if the cluster already exists, check if the host exists and add the host if it doesn't\n                    let cluster = self\n                        .swap_all_clusters\n                        .iter_mut()\n                        .find(|cluster| cluster.name == cluster_name)\n                        .unwrap();\n                    if !cluster.hosts.iter().any(|host| {\n                        host.name == resource.host.as_ref().unwrap_or(\u0026\"\".to_string()).clone()\n                    }) {\n                        cluster.hosts.push(Host {\n                            name: resource.host.as_ref().unwrap_or(\u0026\"\".to_string()).clone(),\n                            cpus: vec![Cpu {\n                                name: resource.cputype.as_ref().unwrap_or(\u0026\"\".to_string()).clone(),\n                                resources: vec![Resource {\n                                    id: resource.resource_id.unwrap_or(0),\n                                    state: match resource\n                                        .state\n                                        .as_ref()\n                                        .unwrap_or(\u0026\"\".to_string())\n                                        .as_str()\n                                    {\n                                        \"Dead\" =\u003e super::resource::ResourceState::Dead,\n                                        \"Alive\" =\u003e super::resource::ResourceState::Alive,\n                                        \"Absent\" =\u003e super::resource::ResourceState::Absent,\n                                        _ =\u003e super::resource::ResourceState::Unknown,\n                                    },\n                                    thread_count: resource.thread_count.unwrap_or(0) as i32,\n                                }],\n                                core_count: resource.core_count.unwrap_or(0) as i32,\n                                cpufreq: resource\n                                    .cpufreq\n                                    .as_ref()\n                                    .unwrap_or(\u0026\"\".to_string())\n                                    .parse::\u003cf32\u003e()\n                                    .unwrap_or(0.0),\n                                chassis: resource\n                                    .chassis\n                                    .as_ref()\n                                    .unwrap_or(\u0026\"\".to_string())\n                                    .clone(),\n                                resource_ids: vec![resource.resource_id.unwrap_or(0)],\n                            }],\n                            network_address: resource\n                                .network_address\n                                .as_ref()\n                                .unwrap_or(\u0026\"\".to_string())\n                                .clone(),\n                            resource_ids: vec![resource.resource_id.unwrap_or(0)],\n                            state: ResourceState::Unknown,\n                        });\n                        // add the resource id to the cluster\n                        cluster.resource_ids.push(resource.resource_id.unwrap_or(0));\n                    } else {\n                        // if the host already exists, check if the cpu exists and add the cpu if it doesn't\n                        let host = cluster\n                            .hosts\n                            .iter_mut()\n                            .find(|host| {\n                                host.name\n                                    == resource.host.as_ref().unwrap_or(\u0026\"\".to_string()).clone()\n                            })\n                            .unwrap();\n                        if !host.cpus.iter().any(|cpu| {\n                            cpu.name == resource.cputype.as_ref().unwrap_or(\u0026\"\".to_string()).clone()\n                        }) {\n                            host.cpus.push(Cpu {\n                                name: resource.cputype.as_ref().unwrap_or(\u0026\"\".to_string()).clone(),\n                                resources: vec![Resource {\n                                    id: resource.resource_id.unwrap_or(0),\n                                    state: match resource\n                                        .state\n                                        .as_ref()\n                                        .unwrap_or(\u0026\"\".to_string())\n                                        .as_str()\n                                    {\n                                        \"Dead\" =\u003e super::resource::ResourceState::Dead,\n                                        \"Alive\" =\u003e super::resource::ResourceState::Alive,\n                                        \"Absent\" =\u003e super::resource::ResourceState::Absent,\n                                        _ =\u003e super::resource::ResourceState::Unknown,\n                                    },\n                                    thread_count: resource.thread_count.unwrap_or(0) as i32,\n                                }],\n                                core_count: resource.core_count.unwrap_or(0) as i32,\n                                cpufreq: resource\n                                    .cpufreq\n                                    .as_ref()\n                                    .unwrap_or(\u0026\"\".to_string())\n                                    .parse::\u003cf32\u003e()\n                                    .unwrap_or(0.0),\n                                chassis: resource\n                                    .chassis\n                                    .as_ref()\n                                    .unwrap_or(\u0026\"\".to_string())\n                                    .clone(),\n                                resource_ids: vec![resource.resource_id.unwrap_or(0)],\n                            });\n\n                            // add the resource id to the host and the cluster\n                            host.resource_ids.push(resource.resource_id.unwrap_or(0));\n                            cluster.resource_ids.push(resource.resource_id.unwrap_or(0));\n                        } else {\n                            // if the cpu already exists, add the resource to the cpu\n                            let cpu = host\n                                .cpus\n                                .iter_mut()\n                                .find(|cpu| {\n                                    cpu.name\n                                        == resource\n                                            .cputype\n                                            .as_ref()\n                                            .unwrap_or(\u0026\"\".to_string())\n                                            .clone()\n                                })\n                                .unwrap();\n                            cpu.resources.push(Resource {\n                                id: resource.resource_id.unwrap_or(0),\n                                state: match resource\n                                    .state\n                                    .as_ref()\n                                    .unwrap_or(\u0026\"\".to_string())\n                                    .as_str()\n                                {\n                                    \"Dead\" =\u003e super::resource::ResourceState::Dead,\n                                    \"Alive\" =\u003e super::resource::ResourceState::Alive,\n                                    \"Absent\" =\u003e super::resource::ResourceState::Absent,\n                                    _ =\u003e super::resource::ResourceState::Unknown,\n                                },\n                                thread_count: resource.thread_count.unwrap_or(0) as i32,\n                            });\n\n                            // add the resource id to the cpu, the host and the cluster\n                            cpu.resource_ids.push(resource.resource_id.unwrap_or(0));\n                            host.resource_ids.push(resource.resource_id.unwrap_or(0));\n                            cluster.resource_ids.push(resource.resource_id.unwrap_or(0));\n                        }\n                    }\n                }\n            }\n            for job in self.swap_all_jobs.iter_mut() {\n                job.clusters = get_clusters_for_job(job, \u0026self.swap_all_clusters);\n                job.hosts = get_hosts_for_job(job, \u0026self.swap_all_clusters);\n                job.update_majority_resource_state(\u0026self.swap_all_clusters);\n            }\n\n            // For each host set is state to the state the most resources have\n            for cluster in self.swap_all_clusters.iter_mut() {\n                for host in cluster.hosts.iter_mut() {\n                    let mut dead_count = 0;\n                    let mut alive_count = 0;\n                    let mut absent_count = 0;\n                    for cpu in host.cpus.iter() {\n                        for resource in cpu.resources.iter() {\n                            match resource.state {\n                                ResourceState::Dead =\u003e dead_count += 1,\n                                ResourceState::Alive =\u003e alive_count += 1,\n                                ResourceState::Absent =\u003e absent_count += 1,\n                                _ =\u003e (),\n                            }\n                        }\n                    }\n                    if dead_count \u003e= alive_count \u0026\u0026 dead_count \u003e= absent_count {\n                        host.state = ResourceState::Dead;\n                    } else if absent_count \u003e= dead_count \u0026\u0026 absent_count \u003e= alive_count {\n                        host.state = ResourceState::Absent;\n                    } else if alive_count \u003e dead_count \u0026\u0026 alive_count \u003e absent_count {\n                        host.state = ResourceState::Alive;\n                    } else {\n                        host.state = ResourceState::Unknown;\n                    }\n                }\n            }\n\n            // For each cluster set is state to the state the most hosts have\n            for cluster in self.swap_all_clusters.iter_mut() {\n                let mut dead_count = 0;\n                let mut alive_count = 0;\n                let mut absent_count = 0;\n                for host in cluster.hosts.iter() {\n                    match host.state {\n                        ResourceState::Dead =\u003e dead_count += 1,\n                        ResourceState::Alive =\u003e alive_count += 1,\n                        ResourceState::Absent =\u003e absent_count += 1,\n                        _ =\u003e (),\n                    }\n                }\n                if dead_count \u003e= alive_count \u0026\u0026 dead_count \u003e= absent_count {\n                    cluster.state = ResourceState::Dead;\n                } else if absent_count \u003e= dead_count \u0026\u0026 absent_count \u003e= alive_count {\n                    cluster.state = ResourceState::Absent;\n                } else if alive_count \u003e dead_count \u0026\u0026 alive_count \u003e absent_count {\n                    cluster.state = ResourceState::Alive;\n                } else {\n                    cluster.state = ResourceState::Unknown;\n                }\n            }\n            // Swap all_jobs and all_clusters with swap_all_jobs and swap_all_clusters\n            // If there is a job with id 0 in all_jobs, we keep it\n            let has_job_0 = self.all_jobs.iter().any(|job| job.id == 0);\n            if has_job_0 {\n                // Get the job with id 0\n                let job_0 = self\n                    .all_jobs\n                    .iter()\n                    .find(|job| job.id == 0)\n                    .unwrap()\n                    .clone();\n                self.swap_all_jobs.push(job_0);\n            }\n\n            self.all_jobs = self.swap_all_jobs.clone();\n            self.all_clusters = self.swap_all_clusters.clone();\n        }\n    }\n\n    pub fn check_data_update(\u0026mut self) {\n        self.check_job_update();\n        self.check_ressource_update();\n\n        // set filter date to the date of the app context\n        self.filters\n            .set_scheduled_start_time(self.start_date.lock().unwrap().timestamp());\n        self.filters\n            .set_wall_time(self.end_date.lock().unwrap().timestamp());\n\n        self.filter_jobs();\n    }\n\n    pub fn logout(\u0026mut self) {\n        self.user_connected = None;\n        self.view_type = ViewType::Authentification;\n    }\n\n    pub fn login(\u0026mut self, username: \u0026str) {\n        self.user_connected = Some(username.to_string());\n        self.view_type = ViewType::Dashboard;\n    }\n\n    /* Returns a deduplicated, sorted list of all unique job owners\n     * Used for filtering functionality in the UI\n     */\n    pub fn get_unique_owners(\u0026self) -\u003e Vec\u003cString\u003e {\n        let mut owners: Vec\u003cString\u003e = self.all_jobs.iter().map(|job| job.owner.clone()).collect();\n        // remove the owner all_resources if it exists\n        owners.retain(|owner| owner != \"all_resources\");\n        owners.sort();\n        owners.dedup();\n        owners\n    }\n\n    /*\n     * Applies the current filters to all_jobs and updates filtered_jobs\n     * This method handles all filtering logic including:\n     * - Job owner filtering\n     * - Job state filtering\n     * - Time range filtering\n     * - Cluster resource filtering\n     */\n    pub fn filter_jobs(\u0026mut self) {\n        self.filtered_jobs = self\n            .all_jobs\n            .iter()\n            .filter(|job| {\n                job.id == 0\n                    || (self\n                        .filters\n                        .owners\n                        .as_ref()\n                        .map_or(true, |owners| owners.contains(\u0026job.owner)))\n                        \u0026\u0026 (self\n                            .filters\n                            .states\n                            .as_ref()\n                            .map_or(true, |states| states.contains(\u0026job.state)))\n                        \u0026\u0026 (((self\n                            .filters\n                            .scheduled_start_time\n                            .map_or(true, |time| time \u003c= job.scheduled_start))\n                            \u0026\u0026 (self\n                                .filters\n                                .wall_time\n                                .map_or(true, |time| time \u003e= job.scheduled_start)))\n                            || ((self\n                                .filters\n                                .scheduled_start_time\n                                .map_or(true, |time| time \u003c= job.get_end_date()))\n                                \u0026\u0026 (self\n                                    .filters\n                                    .wall_time\n                                    .map_or(true, |time| time \u003e= job.get_end_date())))\n                            || ((self\n                                .filters\n                                .scheduled_start_time\n                                .map_or(true, |time| time \u003e= job.start_time))\n                                \u0026\u0026 (self\n                                    .filters\n                                    .wall_time\n                                    .map_or(true, |time| time \u003c= job.get_end_date()))))\n                        \u0026\u0026 (self.filters.clusters.is_none() || {\n                            let selected_clusters = self.filters.clusters.as_ref().unwrap();\n                            selected_clusters.iter().any(|cluster| {\n                                cluster.hosts.iter().any(|host| {\n                                    host.cpus.iter().any(|cpu| {\n                                        cpu.resources.iter().any(|resource| {\n                                            job.assigned_resources.contains(\u0026resource.id)\n                                        })\n                                    })\n                                })\n                            })\n                        })\n            })\n            .cloned() // Clone filtred jobs here\n            .collect();\n    }\n}\n\nimpl Default for ApplicationContext {\n    // Creates a default ApplicationContext with initial values and sets up the background\n    // data refresh mechanism.\n    fn default() -\u003e Self {\n        let (jobs_sender, jobs_receiver) = channel();\n        let (resources_sender, resources_receiver) = channel();\n\n        let now: DateTime\u003cLocal\u003e = Local::now();\n        let mut context = Self {\n            all_jobs: Vec::new(),\n            all_clusters: Vec::new(),\n\n            swap_all_jobs: Vec::new(),\n            swap_all_clusters: Vec::new(),\n\n            jobs_receiver: jobs_receiver,\n            jobs_sender: jobs_sender,\n            resources_receiver: resources_receiver,\n            resources_sender: resources_sender,\n            user_connected: None,\n\n            filtered_jobs: Vec::new(),\n            filters: JobFilters::default(),\n            start_date: Arc::new(Mutex::new(now - chrono::Duration::hours(1))),\n            end_date: Arc::new(Mutex::new(now + chrono::Duration::hours(1))),\n            view_type: ViewType::Gantt,\n            is_loading: false,\n            is_refreshing: Arc::new(Mutex::new(false)),\n            refresh_rate: Arc::new(Mutex::new(30)),\n\n            font_size: 16,\n            see_all_jobs: false,\n        };\n        context.update_periodically();\n        context\n    }\n}\n","traces":[{"line":50,"address":[4809216,4809393],"length":1,"stats":{"Line":0}},{"line":51,"address":[4809466,4809232],"length":1,"stats":{"Line":0}},{"line":52,"address":[4809423,4809317,4809369],"length":1,"stats":{"Line":0}},{"line":53,"address":[4809459],"length":1,"stats":{"Line":0}},{"line":62,"address":[4818589,4809504,4826865],"length":1,"stats":{"Line":0}},{"line":63,"address":[4809545],"length":1,"stats":{"Line":0}},{"line":65,"address":[4809995,4809795,4809672],"length":1,"stats":{"Line":0}},{"line":66,"address":[4810019,4813773],"length":1,"stats":{"Line":0}},{"line":67,"address":[4813949],"length":1,"stats":{"Line":0}},{"line":70,"address":[4814067,4813999],"length":1,"stats":{"Line":0}},{"line":73,"address":[5509433,5509408],"length":1,"stats":{"Line":0}},{"line":77,"address":[4814165],"length":1,"stats":{"Line":0}},{"line":78,"address":[4818933,4819005,4819077,4814459,4817267,4818643,4818740,4814243,4814360,4814318,4818846],"length":1,"stats":{"Line":0}},{"line":119,"address":[4817767,4817696],"length":1,"stats":{"Line":0}},{"line":124,"address":[4818442],"length":1,"stats":{"Line":0}},{"line":127,"address":[4819098,4819273,4814200],"length":1,"stats":{"Line":0}},{"line":130,"address":[5509473,5509456],"length":1,"stats":{"Line":0}},{"line":132,"address":[4819281],"length":1,"stats":{"Line":0}},{"line":133,"address":[5509637,5509523],"length":1,"stats":{"Line":0}},{"line":135,"address":[4819438,4822401],"length":1,"stats":{"Line":0}},{"line":136,"address":[4819450,4819531,4819625],"length":1,"stats":{"Line":0}},{"line":137,"address":[4819726,4819768,4823110,4819654,4819867,4823073,4821501,4823161,4823034],"length":1,"stats":{"Line":0}},{"line":138,"address":[4819817,4819734,4819907],"length":1,"stats":{"Line":0}},{"line":139,"address":[4820056,4820008,4819936,4820186,4820528],"length":1,"stats":{"Line":0}},{"line":140,"address":[4820016],"length":1,"stats":{"Line":0}},{"line":141,"address":[4820151,4820226,4820093],"length":1,"stats":{"Line":0}},{"line":144,"address":[4820136],"length":1,"stats":{"Line":0}},{"line":147,"address":[4820287,4820368],"length":1,"stats":{"Line":0}},{"line":148,"address":[4820385,4820342,4820433],"length":1,"stats":{"Line":0}},{"line":149,"address":[4820450,4820407,4820466],"length":1,"stats":{"Line":0}},{"line":150,"address":[4820456],"length":1,"stats":{"Line":0}},{"line":152,"address":[4820482],"length":1,"stats":{"Line":0}},{"line":154,"address":[4820720],"length":1,"stats":{"Line":0}},{"line":155,"address":[4820930,4820855,4820797],"length":1,"stats":{"Line":0}},{"line":158,"address":[4820840],"length":1,"stats":{"Line":0}},{"line":161,"address":[4821205,4821075,4821130],"length":1,"stats":{"Line":0}},{"line":164,"address":[4821115],"length":1,"stats":{"Line":0}},{"line":166,"address":[4821304,4821229],"length":1,"stats":{"Line":0}},{"line":168,"address":[4822030,4822105,4821935],"length":1,"stats":{"Line":0}},{"line":171,"address":[4822015],"length":1,"stats":{"Line":0}},{"line":173,"address":[4822204,4822129],"length":1,"stats":{"Line":0}},{"line":174,"address":[4822393],"length":1,"stats":{"Line":0}},{"line":177,"address":[4822903],"length":1,"stats":{"Line":0}},{"line":180,"address":[4823182,4823357,4819484],"length":1,"stats":{"Line":0}},{"line":183,"address":[5509776,5510019],"length":1,"stats":{"Line":0}},{"line":184,"address":[5509790,5509938],"length":1,"stats":{"Line":0}},{"line":185,"address":[5509798,5509912],"length":1,"stats":{"Line":0}},{"line":188,"address":[4823365],"length":1,"stats":{"Line":0}},{"line":189,"address":[5510067,5510181],"length":1,"stats":{"Line":0}},{"line":191,"address":[4823522,4825311],"length":1,"stats":{"Line":0}},{"line":192,"address":[4823534,4823709,4823615],"length":1,"stats":{"Line":0}},{"line":193,"address":[4823738,4823810,4823858,4823988,4824330],"length":1,"stats":{"Line":0}},{"line":194,"address":[4823818],"length":1,"stats":{"Line":0}},{"line":195,"address":[4824028,4823953,4823895],"length":1,"stats":{"Line":0}},{"line":198,"address":[4823938],"length":1,"stats":{"Line":0}},{"line":201,"address":[4824170,4824089],"length":1,"stats":{"Line":0}},{"line":202,"address":[4824235,4824144,4824187],"length":1,"stats":{"Line":0}},{"line":203,"address":[4824209,4824268,4824252],"length":1,"stats":{"Line":0}},{"line":204,"address":[4824258],"length":1,"stats":{"Line":0}},{"line":206,"address":[4824284],"length":1,"stats":{"Line":0}},{"line":208,"address":[4824522],"length":1,"stats":{"Line":0}},{"line":209,"address":[4824599,4824732,4824657],"length":1,"stats":{"Line":0}},{"line":212,"address":[4824642],"length":1,"stats":{"Line":0}},{"line":215,"address":[4825007,4824877,4824932],"length":1,"stats":{"Line":0}},{"line":218,"address":[4824917],"length":1,"stats":{"Line":0}},{"line":220,"address":[4825031,4825106],"length":1,"stats":{"Line":0}},{"line":224,"address":[4825695],"length":1,"stats":{"Line":0}},{"line":225,"address":[4825788],"length":1,"stats":{"Line":0}},{"line":228,"address":[4826113,4823568,4825930],"length":1,"stats":{"Line":0}},{"line":231,"address":[5510320,5510563],"length":1,"stats":{"Line":0}},{"line":232,"address":[5510334,5510482],"length":1,"stats":{"Line":0}},{"line":233,"address":[5510456,5510342,5510400],"length":1,"stats":{"Line":0}},{"line":236,"address":[5510385],"length":1,"stats":{"Line":0}},{"line":240,"address":[4826548,4826121],"length":1,"stats":{"Line":0}},{"line":241,"address":[4826130],"length":1,"stats":{"Line":0}},{"line":242,"address":[4826170,4826222,4826295],"length":1,"stats":{"Line":0}},{"line":245,"address":[4826210],"length":1,"stats":{"Line":0}},{"line":248,"address":[4826338,4826404],"length":1,"stats":{"Line":0}},{"line":249,"address":[4826381,4826418,4826457],"length":1,"stats":{"Line":0}},{"line":250,"address":[4826434,4826487,4826471],"length":1,"stats":{"Line":0}},{"line":251,"address":[4826477],"length":1,"stats":{"Line":0}},{"line":253,"address":[4826503],"length":1,"stats":{"Line":0}},{"line":257,"address":[4826633],"length":1,"stats":{"Line":0}},{"line":258,"address":[4826714],"length":1,"stats":{"Line":0}},{"line":259,"address":[4826795],"length":1,"stats":{"Line":0}},{"line":264,"address":[4810269,4810061,4809965],"length":1,"stats":{"Line":0}},{"line":265,"address":[4813446,4810293],"length":1,"stats":{"Line":0}},{"line":266,"address":[4813572],"length":1,"stats":{"Line":0}},{"line":267,"address":[4813737],"length":1,"stats":{"Line":0}},{"line":271,"address":[4810231,4810334,4810534],"length":1,"stats":{"Line":0}},{"line":272,"address":[4810550,4812315],"length":1,"stats":{"Line":0}},{"line":273,"address":[4812505],"length":1,"stats":{"Line":0}},{"line":274,"address":[4812516],"length":1,"stats":{"Line":0}},{"line":275,"address":[4812527],"length":1,"stats":{"Line":0}},{"line":276,"address":[4812761,4812538],"length":1,"stats":{"Line":0}},{"line":277,"address":[4812777,4813031],"length":1,"stats":{"Line":0}},{"line":278,"address":[4813213],"length":1,"stats":{"Line":0}},{"line":279,"address":[4813249,4813325],"length":1,"stats":{"Line":0}},{"line":280,"address":[4813272,4813365],"length":1,"stats":{"Line":0}},{"line":281,"address":[4813295,4813405],"length":1,"stats":{"Line":0}},{"line":286,"address":[4812825,4812743,4812867],"length":1,"stats":{"Line":0}},{"line":287,"address":[4812849],"length":1,"stats":{"Line":0}},{"line":288,"address":[4812932,4812890,4812807],"length":1,"stats":{"Line":0}},{"line":289,"address":[4812914],"length":1,"stats":{"Line":0}},{"line":290,"address":[4813010,4812872,4812963],"length":1,"stats":{"Line":0}},{"line":291,"address":[4812992],"length":1,"stats":{"Line":0}},{"line":293,"address":[4812945],"length":1,"stats":{"Line":0}},{"line":299,"address":[4810796,4810504,4810596],"length":1,"stats":{"Line":0}},{"line":300,"address":[4810820],"length":1,"stats":{"Line":0}},{"line":301,"address":[4810831],"length":1,"stats":{"Line":0}},{"line":302,"address":[4810842],"length":1,"stats":{"Line":0}},{"line":303,"address":[4811675,4811855,4810853],"length":1,"stats":{"Line":0}},{"line":304,"address":[4811871],"length":1,"stats":{"Line":0}},{"line":305,"address":[4812193,4812117],"length":1,"stats":{"Line":0}},{"line":306,"address":[4812140,4812232],"length":1,"stats":{"Line":0}},{"line":307,"address":[4812163,4812269],"length":1,"stats":{"Line":0}},{"line":311,"address":[4811967,4811925,4811837],"length":1,"stats":{"Line":0}},{"line":312,"address":[4811949],"length":1,"stats":{"Line":0}},{"line":313,"address":[4811990,4812032,4811907],"length":1,"stats":{"Line":0}},{"line":314,"address":[4812014],"length":1,"stats":{"Line":0}},{"line":315,"address":[4811972,4812110,4812063],"length":1,"stats":{"Line":0}},{"line":316,"address":[4812092],"length":1,"stats":{"Line":0}},{"line":318,"address":[4812045],"length":1,"stats":{"Line":0}},{"line":323,"address":[5510602,5510592],"length":1,"stats":{"Line":0}},{"line":324,"address":[4810995],"length":1,"stats":{"Line":0}},{"line":326,"address":[4811047,4811268],"length":1,"stats":{"Line":0}},{"line":329,"address":[5510634,5510624],"length":1,"stats":{"Line":0}},{"line":332,"address":[4811283],"length":1,"stats":{"Line":0}},{"line":335,"address":[4811007,4811325],"length":1,"stats":{"Line":0}},{"line":336,"address":[4811457],"length":1,"stats":{"Line":0}},{"line":340,"address":[4826928,4827596],"length":1,"stats":{"Line":0}},{"line":341,"address":[4826948],"length":1,"stats":{"Line":0}},{"line":342,"address":[4826958],"length":1,"stats":{"Line":0}},{"line":345,"address":[4827256],"length":1,"stats":{"Line":0}},{"line":346,"address":[4826968,4827263,4827166],"length":1,"stats":{"Line":0}},{"line":347,"address":[4827561],"length":1,"stats":{"Line":0}},{"line":348,"address":[4827568,4827278,4827476],"length":1,"stats":{"Line":0}},{"line":350,"address":[4827583],"length":1,"stats":{"Line":0}},{"line":353,"address":[4827632,4827708],"length":1,"stats":{"Line":0}},{"line":354,"address":[4827656,4827739],"length":1,"stats":{"Line":0}},{"line":355,"address":[4827775],"length":1,"stats":{"Line":0}},{"line":358,"address":[4827808,4827914],"length":1,"stats":{"Line":0}},{"line":359,"address":[4827945,4827837],"length":1,"stats":{"Line":0}},{"line":360,"address":[4827981],"length":1,"stats":{"Line":0}},{"line":366,"address":[4828016,4828244],"length":1,"stats":{"Line":0}},{"line":367,"address":[4828048],"length":1,"stats":{"Line":0}},{"line":369,"address":[5510734,5510720],"length":1,"stats":{"Line":0}},{"line":370,"address":[4828144],"length":1,"stats":{"Line":0}},{"line":371,"address":[4828196],"length":1,"stats":{"Line":0}},{"line":372,"address":[4828213],"length":1,"stats":{"Line":0}},{"line":383,"address":[4828497,4828272],"length":1,"stats":{"Line":2}},{"line":384,"address":[4828292,4828409,4828537],"length":1,"stats":{"Line":3}},{"line":387,"address":[4828323],"length":1,"stats":{"Line":4}},{"line":388,"address":[5510792],"length":1,"stats":{"Line":1}},{"line":389,"address":[5510862,5510835,5510816],"length":1,"stats":{"Line":13}},{"line":393,"address":[5511353,5510832,5511328],"length":1,"stats":{"Line":5}},{"line":394,"address":[5510894,5510874],"length":1,"stats":{"Line":2}},{"line":398,"address":[5511417,5510891,5511392],"length":1,"stats":{"Line":6}},{"line":399,"address":[5510934,5510920],"length":1,"stats":{"Line":5}},{"line":402,"address":[5510931,5511456,5511466],"length":1,"stats":{"Line":3}},{"line":403,"address":[5510998,5511012],"length":1,"stats":{"Line":6}},{"line":406,"address":[5511009,5511488,5511498],"length":1,"stats":{"Line":7}},{"line":407,"address":[5510958,5510972],"length":1,"stats":{"Line":3}},{"line":410,"address":[5510969,5511520,5511538],"length":1,"stats":{"Line":3}},{"line":411,"address":[5511122,5511108],"length":1,"stats":{"Line":0}},{"line":414,"address":[5511586,5511568,5511119],"length":1,"stats":{"Line":0}},{"line":415,"address":[5511065,5511079],"length":1,"stats":{"Line":2}},{"line":418,"address":[5511076,5511616,5511626],"length":1,"stats":{"Line":4}},{"line":419,"address":[5511148,5511162],"length":1,"stats":{"Line":3}},{"line":422,"address":[5511648,5511159,5511666],"length":1,"stats":{"Line":4}},{"line":423,"address":[5511311,5511033],"length":1,"stats":{"Line":6}},{"line":424,"address":[5511190,5511248],"length":1,"stats":{"Line":4}},{"line":425,"address":[5511696,5511253],"length":1,"stats":{"Line":4}},{"line":426,"address":[5511792,5511728],"length":1,"stats":{"Line":4}},{"line":427,"address":[5511824,5511888],"length":1,"stats":{"Line":4}},{"line":428,"address":[5511920,5511984],"length":1,"stats":{"Line":4}},{"line":429,"address":[5512002],"length":1,"stats":{"Line":2}},{"line":444,"address":[4828592,4830733,4830574],"length":1,"stats":{"Line":6}},{"line":445,"address":[4828609],"length":1,"stats":{"Line":6}},{"line":446,"address":[4828730,4828778],"length":1,"stats":{"Line":12}},{"line":448,"address":[4828858],"length":1,"stats":{"Line":6}},{"line":450,"address":[4828926],"length":1,"stats":{"Line":6}},{"line":451,"address":[4828941],"length":1,"stats":{"Line":6}},{"line":453,"address":[4828993],"length":1,"stats":{"Line":6}},{"line":454,"address":[4829045],"length":1,"stats":{"Line":6}},{"line":462,"address":[4829263],"length":1,"stats":{"Line":6}},{"line":463,"address":[4829322],"length":1,"stats":{"Line":6}},{"line":464,"address":[4829433,4829371],"length":1,"stats":{"Line":12}},{"line":465,"address":[4829533,4829598],"length":1,"stats":{"Line":12}},{"line":468,"address":[4829701,4829764],"length":1,"stats":{"Line":12}},{"line":469,"address":[4829850,4829905],"length":1,"stats":{"Line":12}},{"line":474,"address":[4830459],"length":1,"stats":{"Line":6}},{"line":475,"address":[4830511],"length":1,"stats":{"Line":1}}],"covered":41,"coverable":193},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","data_structure","application_options.rs"],"content":"use serde::{Serialize, Deserialize};\n\n#[derive(Debug, PartialEq, Eq, Clone, Serialize, Deserialize)]\npub enum LanguageOption {\n    English,\n    Français,\n}\n\n#[derive(Debug, PartialEq, Eq, Clone, Serialize, Deserialize)]\npub enum ThemeOption {\n    Light,\n    Dark\n}\n\n#[derive(Clone, Serialize, Deserialize)]\npub struct ApplicationOptions {\n    pub selected_language: LanguageOption,\n    pub font_size: i32,\n    pub selected_theme: ThemeOption\n}\n\nimpl Default for ApplicationOptions {\n    fn default() -\u003e Self {\n        ApplicationOptions {\n            selected_language: LanguageOption::English,\n            font_size: 14,\n            selected_theme: ThemeOption::Dark\n        }\n    }\n}","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","data_structure","cluster.rs"],"content":"use crate::models::data_structure::host::Host;\n\nuse super::resource::ResourceState;\n\n#[derive(Clone, Debug, PartialEq)]\npub struct Cluster {\n    pub name: String,\n    pub hosts: Vec\u003cHost\u003e,\n    pub resource_ids: Vec\u003cu32\u003e,\n    pub state: ResourceState,\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","data_structure","cpu.rs"],"content":"use crate::models::data_structure::resource::Resource;\n\n#[derive(Clone, Debug, PartialEq)]\n\npub struct Cpu {\n    pub name: String,\n    pub resources: Vec\u003cResource\u003e,\n    pub chassis: String,\n    pub core_count: i32,\n    pub cpufreq: f32,\n    pub resource_ids: Vec\u003cu32\u003e,\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","data_structure","filters.rs"],"content":"use super::{cluster::Cluster, job::JobState};\n\n#[derive(Default, Debug, Clone)]\n\npub struct JobFilters {\n    pub owners: Option\u003cVec\u003cString\u003e\u003e,\n    pub states: Option\u003cVec\u003cJobState\u003e\u003e,\n    pub scheduled_start_time: Option\u003ci64\u003e,\n    pub wall_time: Option\u003ci64\u003e,\n    pub clusters: Option\u003cVec\u003cCluster\u003e\u003e,\n}\n\n#[allow(dead_code)]\nimpl JobFilters {\n    pub fn new() -\u003e Self {\n        Self::default()\n    }\n\n    pub fn copy(filter: \u0026JobFilters) -\u003e Self {\n        JobFilters {\n            owners: filter.owners.clone(),\n            states: filter.states.clone(),\n            scheduled_start_time: filter.scheduled_start_time,\n            wall_time: filter.wall_time,\n            clusters: filter.clusters.clone(),\n        }\n    }\n\n    pub fn set_owners(\u0026mut self, owners: Option\u003cVec\u003cString\u003e\u003e) {\n        self.owners = owners;\n    }\n\n    pub fn set_states(\u0026mut self, states: Option\u003cVec\u003cJobState\u003e\u003e) {\n        self.states = states;\n    }\n\n    pub fn set_scheduled_start_time(\u0026mut self, scheduled_start_time: i64) {\n        self.scheduled_start_time = Some(scheduled_start_time);\n    }\n\n    pub fn set_wall_time(\u0026mut self, wall_time: i64) {\n        self.wall_time = Some(wall_time);\n    }\n\n    pub fn set_clusters(\u0026mut self, selected_clusters: Option\u003cVec\u003cCluster\u003e\u003e) {\n        self.clusters = selected_clusters;\n    }\n\n    pub fn reset(\u0026mut self) {\n        *self = Self::default();\n    }\n}\n","traces":[{"line":15,"address":[5620640],"length":1,"stats":{"Line":0}},{"line":16,"address":[5620648],"length":1,"stats":{"Line":0}},{"line":19,"address":[5621000,5620672],"length":1,"stats":{"Line":0}},{"line":21,"address":[5620702],"length":1,"stats":{"Line":0}},{"line":22,"address":[5620721],"length":1,"stats":{"Line":0}},{"line":23,"address":[5620783],"length":1,"stats":{"Line":0}},{"line":24,"address":[5620799],"length":1,"stats":{"Line":0}},{"line":25,"address":[5620817],"length":1,"stats":{"Line":0}},{"line":29,"address":[5621081,5621024],"length":1,"stats":{"Line":2}},{"line":30,"address":[5621042,5621116],"length":1,"stats":{"Line":4}},{"line":33,"address":[5621152,5621205],"length":1,"stats":{"Line":1}},{"line":34,"address":[5621170,5621240],"length":1,"stats":{"Line":2}},{"line":37,"address":[5621280],"length":1,"stats":{"Line":0}},{"line":38,"address":[5621290],"length":1,"stats":{"Line":0}},{"line":41,"address":[5621328],"length":1,"stats":{"Line":0}},{"line":42,"address":[5621338],"length":1,"stats":{"Line":0}},{"line":45,"address":[5621376,5621429],"length":1,"stats":{"Line":0}},{"line":46,"address":[5621394,5621464],"length":1,"stats":{"Line":0}},{"line":49,"address":[5621504,5621607],"length":1,"stats":{"Line":0}},{"line":50,"address":[5621640,5621525],"length":1,"stats":{"Line":0}}],"covered":4,"coverable":20},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","data_structure","host.rs"],"content":"use crate::models::data_structure::cpu::Cpu;\nuse crate::models::data_structure::resource::ResourceState;\n\n#[derive(Clone, Debug, PartialEq)]\n\npub struct Host {\n    pub name: String,\n    pub cpus: Vec\u003cCpu\u003e,\n    pub network_address: String,\n    pub resource_ids: Vec\u003cu32\u003e,\n    pub state: ResourceState,\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","data_structure","job.rs"],"content":"use crate::models::data_structure::resource::ResourceState;\nuse serde::{Deserialize, Serialize};\nuse std::fmt;\nuse strum_macros::EnumIter;\nuse super::cluster;\n\n#[derive(Clone, Deserialize, Serialize, PartialEq, EnumIter, Debug, Eq, PartialOrd, Ord, Hash)]\npub enum JobState {\n    Unknown,\n    Waiting,\n    Hold,\n    ToLaunch,\n    ToError,\n    ToAckReservation,\n    Launching,\n    Running,\n    Suspended,\n    Resuming,\n    Finishing,\n    Terminated,\n    Error,\n}\n\nimpl fmt::Display for JobState {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter\u003c'_\u003e) -\u003e fmt::Result {\n        match self {\n            JobState::Unknown =\u003e write!(f, \"Unknown\"),\n            JobState::Waiting =\u003e write!(f, \"Waiting\"),\n            JobState::Hold =\u003e write!(f, \"Hold\"),\n            JobState::ToLaunch =\u003e write!(f, \"ToLaunch\"),\n            JobState::ToError =\u003e write!(f, \"ToError\"),\n            JobState::ToAckReservation =\u003e write!(f, \"ToAckReservation\"),\n            JobState::Launching =\u003e write!(f, \"Launching\"),\n            JobState::Running =\u003e write!(f, \"Running\"),\n            JobState::Suspended =\u003e write!(f, \"Suspended\"),\n            JobState::Resuming =\u003e write!(f, \"Resuming\"),\n            JobState::Finishing =\u003e write!(f, \"Finishing\"),\n            JobState::Terminated =\u003e write!(f, \"Terminated\"),\n            JobState::Error =\u003e write!(f, \"Error\"),\n        }\n    }\n}\n\nimpl JobState {\n    pub fn get_label(\u0026self) -\u003e String {\n        match self {\n            JobState::Unknown =\u003e t!(\"app.job_state.unknown\").to_string(),\n            JobState::Waiting =\u003e t!(\"app.job_state.waiting\").to_string(),\n            JobState::Hold =\u003e t!(\"app.job_state.hold\").to_string(),\n            JobState::ToLaunch =\u003e t!(\"app.job_state.to_launch\").to_string(),\n            JobState::ToError =\u003e t!(\"app.job_state.to_error\").to_string(),\n            JobState::ToAckReservation =\u003e t!(\"app.job_state.to_ack_reservation\").to_string(),\n            JobState::Launching =\u003e t!(\"app.job_state.launching\").to_string(),\n            JobState::Running =\u003e t!(\"app.job_state.running\").to_string(),\n            JobState::Suspended =\u003e t!(\"app.job_state.suspended\").to_string(),\n            JobState::Resuming =\u003e t!(\"app.job_state.resuming\").to_string(),\n            JobState::Finishing =\u003e t!(\"app.job_state.finishing\").to_string(),\n            JobState::Terminated =\u003e t!(\"app.job_state.terminated\").to_string(),\n            JobState::Error =\u003e t!(\"app.job_state.error\").to_string(),\n        }\n    }\n\n    pub fn get_color(\u0026self) -\u003e (egui::Color32, egui::Color32) {\n        match self {\n            JobState::Unknown =\u003e (\n                egui::Color32::from_rgb(200, 200, 200), // Neutral Gray\n                egui::Color32::from_rgb(120, 120, 120), // Darker Gray\n            ),\n            JobState::Waiting =\u003e (\n                egui::Color32::from_rgb(135, 206, 250), // SkyBlue\n                egui::Color32::from_rgb(30, 144, 255),  // DodgerBlue\n            ),\n            JobState::Hold =\u003e (\n                egui::Color32::from_rgb(255, 236, 179), // Light Amber\n                egui::Color32::from_rgb(255, 193, 7),   // Amber\n            ),\n            JobState::ToLaunch =\u003e (\n                egui::Color32::from_rgb(178, 235, 242), // LightCyanBlue\n                egui::Color32::from_rgb(38, 198, 218),  // CyanBlue\n            ),\n            JobState::ToError =\u003e (\n                egui::Color32::from_rgb(255, 204, 203), // LightPink\n                egui::Color32::from_rgb(244, 67, 54),   // Red\n            ),\n            JobState::ToAckReservation =\u003e (\n                egui::Color32::from_rgb(224, 191, 255), // Soft Purple\n                egui::Color32::from_rgb(156, 39, 176),  // Purple\n            ),\n            JobState::Launching =\u003e (\n                egui::Color32::from_rgb(197, 255, 198), // MintGreen\n                egui::Color32::from_rgb(56, 142, 60),   // DarkGreen\n            ),\n            JobState::Running =\u003e (\n                egui::Color32::from_rgb(165, 214, 167), // Soft Green\n                egui::Color32::from_rgb(67, 160, 71),   // Medium Green\n            ),\n            JobState::Suspended =\u003e (\n                egui::Color32::from_rgb(255, 221, 147), // Soft Orange\n                egui::Color32::from_rgb(255, 87, 34),   // Deep Orange\n            ),\n            JobState::Resuming =\u003e (\n                egui::Color32::from_rgb(129, 199, 132), // Soft Teal Green\n                egui::Color32::from_rgb(0, 150, 136),   // Teal Green\n            ),\n            JobState::Finishing =\u003e (\n                egui::Color32::from_rgb(144, 202, 249), // Soft Blue\n                egui::Color32::from_rgb(33, 150, 243),  // Bright Blue\n            ),\n            JobState::Terminated =\u003e (\n                egui::Color32::from_rgb(200, 230, 255), // Soft End Blue\n                egui::Color32::from_rgb(13, 71, 161),   // Deep Blue\n            ),\n            JobState::Error =\u003e (\n                egui::Color32::from_rgb(255, 138, 128), // Soft Red\n                egui::Color32::from_rgb(183, 28, 28),   // Dark Red\n            ),\n        }\n    }\n}\n\nuse crate::views::components::dashboard_components::job_table_sorting::JobSortable;\n\n#[derive(Clone, Debug)]\n\npub struct Job {\n    pub id: u32,\n    pub owner: String,\n    pub state: JobState,\n    pub command: String,\n    pub walltime: i64,\n    pub message: Option\u003cString\u003e,\n    pub queue: String,\n    pub assigned_resources: Vec\u003cu32\u003e,\n    pub scheduled_start: i64,\n    pub submission_time: i64,\n    pub start_time: i64,\n    pub stop_time: i64,\n    pub exit_code: Option\u003ci32\u003e,\n    pub gantt_color: egui::Color32,\n    pub clusters: Vec\u003cString\u003e,\n    pub hosts: Vec\u003cString\u003e,\n    pub main_resource_state: ResourceState,\n}\n\nimpl JobSortable for Job {\n    fn get_id(\u0026self) -\u003e \u0026u32 {\n        \u0026self.id\n    }\n\n    fn get_owner(\u0026self) -\u003e \u0026str {\n        \u0026self.owner\n    }\n\n    fn get_state(\u0026self) -\u003e \u0026JobState {\n        \u0026self.state\n    }\n\n    fn get_start_time(\u0026self) -\u003e u64 {\n        self.start_time as u64\n    }\n\n    fn get_walltime(\u0026self) -\u003e u64 {\n        self.walltime as u64\n    }\n\n    fn get_queue(\u0026self) -\u003e \u0026str {\n        \u0026self.queue\n    }\n\n    fn get_command(\u0026self) -\u003e \u0026str {\n        \u0026self.command\n    }\n\n    fn get_message(\u0026self) -\u003e Option\u003c\u0026str\u003e {\n        self.message.as_deref()\n    }\n\n    fn get_submission_time(\u0026self) -\u003e u64 {\n        self.submission_time as u64\n    }\n\n    fn get_scheduled_start(\u0026self) -\u003e u64 {\n        self.scheduled_start as u64\n    }\n\n    fn get_stop_time(\u0026self) -\u003e u64 {\n        self.stop_time as u64\n    }\n\n    fn get_exit_code(\u0026self) -\u003e \u0026Option\u003ci32\u003e {\n        \u0026self.exit_code\n    }\n\n    fn get_clusters(\u0026self) -\u003e \u0026Vec\u003cString\u003e {\n        \u0026self.clusters\n    }\n\n    fn get_end_date(\u0026self) -\u003e i64 {\n        if self.stop_time \u003e 0 {\n            self.stop_time\n        } else {\n            self.start_time + self.walltime\n        }\n    }\n}\n\nimpl Job {\n    pub fn _display(\u0026self) {\n        println!(\"Job ID: {}\", self.id);\n        println!(\"Owner: {}\", self.owner);\n        println!(\"State: {}\", self.state);\n        println!(\"Command: {}\", self.command);\n        println!(\"Walltime: {}\", self.walltime);\n        println!(\"Message: {:?}\", self.message);\n        println!(\"Queue: {}\", self.queue);\n        println!(\"Assigned Resources: {:?}\", self.assigned_resources);\n        println!(\"Scheduled Start: {:?}\", self.scheduled_start);\n        println!(\"Submission Time: {}\", self.submission_time);\n        println!(\"Start Time: {}\", self.start_time);\n        println!(\"Stop Time: {}\", self.stop_time);\n        println!(\"Exit Code: {:?}\", self.exit_code);\n        println!(\"Gant Color: {:?}\", self.gantt_color);\n        println!(\"Cluster: {:?}\", self.clusters);\n        println!(\"Host: {:?}\", self.hosts);\n    }\n\n    // Based on gantt color return a tuple of two colors (the second one is darker)\n    pub fn get_gantt_color(\u0026self) -\u003e (egui::Color32, egui::Color32) {\n        let r = self.gantt_color.r() as f32;\n        let g = self.gantt_color.g() as f32;\n        let b = self.gantt_color.b() as f32;\n\n        let darker = |c: f32| -\u003e u8 {\n            let value = (c * 0.8) as u8;\n            if value \u003e 0 {\n                value\n            } else {\n                1\n            }\n        };\n\n        (\n            egui::Color32::from_rgb(r as u8, g as u8, b as u8),\n            egui::Color32::from_rgb(darker(r), darker(g), darker(b)),\n        )\n    }\n\n    pub fn update_majority_resource_state(\u0026mut self, clusters: \u0026Vec\u003ccluster::Cluster\u003e) {\n        let mut dead_count = 0;\n        let mut alive_count = 0;\n        let mut absent_count = 0;\n\n        for cluster in clusters {\n            for host in \u0026cluster.hosts {\n                for cpu in \u0026host.cpus {\n                    for resource in \u0026cpu.resources {\n                        if self.assigned_resources.contains(\u0026resource.id) {\n                            match resource.state {\n                                ResourceState::Dead =\u003e dead_count += 1,\n                                ResourceState::Alive =\u003e alive_count += 1,\n                                ResourceState::Absent =\u003e absent_count += 1,\n                                _ =\u003e (),\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        self.main_resource_state = if dead_count \u003e= alive_count \u0026\u0026 dead_count \u003e= absent_count {\n            ResourceState::Dead\n        } else if absent_count \u003e= dead_count \u0026\u0026 absent_count \u003e= alive_count {\n            ResourceState::Absent\n        } else if alive_count \u003e dead_count \u0026\u0026 alive_count \u003e absent_count {\n            ResourceState::Alive\n        } else {\n            ResourceState::Unknown\n        };\n    }\n}","traces":[{"line":25,"address":[5490816],"length":1,"stats":{"Line":0}},{"line":26,"address":[5490843],"length":1,"stats":{"Line":0}},{"line":27,"address":[5490874],"length":1,"stats":{"Line":0}},{"line":28,"address":[5490917],"length":1,"stats":{"Line":0}},{"line":29,"address":[5490960],"length":1,"stats":{"Line":0}},{"line":30,"address":[5491003],"length":1,"stats":{"Line":0}},{"line":31,"address":[5491052],"length":1,"stats":{"Line":0}},{"line":32,"address":[5491101],"length":1,"stats":{"Line":0}},{"line":33,"address":[5491150],"length":1,"stats":{"Line":0}},{"line":34,"address":[5491199],"length":1,"stats":{"Line":0}},{"line":35,"address":[5491248],"length":1,"stats":{"Line":0}},{"line":36,"address":[5491297],"length":1,"stats":{"Line":0}},{"line":37,"address":[5491346],"length":1,"stats":{"Line":0}},{"line":38,"address":[5491392],"length":1,"stats":{"Line":0}},{"line":39,"address":[5491438],"length":1,"stats":{"Line":0}},{"line":45,"address":[5493568,5491504,5493523],"length":1,"stats":{"Line":0}},{"line":46,"address":[5491535],"length":1,"stats":{"Line":0}},{"line":47,"address":[5493005,5491676,5493532],"length":1,"stats":{"Line":0}},{"line":48,"address":[5491782,5493581],"length":1,"stats":{"Line":0}},{"line":49,"address":[5491888,5494119],"length":1,"stats":{"Line":0}},{"line":50,"address":[5491994,5494660],"length":1,"stats":{"Line":0}},{"line":51,"address":[5495201,5492100],"length":1,"stats":{"Line":0}},{"line":52,"address":[5495742,5492206],"length":1,"stats":{"Line":0}},{"line":53,"address":[5492306,5496277],"length":1,"stats":{"Line":0}},{"line":54,"address":[5492406,5496812],"length":1,"stats":{"Line":0}},{"line":55,"address":[5497347,5492506],"length":1,"stats":{"Line":0}},{"line":56,"address":[5492606,5497882],"length":1,"stats":{"Line":0}},{"line":57,"address":[5498417,5492706],"length":1,"stats":{"Line":0}},{"line":58,"address":[5498952,5492806],"length":1,"stats":{"Line":0}},{"line":59,"address":[5499487,5492906],"length":1,"stats":{"Line":0}},{"line":63,"address":[5500032],"length":1,"stats":{"Line":0}},{"line":64,"address":[5500044],"length":1,"stats":{"Line":0}},{"line":65,"address":[5500137],"length":1,"stats":{"Line":0}},{"line":66,"address":[5500073],"length":1,"stats":{"Line":0}},{"line":67,"address":[5500105],"length":1,"stats":{"Line":0}},{"line":69,"address":[5500234],"length":1,"stats":{"Line":0}},{"line":70,"address":[5500158],"length":1,"stats":{"Line":0}},{"line":71,"address":[5500196],"length":1,"stats":{"Line":0}},{"line":73,"address":[5500331],"length":1,"stats":{"Line":0}},{"line":74,"address":[5500255],"length":1,"stats":{"Line":0}},{"line":75,"address":[5500293],"length":1,"stats":{"Line":0}},{"line":77,"address":[5500428],"length":1,"stats":{"Line":0}},{"line":78,"address":[5500352],"length":1,"stats":{"Line":0}},{"line":79,"address":[5500390],"length":1,"stats":{"Line":0}},{"line":81,"address":[5500525],"length":1,"stats":{"Line":0}},{"line":82,"address":[5500449],"length":1,"stats":{"Line":0}},{"line":83,"address":[5500487],"length":1,"stats":{"Line":0}},{"line":85,"address":[5500622],"length":1,"stats":{"Line":0}},{"line":86,"address":[5500546],"length":1,"stats":{"Line":0}},{"line":87,"address":[5500584],"length":1,"stats":{"Line":0}},{"line":89,"address":[5500719],"length":1,"stats":{"Line":0}},{"line":90,"address":[5500643],"length":1,"stats":{"Line":0}},{"line":91,"address":[5500681],"length":1,"stats":{"Line":0}},{"line":93,"address":[5500816],"length":1,"stats":{"Line":0}},{"line":94,"address":[5500740],"length":1,"stats":{"Line":0}},{"line":95,"address":[5500778],"length":1,"stats":{"Line":0}},{"line":97,"address":[5500913],"length":1,"stats":{"Line":0}},{"line":98,"address":[5500837],"length":1,"stats":{"Line":0}},{"line":99,"address":[5500875],"length":1,"stats":{"Line":0}},{"line":101,"address":[5501007],"length":1,"stats":{"Line":0}},{"line":102,"address":[5500934],"length":1,"stats":{"Line":0}},{"line":103,"address":[5500972],"length":1,"stats":{"Line":0}},{"line":105,"address":[5501104],"length":1,"stats":{"Line":0}},{"line":106,"address":[5501028],"length":1,"stats":{"Line":0}},{"line":107,"address":[5501066],"length":1,"stats":{"Line":0}},{"line":109,"address":[5501201],"length":1,"stats":{"Line":0}},{"line":110,"address":[5501125],"length":1,"stats":{"Line":0}},{"line":111,"address":[5501163],"length":1,"stats":{"Line":0}},{"line":113,"address":[5501292],"length":1,"stats":{"Line":0}},{"line":114,"address":[5501219],"length":1,"stats":{"Line":0}},{"line":115,"address":[5501257],"length":1,"stats":{"Line":0}},{"line":146,"address":[5501328],"length":1,"stats":{"Line":0}},{"line":147,"address":[5501336],"length":1,"stats":{"Line":0}},{"line":150,"address":[5501344],"length":1,"stats":{"Line":0}},{"line":151,"address":[5501349],"length":1,"stats":{"Line":0}},{"line":154,"address":[5501360],"length":1,"stats":{"Line":0}},{"line":155,"address":[5501368],"length":1,"stats":{"Line":0}},{"line":158,"address":[5501376],"length":1,"stats":{"Line":0}},{"line":159,"address":[5501381],"length":1,"stats":{"Line":0}},{"line":162,"address":[5501392],"length":1,"stats":{"Line":0}},{"line":163,"address":[5501397],"length":1,"stats":{"Line":0}},{"line":166,"address":[5501408],"length":1,"stats":{"Line":0}},{"line":167,"address":[5501413],"length":1,"stats":{"Line":0}},{"line":170,"address":[5501424],"length":1,"stats":{"Line":0}},{"line":171,"address":[5501429],"length":1,"stats":{"Line":0}},{"line":174,"address":[5501440],"length":1,"stats":{"Line":0}},{"line":175,"address":[5501445],"length":1,"stats":{"Line":0}},{"line":178,"address":[5501472],"length":1,"stats":{"Line":0}},{"line":179,"address":[5501477],"length":1,"stats":{"Line":0}},{"line":182,"address":[5501488],"length":1,"stats":{"Line":0}},{"line":183,"address":[5501493],"length":1,"stats":{"Line":0}},{"line":186,"address":[5501504],"length":1,"stats":{"Line":0}},{"line":187,"address":[5501509],"length":1,"stats":{"Line":0}},{"line":190,"address":[5501520],"length":1,"stats":{"Line":0}},{"line":191,"address":[5501528],"length":1,"stats":{"Line":0}},{"line":194,"address":[5501536],"length":1,"stats":{"Line":0}},{"line":195,"address":[5501544],"length":1,"stats":{"Line":0}},{"line":198,"address":[5501552],"length":1,"stats":{"Line":1}},{"line":199,"address":[5501636,5501566,5501624],"length":1,"stats":{"Line":2}},{"line":200,"address":[5501612],"length":1,"stats":{"Line":0}},{"line":202,"address":[5501631,5501581,5501638],"length":1,"stats":{"Line":2}},{"line":208,"address":[5501664],"length":1,"stats":{"Line":0}},{"line":209,"address":[5501771,5501684],"length":1,"stats":{"Line":0}},{"line":210,"address":[5501916],"length":1,"stats":{"Line":0}},{"line":211,"address":[5502083,5501990],"length":1,"stats":{"Line":0}},{"line":212,"address":[5502163,5502253],"length":1,"stats":{"Line":0}},{"line":213,"address":[5502426,5502333],"length":1,"stats":{"Line":0}},{"line":214,"address":[5502599,5502506],"length":1,"stats":{"Line":0}},{"line":215,"address":[5502769,5502679],"length":1,"stats":{"Line":0}},{"line":216,"address":[5502849,5502939],"length":1,"stats":{"Line":0}},{"line":217,"address":[5503112,5503019],"length":1,"stats":{"Line":0}},{"line":218,"address":[5503285,5503192],"length":1,"stats":{"Line":0}},{"line":219,"address":[5503365,5503458],"length":1,"stats":{"Line":0}},{"line":220,"address":[5503631,5503538],"length":1,"stats":{"Line":0}},{"line":221,"address":[5503804,5503711],"length":1,"stats":{"Line":0}},{"line":222,"address":[5503977,5503884],"length":1,"stats":{"Line":0}},{"line":223,"address":[5504057,5504147],"length":1,"stats":{"Line":0}},{"line":224,"address":[5504227,5504317],"length":1,"stats":{"Line":0}},{"line":228,"address":[5504400],"length":1,"stats":{"Line":0}},{"line":229,"address":[5504409],"length":1,"stats":{"Line":0}},{"line":230,"address":[5504448],"length":1,"stats":{"Line":0}},{"line":231,"address":[5504476],"length":1,"stats":{"Line":0}},{"line":233,"address":[5276240],"length":1,"stats":{"Line":0}},{"line":234,"address":[5276251],"length":1,"stats":{"Line":0}},{"line":235,"address":[5276303,5276294],"length":1,"stats":{"Line":0}},{"line":236,"address":[5276309],"length":1,"stats":{"Line":0}},{"line":238,"address":[5276298],"length":1,"stats":{"Line":0}},{"line":243,"address":[5504515],"length":1,"stats":{"Line":0}},{"line":244,"address":[5504617],"length":1,"stats":{"Line":0}},{"line":248,"address":[5504736],"length":1,"stats":{"Line":0}},{"line":249,"address":[5504777],"length":1,"stats":{"Line":0}},{"line":250,"address":[5504785],"length":1,"stats":{"Line":0}},{"line":251,"address":[5504793],"length":1,"stats":{"Line":0}},{"line":253,"address":[5504869,5504801],"length":1,"stats":{"Line":0}},{"line":254,"address":[5504882,5505021],"length":1,"stats":{"Line":0}},{"line":255,"address":[5505079],"length":1,"stats":{"Line":0}},{"line":256,"address":[5505161],"length":1,"stats":{"Line":0}},{"line":257,"address":[5505266],"length":1,"stats":{"Line":0}},{"line":258,"address":[5505304],"length":1,"stats":{"Line":0}},{"line":259,"address":[5505336,5505391],"length":1,"stats":{"Line":0}},{"line":260,"address":[5505353,5505420],"length":1,"stats":{"Line":0}},{"line":261,"address":[5505370,5505449],"length":1,"stats":{"Line":0}},{"line":270,"address":[5504933,5504857,5505000,5504915],"length":1,"stats":{"Line":0}},{"line":271,"address":[5504925],"length":1,"stats":{"Line":0}},{"line":272,"address":[5504903,5504965,5504947],"length":1,"stats":{"Line":0}},{"line":273,"address":[5504957],"length":1,"stats":{"Line":0}},{"line":274,"address":[5504935,5504975],"length":1,"stats":{"Line":0}},{"line":275,"address":[5504987],"length":1,"stats":{"Line":0}},{"line":277,"address":[5504967],"length":1,"stats":{"Line":0}}],"covered":3,"coverable":149},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","data_structure","mod.rs"],"content":"// Module : data_structure\n\npub mod application_context;\npub mod job;\npub mod filters;\npub mod application_options;\npub mod resource;\npub mod cluster;\npub mod host;\npub mod cpu;\npub mod strata;","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","data_structure","resource.rs"],"content":"use std::fmt::Display;\n#[derive(Debug, PartialEq, Copy)]\n\npub enum ResourceState {\n    Dead,\n    Alive,\n    Absent,\n    Unknown,\n}\n\nimpl Clone for ResourceState {\n    fn clone(\u0026self) -\u003e Self {\n        match self {\n            ResourceState::Dead =\u003e ResourceState::Dead,\n            ResourceState::Alive =\u003e ResourceState::Alive,\n            ResourceState::Absent =\u003e ResourceState::Absent,\n            ResourceState::Unknown =\u003e ResourceState::Unknown,\n        }\n    }\n}\n\n#[derive(Clone, Debug, PartialEq)]\npub struct Resource {\n    pub id: u32,\n    pub state: ResourceState,\n    pub thread_count: i32,\n}\n\nimpl Display for ResourceState {\n    fn fmt(\u0026self, f: \u0026mut std::fmt::Formatter\u003c'_\u003e) -\u003e std::fmt::Result {\n        match self {\n            ResourceState::Dead =\u003e write!(f, \"Dead\"),\n            ResourceState::Alive =\u003e write!(f, \"Alive\"),\n            ResourceState::Absent =\u003e write!(f, \"Absent\"),\n            ResourceState::Unknown =\u003e write!(f, \"Unknown\"),\n        }\n    }\n}\n","traces":[{"line":12,"address":[5027600],"length":1,"stats":{"Line":1}},{"line":13,"address":[5027605],"length":1,"stats":{"Line":1}},{"line":14,"address":[5027636],"length":1,"stats":{"Line":1}},{"line":15,"address":[5027643],"length":1,"stats":{"Line":1}},{"line":16,"address":[5027650],"length":1,"stats":{"Line":1}},{"line":17,"address":[5027657],"length":1,"stats":{"Line":1}},{"line":30,"address":[5027680],"length":1,"stats":{"Line":1}},{"line":31,"address":[5027707],"length":1,"stats":{"Line":1}},{"line":32,"address":[5027738],"length":1,"stats":{"Line":1}},{"line":33,"address":[5027778],"length":1,"stats":{"Line":1}},{"line":34,"address":[5027818],"length":1,"stats":{"Line":1}},{"line":35,"address":[5027858],"length":1,"stats":{"Line":1}}],"covered":12,"coverable":12},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","data_structure","strata.rs"],"content":"use serde::{Deserialize, Serialize};\n\n#[derive(Debug, Serialize, Deserialize, Clone)]\npub struct Strata {\n    #[serde(default)]\n    pub state_num: Option\u003ci32\u003e,\n    #[serde(default)]\n    pub thread_count: Option\u003ci32\u003e,\n    #[serde(default)]\n    pub rconsole: Option\u003cString\u003e,\n    #[serde(default)]\n    pub memnode: Option\u003ci64\u003e,\n    #[serde(default)]\n    pub cluster: Option\u003cString\u003e,\n    #[serde(default)]\n    pub desktop_computing: Option\u003cString\u003e,\n    #[serde(default)]\n    pub memcore: Option\u003ci32\u003e,\n    #[serde(default)]\n    pub production: Option\u003cString\u003e,\n    #[serde(default)]\n    pub eth_rate: Option\u003ci32\u003e,\n    #[serde(default)]\n    pub chassis: Option\u003cString\u003e,\n    #[serde(default)]\n    pub memcpu: Option\u003ci64\u003e,\n    #[serde(default)]\n    pub cluster_priority: Option\u003ci32\u003e,\n    #[serde(default)]\n    pub gpu_model: Option\u003cString\u003e,\n    #[serde(default)]\n    pub gpu_compute_capability: Option\u003cString\u003e,\n    #[serde(default)]\n    pub core_count: Option\u003ci32\u003e,\n    #[serde(default)]\n    pub next_state: Option\u003cString\u003e,\n    #[serde(default)]\n    pub cpufreq: Option\u003cString\u003e,\n    #[serde(default)]\n    pub comment: Option\u003cString\u003e,\n    #[serde(default)]\n    pub core: Option\u003ci32\u003e,\n    #[serde(default)]\n    pub cpuset: Option\u003cString\u003e,\n    #[serde(default)]\n    pub suspended_jobs: Option\u003cString\u003e,\n    #[serde(default)]\n    pub state: Option\u003cString\u003e,\n    #[serde(default)]\n    pub ip: Option\u003cString\u003e,\n    #[serde(default)]\n    pub network_address: Option\u003cString\u003e,\n    #[serde(default)]\n    pub resource_id: Option\u003cu32\u003e,\n    #[serde(default)]\n    pub host: Option\u003cString\u003e,\n    #[serde(default)]\n    pub nodemodel: Option\u003cString\u003e,\n    #[serde(default)]\n    pub cputype: Option\u003cString\u003e,\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","mod.rs"],"content":"// src/models/mod.rs\n\npub mod data_structure;\npub mod utils;\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","utils","date_converter.rs"],"content":"use chrono::{DateTime, Local};\n\npub fn format_timestamp(ts: i64) -\u003e String {\n    if ts == 0 {\n        \"N/A\".to_string()\n    } else {\n        if let Some(dt) = DateTime::from_timestamp(ts, 0) {\n            dt.with_timezone(\u0026Local)\n            .format(\"%Y-%m-%d %H:%M:%S %Z\")\n            .to_string()\n        } else {\n            \"Invalid timestamp\".to_string()\n        }\n    }\n}","traces":[{"line":3,"address":[5241680,5241969],"length":1,"stats":{"Line":0}},{"line":4,"address":[5241710],"length":1,"stats":{"Line":0}},{"line":5,"address":[5241721],"length":1,"stats":{"Line":0}},{"line":7,"address":[5241745,5241794],"length":1,"stats":{"Line":0}},{"line":8,"address":[5241812],"length":1,"stats":{"Line":0}},{"line":12,"address":[5241898],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":6},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","utils","mocker.rs"],"content":"use chrono::Local;\n\nuse crate::models::data_structure::{\n    job::{Job, JobState},\n    resource::ResourceState,\n    strata::Strata,\n};\n\n// Mocking Job\nfn mock_job(id: u32) -\u003e Job {\n    // Possible owner list\n    let owners = vec![\"alice\", \"bob\", \"charlie\", \"david\", \"eva\"];\n\n    // List of possible commands and their queues associated\n    let commands = vec![\n        (\"python3 train_model.py\", \"gpu\"),\n        (\"make test\", \"test\"),\n        (\"mpirun -np 4 simulation\", \"cpu\"),\n        (\"jupyter notebook\", \"interactive\"),\n        (\"gcc -O3 project.c\", \"compile\"),\n    ];\n\n    // Possible clusters list\n    let clusters_list = vec![\"cluster1\", \"cluster2\", \"cluster3\"];\n\n    // Possible hosts list\n    let hosts_list = vec![\"host1\", \"host2\", \"host3\", \"host4\"];\n\n    // Function to generate a random number\n    let random_index = |max: usize| -\u003e usize {\n        let mut buf = [0u8; 8];\n        getrandom::getrandom(\u0026mut buf).unwrap();\n        let value = u64::from_le_bytes(buf);\n        (value % max as u64) as usize\n    };\n\n    let random_float = || -\u003e f32 {\n        let mut buf = [0u8; 8];\n        getrandom::getrandom(\u0026mut buf).unwrap();\n        let value = u64::from_le_bytes(buf);\n        (value as f32) / (u64::MAX as f32)\n    };\n\n    // Coherent timestamp generation\n    let now = Local::now().timestamp();\n    let submission_time = now - (random_index(86400) as i64);\n    let scheduled_start = submission_time + (random_index(3300) as i64 + 300);\n    let start_time = if random_float() \u003c 0.7 {\n        scheduled_start\n    } else {\n        0\n    };\n    let walltime = random_index(5400) as i64 + 1800;\n    let stop_time = if start_time \u003e 0 \u0026\u0026 random_float() \u003c 0.3 {\n        start_time + walltime\n    } else {\n        0\n    };\n\n    // Randomly select the state based on the context\n    let state = if stop_time \u003e 0 {\n        JobState::Terminated\n    } else if start_time \u003e 0 {\n        let states = vec![JobState::Running, JobState::Suspended, JobState::Finishing];\n        states[random_index(states.len())].clone()\n    } else if scheduled_start \u003e now {\n        let states = vec![JobState::Waiting, JobState::Hold];\n        states[random_index(states.len())].clone()\n    } else {\n        let states = vec![JobState::ToLaunch, JobState::Launching, JobState::Waiting];\n        states[random_index(states.len())].clone()\n    };\n\n    // Command and queue selection\n    let (command, queue) = commands[random_index(commands.len())];\n\n    // Assigned ressources generation\n    let num_resources = random_index(7) + 1;\n    let assigned_resources = if start_time \u003e 0 {\n        let mut resources = Vec::new();\n        while resources.len() \u003c num_resources {\n            let resource = (random_index(20) + 1) as u32;\n            if !resources.contains(\u0026resource) {\n                resources.push(resource);\n            }\n        }\n        resources\n    } else {\n        vec![]\n    };\n\n    // Generate message based on the state\n    let message = match state {\n        JobState::Error =\u003e Some(\"Erreur d'exécution\".to_string()),\n        JobState::Hold =\u003e Some(\"En attente de ressources\".to_string()),\n        JobState::Suspended =\u003e Some(\"Suspendu par l'administrateur\".to_string()),\n        _ =\u003e None,\n    };\n\n    // Generate random clusters\n    let num_clusters = random_index(2) + 1;\n    let clusters = clusters_list\n        .iter()\n        .take(num_clusters)\n        .map(|\u0026c| c.to_string())\n        .collect();\n\n    // Generate random hosts\n    let num_hosts = random_index(3) + 1;\n    let hosts = hosts_list\n        .iter()\n        .take(num_hosts)\n        .map(|\u0026h| h.to_string())\n        .collect();\n\n    // Generate gantt color\n    let gantt_color = egui::Color32::from_rgb(\n        random_index(255) as u8,\n        random_index(255) as u8,\n        random_index(255) as u8,\n    );\n\n    // Generate main resource state\n    let main_resource_state = match random_index(3) {\n        0 =\u003e ResourceState::Alive,\n        1 =\u003e ResourceState::Dead,\n        _ =\u003e ResourceState::Absent,\n    };\n\n    Job {\n        id,\n        owner: owners[random_index(owners.len())].to_string(),\n        state,\n        command: command.to_string(),\n        walltime,\n        message,\n        queue: queue.to_string(),\n        assigned_resources,\n        scheduled_start,\n        submission_time,\n        start_time,\n        stop_time,\n        exit_code: if stop_time \u003e 0 {\n            Some((random_index(3) as i32) - 1)\n        } else {\n            None\n        },\n        gantt_color,\n        clusters,\n        hosts,\n        main_resource_state,\n    }\n}\n\npub fn mock_jobs() -\u003e Vec\u003cJob\u003e {\n    (1..=50).map(|id| mock_job(id)).collect()\n}\n\nfn mock_strata(id: u32) -\u003e Strata {\n    // Possible cluster list\n    let clusters_list = vec![\"cluster1\", \"cluster2\", \"cluster3\", \"cluster4\", \"cluster5\"];\n\n    // Possible hosts list\n    let hosts_list = vec![\"host1\", \"host2\", \"host3\", \"host4\", \"host5\", \"host6\"];\n\n    // Possible states list\n    let states_list = vec![\"Dead\", \"Alive\", \"Absent\", \"Unknown\"];\n\n    // Possible comments list\n    let comments_list = vec![\n        \"No issues\",\n        \"Minor issues\",\n        \"Major issues\",\n        \"Critical issues\",\n    ];\n\n    // Function to generate a random number\n    let random_index = |max: usize| -\u003e usize {\n        let mut buf = [0u8; 8];\n        getrandom::getrandom(\u0026mut buf).unwrap();\n        let value = u64::from_le_bytes(buf);\n        (value % max as u64) as usize\n    };\n\n    let random_float = || -\u003e f32 {\n        let mut buf = [0u8; 8];\n        getrandom::getrandom(\u0026mut buf).unwrap();\n        let value = u64::from_le_bytes(buf);\n        (value as f32) / (u64::MAX as f32)\n    };\n\n    Strata {\n        state_num: Some(random_index(10) as i32),\n        thread_count: Some(random_index(16) as i32),\n        rconsole: Some(format!(\"rconsole{}\", random_index(100))),\n        memnode: Some(random_index(64000) as i64),\n        cluster: Some(clusters_list[random_index(clusters_list.len())].to_string()),\n        desktop_computing: Some(\n            if random_index(2) == 0 {\n                \"enabled\"\n            } else {\n                \"disabled\"\n            }\n            .to_string(),\n        ),\n        memcore: Some(random_index(128) as i32),\n        production: Some(\n            if random_index(2) == 0 {\n                \"production\"\n            } else {\n                \"development\"\n            }\n            .to_string(),\n        ),\n        eth_rate: Some(random_index(1000) as i32),\n        chassis: Some(format!(\"chassis{}\", random_index(10))),\n        memcpu: Some(random_index(64000) as i64),\n        cluster_priority: Some(random_index(10) as i32),\n        gpu_model: Some(format!(\"gpu_model{}\", random_index(10))),\n        gpu_compute_capability: Some(format!(\"gpu_compute_capability{}\", random_index(10))),\n        core_count: Some(random_index(64) as i32),\n        next_state: Some(format!(\"next_state{}\", random_index(10))),\n        cpufreq: Some(format!(\"cpufreq{}\", random_index(10))),\n        comment: Some(comments_list[random_index(comments_list.len())].to_string()),\n        core: Some(random_index(64) as i32),\n        cpuset: Some(format!(\"cpuset{}\", random_index(10))),\n        suspended_jobs: Some(format!(\"suspended_jobs{}\", random_index(10))),\n        state: Some(states_list[random_index(states_list.len())].to_string()),\n        ip: Some(format!(\n            \"192.168.{}.{}\",\n            random_index(256),\n            random_index(256)\n        )),\n        network_address: Some(format!(\"network_address{}\", random_index(100))),\n        resource_id: Some(id),\n        host: Some(hosts_list[random_index(hosts_list.len())].to_string()),\n        nodemodel: Some(format!(\"nodemodel{}\", random_index(10))),\n        cputype: Some(format!(\"cputype{}\", random_index(10))),\n    }\n}\n\npub fn mock_stratas() -\u003e Vec\u003cStrata\u003e {\n    (1..=50).map(|id| mock_strata(id)).collect()\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","utils","mod.rs"],"content":"// Module: utils\n\npub mod date_converter;\npub mod parser;\npub mod updater;\npub mod utils;\npub mod secret;\n\n#[cfg(target_arch = \"wasm32\")]\npub mod mocker;","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","utils","parser.rs"],"content":"use crate::models::data_structure::job::{Job, JobState};\nuse crate::models::data_structure::resource::ResourceState;\nuse crate::models::data_structure::strata::Strata;\nuse crate::models::utils::utils::convert_id_to_color;\nuse serde_json::Value;\nuse std::fs::File;\nuse std::io::Read;\nuse std::process::Command;\n\n#[cfg(not(target_arch = \"wasm32\"))]\nuse chrono::{DateTime, Local};\n\n/**\n * Test SSH connection to the specified host\n */\npub fn test_connection(host: \u0026str) -\u003e Result\u003c(), String\u003e {\n    let ssh_test = Command::new(\"ssh\")\n        .args([host, \"true\"])\n        .status();\n\n    match ssh_test {\n        Ok(status) if status.success() =\u003e Ok(()),\n        Ok(status) =\u003e Err(format!(\"SSH command failed with status: {}\", status)),\n        Err(e) =\u003e Err(format!(\"Connection test failed: {}\", e)),\n    }\n}\n\n/**\n * Get the jobs for the specified period\n * Command: oarstat -J -g \"YYYY-MM-DD hh:mm:ss, YYYY-MM-DD hh:mm:ss\" \u003e /tmp/data.json\n * @param start_date: Start date of the period\n * @param end_date: End date of the period\n * @return List of jobs\n */\n#[cfg(not(target_arch = \"wasm32\"))]\npub fn get_current_jobs_for_period(start_date: DateTime\u003cLocal\u003e, end_date: DateTime\u003cLocal\u003e) -\u003e bool {\n    // Add a margin to the interval\n    let interval = end_date - start_date;\n    let margin = interval.num_seconds() * 30 / 100;\n    let start_date = start_date - chrono::Duration::seconds(margin);\n    let end_date = end_date + chrono::Duration::seconds(margin);\n\n    // Test connection first\n    if test_connection(\"grenoble.g5k\") != Ok(()) {\n        return false;\n    }\n\n    // Check if Data folder exists\n    let data_folder = std::path::Path::new(\"./data\");\n    if !data_folder.exists() {\n        std::fs::create_dir(data_folder).expect(\"Unable to create data folder\");\n    }\n\n    // Execute SSH command to generate JSON file and redirect output\n    let ssh_status = Command::new(\"ssh\")\n        .args([\n            \"grenoble.g5k\",\n            \u0026format!(\n                \"oarstat -J -g \\\"{}, {}\\\"\",\n                start_date.format(\"%Y-%m-%d %H:%M:%S\"),\n                end_date.format(\"%Y-%m-%d %H:%M:%S\")\n            ),\n        ])\n        .output()\n        .and_then(|output| std::fs::write(\"./data/data.json\", output.stdout));\n\n    if let Err(e) = ssh_status {\n        println!(\"Failed to execute SSH command: {}\", e);\n        return false;\n    }\n\n    true\n}\n\npub fn get_jobs_from_json(file_path: \u0026str) -\u003e Vec\u003cJob\u003e {\n    let file_res = File::open(file_path);\n\n    let mut file = match file_res {\n        Ok(file) =\u003e file,\n        Err(error) =\u003e {\n            println!(\"Unable to open file: {}\", error);\n            return Vec::new();\n        }\n    };\n\n    let mut data = String::new();\n    file.read_to_string(\u0026mut data)\n        .expect(\"Unable to read string\");\n\n    let json: Value = serde_json::from_str(\u0026data).expect(\"Unable to parse JSON\");\n    let mut jobs = Vec::new();\n\n    if let Some(jobs_section) = json.get(\"jobs\") {\n        if let Value::Object(map) = jobs_section {\n            for (_, value) in map {\n                jobs.push(from_json_value(\u0026value));\n            }\n        }\n    }\n\n    jobs\n}\n\npub fn get_resources_from_json(file_path: \u0026str) -\u003e Vec\u003cStrata\u003e {\n    // Open the file\n    let file_res = File::open(file_path);\n\n    let mut file = match file_res {\n        Ok(file) =\u003e file,\n        Err(error) =\u003e {\n            println!(\"Impossible d'ouvrir le fichier: {}\", error);\n            return Vec::new();\n        }\n    };\n\n    // Read the file content\n    let mut data = String::new();\n    if let Err(e) = file.read_to_string(\u0026mut data) {\n        println!(\"Impossible de lire le fichier: {}\", e);\n        return Vec::new();\n    }\n\n    // Parse the JSON content\n    let json: Value = match serde_json::from_str(\u0026data) {\n        Ok(v) =\u003e v,\n        Err(e) =\u003e {\n            println!(\"Impossible de parser le JSON: {}\", e);\n            return Vec::new();\n        }\n    };\n\n    let mut resources = Vec::new();\n\n    // Get the resources array\n    if let Some(resources_array) = json.get(\"resources\").and_then(|v| v.as_array()) {\n        for resource_value in resources_array {\n            // Try to parse the resource\n            if let Ok(resource) = serde_json::from_value::\u003cStrata\u003e(resource_value.clone()) {\n                resources.push(resource);\n            }\n        }\n    }\n\n    resources\n}\n\npub fn parse_state_from_json(json_str: \u0026str) -\u003e Result\u003cJobState, serde_json::Error\u003e {\n    serde_json::from_str(json_str)\n}\n\nfn from_json_value(json: \u0026Value) -\u003e Job {\n    Job {\n        id: json[\"id\"]\n            .as_str()\n            .unwrap_or(\"0\")\n            .parse::\u003cu32\u003e()\n            .unwrap_or(0),\n        owner: json[\"owner\"].as_str().unwrap_or(\"unknown\").to_string(),\n        state: parse_state_from_json(\u0026format!(\n            \"\\\"{}\\\"\",\n            json[\"state\"].as_str().unwrap_or(\"unknown\")\n        ))\n        .unwrap_or(JobState::Unknown),\n        command: json[\"command\"].as_str().unwrap_or(\"\").to_string(),\n        walltime: json[\"walltime\"].as_i64().unwrap_or(0) as i64,\n        message: json[\"message\"].as_str().map(|s| s.to_string()),\n        queue: json[\"queue\"].as_str().unwrap_or(\"default\").to_string(),\n        assigned_resources: json[\"resource_id\"]\n            .as_array()\n            .unwrap_or(\u0026Vec::new())\n            .iter()\n            .filter_map(|v| v.as_str().and_then(|s| s.parse::\u003cu32\u003e().ok()))\n            .collect(),\n        scheduled_start: json[\"start_time\"].as_i64().unwrap_or(0),\n        start_time: json[\"start_time\"].as_i64().unwrap_or(0),\n        stop_time: json[\"stop_time\"].as_i64().unwrap_or(0),\n        submission_time: json[\"submission_time\"].as_i64().unwrap_or(0),\n        exit_code: json[\"exit_code\"].as_i64().map(|n| n as i32),\n        gantt_color: convert_id_to_color(\n            json[\"id\"]\n                .as_str()\n                .unwrap_or(\"0\")\n                .parse::\u003cu32\u003e()\n                .unwrap_or(0),\n        ),\n        clusters: Vec::new(),\n        hosts: Vec::new(),\n        main_resource_state: ResourceState::Unknown,\n    }\n}\n","traces":[{"line":16,"address":[5654656,5655684,5655703],"length":1,"stats":{"Line":6}},{"line":17,"address":[5654866,5654796,5654699],"length":1,"stats":{"Line":18}},{"line":18,"address":[5654753],"length":1,"stats":{"Line":6}},{"line":21,"address":[5654947],"length":1,"stats":{"Line":0}},{"line":22,"address":[5654957,5655124,5655258],"length":1,"stats":{"Line":0}},{"line":23,"address":[5655287,5655413,5655130],"length":1,"stats":{"Line":0}},{"line":24,"address":[5654984,5655469,5655639],"length":1,"stats":{"Line":0}},{"line":36,"address":[5655744,5657848,5657829],"length":1,"stats":{"Line":6}},{"line":38,"address":[5655761],"length":1,"stats":{"Line":6}},{"line":39,"address":[5655851,5656161],"length":1,"stats":{"Line":6}},{"line":40,"address":[5655989],"length":1,"stats":{"Line":6}},{"line":41,"address":[5656051],"length":1,"stats":{"Line":6}},{"line":44,"address":[5656108,5656185,5656301],"length":1,"stats":{"Line":6}},{"line":45,"address":[5656314],"length":1,"stats":{"Line":0}},{"line":49,"address":[5656240],"length":1,"stats":{"Line":0}},{"line":50,"address":[5656290],"length":1,"stats":{"Line":0}},{"line":51,"address":[5656334],"length":1,"stats":{"Line":0}},{"line":55,"address":[5656368,5657233],"length":1,"stats":{"Line":0}},{"line":56,"address":[5657190],"length":1,"stats":{"Line":0}},{"line":58,"address":[5657119,5656783,5656596],"length":1,"stats":{"Line":0}},{"line":60,"address":[5656397],"length":1,"stats":{"Line":0}},{"line":61,"address":[5656628],"length":1,"stats":{"Line":0}},{"line":65,"address":[5657136,5657322,5656432],"length":1,"stats":{"Line":0}},{"line":67,"address":[5657469],"length":1,"stats":{"Line":0}},{"line":68,"address":[5657714],"length":1,"stats":{"Line":0}},{"line":69,"address":[5657783],"length":1,"stats":{"Line":0}},{"line":72,"address":[5657638],"length":1,"stats":{"Line":0}},{"line":75,"address":[5657888,5658850],"length":1,"stats":{"Line":3}},{"line":76,"address":[5657921],"length":1,"stats":{"Line":3}},{"line":78,"address":[5657932],"length":1,"stats":{"Line":3}},{"line":79,"address":[5657942],"length":1,"stats":{"Line":3}},{"line":80,"address":[5657975],"length":1,"stats":{"Line":0}},{"line":81,"address":[5658910],"length":1,"stats":{"Line":0}},{"line":82,"address":[5658978],"length":1,"stats":{"Line":0}},{"line":86,"address":[5657965],"length":1,"stats":{"Line":3}},{"line":87,"address":[5658132,5658217],"length":1,"stats":{"Line":6}},{"line":90,"address":[5658251],"length":1,"stats":{"Line":3}},{"line":91,"address":[5658347],"length":1,"stats":{"Line":3}},{"line":93,"address":[5658398,5658476],"length":1,"stats":{"Line":6}},{"line":94,"address":[5658598,5658534],"length":1,"stats":{"Line":6}},{"line":95,"address":[5658618],"length":1,"stats":{"Line":3}},{"line":96,"address":[5658749],"length":1,"stats":{"Line":2}},{"line":101,"address":[5658548],"length":1,"stats":{"Line":1}},{"line":104,"address":[5659008,5659692,5660871],"length":1,"stats":{"Line":1}},{"line":106,"address":[5659041],"length":1,"stats":{"Line":1}},{"line":108,"address":[5659060],"length":1,"stats":{"Line":1}},{"line":109,"address":[5659070],"length":1,"stats":{"Line":1}},{"line":110,"address":[5659103],"length":1,"stats":{"Line":0}},{"line":111,"address":[5660922],"length":1,"stats":{"Line":0}},{"line":112,"address":[5660996],"length":1,"stats":{"Line":0}},{"line":117,"address":[5659093],"length":1,"stats":{"Line":1}},{"line":118,"address":[5659260,5659345],"length":1,"stats":{"Line":2}},{"line":119,"address":[5659570],"length":1,"stats":{"Line":0}},{"line":120,"address":[5659644],"length":1,"stats":{"Line":0}},{"line":124,"address":[5659709],"length":1,"stats":{"Line":1}},{"line":125,"address":[5659780],"length":1,"stats":{"Line":1}},{"line":126,"address":[5659862],"length":1,"stats":{"Line":0}},{"line":127,"address":[5660752],"length":1,"stats":{"Line":0}},{"line":128,"address":[5660826],"length":1,"stats":{"Line":0}},{"line":132,"address":[5659852],"length":1,"stats":{"Line":1}},{"line":135,"address":[4837184,4837193],"length":1,"stats":{"Line":4}},{"line":136,"address":[5660266,5660185,5660645],"length":1,"stats":{"Line":3}},{"line":138,"address":[5660376],"length":1,"stats":{"Line":1}},{"line":139,"address":[5660590,5660486],"length":1,"stats":{"Line":2}},{"line":144,"address":[5660211],"length":1,"stats":{"Line":1}},{"line":147,"address":[5661024],"length":1,"stats":{"Line":2}},{"line":148,"address":[5661045],"length":1,"stats":{"Line":1}},{"line":151,"address":[5664303,5664391,5661072],"length":1,"stats":{"Line":2}},{"line":153,"address":[5661123],"length":1,"stats":{"Line":2}},{"line":158,"address":[5661287],"length":1,"stats":{"Line":2}},{"line":159,"address":[5661932,5661697,5661917,5661826],"length":1,"stats":{"Line":8}},{"line":164,"address":[5661970],"length":1,"stats":{"Line":2}},{"line":165,"address":[5662214,5662128],"length":1,"stats":{"Line":4}},{"line":166,"address":[4837216,4837238],"length":1,"stats":{"Line":2}},{"line":167,"address":[5662396,5662482],"length":1,"stats":{"Line":4}},{"line":168,"address":[5662603,5662689,5662810,5662743],"length":1,"stats":{"Line":8}},{"line":174,"address":[5663044,5662958],"length":1,"stats":{"Line":3}},{"line":175,"address":[5663118],"length":1,"stats":{"Line":1}},{"line":176,"address":[5663234],"length":1,"stats":{"Line":1}},{"line":177,"address":[5663350],"length":1,"stats":{"Line":1}},{"line":178,"address":[4837408,4837413],"length":1,"stats":{"Line":1}},{"line":179,"address":[5663753],"length":1,"stats":{"Line":1}},{"line":186,"address":[5663789],"length":1,"stats":{"Line":1}},{"line":187,"address":[5663808],"length":1,"stats":{"Line":1}}],"covered":55,"coverable":84},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","utils","secret.rs"],"content":"use chrono::{Duration, Utc};\nuse egui;\nuse rand::Rng;\n\npub struct Secret {\n    konami_sequence: Vec\u003cegui::Key\u003e,\n    is_konami_active: bool,\n    konami_start_time: Option\u003cchrono::DateTime\u003cUtc\u003e\u003e,\n    snake_game: Option\u003cSnakeGame\u003e,\n    last_update: chrono::DateTime\u003cUtc\u003e,\n    show_game: bool,\n}\n\nimpl Default for Secret {\n    fn default() -\u003e Self {\n        Secret {\n            konami_sequence: Vec::new(),\n            is_konami_active: false,\n            konami_start_time: None,\n            snake_game: None,\n            last_update: Utc::now(),\n            show_game: false,\n        }\n    }\n}\n\nconst KONAMI_CODE: [egui::Key; 10] = [\n    egui::Key::ArrowUp,\n    egui::Key::ArrowUp,\n    egui::Key::ArrowDown,\n    egui::Key::ArrowDown,\n    egui::Key::ArrowLeft,\n    egui::Key::ArrowRight,\n    egui::Key::ArrowLeft,\n    egui::Key::ArrowRight,\n    egui::Key::B,\n    egui::Key::A,\n];\n\nimpl Secret {\n    pub fn update(\u0026mut self, ctx: \u0026egui::Context) {\n        self.random_secret(ctx);\n\n        if self.is_konami_active {\n            let now = Utc::now();\n            if now.signed_duration_since(self.last_update) \u003e= Duration::milliseconds(500) {\n                if let Some(game) = \u0026mut self.snake_game {\n                    game.update();\n                    self.last_update = now;\n                }\n            }\n        }\n    }\n\n    pub fn random_secret(\u0026mut self, ctx: \u0026egui::Context) {\n        let input_state = ctx.input(|i| i.raw.clone());\n\n        for event in \u0026input_state.events {\n            if let egui::Event::Key { key, pressed, .. } = event {\n                if *pressed {\n                    self.konami_sequence.push(*key);\n\n                    if self.konami_sequence.len() \u003e KONAMI_CODE.len() {\n                        self.konami_sequence.remove(0);\n                    }\n\n                    if self.konami_sequence.len() == KONAMI_CODE.len()\n                        \u0026\u0026 self.konami_sequence == KONAMI_CODE\n                    {\n                        self.is_konami_active = true;\n                        self.snake_game = Some(SnakeGame::new());\n                        self.konami_start_time = Some(Utc::now());\n                        self.show_game = true;\n                    }\n                }\n            }\n        }\n\n        if let Some(game) = \u0026mut self.snake_game {\n            if ctx.input(|i| i.key_pressed(egui::Key::ArrowLeft)) {\n                game.direction = (-1, 0);\n            } else if ctx.input(|i| i.key_pressed(egui::Key::ArrowRight)) {\n                game.direction = (1, 0);\n            } else if ctx.input(|i| i.key_pressed(egui::Key::ArrowUp)) {\n                game.direction = (0, -1);\n            } else if ctx.input(|i| i.key_pressed(egui::Key::ArrowDown)) {\n                game.direction = (0, 1);\n            }\n        }\n    }\n\n    pub fn draw_snake_game(\u0026mut self, ctx: \u0026egui::Context) {\n        if self.is_konami_active \u0026\u0026 self.show_game {\n            egui::Window::new(\"Secret Snake Game\")\n                .collapsible(false)\n                .show(ctx, |ui| {\n                    if ui.button(\"Close\").clicked() {\n                        self.show_game = false;\n                    }\n                    if let Some(game) = \u0026self.snake_game {\n                        let (rect, _) =\n                            ui.allocate_exact_size(egui::vec2(200.0, 200.0), egui::Sense::hover());\n                        let painter = ui.painter();\n\n                        painter.rect_filled(rect, 0.0, egui::Color32::BLACK);\n\n                        for \u0026(x, y) in \u0026game.snake {\n                            painter.rect_filled(\n                                egui::Rect::from_min_size(\n                                    rect.min + egui::vec2(x as f32 * 10.0, y as f32 * 10.0),\n                                    egui::vec2(10.0, 10.0),\n                                ),\n                                0.0,\n                                egui::Color32::GREEN,\n                            );\n                        }\n\n                        painter.rect_filled(\n                            egui::Rect::from_min_size(\n                                rect.min\n                                    + egui::vec2(\n                                        game.food.0 as f32 * 10.0,\n                                        game.food.1 as f32 * 10.0,\n                                    ),\n                                egui::vec2(10.0, 10.0),\n                            ),\n                            0.0,\n                            egui::Color32::RED,\n                        );\n\n                        ui.label(format!(\"Score: {}\", game.score));\n\n                        if game.game_over {\n                            ui.label(\"Game Over!\");\n                        }\n                    }\n                });\n        }\n    }\n}\n\nstruct SnakeGame {\n    snake: Vec\u003c(i32, i32)\u003e,\n    food: (i32, i32),\n    direction: (i32, i32),\n    game_over: bool,\n    score: i32,\n}\n\nimpl SnakeGame {\n    fn new() -\u003e Self {\n        let mut game = SnakeGame {\n            snake: vec![(5, 5)],\n            food: (0, 0),\n            direction: (1, 0),\n            game_over: false,\n            score: 0,\n        };\n        game.generate_new_food();\n        game\n    }\n\n    fn update(\u0026mut self) {\n        if self.game_over {\n            return;\n        }\n\n        let head = self.snake[0];\n        let new_head = (\n            (head.0 + self.direction.0 + 20) % 20,\n            (head.1 + self.direction.1 + 20) % 20,\n        );\n\n        if self.snake.contains(\u0026new_head) {\n            self.game_over = true;\n            return;\n        }\n\n        self.snake.insert(0, new_head);\n\n        if new_head == self.food {\n            self.score += 1;\n            self.generate_new_food();\n        } else {\n            self.snake.pop();\n        }\n    }\n\n    fn generate_new_food(\u0026mut self) {\n        let mut rng = rand::thread_rng();\n        loop {\n            let new_food = (rng.gen_range(0..20), rng.gen_range(0..20));\n            if !self.snake.contains(\u0026new_food) {\n                self.food = new_food;\n                break;\n            }\n        }\n    }\n}\n","traces":[{"line":15,"address":[4924850,4924829,4924624],"length":1,"stats":{"Line":0}},{"line":17,"address":[4924645],"length":1,"stats":{"Line":0}},{"line":21,"address":[4924673],"length":1,"stats":{"Line":0}},{"line":41,"address":[4924864],"length":1,"stats":{"Line":0}},{"line":42,"address":[4924883],"length":1,"stats":{"Line":0}},{"line":44,"address":[4924893],"length":1,"stats":{"Line":0}},{"line":45,"address":[4924904],"length":1,"stats":{"Line":0}},{"line":46,"address":[4924920],"length":1,"stats":{"Line":0}},{"line":47,"address":[4925105,4925024],"length":1,"stats":{"Line":0}},{"line":48,"address":[4925079],"length":1,"stats":{"Line":0}},{"line":49,"address":[4925089],"length":1,"stats":{"Line":0}},{"line":55,"address":[4926127,4925120],"length":1,"stats":{"Line":0}},{"line":56,"address":[4369840,4369856],"length":1,"stats":{"Line":0}},{"line":58,"address":[4925375,4925163,4925243],"length":1,"stats":{"Line":0}},{"line":59,"address":[4925666,4925396],"length":1,"stats":{"Line":0}},{"line":60,"address":[4925701],"length":1,"stats":{"Line":0}},{"line":61,"address":[4925721],"length":1,"stats":{"Line":0}},{"line":63,"address":[4925743],"length":1,"stats":{"Line":0}},{"line":64,"address":[4925788],"length":1,"stats":{"Line":0}},{"line":67,"address":[4926122,4925813,4925771],"length":1,"stats":{"Line":0}},{"line":68,"address":[4925828],"length":1,"stats":{"Line":0}},{"line":70,"address":[4925864],"length":1,"stats":{"Line":0}},{"line":71,"address":[4925876],"length":1,"stats":{"Line":0}},{"line":72,"address":[4926042],"length":1,"stats":{"Line":0}},{"line":73,"address":[4926118],"length":1,"stats":{"Line":0}},{"line":79,"address":[4925330,4925442],"length":1,"stats":{"Line":0}},{"line":80,"address":[4369872,4369881],"length":1,"stats":{"Line":0}},{"line":81,"address":[4925511],"length":1,"stats":{"Line":0}},{"line":82,"address":[4369913,4369904],"length":1,"stats":{"Line":0}},{"line":83,"address":[4925558],"length":1,"stats":{"Line":0}},{"line":84,"address":[4369945,4369936],"length":1,"stats":{"Line":0}},{"line":85,"address":[4925605],"length":1,"stats":{"Line":0}},{"line":86,"address":[4369977,4369968],"length":1,"stats":{"Line":0}},{"line":87,"address":[4925642],"length":1,"stats":{"Line":0}},{"line":92,"address":[4926160],"length":1,"stats":{"Line":0}},{"line":93,"address":[4926212,4926193],"length":1,"stats":{"Line":0}},{"line":94,"address":[4926287,4926218],"length":1,"stats":{"Line":0}},{"line":96,"address":[4370000,4371731],"length":1,"stats":{"Line":0}},{"line":97,"address":[4370043,4370157],"length":1,"stats":{"Line":0}},{"line":98,"address":[4370232],"length":1,"stats":{"Line":0}},{"line":100,"address":[4370240],"length":1,"stats":{"Line":0}},{"line":101,"address":[4370480],"length":1,"stats":{"Line":0}},{"line":102,"address":[4370512,4370339],"length":1,"stats":{"Line":0}},{"line":103,"address":[4370530],"length":1,"stats":{"Line":0}},{"line":105,"address":[4370551],"length":1,"stats":{"Line":0}},{"line":107,"address":[4370670,4370639,4371334],"length":1,"stats":{"Line":0}},{"line":108,"address":[4371625],"length":1,"stats":{"Line":0}},{"line":110,"address":[4371369],"length":1,"stats":{"Line":0}},{"line":118,"address":[4370992],"length":1,"stats":{"Line":0}},{"line":120,"address":[4370734],"length":1,"stats":{"Line":0}},{"line":122,"address":[4370752],"length":1,"stats":{"Line":0}},{"line":123,"address":[4370769],"length":1,"stats":{"Line":0}},{"line":131,"address":[4371273,4371048,4371138],"length":1,"stats":{"Line":0}},{"line":133,"address":[4371314],"length":1,"stats":{"Line":0}},{"line":134,"address":[4371686],"length":1,"stats":{"Line":0}},{"line":151,"address":[4926558,4926320],"length":1,"stats":{"Line":0}},{"line":153,"address":[4926334,4926479],"length":1,"stats":{"Line":0}},{"line":159,"address":[4926467],"length":1,"stats":{"Line":0}},{"line":160,"address":[4926533],"length":1,"stats":{"Line":0}},{"line":163,"address":[4926592],"length":1,"stats":{"Line":0}},{"line":164,"address":[4926606],"length":1,"stats":{"Line":0}},{"line":168,"address":[4926617],"length":1,"stats":{"Line":0}},{"line":169,"address":[4926893],"length":1,"stats":{"Line":0}},{"line":170,"address":[4926658,4926681,4926786],"length":1,"stats":{"Line":0}},{"line":171,"address":[4926772,4926928,4926806],"length":1,"stats":{"Line":0}},{"line":174,"address":[4926901],"length":1,"stats":{"Line":0}},{"line":175,"address":[4927004],"length":1,"stats":{"Line":0}},{"line":179,"address":[4926949],"length":1,"stats":{"Line":0}},{"line":181,"address":[4926978],"length":1,"stats":{"Line":0}},{"line":182,"address":[4927074,4927038],"length":1,"stats":{"Line":0}},{"line":183,"address":[4927064],"length":1,"stats":{"Line":0}},{"line":185,"address":[4927018],"length":1,"stats":{"Line":0}},{"line":189,"address":[4927104,4927323],"length":1,"stats":{"Line":0}},{"line":190,"address":[4927118],"length":1,"stats":{"Line":0}},{"line":192,"address":[4927199,4927141],"length":1,"stats":{"Line":0}},{"line":193,"address":[4927231],"length":1,"stats":{"Line":0}},{"line":194,"address":[4927293],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":77},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","utils","updater.rs"],"content":"use chrono::{DateTime, Local};\n\nuse std::time::Duration;\n\nuse crate::models::data_structure::application_context::ApplicationContext;\n\n#[cfg(target_arch = \"wasm32\")]\nuse super::mocker::{mock_jobs,mock_stratas};\n\n\n#[cfg(not(target_arch = \"wasm32\"))]\nuse crate::models::utils::parser::get_current_jobs_for_period;\n\n#[cfg(not(target_arch = \"wasm32\"))]\nuse std::thread;\n\nuse super::parser::{get_jobs_from_json, get_resources_from_json};\n\nimpl ApplicationContext {\n    pub fn update_refresh_rate(\u0026mut self, new_rate: u64) {\n        let mut rate = self.refresh_rate.lock().unwrap();\n        *rate = new_rate;\n    }\n\n    #[allow(dead_code)]\n    pub fn update_start_date(\u0026mut self, new_start: DateTime\u003cLocal\u003e) {\n        let mut start = self.start_date.lock().unwrap();\n        *start = new_start;\n    }\n\n    #[allow(dead_code)]\n    pub fn update_end_date(\u0026mut self, new_end: DateTime\u003cLocal\u003e) {\n        let mut end = self.end_date.lock().unwrap();\n        *end = new_end;\n    }\n\n    #[allow(dead_code)]\n    pub fn get_start_date(\u0026self) -\u003e DateTime\u003cLocal\u003e {\n        *self.start_date.lock().unwrap()\n    }\n\n    #[allow(dead_code)]\n    pub fn get_end_date(\u0026self) -\u003e DateTime\u003cLocal\u003e {\n        *self.end_date.lock().unwrap()\n    }\n\n    pub fn set_localdate(\u0026mut self, start: DateTime\u003cLocal\u003e, end: DateTime\u003cLocal\u003e) {\n        let mut start_date = self.start_date.lock().unwrap(); // Lock acquired\n        let mut end_date = self.end_date.lock().unwrap(); // Lock acquired\n        *start_date = start; // Modify data\n        *end_date = end; // Modify data\n    } // Both locks are automatically released when MutexGuards go out of scope\n\n    pub fn instant_update(\u0026mut self) {\n        let is_refreshing = self.is_refreshing.clone();\n\n        // if the app is already refreshing, return\n        if *is_refreshing.lock().unwrap() {\n            return;\n        }\n\n        // set refreshing to true\n        *is_refreshing.lock().unwrap() = true;\n\n        // get dates\n        let start = *self.start_date.lock().unwrap();\n        let end = *self.end_date.lock().unwrap();\n\n        let jobs_sender = self.jobs_sender.clone();\n        let resources_sender = self.resources_sender.clone();\n        // Get the data in a different thread\n        #[cfg(not(target_arch = \"wasm32\"))]\n        {\n            let is_refreshing_clone = is_refreshing.clone();\n            thread::spawn(move || {\n                let res = get_current_jobs_for_period(start, end);\n                if res {\n                    let jobs = get_jobs_from_json(\"./data/data.json\");\n                    let resources = get_resources_from_json(\"./data/data.json\");\n                    jobs_sender.send(jobs).unwrap_or_else(|e| {\n                        println!(\"Error while sending jobs: {}\", e);\n                    });\n\n                    resources_sender.send(resources).unwrap_or_else(|e| {\n                        println!(\"Error while sending resources: {}\", e);\n                    });\n                }\n\n                // set refreshing to false\n                *is_refreshing_clone.lock().unwrap() = false;\n            });\n        }\n\n        #[cfg(target_arch = \"wasm32\")]\n        {\n            // LOG DEBUG\n            // log::info!(\"instant_update: start_date: {:?}, end_date: {:?}\", start, end);\n            let jobs = mock_jobs();\n            jobs_sender.send(jobs).unwrap();\n\n            let strata = mock_stratas();\n            resources_sender.send(strata).unwrap();\n            \n            // set refreshing to false\n            *is_refreshing.lock().unwrap() = false;\n        }\n    }\n\n    // In a different thread, update the data every refresh_rate seconds\n    pub fn update_periodically(\u0026mut self) {\n        let rate = *self.refresh_rate.lock().unwrap();\n        let jobs_sender = self.jobs_sender.clone();\n        let resources_sender = self.resources_sender.clone();\n        let is_refreshing = self.is_refreshing.clone();\n        let start_date = self.start_date.clone();\n        let end_date = self.end_date.clone();\n\n        // Get the data in a different thread\n        #[cfg(not(target_arch = \"wasm32\"))]\n        {\n            thread::spawn(move || {\n                loop {\n                    // Check if already refreshing\n                    if *is_refreshing.lock().unwrap() {\n                        thread::sleep(Duration::from_secs(rate));\n                        continue;\n                    }\n\n                    // Set refreshing to true\n                    *is_refreshing.lock().unwrap() = true;\n\n                    let start;\n                    let end;\n\n                    {\n                        start = *start_date.lock().unwrap();\n                        end = *end_date.lock().unwrap();\n                    }\n\n                    let res = get_current_jobs_for_period(start, end);\n                    if res {\n                        let jobs = get_jobs_from_json(\"./data/data.json\");\n                        let resources = get_resources_from_json(\"./data/data.json\");\n\n                        jobs_sender.send(jobs).unwrap_or_else(|e| {\n                            println!(\"Error while sending jobs: {}\", e);\n                        });\n\n                        resources_sender.send(resources).unwrap_or_else(|e| {\n                            println!(\"Error while sending resources: {}\", e);\n                        });\n                    }\n\n                    // Set refreshing to false\n                    *is_refreshing.lock().unwrap() = false;\n\n                    thread::sleep(Duration::from_secs(rate));\n                }\n            });\n        }\n\n        #[cfg(target_arch = \"wasm32\")]\n        {\n            // LOG DEBUG\n            // log::info!(\"update_periodically: start_date: {:?}, end_date: {:?}\", start, end);\n            let jobs = mock_jobs();\n            jobs_sender.send(jobs).unwrap();\n\n            let strata = mock_stratas();\n            resources_sender.send(strata).unwrap();\n        }\n    }\n\n    #[allow(dead_code)]\n    pub fn update_period(\u0026mut self, start_date: DateTime\u003cLocal\u003e, end_date: DateTime\u003cLocal\u003e) {\n        self.update_start_date(start_date);\n        self.update_end_date(end_date);\n        self.is_loading = true;\n\n        // Clone necessary value\n        let sender = self.jobs_sender.clone();\n        let start = start_date;\n        let end = end_date;\n\n        // Get the data in a different thread\n        #[cfg(not(target_arch = \"wasm32\"))]\n        {\n            thread::spawn(move || {\n                let res = get_current_jobs_for_period(start, end);\n                if res {\n                    let jobs = get_jobs_from_json(\"./data/data.json\");\n                    sender.send(jobs).unwrap();\n                }\n            });\n        }\n\n        #[cfg(target_arch = \"wasm32\")]\n        {\n            // LOG DEBUG\n            // log::info!(\"update_period: start_date: {:?}, end_date: {:?}\", start, end);\n            let jobs = mock_jobs();\n            sender.send(jobs).unwrap();\n        }\n    }\n}\n","traces":[{"line":20,"address":[4831051,4830768],"length":1,"stats":{"Line":0}},{"line":21,"address":[4830790,4830966],"length":1,"stats":{"Line":0}},{"line":22,"address":[4831030,4830980],"length":1,"stats":{"Line":0}},{"line":26,"address":[4831369,4831088],"length":1,"stats":{"Line":0}},{"line":27,"address":[4831275,4831105],"length":1,"stats":{"Line":0}},{"line":28,"address":[4831289,4831337],"length":1,"stats":{"Line":0}},{"line":32,"address":[4831689,4831408],"length":1,"stats":{"Line":0}},{"line":33,"address":[4831595,4831425],"length":1,"stats":{"Line":0}},{"line":34,"address":[4831657,4831609],"length":1,"stats":{"Line":0}},{"line":38,"address":[4831728,4832041],"length":1,"stats":{"Line":0}},{"line":39,"address":[4831763,4832004,4831942],"length":1,"stats":{"Line":0}},{"line":43,"address":[4832393,4832080],"length":1,"stats":{"Line":0}},{"line":44,"address":[4832294,4832115,4832356],"length":1,"stats":{"Line":0}},{"line":47,"address":[4833152,4832432],"length":1,"stats":{"Line":0}},{"line":48,"address":[4832462,4832671],"length":1,"stats":{"Line":0}},{"line":49,"address":[4832680,4832769,4832993],"length":1,"stats":{"Line":0}},{"line":50,"address":[4833077,4833015],"length":1,"stats":{"Line":0}},{"line":51,"address":[4833091],"length":1,"stats":{"Line":0}},{"line":52,"address":[4832704,4833035,4833127],"length":1,"stats":{"Line":0}},{"line":54,"address":[4833184,4835457,4835499],"length":1,"stats":{"Line":0}},{"line":55,"address":[4833207],"length":1,"stats":{"Line":0}},{"line":58,"address":[4833706,4833251,4833448],"length":1,"stats":{"Line":0}},{"line":63,"address":[4834131,4833856],"length":1,"stats":{"Line":0}},{"line":66,"address":[4834513,4834251],"length":1,"stats":{"Line":0}},{"line":67,"address":[4834629,4834891],"length":1,"stats":{"Line":0}},{"line":69,"address":[4835007],"length":1,"stats":{"Line":0}},{"line":70,"address":[4835070,4835145],"length":1,"stats":{"Line":0}},{"line":74,"address":[4835177,4835232],"length":1,"stats":{"Line":0}},{"line":75,"address":[5132102,5132144,5131216],"length":1,"stats":{"Line":0}},{"line":76,"address":[5131228,5131344],"length":1,"stats":{"Line":0}},{"line":77,"address":[5131356,5131724],"length":1,"stats":{"Line":0}},{"line":78,"address":[5131384],"length":1,"stats":{"Line":0}},{"line":79,"address":[5131489,5131416],"length":1,"stats":{"Line":0}},{"line":80,"address":[5131592,5132160,5131497,5132354],"length":1,"stats":{"Line":0}},{"line":81,"address":[5132282],"length":1,"stats":{"Line":0}},{"line":84,"address":[5132578,5131619,5132384],"length":1,"stats":{"Line":0}},{"line":85,"address":[5132506],"length":1,"stats":{"Line":0}},{"line":90,"address":[5131365,5131734,5131974],"length":1,"stats":{"Line":0}},{"line":110,"address":[4836535,4835520,4836490],"length":1,"stats":{"Line":6}},{"line":111,"address":[4835540,4835770],"length":1,"stats":{"Line":12}},{"line":112,"address":[4835869],"length":1,"stats":{"Line":6}},{"line":113,"address":[4835904,4835984],"length":1,"stats":{"Line":12}},{"line":114,"address":[4836008,4836075],"length":1,"stats":{"Line":12}},{"line":115,"address":[4836158,4836091],"length":1,"stats":{"Line":12}},{"line":116,"address":[4836241,4836174],"length":1,"stats":{"Line":12}},{"line":121,"address":[5135430,5132608,5135332],"length":1,"stats":{"Line":12}},{"line":122,"address":[5132623],"length":1,"stats":{"Line":6}},{"line":124,"address":[5133138,5132647,5132880],"length":1,"stats":{"Line":18}},{"line":125,"address":[5135385],"length":1,"stats":{"Line":0}},{"line":130,"address":[5133573,5133288],"length":1,"stats":{"Line":12}},{"line":136,"address":[5133699,5133964],"length":1,"stats":{"Line":12}},{"line":137,"address":[5134080,5134339],"length":1,"stats":{"Line":12}},{"line":140,"address":[5134447],"length":1,"stats":{"Line":6}},{"line":141,"address":[5134522,5134911],"length":1,"stats":{"Line":0}},{"line":142,"address":[5134553],"length":1,"stats":{"Line":0}},{"line":143,"address":[5134664,5134588],"length":1,"stats":{"Line":0}},{"line":145,"address":[5134672,5135456,5135650,5134776],"length":1,"stats":{"Line":0}},{"line":146,"address":[5135578],"length":1,"stats":{"Line":0}},{"line":149,"address":[5135680,5134806,5135874],"length":1,"stats":{"Line":0}},{"line":150,"address":[5135802],"length":1,"stats":{"Line":0}},{"line":155,"address":[5134921,5135167,5134534],"length":1,"stats":{"Line":0}},{"line":157,"address":[5135287],"length":1,"stats":{"Line":0}},{"line":175,"address":[4836576],"length":1,"stats":{"Line":0}},{"line":176,"address":[4836603],"length":1,"stats":{"Line":0}},{"line":177,"address":[4836643],"length":1,"stats":{"Line":0}},{"line":178,"address":[4836684],"length":1,"stats":{"Line":0}},{"line":181,"address":[4836691],"length":1,"stats":{"Line":0}},{"line":188,"address":[4836726],"length":1,"stats":{"Line":0}},{"line":189,"address":[5135916,5136011],"length":1,"stats":{"Line":0}},{"line":190,"address":[5136023],"length":1,"stats":{"Line":0}},{"line":191,"address":[5136045],"length":1,"stats":{"Line":0}},{"line":192,"address":[5136084,5136264],"length":1,"stats":{"Line":0}}],"covered":14,"coverable":72},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","utils","utils.rs"],"content":"use crate::models::data_structure::cluster::Cluster;\nuse crate::models::data_structure::cpu::Cpu;\nuse crate::models::data_structure::host::Host;\nuse crate::models::data_structure::job::Job;\nuse crate::models::data_structure::resource::ResourceState;\nuse std::hash::DefaultHasher;\nuse std::hash::Hash;\n//\nuse std::cmp::Ordering;\nuse std::hash::Hasher;\n\n// Convert a job ID to a color (using hash)\npub fn convert_id_to_color(id: u32) -\u003e egui::Color32 {\n    let mut hasher = DefaultHasher::new();\n    id.hash(\u0026mut hasher);\n    let hash = hasher.finish();\n\n    let r = ((hash \u003e\u003e 16) \u0026 0xFF) as u8;\n    let g = ((hash \u003e\u003e 8) \u0026 0xFF) as u8;\n    let b = (hash \u0026 0xFF) as u8;\n\n    egui::Color32::from_rgb(r, g, b)\n}\n\n/// Extracts all host names from a collection of clusters\npub fn get_all_hosts(clusters: \u0026Vec\u003cCluster\u003e) -\u003e Vec\u003cString\u003e {\n    let mut result: Vec\u003cString\u003e = Vec::new();\n\n    for cluster in clusters {\n        for host in \u0026cluster.hosts {\n            result.push(host.name.clone());\n        }\n    }\n\n    result\n}\n\npub fn cluster_contain_host(cluster: \u0026Cluster, host_name: \u0026str) -\u003e bool {\n    for host in \u0026cluster.hosts {\n        if host.name == host_name {\n            return true;\n        }\n    }\n    false\n}\n\npub fn get_cluster_from_name(clusters: \u0026Vec\u003cCluster\u003e, name: \u0026str) -\u003e Option\u003cCluster\u003e {\n    for cluster in clusters {\n        if cluster.name == name {\n            return Some(cluster.clone());\n        }\n    }\n    None\n}\n\n/// Extracts all cluster names from a collection of clusters\npub fn get_all_clusters(clusters: \u0026Vec\u003cCluster\u003e) -\u003e Vec\u003cString\u003e {\n    let mut result: Vec\u003cString\u003e = Vec::new();\n\n    for cluster in clusters {\n        result.push(cluster.name.clone());\n    }\n\n    result\n}\n\n/// Extracts all resource IDs from a collection of clusters\npub fn get_all_resources(clusters: \u0026Vec\u003cCluster\u003e) -\u003e Vec\u003cu32\u003e {\n    let mut result: Vec\u003cu32\u003e = Vec::new();\n\n    for cluster in clusters {\n        result.extend(cluster.resource_ids.iter());\n    }\n\n    result\n}\n\npub fn contains_host(cluster: \u0026Vec\u003cCluster\u003e, host_name: \u0026str) -\u003e bool {\n    for c in cluster {\n        for host in \u0026c.hosts {\n            if host.name == host_name {\n                return true;\n            }\n        }\n    }\n    false\n}\n\npub fn get_cluster_state_from_name(cluster: \u0026Vec\u003cCluster\u003e, cluster_name: \u0026String) -\u003e ResourceState {\n    for c in cluster {\n        if c.name == *cluster_name {\n            return c.state.clone();\n        }\n    }\n    ResourceState::Unknown\n}\n\npub fn get_host_state_from_name(cluster: \u0026Vec\u003cCluster\u003e, host_name: \u0026String) -\u003e ResourceState {\n    for c in cluster {\n        for host in \u0026c.hosts {\n            if host.name == *host_name {\n                return host.state.clone();\n            }\n        }\n    }\n    ResourceState::Unknown\n}\n\npub fn contains_cluster(cluster: \u0026Vec\u003cCluster\u003e, cluster_name: \u0026str) -\u003e bool {\n    for c in cluster {\n        if c.name == cluster_name {\n            return true;\n        }\n    }\n    false\n}\n\n// Compare two strings that may contain numbers (natural sort)\npub fn compare_string_with_number(a: \u0026str, b: \u0026str) -\u003e Ordering {\n    let mut strings_a: Vec\u003cString\u003e = Vec::new();\n    let mut strings_b: Vec\u003cString\u003e = Vec::new();\n    let mut int_a: Vec\u003ci32\u003e = Vec::new();\n    let mut int_b: Vec\u003ci32\u003e = Vec::new();\n    let mut order_a: Vec\u003cString\u003e = Vec::new();\n    let mut order_b: Vec\u003cString\u003e = Vec::new();\n\n    let mut curr = 0;\n\n    let mut string_count = 0;\n\n    if !a.chars().next().unwrap().is_numeric() {\n        order_a.push(\"string\".to_string());\n        strings_a.push(String::new());\n    }\n\n    for c in a.chars() {\n        if c.is_numeric() {\n            curr = curr * 10 + c.to_digit(10).unwrap() as i32;\n        } else if curr == 0 {\n            strings_a[string_count].push(c);\n        } else {\n            strings_a.push(String::new());\n            string_count += 1;\n            strings_a[string_count].push(c);\n            int_a.push(curr);\n            order_a.push(\"int\".to_string());\n            order_a.push(\"string\".to_string());\n            curr = 0;\n        }\n    }\n\n    if curr != 0 {\n        int_a.push(curr);\n        order_a.push(\"int\".to_string());\n    }\n\n    curr = 0;\n    string_count = 0;\n\n    if !b.chars().next().unwrap().is_numeric() {\n        order_b.push(\"string\".to_string());\n        strings_b.push(String::new());\n    }\n\n    for c in b.chars() {\n        if c.is_numeric() {\n            curr = curr * 10 + c.to_digit(10).unwrap() as i32;\n        } else if curr == 0 {\n            strings_b[string_count].push(c);\n        } else {\n            strings_b.push(String::new());\n            string_count += 1;\n            strings_b[string_count].push(c);\n            int_b.push(curr);\n            order_b.push(\"int\".to_string());\n            order_b.push(\"string\".to_string());\n            curr = 0;\n        }\n    }\n\n    if curr != 0 {\n        int_b.push(curr);\n        order_b.push(\"int\".to_string());\n    }\n\n    // Once the three vectors are created, we can compare them\n    // the comparison will be done in the same order as the order vector\n    let mut index_int = 0;\n    let mut index_string = 0;\n\n    for i in 0..order_a.len() {\n        if order_a[i] == \"int\" \u0026\u0026 order_b[i] == \"int\" {\n            if int_a[index_int] \u003c int_b[index_int] {\n                return Ordering::Less;\n            } else if int_a[index_int] \u003e int_b[index_int] {\n                return Ordering::Greater;\n            }\n            index_int += 1;\n        } else if order_a[i] == \"string\" \u0026\u0026 order_b[i] == \"string\" {\n            if strings_a[index_string] \u003c strings_b[index_string] {\n                return Ordering::Less;\n            } else if strings_a[index_string] \u003e strings_b[index_string] {\n                return Ordering::Greater;\n            }\n            index_string += 1;\n        } else if order_a[i] == \"int\" \u0026\u0026 order_b[i] == \"string\" {\n            return Ordering::Less;\n        } else if order_a[i] == \"string\" \u0026\u0026 order_b[i] == \"int\" {\n            return Ordering::Greater;\n        }\n    }\n\n    if order_a.len() \u003c order_b.len() {\n        return Ordering::Less;\n    } else if order_a.len() \u003e order_b.len() {\n        return Ordering::Greater;\n    }\n\n    return Ordering::Equal;\n}\n\n/* Return the name of all the clusters where the job is running\n * Used for job filtering and display in the UI\n */\npub fn get_clusters_for_job(job: \u0026Job, clusters: \u0026Vec\u003cCluster\u003e) -\u003e Vec\u003cString\u003e {\n    let mut result: Vec\u003cString\u003e = Vec::new();\n\n    for resource in \u0026job.assigned_resources {\n        for cluster in clusters {\n            if !result.contains(\u0026cluster.name) \u0026\u0026 cluster.resource_ids.contains(\u0026resource) {\n                result.push(cluster.name.clone());\n            }\n        }\n    }\n\n    result\n}\n\n/* Returns the names of all hosts where a job is running\n * Used for job filtering and display in the UI */\npub fn get_hosts_for_job(job: \u0026Job, clusters: \u0026Vec\u003cCluster\u003e) -\u003e Vec\u003cString\u003e {\n    let mut result: Vec\u003cString\u003e = Vec::new();\n\n    for resource in \u0026job.assigned_resources {\n        for cluster in clusters {\n            if cluster.resource_ids.contains(\u0026resource) {\n                for host in \u0026cluster.hosts {\n                    if !result.contains(\u0026host.name) \u0026\u0026 host.resource_ids.contains(\u0026resource) {\n                        result.push(host.name.clone());\n                    }\n                }\n            }\n        }\n    }\n\n    result\n}\n\n/*\nCreates a subset of the cluster hierarchy that only contains resources used by the job\n\nThis is used to create a view of the infrastructure specific to a job, useful for\njob details and resource utilization displays. The returned structure mirrors the\nfull cluster hierarchy but includes only the elements relevant to the job.\n */\npub fn get_tree_structure_for_job(job: \u0026Job, clusters: \u0026Vec\u003cCluster\u003e) -\u003e Vec\u003cCluster\u003e {\n    let mut result: Vec\u003cCluster\u003e = Vec::new();\n\n    for resource in \u0026job.assigned_resources {\n        for cluster in clusters {\n            if cluster.resource_ids.contains(\u0026resource) {\n                // if the cluster already exists in the result, add the resource to the resource_ids\n                if let Some(existing_cluster) = result.iter_mut().find(|c| c.name == cluster.name) {\n                    existing_cluster.resource_ids.push(*resource);\n                    // Then check if in the existing cluster the host already exists\n                    for host in \u0026cluster.hosts {\n                        if host.resource_ids.contains(\u0026resource) {\n                            if let Some(existing_host) = existing_cluster\n                                .hosts\n                                .iter_mut()\n                                .find(|h| h.name == host.name)\n                            {\n                                existing_host.resource_ids.push(*resource);\n                                // Then check if in the existing host the CPU already exists\n                                for cpu in \u0026host.cpus {\n                                    if cpu.resource_ids.contains(\u0026resource) {\n                                        if let Some(existing_cpu) = existing_host\n                                            .cpus\n                                            .iter_mut()\n                                            .find(|c| c.name == cpu.name)\n                                        {\n                                            existing_cpu.resource_ids.push(*resource);\n                                            // Then check if in the existing CPU the resource already exists\n                                            if let Some(existing_res) = existing_cpu\n                                                .resources\n                                                .iter_mut()\n                                                .find(|res| res.id == *resource)\n                                            {\n                                                existing_res.thread_count += 1;\n                                            } else {\n                                                let res = cpu\n                                                    .resources\n                                                    .iter()\n                                                    .find(|res| res.id == *resource);\n\n                                                if let Some(res) = res {\n                                                    existing_cpu.resources.push(res.clone());\n                                                }\n                                            }\n                                        } else {\n                                            let mut new_cpu = Cpu {\n                                                name: cpu.name.clone(),\n                                                resource_ids: vec![*resource],\n                                                chassis: cpu.chassis.clone(),\n                                                core_count: cpu.core_count,\n                                                cpufreq: cpu.cpufreq,\n                                                resources: Vec::new(),\n                                            };\n\n                                            let res = cpu\n                                                .resources\n                                                .iter()\n                                                .find(|res| res.id == *resource);\n\n                                            if let Some(res) = res {\n                                                new_cpu.resources.push(res.clone());\n                                            }\n\n                                            existing_host.cpus.push(new_cpu);\n                                        }\n                                    }\n                                }\n                            } else {\n                                let mut new_host = Host {\n                                    name: host.name.clone(),\n                                    resource_ids: vec![*resource],\n                                    cpus: Vec::new(),\n                                    network_address: host.network_address.clone(),\n                                    state: ResourceState::Unknown,\n                                };\n\n                                for cpu in \u0026host.cpus {\n                                    let mut new_cpu = Cpu {\n                                        name: cpu.name.clone(),\n                                        resource_ids: vec![*resource],\n                                        chassis: cpu.chassis.clone(),\n                                        core_count: cpu.core_count,\n                                        cpufreq: cpu.cpufreq,\n                                        resources: Vec::new(),\n                                    };\n\n                                    let res = cpu.resources.iter().find(|res| res.id == *resource);\n\n                                    if let Some(res) = res {\n                                        new_cpu.resources.push(res.clone());\n                                    }\n\n                                    new_host.cpus.push(new_cpu);\n                                }\n\n                                existing_cluster.hosts.push(new_host);\n                            }\n                        }\n                    }\n                } else {\n                    let new_cluster = Cluster {\n                        name: cluster.name.clone(),\n                        // new resource_ids with only the current resource\n                        resource_ids: vec![*resource],\n\n                        // for the host only keep the hosts that the job is running on\n                        hosts: cluster\n                            .hosts\n                            .iter()\n                            .filter(|host| host.resource_ids.contains(\u0026resource))\n                            .map(|host| {\n                                let mut new_host = Host {\n                                    name: host.name.clone(),\n                                    resource_ids: vec![*resource],\n                                    cpus: Vec::new(),\n                                    network_address: host.network_address.clone(),\n                                    state: ResourceState::Unknown,\n                                };\n\n                                // for the CPU only keep the CPUs that the job is running on\n                                new_host.cpus = host\n                                    .cpus\n                                    .iter()\n                                    .filter(|cpu| cpu.resource_ids.contains(\u0026resource))\n                                    .map(|cpu| {\n                                        let mut new_cpu = Cpu {\n                                            name: cpu.name.clone(),\n                                            resource_ids: vec![*resource],\n                                            chassis: cpu.chassis.clone(),\n                                            core_count: cpu.core_count,\n                                            cpufreq: cpu.cpufreq,\n                                            // get the current resource from the CPU resources and create a new vector with only that resource\n                                            resources: Vec::new(),\n                                        };\n\n                                        let res =\n                                            cpu.resources.iter().find(|res| res.id == *resource);\n\n                                        if let Some(res) = res {\n                                            new_cpu.resources.push(res.clone());\n                                        }\n\n                                        new_cpu\n                                    })\n                                    .collect();\n\n                                new_host\n                            })\n                            .collect(),\n                        state: ResourceState::Unknown,\n                    };\n\n                    result.push(new_cluster);\n                }\n            }\n        }\n    }\n    result\n}\n","traces":[{"line":13,"address":[4890192],"length":1,"stats":{"Line":1}},{"line":14,"address":[4890200],"length":1,"stats":{"Line":1}},{"line":15,"address":[4890210],"length":1,"stats":{"Line":1}},{"line":16,"address":[4890226],"length":1,"stats":{"Line":1}},{"line":18,"address":[4890241],"length":1,"stats":{"Line":1}},{"line":19,"address":[4890261],"length":1,"stats":{"Line":1}},{"line":20,"address":[4890279],"length":1,"stats":{"Line":1}},{"line":22,"address":[4890289],"length":1,"stats":{"Line":1}},{"line":26,"address":[4890336,4890757],"length":1,"stats":{"Line":1}},{"line":27,"address":[4890366],"length":1,"stats":{"Line":1}},{"line":29,"address":[4890385,4890560,4890453],"length":1,"stats":{"Line":3}},{"line":30,"address":[4890573],"length":1,"stats":{"Line":1}},{"line":31,"address":[4890702],"length":1,"stats":{"Line":1}},{"line":35,"address":[4890526],"length":1,"stats":{"Line":1}},{"line":38,"address":[4890784],"length":1,"stats":{"Line":1}},{"line":39,"address":[4890803,4890870],"length":1,"stats":{"Line":2}},{"line":40,"address":[4890880],"length":1,"stats":{"Line":1}},{"line":41,"address":[4890907],"length":1,"stats":{"Line":1}},{"line":44,"address":[4890863],"length":1,"stats":{"Line":1}},{"line":47,"address":[4890928],"length":1,"stats":{"Line":1}},{"line":48,"address":[4890976,4891052],"length":1,"stats":{"Line":2}},{"line":49,"address":[4891069],"length":1,"stats":{"Line":1}},{"line":50,"address":[4891102],"length":1,"stats":{"Line":1}},{"line":53,"address":[4891037],"length":1,"stats":{"Line":1}},{"line":57,"address":[4891136,4891417],"length":1,"stats":{"Line":1}},{"line":58,"address":[4891163],"length":1,"stats":{"Line":1}},{"line":60,"address":[4891182,4891250,4891355],"length":1,"stats":{"Line":3}},{"line":61,"address":[4891368],"length":1,"stats":{"Line":1}},{"line":64,"address":[4891321],"length":1,"stats":{"Line":1}},{"line":68,"address":[4891440,4891780],"length":1,"stats":{"Line":1}},{"line":69,"address":[4891470],"length":1,"stats":{"Line":1}},{"line":71,"address":[4891557,4891670,4891489],"length":1,"stats":{"Line":3}},{"line":72,"address":[4891686],"length":1,"stats":{"Line":1}},{"line":75,"address":[4891636],"length":1,"stats":{"Line":1}},{"line":78,"address":[4891808],"length":1,"stats":{"Line":1}},{"line":79,"address":[4891827,4891890],"length":1,"stats":{"Line":2}},{"line":80,"address":[4891932,4891900],"length":1,"stats":{"Line":2}},{"line":81,"address":[4891987],"length":1,"stats":{"Line":1}},{"line":82,"address":[4892003],"length":1,"stats":{"Line":1}},{"line":86,"address":[4891883],"length":1,"stats":{"Line":1}},{"line":89,"address":[4892016],"length":1,"stats":{"Line":1}},{"line":90,"address":[4892103,4892035],"length":1,"stats":{"Line":2}},{"line":91,"address":[4892117],"length":1,"stats":{"Line":1}},{"line":92,"address":[4892141],"length":1,"stats":{"Line":1}},{"line":95,"address":[4892091],"length":1,"stats":{"Line":1}},{"line":98,"address":[4892160],"length":1,"stats":{"Line":1}},{"line":99,"address":[4892242,4892179],"length":1,"stats":{"Line":2}},{"line":100,"address":[4892282,4892252],"length":1,"stats":{"Line":2}},{"line":101,"address":[4892346],"length":1,"stats":{"Line":1}},{"line":102,"address":[4892361],"length":1,"stats":{"Line":1}},{"line":106,"address":[4892235],"length":1,"stats":{"Line":1}},{"line":109,"address":[4892384],"length":1,"stats":{"Line":1}},{"line":110,"address":[4892403,4892466],"length":1,"stats":{"Line":2}},{"line":111,"address":[4892476],"length":1,"stats":{"Line":1}},{"line":112,"address":[4892503],"length":1,"stats":{"Line":1}},{"line":115,"address":[4892459],"length":1,"stats":{"Line":1}},{"line":119,"address":[4897440,4892512],"length":1,"stats":{"Line":1}},{"line":120,"address":[4892583],"length":1,"stats":{"Line":1}},{"line":121,"address":[4892624],"length":1,"stats":{"Line":1}},{"line":122,"address":[4892672],"length":1,"stats":{"Line":1}},{"line":123,"address":[4892732],"length":1,"stats":{"Line":1}},{"line":124,"address":[4892792],"length":1,"stats":{"Line":1}},{"line":125,"address":[4892852],"length":1,"stats":{"Line":1}},{"line":127,"address":[4892928],"length":1,"stats":{"Line":1}},{"line":129,"address":[4892939],"length":1,"stats":{"Line":1}},{"line":131,"address":[4893031,4893151,4892951],"length":1,"stats":{"Line":3}},{"line":132,"address":[4893244,4893178],"length":1,"stats":{"Line":2}},{"line":133,"address":[4893286],"length":1,"stats":{"Line":1}},{"line":136,"address":[4893345,4893480,4893221],"length":1,"stats":{"Line":6}},{"line":137,"address":[4897414,4896825,4893501],"length":1,"stats":{"Line":4}},{"line":138,"address":[4897275,4897419,4897392,4896843],"length":1,"stats":{"Line":3}},{"line":139,"address":[4896831,4897258],"length":1,"stats":{"Line":2}},{"line":140,"address":[4896874,4896936],"length":1,"stats":{"Line":4}},{"line":142,"address":[4896948,4896917],"length":1,"stats":{"Line":2}},{"line":143,"address":[4896982,4897052],"length":1,"stats":{"Line":1}},{"line":144,"address":[4897017,4897085],"length":1,"stats":{"Line":2}},{"line":145,"address":[4897092],"length":1,"stats":{"Line":1}},{"line":146,"address":[4897125],"length":1,"stats":{"Line":1}},{"line":147,"address":[4897186],"length":1,"stats":{"Line":1}},{"line":148,"address":[4897247],"length":1,"stats":{"Line":1}},{"line":152,"address":[4893468],"length":1,"stats":{"Line":1}},{"line":153,"address":[4893580],"length":1,"stats":{"Line":1}},{"line":154,"address":[4893613],"length":1,"stats":{"Line":1}},{"line":157,"address":[4893534],"length":1,"stats":{"Line":1}},{"line":158,"address":[4893545],"length":1,"stats":{"Line":1}},{"line":160,"address":[4893815,4893695,4893557],"length":1,"stats":{"Line":4}},{"line":161,"address":[4893842,4893908],"length":1,"stats":{"Line":4}},{"line":162,"address":[4893950],"length":1,"stats":{"Line":2}},{"line":165,"address":[4893885,4894009,4894144],"length":1,"stats":{"Line":6}},{"line":166,"address":[4896792,4896203,4894165],"length":1,"stats":{"Line":5}},{"line":167,"address":[4896653,4896797,4896221,4896770],"length":1,"stats":{"Line":3}},{"line":168,"address":[4896209,4896636],"length":1,"stats":{"Line":3}},{"line":169,"address":[4896252,4896314],"length":1,"stats":{"Line":4}},{"line":171,"address":[4896295,4896326],"length":1,"stats":{"Line":2}},{"line":172,"address":[4896430,4896360],"length":1,"stats":{"Line":1}},{"line":173,"address":[4896395,4896463],"length":1,"stats":{"Line":2}},{"line":174,"address":[4896470],"length":1,"stats":{"Line":1}},{"line":175,"address":[4896503],"length":1,"stats":{"Line":1}},{"line":176,"address":[4896564],"length":1,"stats":{"Line":1}},{"line":177,"address":[4896625],"length":1,"stats":{"Line":1}},{"line":181,"address":[4894132],"length":1,"stats":{"Line":1}},{"line":182,"address":[4894233],"length":1,"stats":{"Line":1}},{"line":183,"address":[4894266],"length":1,"stats":{"Line":1}},{"line":188,"address":[4894182],"length":1,"stats":{"Line":1}},{"line":189,"address":[4894194],"length":1,"stats":{"Line":1}},{"line":191,"address":[4894340,4894508,4894206],"length":1,"stats":{"Line":3}},{"line":192,"address":[4894750,4894837,4894532,4896065],"length":1,"stats":{"Line":5}},{"line":193,"address":[4894916,4895824],"length":1,"stats":{"Line":2}},{"line":194,"address":[4895936],"length":1,"stats":{"Line":1}},{"line":195,"address":[4895894,4895957],"length":1,"stats":{"Line":2}},{"line":196,"address":[4896039],"length":1,"stats":{"Line":1}},{"line":198,"address":[4896057,4896015,4896070],"length":1,"stats":{"Line":0}},{"line":199,"address":[4894792,4895791,4894969,4895056],"length":1,"stats":{"Line":8}},{"line":200,"address":[4895135,4895506],"length":1,"stats":{"Line":4}},{"line":201,"address":[4895637],"length":1,"stats":{"Line":1}},{"line":202,"address":[4895650,4895595],"length":1,"stats":{"Line":3}},{"line":203,"address":[4895762],"length":1,"stats":{"Line":1}},{"line":205,"address":[4895783,4895796,4895735],"length":1,"stats":{"Line":3}},{"line":206,"address":[4895188,4895272,4895011],"length":1,"stats":{"Line":0}},{"line":207,"address":[4895348],"length":1,"stats":{"Line":0}},{"line":208,"address":[4895369,4895230],"length":1,"stats":{"Line":0}},{"line":209,"address":[4895493],"length":1,"stats":{"Line":0}},{"line":213,"address":[4894481,4894569],"length":1,"stats":{"Line":2}},{"line":214,"address":[4894644],"length":1,"stats":{"Line":0}},{"line":215,"address":[4894617,4894654],"length":1,"stats":{"Line":2}},{"line":216,"address":[4894712],"length":1,"stats":{"Line":0}},{"line":219,"address":[4894702],"length":1,"stats":{"Line":1}},{"line":225,"address":[4897472,4898112],"length":1,"stats":{"Line":1}},{"line":226,"address":[4897515],"length":1,"stats":{"Line":1}},{"line":228,"address":[4897537,4897618,4897758],"length":1,"stats":{"Line":3}},{"line":229,"address":[4897774],"length":1,"stats":{"Line":1}},{"line":230,"address":[4897904],"length":1,"stats":{"Line":1}},{"line":231,"address":[4898054],"length":1,"stats":{"Line":1}},{"line":236,"address":[4897710],"length":1,"stats":{"Line":1}},{"line":241,"address":[4898144,4899042],"length":1,"stats":{"Line":1}},{"line":242,"address":[4898199],"length":1,"stats":{"Line":1}},{"line":244,"address":[4898224,4898311,4898466],"length":1,"stats":{"Line":3}},{"line":245,"address":[4898482],"length":1,"stats":{"Line":1}},{"line":246,"address":[4898624],"length":1,"stats":{"Line":1}},{"line":247,"address":[4898700],"length":1,"stats":{"Line":1}},{"line":248,"address":[4898834],"length":1,"stats":{"Line":1}},{"line":249,"address":[4898984],"length":1,"stats":{"Line":1}},{"line":256,"address":[4898415],"length":1,"stats":{"Line":1}},{"line":266,"address":[4902506,4904786,4899072],"length":1,"stats":{"Line":1}},{"line":267,"address":[4899127],"length":1,"stats":{"Line":1}},{"line":269,"address":[4899255,4899172,4899410],"length":1,"stats":{"Line":3}},{"line":270,"address":[4899426],"length":1,"stats":{"Line":1}},{"line":271,"address":[4899577],"length":1,"stats":{"Line":1}},{"line":273,"address":[4899674],"length":1,"stats":{"Line":3}},{"line":274,"address":[4899868],"length":1,"stats":{"Line":1}},{"line":276,"address":[4899938],"length":1,"stats":{"Line":1}},{"line":277,"address":[4900093],"length":1,"stats":{"Line":1}},{"line":278,"address":[4903354,4900190],"length":1,"stats":{"Line":2}},{"line":281,"address":[5639424,5639441],"length":1,"stats":{"Line":2}},{"line":283,"address":[4900388],"length":1,"stats":{"Line":0}},{"line":285,"address":[4900458],"length":1,"stats":{"Line":0}},{"line":286,"address":[4900613],"length":1,"stats":{"Line":0}},{"line":287,"address":[4902483,4900710],"length":1,"stats":{"Line":0}},{"line":290,"address":[5639489,5639472],"length":1,"stats":{"Line":0}},{"line":292,"address":[4900908],"length":1,"stats":{"Line":0}},{"line":294,"address":[4900978,4901092,4901248],"length":1,"stats":{"Line":0}},{"line":297,"address":[5639530,5639520],"length":1,"stats":{"Line":0}},{"line":299,"address":[4901176,4901245,4901253],"length":1,"stats":{"Line":0}},{"line":301,"address":[4901360,4901289,4901203],"length":1,"stats":{"Line":0}},{"line":304,"address":[4901344],"length":1,"stats":{"Line":0}},{"line":306,"address":[4901391],"length":1,"stats":{"Line":0}},{"line":307,"address":[4901448],"length":1,"stats":{"Line":0}},{"line":312,"address":[4900948],"length":1,"stats":{"Line":0}},{"line":313,"address":[4901585,4901515],"length":1,"stats":{"Line":0}},{"line":314,"address":[4901690],"length":1,"stats":{"Line":0}},{"line":315,"address":[4901765],"length":1,"stats":{"Line":0}},{"line":316,"address":[4901775],"length":1,"stats":{"Line":0}},{"line":317,"address":[4901797],"length":1,"stats":{"Line":0}},{"line":320,"address":[4902021,4902105,4902176],"length":1,"stats":{"Line":0}},{"line":323,"address":[4902160],"length":1,"stats":{"Line":0}},{"line":325,"address":[4902207],"length":1,"stats":{"Line":0}},{"line":326,"address":[4902252,4902448],"length":1,"stats":{"Line":0}},{"line":329,"address":[4902294],"length":1,"stats":{"Line":0}},{"line":335,"address":[4900428],"length":1,"stats":{"Line":1}},{"line":336,"address":[4902520,4902590],"length":1,"stats":{"Line":2}},{"line":337,"address":[4902695],"length":1,"stats":{"Line":1}},{"line":338,"address":[4902754],"length":1,"stats":{"Line":1}},{"line":342,"address":[4903064,4902980,4903306,4904253],"length":1,"stats":{"Line":4}},{"line":344,"address":[4903327],"length":1,"stats":{"Line":1}},{"line":345,"address":[4903428,4903364],"length":1,"stats":{"Line":2}},{"line":346,"address":[4903518],"length":1,"stats":{"Line":1}},{"line":347,"address":[4903590],"length":1,"stats":{"Line":1}},{"line":348,"address":[4903597],"length":1,"stats":{"Line":1}},{"line":349,"address":[4903616],"length":1,"stats":{"Line":1}},{"line":352,"address":[4903831,4903903],"length":1,"stats":{"Line":4}},{"line":354,"address":[4903987],"length":1,"stats":{"Line":1}},{"line":355,"address":[4904032,4904218],"length":1,"stats":{"Line":2}},{"line":358,"address":[4904063],"length":1,"stats":{"Line":1}},{"line":361,"address":[4903160],"length":1,"stats":{"Line":1}},{"line":367,"address":[4899908],"length":1,"stats":{"Line":1}},{"line":369,"address":[4904299,4904363],"length":1,"stats":{"Line":2}},{"line":372,"address":[4904531,4904456],"length":1,"stats":{"Line":2}},{"line":418,"address":[4904751],"length":1,"stats":{"Line":1}},{"line":423,"address":[4899359],"length":1,"stats":{"Line":1}}],"covered":168,"coverable":199},{"path":["/","home","amaury","Documents","info5","0projet","app","src","tests","filters_tests.rs"],"content":"#[cfg(test)]\nmod tests {\n    use crate::models::data_structure::application_context::ApplicationContext;\n    use crate::models::data_structure::cluster::Cluster;\n    use crate::models::data_structure::cpu::Cpu;\n    use crate::models::data_structure::filters::JobFilters;\n    use crate::models::data_structure::host::Host;\n    use crate::models::data_structure::job::{Job, JobState};\n    use crate::models::data_structure::resource::{Resource, ResourceState};\n    use egui::Color32;\n\n    // Helper function to create a set of test jobs with different properties\n    fn create_test_jobs() -\u003e Vec\u003cJob\u003e {\n        vec![\n            // Job 1: owner=\"user1\", state=Running, resources=[101, 102]\n            Job {\n                id: 1001,\n                owner: \"user1\".to_string(),\n                state: JobState::Running,\n                walltime: 3600,\n                start_time: 1672527600, // 2023-01-01 00:00:00\n                scheduled_start: 1672527600,\n                assigned_resources: vec![101, 102],\n                main_resource_state: ResourceState::Alive,\n                clusters: vec![\"cluster1\".to_string()], // Pre-populate for test simplicity\n                hosts: vec![\"host1\".to_string(), \"host2\".to_string()], // Pre-populate for test simplicity\n                command: \"test_command1\".to_string(),\n                message: Some(\"test_message1\".to_string()),\n                queue: \"default\".to_string(),\n                submission_time: 1672527500,\n                stop_time: 0,\n                exit_code: Some(0),\n                gantt_color: Color32::from_rgb(10, 100, 100),\n            },\n            // Job 2: owner=\"user2\", state=Waiting, resources=[103]\n            Job {\n                id: 1002,\n                owner: \"user2\".to_string(),\n                state: JobState::Waiting,\n                walltime: 7200,\n                start_time: 1672614000, // 2023-01-02 00:00:00\n                scheduled_start: 1672614000,\n                assigned_resources: vec![103],\n                main_resource_state: ResourceState::Alive,\n                clusters: vec![\"cluster2\".to_string()], // Pre-populate for test simplicity\n                hosts: vec![\"host3\".to_string()],       // Pre-populate for test simplicity\n                command: \"test_command2\".to_string(),\n                message: Some(\"test_message2\".to_string()),\n                queue: \"high_priority\".to_string(),\n                submission_time: 1672613900,\n                stop_time: 0,\n                exit_code: None,\n                gantt_color: Color32::from_rgb(10, 100, 100),\n            },\n            // Job 3: owner=\"user1\", state=Terminated, resources=[104]\n            Job {\n                id: 1003,\n                owner: \"user1\".to_string(),\n                state: JobState::Terminated,\n                walltime: 1800,\n                start_time: 1672700400, // 2023-01-03 00:00:00\n                scheduled_start: 1672700400,\n                assigned_resources: vec![104],\n                main_resource_state: ResourceState::Alive,\n                clusters: vec![\"cluster2\".to_string()], // Pre-populate for test simplicity\n                hosts: vec![\"host4\".to_string()],       // Pre-populate for test simplicity\n                command: \"test_command3\".to_string(),\n                message: Some(\"test_message3\".to_string()),\n                queue: \"default\".to_string(),\n                submission_time: 1672700300,\n                stop_time: 1672702200, // 30 minutes after start\n                exit_code: Some(0),\n                gantt_color: Color32::from_rgb(10, 100, 100),\n            },\n        ]\n    }\n\n    // Helper function to create test clusters\n    fn create_test_clusters() -\u003e Vec\u003cCluster\u003e {\n        vec![\n            // Cluster 1 with resources 101, 102\n            Cluster {\n                name: \"cluster1\".to_string(),\n                hosts: vec![\n                    // Host 1 with resource 101\n                    Host {\n                        name: \"host1\".to_string(),\n                        cpus: vec![Cpu {\n                            name: \"cpu1\".to_string(),\n                            resources: vec![Resource {\n                                id: 101,\n                                state: ResourceState::Alive,\n                                thread_count: 4,\n                            }],\n                            core_count: 2,\n                            cpufreq: 2.4,\n                            chassis: \"rack1\".to_string(),\n                            resource_ids: vec![101],\n                        }],\n                        network_address: \"10.0.0.1\".to_string(),\n                        resource_ids: vec![101],\n                        state: ResourceState::Alive,\n                    },\n                    // Host 2 with resource 102\n                    Host {\n                        name: \"host2\".to_string(),\n                        cpus: vec![Cpu {\n                            name: \"cpu2\".to_string(),\n                            resources: vec![Resource {\n                                id: 102,\n                                state: ResourceState::Alive,\n                                thread_count: 8,\n                            }],\n                            core_count: 4,\n                            cpufreq: 3.2,\n                            chassis: \"rack1\".to_string(),\n                            resource_ids: vec![102],\n                        }],\n                        network_address: \"10.0.0.2\".to_string(),\n                        resource_ids: vec![102],\n                        state: ResourceState::Alive,\n                    },\n                ],\n                resource_ids: vec![101, 102],\n                state: ResourceState::Alive,\n            },\n            // Cluster 2 with resources 103, 104\n            Cluster {\n                name: \"cluster2\".to_string(),\n                hosts: vec![\n                    // Host 3 with resource 103\n                    Host {\n                        name: \"host3\".to_string(),\n                        cpus: vec![Cpu {\n                            name: \"cpu3\".to_string(),\n                            resources: vec![Resource {\n                                id: 103,\n                                state: ResourceState::Alive,\n                                thread_count: 4,\n                            }],\n                            core_count: 2,\n                            cpufreq: 2.8,\n                            chassis: \"rack2\".to_string(),\n                            resource_ids: vec![103],\n                        }],\n                        network_address: \"10.0.0.3\".to_string(),\n                        resource_ids: vec![103],\n                        state: ResourceState::Alive,\n                    },\n                    // Host 4 with resource 104\n                    Host {\n                        name: \"host4\".to_string(),\n                        cpus: vec![Cpu {\n                            name: \"cpu4\".to_string(),\n                            resources: vec![Resource {\n                                id: 104,\n                                state: ResourceState::Alive,\n                                thread_count: 4,\n                            }],\n                            core_count: 2,\n                            cpufreq: 2.8,\n                            chassis: \"rack2\".to_string(),\n                            resource_ids: vec![104],\n                        }],\n                        network_address: \"10.0.0.4\".to_string(),\n                        resource_ids: vec![104],\n                        state: ResourceState::Alive,\n                    },\n                ],\n                resource_ids: vec![103, 104],\n                state: ResourceState::Alive,\n            },\n        ]\n    }\n\n    // Helper function to create and populate an ApplicationContext with test data\n    fn setup_test_app_context() -\u003e ApplicationContext {\n        let mut context = ApplicationContext::default();\n\n        // Add test jobs and clusters\n        context.all_jobs = create_test_jobs();\n        context.all_clusters = create_test_clusters();\n\n        // Jobs clusters and hosts are already populated in create_test_jobs\n        // This is normally done by the application when loading jobs\n\n        // Initially, filtered_jobs should contain all jobs\n        context.filtered_jobs = context.all_jobs.clone();\n\n        context\n    }\n\n    #[test]\n    /// Tests filtering jobs by owner\n    fn test_filter_by_owner() {\n        let mut context = setup_test_app_context();\n\n        // Filter by owner \"user1\"\n        context.filters.set_owners(Some(vec![\"user1\".to_string()]));\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            2,\n            \"Should have 2 jobs from user1\"\n        );\n        assert!(\n            context.filtered_jobs.iter().all(|j| j.owner == \"user1\"),\n            \"All filtered jobs should be owned by user1\"\n        );\n\n        // Filter by owner \"user2\"\n        context.filters.set_owners(Some(vec![\"user2\".to_string()]));\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            1,\n            \"Should have 1 job from user2\"\n        );\n        assert_eq!(\n            context.filtered_jobs[0].owner, \"user2\",\n            \"The job should be owned by user2\"\n        );\n\n        // Filter by multiple owners\n        context\n            .filters\n            .set_owners(Some(vec![\"user1\".to_string(), \"user2\".to_string()]));\n        context.filter_jobs();\n\n        assert_eq!(context.filtered_jobs.len(), 3, \"Should have all 3 jobs\");\n\n        // Reset owner filter\n        context.filters.set_owners(None);\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            3,\n            \"Should have all 3 jobs when owner filter is None\"\n        );\n    }\n\n    #[test]\n    /// Tests filtering jobs by state\n    fn test_filter_by_state() {\n        let mut context = setup_test_app_context();\n\n        // Filter by Running state\n        context.filters.set_states(Some(vec![JobState::Running]));\n        context.filter_jobs();\n\n        assert_eq!(context.filtered_jobs.len(), 1, \"Should have 1 Running job\");\n        assert_eq!(\n            context.filtered_jobs[0].state,\n            JobState::Running,\n            \"The job should be in Running state\"\n        );\n\n        // Filter by multiple states\n        context\n            .filters\n            .set_states(Some(vec![JobState::Running, JobState::Waiting]));\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            2,\n            \"Should have 2 jobs with Running or Waiting states\"\n        );\n        assert!(\n            context\n                .filtered_jobs\n                .iter()\n                .all(|j| j.state == JobState::Running || j.state == JobState::Waiting),\n            \"All filtered jobs should be Running or Waiting\"\n        );\n\n        // Reset state filter\n        context.filters.set_states(None);\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            3,\n            \"Should have all 3 jobs when state filter is None\"\n        );\n    }\n\n    #[test]\n    /// Tests filtering jobs by time range\n    fn test_filter_by_time_range() {\n        let mut context = setup_test_app_context();\n\n        // Filter by start time after Jan 1, 2023\n        context.filters.scheduled_start_time = Some(1672527600);\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            3,\n            \"Should have 3 jobs starting after Jan 1\"\n        );\n\n        // Filter by start time after Jan 2, 2023\n        context.filters.scheduled_start_time = Some(1672614000);\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            3,\n            \"Toutes les tâches doivent rester avec le début après Jan 2\"\n        );\n\n        // Filter by end time before Jan 3, 2023 + 1 hour\n        context.filters.wall_time = Some(1672704000); // Jan 3 + 1 hour\n        context.filter_jobs();\n\n        // Correction: only 2 jobs should remain (jobs 2 and 3)\n        assert_eq!(\n            context.filtered_jobs.len(),\n            2,\n            \"Only tasks within the time range should remain\"\n        );\n\n        // Reset time filters\n        context.filters.scheduled_start_time = None;\n        context.filters.wall_time = None;\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            3,\n            \"Should have all 3 jobs when time filters are None\"\n        );\n    }\n\n    #[test]\n    /// Tests filtering jobs by cluster\n    fn test_filter_by_cluster() {\n        let mut context = setup_test_app_context();\n\n        // Créer un objet cluster avec la hiérarchie complète jusqu'aux ressources\n        let cluster1_filter = Cluster {\n            name: \"cluster1\".to_string(),\n            hosts: vec![Host {\n                name: \"host1\".to_string(),\n                cpus: vec![Cpu {\n                    name: \"cpu1\".to_string(),\n                    resources: vec![Resource {\n                        id: 101,\n                        state: ResourceState::Unknown,\n                        thread_count: 0,\n                    }],\n                    core_count: 0,\n                    cpufreq: 0.0,\n                    chassis: String::new(),\n                    resource_ids: vec![101],\n                }],\n                network_address: String::new(),\n                resource_ids: vec![101],\n                state: ResourceState::Unknown,\n            }],\n            resource_ids: vec![101],\n            state: ResourceState::Unknown,\n        };\n\n        // Filtrer par cluster1\n        context.filters.clusters = Some(vec![cluster1_filter]);\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            1,\n            \"Should have 1 job from cluster1\"\n        );\n        assert_eq!(context.filtered_jobs[0].id, 1001, \"Job ID should be 1001\");\n\n        // Reset cluster filter\n        context.filters.clusters = None;\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            3,\n            \"Should have all 3 jobs when cluster filter is None\"\n        );\n    }\n\n    #[test]\n    /// Tests filtering jobs by host\n    fn test_filter_by_host() {\n        let mut context = setup_test_app_context();\n\n        // Créer un objet cluster contenant un hôte avec la hiérarchie complète\n        let cluster1_filter = Cluster {\n            name: \"cluster1\".to_string(),\n            hosts: vec![Host {\n                name: \"host1\".to_string(),\n                cpus: vec![Cpu {\n                    name: \"cpu1\".to_string(),\n                    resources: vec![Resource {\n                        id: 101,\n                        state: ResourceState::Unknown,\n                        thread_count: 0,\n                    }],\n                    core_count: 0,\n                    cpufreq: 0.0,\n                    chassis: String::new(),\n                    resource_ids: vec![101],\n                }],\n                network_address: String::new(),\n                resource_ids: vec![101],\n                state: ResourceState::Unknown,\n            }],\n            resource_ids: vec![],\n            state: ResourceState::Unknown,\n        };\n\n        // Filtrer par host1\n        context.filters.clusters = Some(vec![cluster1_filter]);\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            1,\n            \"Should have 1 job using host1\"\n        );\n        assert_eq!(context.filtered_jobs[0].id, 1001, \"Job ID should be 1001\");\n\n        // Reset host filter\n        context.filters.clusters = None;\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            3,\n            \"Should have all 3 jobs when host filter is None\"\n        );\n    }\n\n    #[test]\n    /// Tests combining multiple filter types\n    fn test_combined_filters() {\n        let mut context = setup_test_app_context();\n\n        // Filter by user1 AND Running state\n        context.filters.set_owners(Some(vec![\"user1\".to_string()]));\n        context.filters.set_states(Some(vec![JobState::Running]));\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            1,\n            \"Should have 1 job from user1 in Running state\"\n        );\n        assert_eq!(context.filtered_jobs[0].id, 1001, \"Job ID should be 1001\");\n\n        // Filter by user1 AND (Running OR Terminated) states\n        context\n            .filters\n            .set_states(Some(vec![JobState::Running, JobState::Terminated]));\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            2,\n            \"Should have 2 jobs from user1 in Running or Terminated states\"\n        );\n\n        // Filter by user1 AND (Running OR Terminated) AND after Jan 2\n        context.filters.scheduled_start_time = Some(1672614000); // Jan 2\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            2,\n            \"Les deux tâches de user1 doivent rester avec le filtre de date\"\n        );\n\n        // Reset all filters\n        context.filters = JobFilters::default();\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            3,\n            \"Should have all 3 jobs when all filters are None\"\n        );\n    }\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","tests","mod.rs"],"content":"pub mod filters_tests;\npub mod parser_tests;\npub mod resource_state_tests;\npub mod utils_tests;\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","tests","parser_tests.rs"],"content":"#[cfg(test)]\nmod tests {\n    use crate::models::data_structure::job::JobState;\n    use crate::models::utils::parser::{get_jobs_from_json, get_resources_from_json};\n    use std::fs;\n    use std::io::Write;\n\n    // Write JSON to a file with specific format that matches the expected input\n    fn write_test_json_file(content: \u0026str, filename: \u0026str) -\u003e String {\n        let temp_dir = std::env::temp_dir();\n        let file_path = temp_dir.join(filename);\n\n        // Write content to file\n        let mut file = fs::File::create(\u0026file_path).expect(\"Failed to create file\");\n        file.write_all(content.as_bytes())\n            .expect(\"Failed to write to file\");\n\n        // Return the absolute path as a string\n        file_path.to_str().unwrap().to_string()\n    }\n\n    #[test]\n    /// Tests that an empty jobs object returns an empty vector\n    fn test_empty_array() {\n        let json_content = r#\"{\"jobs\":{}}\"#;\n        let file_path = write_test_json_file(json_content, \"empty_jobs.json\");\n\n        let jobs = get_jobs_from_json(\u0026file_path);\n\n        fs::remove_file(file_path).unwrap_or_default();\n        assert_eq!(jobs.len(), 0);\n    }\n\n    #[test]\n    /// Tests basic job parsing with minimal valid job data\n    fn test_basic_job_parsing() {\n        // Format the JSON in the structure expected by the parser\n        let json_content = r#\"{\n            \"jobs\": {\n                \"job1\": {\n                    \"id\": \"1234\",\n                    \"owner\": \"test_user\",\n                    \"state\": \"Running\",\n                    \"walltime\": 3600,\n                    \"resource_id\": [\"101\"],\n                    \"start_time\": 1672527600\n                }\n            }\n        }\"#;\n\n        let file_path = write_test_json_file(json_content, \"basic_job.json\");\n\n        let jobs = get_jobs_from_json(\u0026file_path);\n\n        fs::remove_file(file_path).unwrap_or_default();\n\n        // Just verify that we got some job back\n        assert!(jobs.len() \u003e 0, \"Should parse at least one job\");\n\n        // If successful, add more detailed assertions\n        if jobs.len() \u003e 0 {\n            let job = \u0026jobs[0];\n            assert_eq!(job.id, 1234);\n            assert_eq!(job.owner, \"test_user\");\n            assert_eq!(job.state, JobState::Running);\n        }\n    }\n\n    #[test]\n    /// Tests resource parsing with minimal valid resource data\n    fn test_basic_resource_parsing() {\n        // Note: get_resources_from_json expects an array of resources,\n        // not an object map like job parsing does\n        let json_content = r#\"{\n            \"resources\": [\n                {\n                    \"resource_id\": 101,\n                    \"state\": \"Alive\",\n                    \"cluster\": \"cluster1\",\n                    \"host\": \"host1\"\n                }\n            ]\n        }\"#;\n\n        let file_path = write_test_json_file(json_content, \"basic_resource.json\");\n\n        let resources = get_resources_from_json(\u0026file_path);\n\n        fs::remove_file(file_path).unwrap_or_default();\n\n        // Just verify that we got some resource back\n        assert!(resources.len() \u003e 0, \"Should parse at least one resource\");\n    }\n\n    #[test]\n    /// Debug test to understand the expected JSON format\n    fn test_debug_parser_behavior() {\n        // Format JSON according to the expected structure from parser.rs\n        let json_content = r#\"{\n            \"jobs\": {\n                \"job999\": {\n                    \"id\": \"999\", \n                    \"owner\": \"debug\", \n                    \"state\": \"Running\", \n                    \"walltime\": 3600,\n                    \"resource_id\": [\"101\", \"102\"],\n                    \"start_time\": 1672527600\n                }\n            }\n        }\"#;\n\n        let file_path = write_test_json_file(json_content, \"debug.json\");\n\n        // Debug info\n        println!(\"Debug test: File path = {}\", file_path);\n        println!(\n            \"Debug test: File exists = {}\",\n            fs::metadata(\u0026file_path).is_ok()\n        );\n\n        // Try to read file back to verify content\n        let content =\n            fs::read_to_string(\u0026file_path).unwrap_or_else(|e| format!(\"Error reading: {}\", e));\n        println!(\"Debug test: File content = {}\", content);\n\n        let jobs = get_jobs_from_json(\u0026file_path);\n        println!(\"Debug test: Parsed jobs count = {}\", jobs.len());\n        if jobs.len() \u003e 0 {\n            println!(\"Debug test: First job ID = {}\", jobs[0].id);\n        }\n\n        fs::remove_file(file_path).unwrap_or_default();\n    }\n\n    // Additional tests can be added once the basic structure works\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","tests","resource_state_tests.rs"],"content":"#[cfg(test)]\nmod tests {\n    use crate::models::data_structure::resource::ResourceState;\n    use std::fmt::Write;\n\n    #[test]\n    /// Checks that the Display implementation works correctly\n    fn test_resource_state_display() {\n        // Test each possible state value\n        assert_eq!(ResourceState::Dead.to_string(), \"Dead\");\n        assert_eq!(ResourceState::Alive.to_string(), \"Alive\");\n        assert_eq!(ResourceState::Absent.to_string(), \"Absent\");\n        assert_eq!(ResourceState::Unknown.to_string(), \"Unknown\");\n\n        // Test with format! to verify fmt::Display implementation\n        let mut output = String::new();\n        write!(output, \"State: {}\", ResourceState::Alive).unwrap();\n        assert_eq!(output, \"State: Alive\");\n    }\n\n    #[test]\n    /// Checks that the Clone implementation works correctly\n    fn test_resource_state_clone() {\n        // Test for each state value\n        let state1 = ResourceState::Dead;\n        let state2 = state1.clone();\n        assert!(matches!(state2, ResourceState::Dead));\n\n        let state1 = ResourceState::Alive;\n        let state2 = state1.clone();\n        assert!(matches!(state2, ResourceState::Alive));\n\n        let state1 = ResourceState::Absent;\n        let state2 = state1.clone();\n        assert!(matches!(state2, ResourceState::Absent));\n\n        let state1 = ResourceState::Unknown;\n        let state2 = state1.clone();\n        assert!(matches!(state2, ResourceState::Unknown));\n    }\n\n    #[test]\n    /// Checks that equality works correctly\n    fn test_resource_state_equality() {\n        assert_eq!(ResourceState::Dead, ResourceState::Dead);\n        assert_eq!(ResourceState::Alive, ResourceState::Alive);\n        assert_eq!(ResourceState::Absent, ResourceState::Absent);\n        assert_eq!(ResourceState::Unknown, ResourceState::Unknown);\n\n        assert_ne!(ResourceState::Dead, ResourceState::Alive);\n        assert_ne!(ResourceState::Dead, ResourceState::Absent);\n        assert_ne!(ResourceState::Dead, ResourceState::Unknown);\n        assert_ne!(ResourceState::Alive, ResourceState::Absent);\n        assert_ne!(ResourceState::Alive, ResourceState::Unknown);\n        assert_ne!(ResourceState::Absent, ResourceState::Unknown);\n    }\n\n    #[test]\n    /// Checks that copy works correctly (ResourceState implements Copy)\n    fn test_resource_state_copy() {\n        let state1 = ResourceState::Alive;\n        let state2 = state1; // Copy semantics\n\n        // If Copy is correctly implemented, both state1 and state2 are valid\n        assert_eq!(state1, ResourceState::Alive);\n        assert_eq!(state2, ResourceState::Alive);\n    }\n\n    #[test]\n    /// Checks conversions from a string\n    fn test_resource_state_from_string() {\n        // Utility function simulating the behavior observed in application_context.rs\n        fn string_to_resource_state(state_str: \u0026str) -\u003e ResourceState {\n            match state_str {\n                \"Dead\" =\u003e ResourceState::Dead,\n                \"Alive\" =\u003e ResourceState::Alive,\n                \"Absent\" =\u003e ResourceState::Absent,\n                _ =\u003e ResourceState::Unknown,\n            }\n        }\n\n        assert_eq!(string_to_resource_state(\"Dead\"), ResourceState::Dead);\n        assert_eq!(string_to_resource_state(\"Alive\"), ResourceState::Alive);\n        assert_eq!(string_to_resource_state(\"Absent\"), ResourceState::Absent);\n        assert_eq!(string_to_resource_state(\"Unknown\"), ResourceState::Unknown);\n\n        // Special cases\n        assert_eq!(string_to_resource_state(\"\"), ResourceState::Unknown);\n        assert_eq!(string_to_resource_state(\"invalid\"), ResourceState::Unknown);\n        assert_eq!(string_to_resource_state(\"ALIVE\"), ResourceState::Unknown); // Case sensitive\n    }\n\n    #[test]\n    /// Checks the use of ResourceState in a collection context\n    fn test_resource_state_in_collection() {\n        let states = vec![\n            ResourceState::Dead,\n            ResourceState::Alive,\n            ResourceState::Absent,\n            ResourceState::Unknown,\n        ];\n\n        assert_eq!(states.len(), 4);\n        assert!(states.contains(\u0026ResourceState::Dead));\n        assert!(states.contains(\u0026ResourceState::Alive));\n        assert!(states.contains(\u0026ResourceState::Absent));\n        assert!(states.contains(\u0026ResourceState::Unknown));\n    }\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","tests","utils_tests.rs"],"content":"#[cfg(test)]\nmod tests {\n    use egui::Color32;\n\n    use crate::models::data_structure::cluster::Cluster;\n    use crate::models::data_structure::cpu::Cpu;\n    use crate::models::data_structure::host::Host;\n    use crate::models::data_structure::job::Job;\n    use crate::models::data_structure::resource::{Resource, ResourceState};\n    use crate::models::utils::utils::*;\n    use std::cmp::Ordering;\n\n    // Helper function to create test clusters\n    fn create_test_clusters() -\u003e Vec\u003cCluster\u003e {\n        vec![\n            Cluster {\n                name: \"cluster1\".to_string(),\n                hosts: vec![\n                    Host {\n                        name: \"host1\".to_string(),\n                        cpus: vec![Cpu {\n                            name: \"cpu1\".to_string(),\n                            resources: vec![Resource {\n                                id: 101,\n                                state: ResourceState::Alive,\n                                thread_count: 4,\n                            }],\n                            core_count: 2,\n                            cpufreq: 2.4,\n                            chassis: \"rack1\".to_string(),\n                            resource_ids: vec![101],\n                        }],\n                        network_address: \"10.0.0.1\".to_string(),\n                        resource_ids: vec![101],\n                        state: ResourceState::Alive,\n                    },\n                    Host {\n                        name: \"host2\".to_string(),\n                        cpus: vec![Cpu {\n                            name: \"cpu2\".to_string(),\n                            resources: vec![Resource {\n                                id: 102,\n                                state: ResourceState::Alive,\n                                thread_count: 8,\n                            }],\n                            core_count: 4,\n                            cpufreq: 3.2,\n                            chassis: \"rack1\".to_string(),\n                            resource_ids: vec![102],\n                        }],\n                        network_address: \"10.0.0.2\".to_string(),\n                        resource_ids: vec![102],\n                        state: ResourceState::Alive,\n                    },\n                ],\n                resource_ids: vec![101, 102],\n                state: ResourceState::Alive,\n            },\n            Cluster {\n                name: \"cluster2\".to_string(),\n                hosts: vec![Host {\n                    name: \"host3\".to_string(),\n                    cpus: vec![Cpu {\n                        name: \"cpu3\".to_string(),\n                        resources: vec![Resource {\n                            id: 103,\n                            state: ResourceState::Dead,\n                            thread_count: 4,\n                        }],\n                        core_count: 2,\n                        cpufreq: 2.8,\n                        chassis: \"rack2\".to_string(),\n                        resource_ids: vec![103],\n                    }],\n                    network_address: \"10.0.0.3\".to_string(),\n                    resource_ids: vec![103],\n                    state: ResourceState::Dead,\n                }],\n                resource_ids: vec![103],\n                state: ResourceState::Dead,\n            },\n        ]\n    }\n\n    // Helper function to create a test job\n    fn create_test_job() -\u003e Job {\n        Job {\n            id: 1234,\n            owner: \"test_user\".to_string(),\n            state: crate::models::data_structure::job::JobState::Running,\n            walltime: 3600,\n            start_time: 1672527600,\n            scheduled_start: 1672527600,\n            assigned_resources: vec![101, 102],\n            main_resource_state: ResourceState::Alive,\n            clusters: Vec::new(),\n            hosts: Vec::new(),\n\n            // Champs manquants\n            command: \"test_command\".to_string(),\n            message: Some(\"test_message\".to_string()),\n            queue: \"test_queue\".to_string(),\n            submission_time: 1672527500, // Juste avant start_time\n            stop_time: 0,                // 0 pour un job encore en cours d'exécution\n            exit_code: Some(0),          // Code de sortie 0 (succès)\n            gantt_color: Color32::from_rgb(0, 0, 0), // Replace with a default color\n        }\n    }\n\n    #[test]\n    /// Tests that color conversion produces consistent results\n    fn test_convert_id_to_color() {\n        // Test that same ID always gives same color\n        let color1 = convert_id_to_color(1234);\n        let color2 = convert_id_to_color(1234);\n        assert_eq!(color1, color2, \"Same ID should produce same color\");\n\n        // Test that different IDs produce different colors\n        let color3 = convert_id_to_color(5678);\n        assert_ne!(\n            color1, color3,\n            \"Different IDs should produce different colors\"\n        );\n    }\n\n    #[test]\n    /// Tests extraction of all host names from clusters\n    fn test_get_all_hosts() {\n        let clusters = create_test_clusters();\n        let hosts = get_all_hosts(\u0026clusters);\n\n        assert_eq!(hosts.len(), 3, \"Should find 3 hosts\");\n        assert!(hosts.contains(\u0026\"host1\".to_string()));\n        assert!(hosts.contains(\u0026\"host2\".to_string()));\n        assert!(hosts.contains(\u0026\"host3\".to_string()));\n    }\n\n    #[test]\n    /// Tests checking if a cluster contains a specific host\n    fn test_cluster_contain_host() {\n        let clusters = create_test_clusters();\n        let cluster1 = \u0026clusters[0];\n\n        assert!(\n            cluster_contain_host(cluster1, \"host1\"),\n            \"Cluster1 should contain host1\"\n        );\n        assert!(\n            cluster_contain_host(cluster1, \"host2\"),\n            \"Cluster1 should contain host2\"\n        );\n        assert!(\n            !cluster_contain_host(cluster1, \"host3\"),\n            \"Cluster1 should not contain host3\"\n        );\n    }\n\n    #[test]\n    /// Tests retrieving a cluster by name\n    fn test_get_cluster_from_name() {\n        let clusters = create_test_clusters();\n\n        let result1 = get_cluster_from_name(\u0026clusters, \"cluster1\");\n        assert!(result1.is_some(), \"Should find cluster1\");\n        assert_eq!(result1.unwrap().name, \"cluster1\");\n\n        let result2 = get_cluster_from_name(\u0026clusters, \"nonexistent\");\n        assert!(result2.is_none(), \"Should not find nonexistent cluster\");\n    }\n\n    #[test]\n    /// Tests extraction of all cluster names\n    fn test_get_all_clusters() {\n        let clusters = create_test_clusters();\n        let cluster_names = get_all_clusters(\u0026clusters);\n\n        assert_eq!(cluster_names.len(), 2, \"Should find 2 clusters\");\n        assert!(cluster_names.contains(\u0026\"cluster1\".to_string()));\n        assert!(cluster_names.contains(\u0026\"cluster2\".to_string()));\n    }\n\n    #[test]\n    /// Tests extraction of all resource IDs\n    fn test_get_all_resources() {\n        let clusters = create_test_clusters();\n        let resources = get_all_resources(\u0026clusters);\n\n        assert_eq!(resources.len(), 3, \"Should find 3 resources\");\n        assert!(resources.contains(\u0026101));\n        assert!(resources.contains(\u0026102));\n        assert!(resources.contains(\u0026103));\n    }\n\n    #[test]\n    /// Tests checking if any cluster contains a specific host\n    fn test_contains_host() {\n        let clusters = create_test_clusters();\n\n        assert!(\n            contains_host(\u0026clusters, \"host1\"),\n            \"Clusters should contain host1\"\n        );\n        assert!(\n            contains_host(\u0026clusters, \"host3\"),\n            \"Clusters should contain host3\"\n        );\n        assert!(\n            !contains_host(\u0026clusters, \"host4\"),\n            \"Clusters should not contain host4\"\n        );\n    }\n\n    #[test]\n    /// Tests getting a cluster's state by name\n    fn test_get_cluster_state_from_name() {\n        let clusters = create_test_clusters();\n\n        let state1 = get_cluster_state_from_name(\u0026clusters, \u0026\"cluster1\".to_string());\n        assert_eq!(state1, ResourceState::Alive, \"cluster1 should be Alive\");\n\n        let state2 = get_cluster_state_from_name(\u0026clusters, \u0026\"cluster2\".to_string());\n        assert_eq!(state2, ResourceState::Dead, \"cluster2 should be Dead\");\n\n        let state3 = get_cluster_state_from_name(\u0026clusters, \u0026\"nonexistent\".to_string());\n        assert_eq!(\n            state3,\n            ResourceState::Unknown,\n            \"Nonexistent cluster should return Unknown state\"\n        );\n    }\n\n    #[test]\n    /// Tests getting a host's state by name\n    fn test_get_host_state_from_name() {\n        let clusters = create_test_clusters();\n\n        let state1 = get_host_state_from_name(\u0026clusters, \u0026\"host1\".to_string());\n        assert_eq!(state1, ResourceState::Alive, \"host1 should be Alive\");\n\n        let state2 = get_host_state_from_name(\u0026clusters, \u0026\"host3\".to_string());\n        assert_eq!(state2, ResourceState::Dead, \"host3 should be Dead\");\n\n        let state3 = get_host_state_from_name(\u0026clusters, \u0026\"nonexistent\".to_string());\n        assert_eq!(\n            state3,\n            ResourceState::Unknown,\n            \"Nonexistent host should return Unknown state\"\n        );\n    }\n\n    #[test]\n    /// Tests checking if a cluster with specific name exists\n    fn test_contains_cluster() {\n        let clusters = create_test_clusters();\n\n        assert!(\n            contains_cluster(\u0026clusters, \"cluster1\"),\n            \"Should contain cluster1\"\n        );\n        assert!(\n            contains_cluster(\u0026clusters, \"cluster2\"),\n            \"Should contain cluster2\"\n        );\n        assert!(\n            !contains_cluster(\u0026clusters, \"cluster3\"),\n            \"Should not contain cluster3\"\n        );\n    }\n\n    #[test]\n    /// Tests natural string comparison with embedded numbers\n    fn test_compare_string_with_number() {\n        // Test basic alphabetical comparison\n        assert_eq!(compare_string_with_number(\"abc\", \"def\"), Ordering::Less);\n        assert_eq!(compare_string_with_number(\"def\", \"abc\"), Ordering::Greater);\n        assert_eq!(compare_string_with_number(\"abc\", \"abc\"), Ordering::Equal);\n\n        // Test numeric comparison within strings (natural sort)\n        assert_eq!(compare_string_with_number(\"host1\", \"host2\"), Ordering::Less);\n        assert_eq!(\n            compare_string_with_number(\"host2\", \"host10\"),\n            Ordering::Less,\n            \"Natural sort: host2 should come before host10\"\n        );\n        assert_eq!(\n            compare_string_with_number(\"host10\", \"host2\"),\n            Ordering::Greater,\n            \"Natural sort: host10 should come after host2\"\n        );\n\n        // Test mixed strings\n        assert_eq!(\n            compare_string_with_number(\"abc123\", \"abc45\"),\n            Ordering::Greater,\n            \"123 \u003e 45 in natural sort\"\n        );\n    }\n\n    #[test]\n    /// Tests finding clusters related to a job\n    fn test_get_clusters_for_job() {\n        let clusters = create_test_clusters();\n        let job = create_test_job();\n\n        let job_clusters = get_clusters_for_job(\u0026job, \u0026clusters);\n\n        assert_eq!(job_clusters.len(), 1, \"Job should be related to 1 cluster\");\n        assert_eq!(\n            job_clusters[0], \"cluster1\",\n            \"Job should be related to cluster1\"\n        );\n    }\n\n    #[test]\n    /// Tests finding hosts related to a job\n    fn test_get_hosts_for_job() {\n        let clusters = create_test_clusters();\n        let job = create_test_job();\n\n        let job_hosts = get_hosts_for_job(\u0026job, \u0026clusters);\n\n        assert_eq!(job_hosts.len(), 2, \"Job should be related to 2 hosts\");\n        assert!(\n            job_hosts.contains(\u0026\"host1\".to_string()),\n            \"Job should use host1\"\n        );\n        assert!(\n            job_hosts.contains(\u0026\"host2\".to_string()),\n            \"Job should use host2\"\n        );\n    }\n\n    #[test]\n    /// Tests creating a tree structure for a specific job\n    fn test_get_tree_structure_for_job() {\n        let clusters = create_test_clusters();\n        let job = create_test_job();\n\n        let job_tree = get_tree_structure_for_job(\u0026job, \u0026clusters);\n\n        // Verify structure\n        assert_eq!(job_tree.len(), 1, \"Should return 1 cluster\");\n        assert_eq!(job_tree[0].name, \"cluster1\", \"Should be cluster1\");\n        assert_eq!(job_tree[0].hosts.len(), 2, \"Should have 2 hosts\");\n\n        // Check that only relevant resources are included\n        for cluster in \u0026job_tree {\n            for host in \u0026cluster.hosts {\n                for cpu in \u0026host.cpus {\n                    for resource in \u0026cpu.resources {\n                        assert!(\n                            job.assigned_resources.contains(\u0026resource.id),\n                            \"Resource {} should belong to job\",\n                            resource.id\n                        );\n                    }\n                }\n            }\n        }\n    }\n\n    #[test]\n    fn test_natural_sort() {\n        assert_eq!(\n            compare_string_with_number(\"abc123\", \"abc45\"),\n            Ordering::Greater\n        );\n\n        assert_eq!(\n            compare_string_with_number(\"img10.png\", \"img2.png\"),\n            Ordering::Greater\n        );\n        assert_eq!(\n            compare_string_with_number(\"file99.txt\", \"file100.txt\"),\n            Ordering::Less\n        );\n    }\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","components","dashboard_components","job_table.rs"],"content":"use super::job_table_col_selection::ColumnSelection;\nuse super::job_table_sorting::SortKey;\nuse crate::models::data_structure::application_context::ApplicationContext;\nuse crate::models::utils::date_converter::format_timestamp;\nuse crate::models::utils::utils::get_tree_structure_for_job;\nuse crate::{models::data_structure::job::Job, views::components::job_details::JobDetailsWindow};\nuse eframe::egui;\nuse egui::{RichText, Sense, Ui};\nuse egui_extras::{Column, TableBuilder};\n\n/**\n * Struct for the job table\n */\npub struct JobTable {\n    page: usize, // Current page\n    jobs_per_page: usize, // Number of jobs per page\n    details_window: Vec\u003cJobDetailsWindow\u003e, // Details window for the job\n    start_idx: usize, // Start index for the jobs\n    end_idx: usize, // End index for the jobs\n    displayed_jobs_per_page: Vec\u003cJob\u003e, // Jobs displayed per page\n    sort_key: SortKey, // Sort key for the jobs\n    sort_ascending: bool, // True if the sorting is ascending\n    column_selection: ColumnSelection, // Column selection for the table\n}\n\n/**\n * Default implementation of the job table\n */\nimpl Default for JobTable {\n    fn default() -\u003e Self {\n        JobTable {\n            page: 0, // Default page is 0\n            jobs_per_page: 20, // Default number of jobs per page is 20\n            details_window: Vec::new(), // No details window by default\n            start_idx: 0, // Default start index is 0\n            end_idx: 0, // Default end index is 0\n            displayed_jobs_per_page: Vec::new(), // No jobs displayed by default\n            sort_key: SortKey::Id, // Default sort key is the job id\n            sort_ascending: true, // Default sorting is ascending\n            column_selection: ColumnSelection::default(), // Default column selection\n        }\n    }\n}\n\n/**\n * Implementation of the job table\n */\nimpl JobTable {\n    pub fn ui(\u0026mut self, ui: \u0026mut Ui, app: \u0026mut ApplicationContext) {\n        self.displayed_jobs_per_page = app.filtered_jobs.clone();\n        self.sort_key\n            .sort_jobs(\u0026mut self.displayed_jobs_per_page, self.sort_ascending);\n\n        ui.add_space(10.0);\n        ui.heading(RichText::new(t!(\"app.job_table.title\")).strong().size(20.0));\n        ui.add_space(8.0);\n\n        self.start_idx = self.page * self.jobs_per_page;\n        self.end_idx = (self.start_idx + self.jobs_per_page).min(app.filtered_jobs.len());\n        let total_pages =\n            (app.filtered_jobs.len() as f32 / self.jobs_per_page as f32).ceil() as usize;\n\n        if self.start_idx \u003e= app.filtered_jobs.len() {\n            self.reset_pagination();\n            return;\n        }\n\n        ui.horizontal(|ui| {\n            // Left side with Options\n            ui.with_layout(egui::Layout::left_to_right(egui::Align::Center), |ui| {\n                ui.menu_button(t!(\"app.job_table.settings\"), |ui| {\n                    ui.set_max_height(500.0);\n\n                    // Column selection\n                    self.column_selection.ui(ui);\n                });\n                ui.menu_button(\"❓\", |ui| {\n                    ui.label(t!(\"app.job_table.help\"));\n                });\n            });\n\n            // Right side with Pagination, using remaining space\n            ui.with_layout(egui::Layout::right_to_left(egui::Align::Center), |ui| {\n                let mut pagination_ui = |ui: \u0026mut Ui| {\n                    if ui\n                        .button(RichText::new(t!(\"app.job_table.next\")).size(14.0))\n                        .clicked()\n                        \u0026\u0026 self.page \u003c total_pages - 1\n                    {\n                        self.page += 1;\n                    }\n                    ui.label(\n                        RichText::new(format!(\"Page {} / {}\", self.page + 1, total_pages))\n                            .size(14.0),\n                    );\n                    if ui\n                        .button(RichText::new(t!(\"app.job_table.previous\")).size(14.0))\n                        .clicked()\n                        \u0026\u0026 self.page \u003e 0\n                    {\n                        self.page -= 1;\n                    }\n                };\n                pagination_ui(ui);\n            });\n        });\n\n        ui.separator();\n\n        egui::ScrollArea::horizontal().show(ui, |ui| {\n            // Table with pagination, sorting and selection\n            let available_width = ui.available_width();\n            let mut table = TableBuilder::new(ui)\n                .striped(true)\n                .resizable(true)\n                .sense(Sense::click())\n                .column(Column::auto().at_least(2.0).resizable(true));\n\n            // Add columns based on the selection\n            for value in self.column_selection.values.values() {\n                if value.selected {\n                    table = table.column(\n                        Column::remainder()\n                            .at_least(10.0)\n                            .at_most(available_width)\n                            .resizable(true),\n                    );\n                }\n            }\n\n            // Table header\n            table.header(20.0, |mut header| {\n                    header.col(|ui| {\n                        ui.label(RichText::new(t!(\"app.job_table.table.row\")).strong());\n                    });\n\n                    // Add columns in header based on the selection\n                    for value in self.column_selection.values.values() {\n                        if value.selected {\n                            header.col(|ui| {\n                                let is_current_column = value.sort_key == self.sort_key;\n\n                                let header_btn;\n\n                                // If the current column is selected, add an arrow to indicate the sorting direction\n                                if is_current_column {\n                                    header_btn = egui::Button::new(format!(\n                                        \"{} {}\",\n                                        t!(value.name.clone()),\n                                        if self.sort_ascending { '⬆' } else { '⬇' }\n                                    ))\n                                    .frame(true);\n                                } else { // Otherwise, just add the column name\n                                    header_btn = egui::Button::new(t!(value.name.clone())).frame(false);\n                                }\n\n                                // If the column is clicked, change the sorting key and arrow direction\n                                if ui.add(header_btn).clicked() {\n                                    self.sort_key = value.sort_key;\n                                    self.sort_ascending = !self.sort_ascending;\n                                    self.page = 0;\n                                }\n                            });\n                        }\n                    }\n                })\n\n                // Table bodys\n                .body(|mut body| {\n                    for job in self.displayed_jobs_per_page[self.start_idx..self.end_idx].iter() {\n                        body.row(20.0, |mut row| {\n                            // Row index\n                            let row_index = self.start_idx + row.index() + 1;\n                            row.col(|ui| {\n                                ui.label(row_index.to_string());\n                            });\n\n                            for value in self.column_selection.values.values() {\n                                if value.selected {\n                                    row.col(|ui| match value.sort_key {\n                                        SortKey::Id =\u003e {\n                                            ui.label(job.id.to_string());\n                                        }\n                                        SortKey::Owner =\u003e {\n                                            ui.label(job.owner.to_string());\n                                        }\n                                        SortKey::State =\u003e {\n                                            let state_text = job.state.get_label();\n                                            let (state_color, bg_color) = job.state.get_color();\n                                            ui.label(\n                                                egui::RichText::new(state_text)\n                                                    .color(state_color)\n                                                    .background_color(bg_color)\n                                                    .strong(),\n                                            );\n                                        }\n                                        SortKey::StartTime =\u003e {\n                                            ui.label(format_timestamp(job.start_time));\n                                        }\n                                        SortKey::WallTime =\u003e {\n                                            ui.label(job.walltime.to_string());\n                                        }\n                                        SortKey::Queue =\u003e {\n                                            ui.label(\u0026job.queue);\n                                        }\n                                        SortKey::Command =\u003e {\n                                            ui.label(\u0026job.command);\n                                        }\n                                        SortKey::Message =\u003e {\n                                            ui.label(job.message.as_deref().unwrap_or(\"\"));\n                                        }\n                                        SortKey::SubmissionTime =\u003e {\n                                            ui.label(format_timestamp(job.submission_time));\n                                        }\n                                        SortKey::ScheduledStartTime =\u003e {\n                                            ui.label(format_timestamp(job.scheduled_start));\n                                        }\n                                        SortKey::StopTime =\u003e {\n                                            ui.label(format_timestamp(job.stop_time));\n                                        }\n                                        SortKey::ExitCode =\u003e {\n                                            ui.label(\n                                                job.exit_code.map_or(\"N/A\".to_string(), |code| {\n                                                    code.to_string()\n                                                }),\n                                            );\n                                        }\n                                        SortKey::Clusters =\u003e {\n                                            ui.label(job.clusters.join(\", \"));\n                                        }\n                                    });\n                                }\n                            }\n\n                            // Clickable row\n                            let response = row.response().interact(Sense::click());\n                            if response.clicked() {\n                                for window in self.details_window.iter_mut() {\n                                    if window.job.id == job.id {\n                                        window.open = true;\n                                        return;\n                                    }\n                                }\n                                self.details_window.push(JobDetailsWindow::new(\n                                    job.clone(),\n                                    get_tree_structure_for_job(job, \u0026app.all_clusters),\n                                ));\n                            }\n                        });\n                    }\n                });\n        });\n\n        ui.add_space(10.0);\n\n        for window in self.details_window.iter_mut() {\n            window.ui(ui);\n        }\n    }\n\n    /**\n     * Resets the pagination\n     */\n    pub fn reset_pagination(\u0026mut self) {\n        self.page = 0;\n        self.start_idx = 0;\n        self.end_idx = 0;\n    }\n}\n","traces":[{"line":30,"address":[5641754,5641504],"length":1,"stats":{"Line":0}},{"line":34,"address":[5641523],"length":1,"stats":{"Line":0}},{"line":37,"address":[5641533],"length":1,"stats":{"Line":0}},{"line":40,"address":[5641581],"length":1,"stats":{"Line":0}},{"line":49,"address":[5641776,5643608],"length":1,"stats":{"Line":0}},{"line":50,"address":[5641836],"length":1,"stats":{"Line":0}},{"line":51,"address":[5641973],"length":1,"stats":{"Line":0}},{"line":54,"address":[5642002],"length":1,"stats":{"Line":0}},{"line":55,"address":[5642007,5642664,5643572],"length":1,"stats":{"Line":0}},{"line":56,"address":[5642626],"length":1,"stats":{"Line":0}},{"line":58,"address":[5642693,5642721,5642644],"length":1,"stats":{"Line":0}},{"line":59,"address":[5642697,5643085,5642742],"length":1,"stats":{"Line":0}},{"line":60,"address":[5642793],"length":1,"stats":{"Line":0}},{"line":63,"address":[5643047],"length":1,"stats":{"Line":0}},{"line":64,"address":[5643478],"length":1,"stats":{"Line":0}},{"line":68,"address":[4356320],"length":1,"stats":{"Line":0}},{"line":70,"address":[4356848,4357520,4356457,4356345],"length":1,"stats":{"Line":0}},{"line":71,"address":[4357552,4357269,4357048,4356873],"length":1,"stats":{"Line":0}},{"line":72,"address":[4357584],"length":1,"stats":{"Line":0}},{"line":75,"address":[4357603],"length":1,"stats":{"Line":0}},{"line":77,"address":[4357632,4358250,4357418],"length":1,"stats":{"Line":0}},{"line":78,"address":[4358195,4357652],"length":1,"stats":{"Line":0}},{"line":83,"address":[4356594,4356706,4358272],"length":1,"stats":{"Line":0}},{"line":84,"address":[4358304,4360852,4360807,4358352],"length":1,"stats":{"Line":0}},{"line":85,"address":[4358911,4358385,4359063,4359437],"length":1,"stats":{"Line":0}},{"line":86,"address":[4358801,4358401,4358580],"length":1,"stats":{"Line":0}},{"line":87,"address":[4358735,4359229,4359069,4358504,4359339,4360865,4359015],"length":1,"stats":{"Line":0}},{"line":88,"address":[4359301,4359368],"length":1,"stats":{"Line":0}},{"line":90,"address":[4359442,4359399],"length":1,"stats":{"Line":0}},{"line":92,"address":[4359797],"length":1,"stats":{"Line":0}},{"line":93,"address":[4359468,4359930,4359200,4359607,4359547,4359726],"length":1,"stats":{"Line":0}},{"line":96,"address":[4360347,4360499,4360786],"length":1,"stats":{"Line":0}},{"line":97,"address":[4360237,4359833,4360016],"length":1,"stats":{"Line":0}},{"line":98,"address":[4360722,4360816,4360451,4359946,4360171,4360639,4360505],"length":1,"stats":{"Line":0}},{"line":99,"address":[4360711],"length":1,"stats":{"Line":0}},{"line":101,"address":[4360746,4360791],"length":1,"stats":{"Line":0}},{"line":104,"address":[4358324],"length":1,"stats":{"Line":0}},{"line":108,"address":[5643194],"length":1,"stats":{"Line":0}},{"line":110,"address":[4362343,4360912],"length":1,"stats":{"Line":0}},{"line":112,"address":[4360950],"length":1,"stats":{"Line":0}},{"line":113,"address":[4361205,4361422,4361014],"length":1,"stats":{"Line":0}},{"line":115,"address":[4361090],"length":1,"stats":{"Line":0}},{"line":116,"address":[4362400,4361287,4361098],"length":1,"stats":{"Line":0}},{"line":117,"address":[4361303,4361463,4362381],"length":1,"stats":{"Line":0}},{"line":120,"address":[4361835,4361479,4361555],"length":1,"stats":{"Line":0}},{"line":121,"address":[4362316,4361851],"length":1,"stats":{"Line":0}},{"line":122,"address":[4361990,4362238,4362285],"length":1,"stats":{"Line":0}},{"line":123,"address":[4362090,4362174],"length":1,"stats":{"Line":0}},{"line":132,"address":[4361657,4361967,4362801,4362432],"length":1,"stats":{"Line":0}},{"line":133,"address":[4363504,4362449,4362832],"length":1,"stats":{"Line":0}},{"line":134,"address":[4362852,4363449],"length":1,"stats":{"Line":0}},{"line":138,"address":[4362522,4362670],"length":1,"stats":{"Line":0}},{"line":139,"address":[4362690],"length":1,"stats":{"Line":0}},{"line":140,"address":[4366444,4363536,4362710,4364614],"length":1,"stats":{"Line":0}},{"line":141,"address":[4363564],"length":1,"stats":{"Line":0}},{"line":146,"address":[4366077,4363632],"length":1,"stats":{"Line":0}},{"line":147,"address":[4366393,4365548,4366335,4365293,4365991],"length":1,"stats":{"Line":0}},{"line":149,"address":[4363668,4364659,4365271,4366371],"length":1,"stats":{"Line":0}},{"line":150,"address":[4365405],"length":1,"stats":{"Line":0}},{"line":154,"address":[4364623,4364592,4363641,4363734],"length":1,"stats":{"Line":0}},{"line":158,"address":[4364520,4366179,4366333],"length":1,"stats":{"Line":0}},{"line":159,"address":[4366292],"length":1,"stats":{"Line":0}},{"line":160,"address":[4366304],"length":1,"stats":{"Line":0}},{"line":161,"address":[4366322],"length":1,"stats":{"Line":0}},{"line":169,"address":[4366818,4361871,4366480],"length":1,"stats":{"Line":0}},{"line":170,"address":[4366589,4366734,4366500],"length":1,"stats":{"Line":0}},{"line":171,"address":[4368128,4368244,4366747,4366848],"length":1,"stats":{"Line":0}},{"line":173,"address":[4366881,4366975,4367080],"length":1,"stats":{"Line":0}},{"line":174,"address":[4367050,4368272],"length":1,"stats":{"Line":0}},{"line":175,"address":[4368296],"length":1,"stats":{"Line":0}},{"line":178,"address":[4367118,4367275],"length":1,"stats":{"Line":0}},{"line":179,"address":[4367296],"length":1,"stats":{"Line":0}},{"line":180,"address":[4368352,4369742,4368382,4369774,4368200],"length":1,"stats":{"Line":0}},{"line":182,"address":[4368427],"length":1,"stats":{"Line":0}},{"line":185,"address":[4368492],"length":1,"stats":{"Line":0}},{"line":188,"address":[4368648],"length":1,"stats":{"Line":0}},{"line":189,"address":[4369416,4368681],"length":1,"stats":{"Line":0}},{"line":190,"address":[4369683],"length":1,"stats":{"Line":0}},{"line":191,"address":[4369468],"length":1,"stats":{"Line":0}},{"line":198,"address":[4368940],"length":1,"stats":{"Line":0}},{"line":201,"address":[4369295],"length":1,"stats":{"Line":0}},{"line":204,"address":[4368561],"length":1,"stats":{"Line":0}},{"line":207,"address":[4368607],"length":1,"stats":{"Line":0}},{"line":210,"address":[4368708],"length":1,"stats":{"Line":0}},{"line":213,"address":[4368798],"length":1,"stats":{"Line":0}},{"line":216,"address":[4368869],"length":1,"stats":{"Line":0}},{"line":219,"address":[4369011],"length":1,"stats":{"Line":0}},{"line":222,"address":[4369166],"length":1,"stats":{"Line":0}},{"line":223,"address":[4369792,4369082],"length":1,"stats":{"Line":0}},{"line":224,"address":[4369808],"length":1,"stats":{"Line":0}},{"line":229,"address":[4369207],"length":1,"stats":{"Line":0}},{"line":236,"address":[4367308,4367256],"length":1,"stats":{"Line":0}},{"line":237,"address":[4367658],"length":1,"stats":{"Line":0}},{"line":238,"address":[4367691,4367890],"length":1,"stats":{"Line":0}},{"line":239,"address":[4367910],"length":1,"stats":{"Line":0}},{"line":240,"address":[4368141],"length":1,"stats":{"Line":0}},{"line":244,"address":[4367858,4368010,4368062],"length":1,"stats":{"Line":0}},{"line":245,"address":[4367866,4367942],"length":1,"stats":{"Line":0}},{"line":246,"address":[4367950],"length":1,"stats":{"Line":0}},{"line":254,"address":[5643410],"length":1,"stats":{"Line":0}},{"line":256,"address":[5643428,5643485,5643549],"length":1,"stats":{"Line":0}},{"line":257,"address":[5643565],"length":1,"stats":{"Line":0}},{"line":264,"address":[5643632],"length":1,"stats":{"Line":0}},{"line":265,"address":[5643637],"length":1,"stats":{"Line":0}},{"line":266,"address":[5643645],"length":1,"stats":{"Line":0}},{"line":267,"address":[5643653],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":106},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","components","dashboard_components","job_table_col_selection.rs"],"content":"use super::job_table_sorting::SortKey;\nuse egui::Layout;\nuse std::collections::BTreeMap;\n\n/**\n * Struct for the column information\n */\npub struct ColumnInfo {\n    pub name: String, // Name of the column\n    pub selected: bool, // True if the column is selected\n    pub sort_key: SortKey, // Sort key for the column\n}\n\n/**\n * Struct for the column selection\n */\npub struct ColumnSelection {\n    pub values: BTreeMap\u003cu8, ColumnInfo\u003e, // Map of column index to column info\n}\n\n/**\n * Default implementation of the column selection\n */\nimpl Default for ColumnSelection {\n    fn default() -\u003e Self {\n        let mut instance = Self {\n            values: BTreeMap::new(),\n        };\n        instance.select_default();\n        instance\n    }\n}\n\n/**\n * Implementation of the column selection\n */\nimpl ColumnSelection {\n    pub fn ui(\u0026mut self, ui: \u0026mut egui::Ui) {\n        ui.vertical(|ui| {\n            egui::Grid::new(\"\")\n                .num_columns(2)\n                .striped(false)\n                .show(ui, |ui| {\n                    ui.with_layout(Layout::top_down(egui::Align::Max), |ui| {\n                        ui.set_max_width(100.0);\n                        ui.label(t!(\"app.job_table.table.columns\"));\n                    });\n                    // Column selection grid\n                    egui::Grid::new(\"column_selection_grid\")\n                        .num_columns(3)\n                        .spacing([20.0, 8.0])\n                        .show(ui, |ui| {\n                            let mut count = 0;\n                            for (_column, value) in self.values.iter_mut() {\n                                ui.checkbox(\u0026mut value.selected, t!(value.name.to_string()));\n                                count += 1;\n                                if count % 3 == 0 {\n                                    ui.end_row();\n                                }\n                            }\n                            if count % 3 != 0 {\n                                ui.end_row();\n                            }\n                        });\n                    ui.end_row();\n                    ui.label(\"\");\n                    ui.horizontal(|ui| {\n                        if ui.button(t!(\"app.job_table.select_all\")).clicked() {\n                            self.select_all();\n                        }\n                        if ui.button(t!(\"app.job_table.select_default\")).clicked() {\n                            self.select_default();\n                        }\n                    });\n                });\n        });\n    }\n\n    fn select_default(\u0026mut self) {\n        self.values.insert(\n            0,\n            ColumnInfo {\n                name: \"app.job_table.table.job_id\".to_string(),\n                selected: true,\n                sort_key: SortKey::Id,\n            },\n        );\n        self.values.insert(\n            1,\n            ColumnInfo {\n                name: \"app.job_table.table.owner\".to_string(),\n                selected: true,\n                sort_key: SortKey::Owner,\n            },\n        );\n        self.values.insert(\n            2,\n            ColumnInfo {\n                name: \"app.job_table.table.queue\".to_string(),\n                selected: false,\n                sort_key: SortKey::Queue,\n            },\n        );\n        self.values.insert(\n            3,\n            ColumnInfo {\n                name: \"app.job_table.table.command\".to_string(),\n                selected: false,\n                sort_key: SortKey::Command,\n            },\n        );\n        self.values.insert(\n            4,\n            ColumnInfo {\n                name: \"app.job_table.table.state\".to_string(),\n                selected: true,\n                sort_key: SortKey::State,\n            },\n        );\n        self.values.insert(\n            5,\n            ColumnInfo {\n                name: \"app.job_table.table.message\".to_string(),\n                selected: false,\n                sort_key: SortKey::Message,\n            },\n        );\n        self.values.insert(\n            6,\n            ColumnInfo {\n                name: \"app.job_table.table.submission_time\".to_string(),\n                selected: false,\n                sort_key: SortKey::SubmissionTime,\n            },\n        );\n        self.values.insert(\n            7,\n            ColumnInfo {\n                name: \"app.job_table.table.scheduled_start_time\".to_string(),\n                selected: true,\n                sort_key: SortKey::ScheduledStartTime,\n            },\n        );\n        self.values.insert(\n            8,\n            ColumnInfo {\n                name: \"app.job_table.table.start_time\".to_string(),\n                selected: false,\n                sort_key: SortKey::StartTime,\n            },\n        );\n        self.values.insert(\n            9,\n            ColumnInfo {\n                name: \"app.job_table.table.stop_time\".to_string(),\n                selected: false,\n                sort_key: SortKey::StopTime,\n            },\n        );\n        self.values.insert(\n            10,\n            ColumnInfo {\n                name: \"app.job_table.table.wall_time\".to_string(),\n                selected: true,\n                sort_key: SortKey::WallTime,\n            },\n        );\n        self.values.insert(\n            11,\n            ColumnInfo {\n                name: \"app.job_table.table.exit_code\".to_string(),\n                selected: false,\n                sort_key: SortKey::ExitCode,\n            },\n        );\n        self.values.insert(\n            12,\n            ColumnInfo {\n                name: \"app.job_table.table.clusters\".to_string(),\n                selected: false,\n                sort_key: SortKey::Clusters,\n            },\n        );\n    }\n\n    fn select_all(\u0026mut self) {\n        for value in self.values.values_mut() {\n            value.selected = true;\n        }\n    }\n}\n","traces":[{"line":25,"address":[5645808,5645931],"length":1,"stats":{"Line":0}},{"line":27,"address":[5645826],"length":1,"stats":{"Line":0}},{"line":29,"address":[5645856],"length":1,"stats":{"Line":0}},{"line":30,"address":[5645900],"length":1,"stats":{"Line":0}},{"line":38,"address":[5645952],"length":1,"stats":{"Line":0}},{"line":39,"address":[5645969],"length":1,"stats":{"Line":0}},{"line":40,"address":[5676775,5676696],"length":1,"stats":{"Line":0}},{"line":43,"address":[5676770,5676816],"length":1,"stats":{"Line":0}},{"line":44,"address":[5676946,5677963,5677328,5676840],"length":1,"stats":{"Line":0}},{"line":45,"address":[5677348],"length":1,"stats":{"Line":0}},{"line":46,"address":[5677908,5677373],"length":1,"stats":{"Line":0}},{"line":49,"address":[5677053,5677139,5677194],"length":1,"stats":{"Line":0}},{"line":51,"address":[5677105],"length":1,"stats":{"Line":0}},{"line":52,"address":[5679203,5678000,5679248,5677189],"length":1,"stats":{"Line":0}},{"line":53,"address":[5678025],"length":1,"stats":{"Line":0}},{"line":54,"address":[5678049,5678190],"length":1,"stats":{"Line":0}},{"line":55,"address":[5678222,5679181,5679212,5679016,5678350],"length":1,"stats":{"Line":0}},{"line":56,"address":[5679083,5678999,5679111],"length":1,"stats":{"Line":0}},{"line":57,"address":[5679087,5679131],"length":1,"stats":{"Line":0}},{"line":58,"address":[5679170],"length":1,"stats":{"Line":0}},{"line":61,"address":[5678166,5678298],"length":1,"stats":{"Line":0}},{"line":62,"address":[5678342],"length":1,"stats":{"Line":0}},{"line":65,"address":[5677233],"length":1,"stats":{"Line":0}},{"line":66,"address":[5677243],"length":1,"stats":{"Line":0}},{"line":67,"address":[5677284,5679264,5680948,5680993],"length":1,"stats":{"Line":0}},{"line":68,"address":[5679840,5680114,5681006,5679289,5680196],"length":1,"stats":{"Line":0}},{"line":69,"address":[5680181],"length":1,"stats":{"Line":0}},{"line":71,"address":[5680662,5680850,5680014,5680957,5680215,5680929],"length":1,"stats":{"Line":0}},{"line":72,"address":[5680917],"length":1,"stats":{"Line":0}},{"line":79,"address":[5646000],"length":1,"stats":{"Line":0}},{"line":80,"address":[5646095],"length":1,"stats":{"Line":0}},{"line":82,"address":[5646052],"length":1,"stats":{"Line":0}},{"line":83,"address":[5646020],"length":1,"stats":{"Line":0}},{"line":85,"address":[5646047],"length":1,"stats":{"Line":0}},{"line":88,"address":[5646230],"length":1,"stats":{"Line":0}},{"line":90,"address":[5646160],"length":1,"stats":{"Line":0}},{"line":91,"address":[5646122],"length":1,"stats":{"Line":0}},{"line":93,"address":[5646152],"length":1,"stats":{"Line":0}},{"line":96,"address":[5646371],"length":1,"stats":{"Line":0}},{"line":98,"address":[5646301],"length":1,"stats":{"Line":0}},{"line":99,"address":[5646263],"length":1,"stats":{"Line":0}},{"line":101,"address":[5646293],"length":1,"stats":{"Line":0}},{"line":104,"address":[5646518],"length":1,"stats":{"Line":0}},{"line":106,"address":[5646448],"length":1,"stats":{"Line":0}},{"line":107,"address":[5646410],"length":1,"stats":{"Line":0}},{"line":109,"address":[5646440],"length":1,"stats":{"Line":0}},{"line":112,"address":[5646665],"length":1,"stats":{"Line":0}},{"line":114,"address":[5646595],"length":1,"stats":{"Line":0}},{"line":115,"address":[5646557],"length":1,"stats":{"Line":0}},{"line":117,"address":[5646587],"length":1,"stats":{"Line":0}},{"line":120,"address":[5646812],"length":1,"stats":{"Line":0}},{"line":122,"address":[5646742],"length":1,"stats":{"Line":0}},{"line":123,"address":[5646704],"length":1,"stats":{"Line":0}},{"line":125,"address":[5646734],"length":1,"stats":{"Line":0}},{"line":128,"address":[5646959],"length":1,"stats":{"Line":0}},{"line":130,"address":[5646889],"length":1,"stats":{"Line":0}},{"line":131,"address":[5646851],"length":1,"stats":{"Line":0}},{"line":133,"address":[5646881],"length":1,"stats":{"Line":0}},{"line":136,"address":[5647106],"length":1,"stats":{"Line":0}},{"line":138,"address":[5647036],"length":1,"stats":{"Line":0}},{"line":139,"address":[5646998],"length":1,"stats":{"Line":0}},{"line":141,"address":[5647028],"length":1,"stats":{"Line":0}},{"line":144,"address":[5647253],"length":1,"stats":{"Line":0}},{"line":146,"address":[5647183],"length":1,"stats":{"Line":0}},{"line":147,"address":[5647145],"length":1,"stats":{"Line":0}},{"line":149,"address":[5647175],"length":1,"stats":{"Line":0}},{"line":152,"address":[5647400],"length":1,"stats":{"Line":0}},{"line":154,"address":[5647330],"length":1,"stats":{"Line":0}},{"line":155,"address":[5647292],"length":1,"stats":{"Line":0}},{"line":157,"address":[5647322],"length":1,"stats":{"Line":0}},{"line":160,"address":[5647547],"length":1,"stats":{"Line":0}},{"line":162,"address":[5647477],"length":1,"stats":{"Line":0}},{"line":163,"address":[5647439],"length":1,"stats":{"Line":0}},{"line":165,"address":[5647469],"length":1,"stats":{"Line":0}},{"line":168,"address":[5647694],"length":1,"stats":{"Line":0}},{"line":170,"address":[5647624],"length":1,"stats":{"Line":0}},{"line":171,"address":[5647586],"length":1,"stats":{"Line":0}},{"line":173,"address":[5647616],"length":1,"stats":{"Line":0}},{"line":176,"address":[5647841],"length":1,"stats":{"Line":0}},{"line":178,"address":[5647771],"length":1,"stats":{"Line":0}},{"line":179,"address":[5647733],"length":1,"stats":{"Line":0}},{"line":181,"address":[5647763],"length":1,"stats":{"Line":0}},{"line":186,"address":[5647888],"length":1,"stats":{"Line":0}},{"line":187,"address":[5648032,5647906,5648012],"length":1,"stats":{"Line":0}},{"line":188,"address":[5648028],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":85},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","components","dashboard_components","job_table_sorting.rs"],"content":"use crate::models::data_structure::job::JobState;\n\n/**\n * Enum for sorting keys\n */\n#[derive(PartialEq, Copy, Clone)]\npub(crate) enum SortKey {\n    Id,\n    Owner,\n    Queue,\n    Command,\n    State,\n    Message,\n    SubmissionTime,\n    ScheduledStartTime,\n    StartTime,\n    StopTime,\n    ExitCode,\n    Clusters,\n    WallTime,\n}\n\n/**\n * Implementation of the sorting keys\n */\nimpl SortKey {\n    /**\n     * Sorts the jobs based on the selected key\n     */\n    pub fn sort_jobs\u003cT\u003e(self, jobs: \u0026mut Vec\u003cT\u003e, ascending: bool)\n    where\n        T: JobSortable,\n    {\n        let comparator = |a: \u0026T, b: \u0026T| {\n            let cmp = match self {\n                SortKey::Id =\u003e a.get_id().cmp(\u0026b.get_id()), // Compare the job id\n                SortKey::Owner =\u003e a.get_owner().cmp(\u0026b.get_owner()), // Compare the job owner\n                SortKey::State =\u003e a.get_state().cmp(\u0026b.get_state()), // Compare the job state\n                SortKey::StartTime =\u003e a.get_start_time().cmp(\u0026b.get_start_time()), // Compare the job start time\n                SortKey::WallTime =\u003e a.get_walltime().cmp(\u0026b.get_walltime()), // Compare the job walltime\n                SortKey::Queue =\u003e a.get_queue().cmp(\u0026b.get_queue()), // Compare the job queue\n                SortKey::Command =\u003e a.get_command().cmp(\u0026b.get_command()), // Compare the job command\n                SortKey::Message =\u003e a.get_message().cmp(\u0026b.get_message()), // Compare the job message\n                SortKey::SubmissionTime =\u003e a.get_submission_time().cmp(\u0026b.get_submission_time()), // Compare the job submission time\n                SortKey::ScheduledStartTime =\u003e { // Compare the job scheduled start time\n                    a.get_scheduled_start().cmp(\u0026b.get_scheduled_start())\n                }\n                SortKey::StopTime =\u003e a.get_stop_time().cmp(\u0026b.get_stop_time()), // Compare the job stop time\n                SortKey::ExitCode =\u003e a.get_exit_code().cmp(\u0026b.get_exit_code()), // Compare the job exit code\n                SortKey::Clusters =\u003e a.get_clusters().cmp(\u0026b.get_clusters()), // Compare the job clusters\n            };\n\n            // If the sorting is ascending, return the comparison, otherwise return the reverse comparison\n            if ascending {\n                cmp\n            } else {\n                cmp.reverse()\n            }\n        };\n        \n        // Sort the jobs based on the comparator\n        jobs.sort_by(comparator);\n    }\n}\n\n/**\n * Trait for sortable jobs\n */\npub trait JobSortable {\n    fn get_id(\u0026self) -\u003e \u0026u32;\n    fn get_owner(\u0026self) -\u003e \u0026str;\n    fn get_state(\u0026self) -\u003e \u0026JobState;\n    fn get_start_time(\u0026self) -\u003e u64;\n    fn get_walltime(\u0026self) -\u003e u64;\n    fn get_queue(\u0026self) -\u003e \u0026str;\n    fn get_command(\u0026self) -\u003e \u0026str;\n    fn get_message(\u0026self) -\u003e Option\u003c\u0026str\u003e;\n    fn get_submission_time(\u0026self) -\u003e u64;\n    fn get_scheduled_start(\u0026self) -\u003e u64;\n    fn get_stop_time(\u0026self) -\u003e u64;\n    fn get_exit_code(\u0026self) -\u003e \u0026Option\u003ci32\u003e;\n    fn get_clusters(\u0026self) -\u003e \u0026Vec\u003cString\u003e;\n    fn get_end_date(\u0026self) -\u003e i64;\n}\n","traces":[{"line":30,"address":[4920960],"length":1,"stats":{"Line":0}},{"line":34,"address":[4920991,4921056],"length":1,"stats":{"Line":0}},{"line":35,"address":[4921102],"length":1,"stats":{"Line":0}},{"line":36,"address":[4921141],"length":1,"stats":{"Line":0}},{"line":37,"address":[4921201],"length":1,"stats":{"Line":0}},{"line":38,"address":[4921459],"length":1,"stats":{"Line":0}},{"line":39,"address":[4921734],"length":1,"stats":{"Line":0}},{"line":40,"address":[4921980],"length":1,"stats":{"Line":0}},{"line":41,"address":[4921287],"length":1,"stats":{"Line":0}},{"line":42,"address":[4921373],"length":1,"stats":{"Line":0}},{"line":43,"address":[4921519],"length":1,"stats":{"Line":0}},{"line":44,"address":[4921602],"length":1,"stats":{"Line":0}},{"line":46,"address":[4921668],"length":1,"stats":{"Line":0}},{"line":48,"address":[4921800],"length":1,"stats":{"Line":0}},{"line":49,"address":[4921866],"length":1,"stats":{"Line":0}},{"line":50,"address":[4921923],"length":1,"stats":{"Line":0}},{"line":54,"address":[4922041],"length":1,"stats":{"Line":0}},{"line":55,"address":[4922066],"length":1,"stats":{"Line":0}},{"line":57,"address":[4922050],"length":1,"stats":{"Line":0}},{"line":62,"address":[4921011],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":20},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","components","dashboard_components","metric_box.rs"],"content":"use eframe::egui::{self, Color32, RichText, Vec2, Widget};\nuse egui::Response;\n\n/**\n * Struct for the metric box\n */\n#[derive(Clone)]\npub struct MetricBox {\n    title: String, // Title of the metric box\n    value: String, // Value of the metric box\n    color: Color32, // Color of the metric box\n}\n\n/**\n * Implementation of the metric box\n */\nimpl MetricBox {\n    pub const MIN_WIDTH: f32 = 180.0; // Minimum width of the metric box\n    pub const MIN_HEIGHT: f32 = 90.0; // Minimum height of the metric box\n\n    /**\n     * Creates a new metric box\n     */\n    pub fn new(title: String, value: String, color: Color32) -\u003e Self {\n        MetricBox {\n            title,\n            value,\n            color,\n        }\n    }\n\n    /**\n     * Shows the metric box with a specific size\n     */\n    pub fn ui_sized(self, ui: \u0026mut egui::Ui, size: Vec2) -\u003e Response {\n        egui::Frame::none()\n            .fill(if ui.ctx().style().visuals.dark_mode {\n                egui::Color32::from_gray(28)\n            } else {\n                egui::Color32::from_gray(255)\n            })\n            .rounding(6.0)\n            .stroke(egui::Stroke::new(0.7, self.color))\n            .show(ui, |ui| {\n                ui.set_min_size(size);\n                ui.vertical_centered(|ui| {\n                    let title_size = (13.0 * size.x / Self::MIN_WIDTH).min(16.0);\n                    let value_size = (24.0 * size.x / Self::MIN_WIDTH).min(32.0);\n\n                    ui.add_space(size.y * 0.1);\n                    ui.label(\n                        RichText::new(\u0026self.title)\n                            .color(egui::Color32::from_gray(160))\n                            .size(title_size),\n                    );\n                    ui.add_space(size.y * 0.15);\n                    ui.heading(\n                        RichText::new(\u0026self.value)\n                            .color(self.color.gamma_multiply(0.8))\n                            .size(value_size)\n                            .strong(),\n                    );\n                });\n            })\n            .response\n    }\n}\n\n/**\n * Implementation of the widget for the metric box\n */\nimpl Widget for MetricBox {\n    fn ui(self, ui: \u0026mut egui::Ui) -\u003e Response {\n        self.ui_sized(ui, Vec2::new(Self::MIN_WIDTH, Self::MIN_HEIGHT))\n    }\n}\n","traces":[{"line":24,"address":[5603616],"length":1,"stats":{"Line":0}},{"line":35,"address":[5603696,5604397],"length":1,"stats":{"Line":0}},{"line":36,"address":[5603743,5604122,5604218,5604011,5604347],"length":1,"stats":{"Line":0}},{"line":37,"address":[5603804],"length":1,"stats":{"Line":0}},{"line":38,"address":[5604060],"length":1,"stats":{"Line":0}},{"line":40,"address":[5603975],"length":1,"stats":{"Line":0}},{"line":43,"address":[5604134],"length":1,"stats":{"Line":0}},{"line":44,"address":[5282080],"length":1,"stats":{"Line":0}},{"line":45,"address":[5282118],"length":1,"stats":{"Line":0}},{"line":46,"address":[5283073,5282146,5282256,5283105],"length":1,"stats":{"Line":0}},{"line":47,"address":[5282281],"length":1,"stats":{"Line":0}},{"line":48,"address":[5282376],"length":1,"stats":{"Line":0}},{"line":50,"address":[5282440],"length":1,"stats":{"Line":0}},{"line":51,"address":[5282687],"length":1,"stats":{"Line":0}},{"line":52,"address":[5282581,5282470,5282672],"length":1,"stats":{"Line":0}},{"line":53,"address":[5282504,5282643,5283114],"length":1,"stats":{"Line":0}},{"line":56,"address":[5282730],"length":1,"stats":{"Line":0}},{"line":57,"address":[5283030],"length":1,"stats":{"Line":0}},{"line":58,"address":[5282760,5282913,5282983],"length":1,"stats":{"Line":0}},{"line":59,"address":[5282975,5282794,5283086],"length":1,"stats":{"Line":0}},{"line":73,"address":[5604432,5604614,5604592],"length":1,"stats":{"Line":0}},{"line":74,"address":[5604607,5604510,5604455],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":22},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","components","dashboard_components","metric_chart.rs"],"content":"use egui::{Response, RichText, Vec2, Widget};\nuse egui_plot::AxisHints;\nuse egui_plot::{Bar, BarChart, Plot};\nuse std::collections::HashMap;\n\nuse crate::models::data_structure::job::Job;\n\npub enum ChartType {\n    Bar(BarChart),\n}\n\npub struct MetricChart {\n    pub title: String,\n    pub chart: ChartType,\n    pub color: egui::Color32,\n    pub labels: Vec\u003cString\u003e,\n}\n\nimpl MetricChart {\n    const MIN_WIDTH: f32 = 200.0;\n    const MIN_HEIGHT: f32 = 150.0;\n\n    pub fn new(title: \u0026str, chart: ChartType, labels: Vec\u003cString\u003e) -\u003e Self {\n        MetricChart {\n            title: title.to_string(),\n            chart,\n            color: egui::Color32::from_rgb(128, 128, 128),\n            labels,\n        }\n    }\n\n    pub fn ui_with_chart(self, ui: \u0026mut egui::Ui, size: Vec2) -\u003e Response {\n        egui::Frame::none()\n            .fill(if ui.ctx().style().visuals.dark_mode {\n                egui::Color32::from_gray(28)\n            } else {\n                egui::Color32::from_gray(255)\n            })\n            .rounding(6.0)\n            .stroke(egui::Stroke::new(0.7, self.color))\n            .show(ui, |ui| {\n                ui.set_min_size(size);\n                ui.vertical_centered(|ui| {\n                    let title_size = (13.0 * size.x / Self::MIN_WIDTH).min(16.0);\n\n                    ui.label(\n                        RichText::new(\u0026self.title)\n                            .color(egui::Color32::from_gray(160))\n                            .size(title_size),\n                    );\n                    ui.add_space(size.y * 0.15);\n\n                    let labels = \u0026self.labels;\n                    Plot::new(\"metric_chart\")\n                        .view_aspect(2.0)\n                        .allow_drag(false)\n                        .allow_zoom(false)\n                        .allow_scroll(false)\n                        .show_x(false)\n                        .show_y(false)\n                        .custom_x_axes(vec![AxisHints::new_x().formatter(move |mark, _range| {\n                            let index = mark.value.round() as usize;\n                            if index \u003c labels.len() {\n                                labels[index].to_string()\n                            } else {\n                                // Fallback for out-of-range values\n                                format!(\"{:.1}\", mark.value)\n                            }\n                        })])\n                        .show(ui, |plot_ui| match self.chart {\n                            ChartType::Bar(bar_chart) =\u003e plot_ui.bar_chart(bar_chart),\n                        })\n                        .response // Return the response from the Plot widget\n                });\n            })\n            .response\n    }\n}\n\nimpl Widget for MetricChart {\n    fn ui(self, ui: \u0026mut egui::Ui) -\u003e Response {\n        self.ui_with_chart(ui, Vec2::new(Self::MIN_WIDTH, Self::MIN_HEIGHT))\n    }\n}\n\npub fn create_jobstate_chart(jobs: Vec\u003cJob\u003e) -\u003e MetricChart {\n    let mut job_states = HashMap::new();\n    for job in jobs {\n        let count = job_states.entry(job.state).or_insert(0);\n        *count += 1;\n    }\n\n    // Convert HashMap to Vec and sort by state label\n    let mut state_counts: Vec\u003c_\u003e = job_states.into_iter().collect();\n    state_counts.sort_by_key(|(state, _)| state.get_label());\n\n    // Extract labels for the x-axis\n    let labels: Vec\u003cString\u003e = state_counts\n        .iter()\n        .map(|(state, _)| state.get_label().to_string())\n        .collect();\n\n    let bars: Vec\u003cBar\u003e = state_counts\n        .into_iter()\n        .enumerate()\n        .map(|(index, (state, count))| {\n            Bar::new(index as f64, count as f64)\n                .name(state.get_label())\n                .fill(state.get_color().1)\n        })\n        .collect();\n\n    let plot = BarChart::new(bars).name(\"Job States\");\n    MetricChart::new(\"Job State\", ChartType::Bar(plot), labels)\n}\n","traces":[{"line":23,"address":[5605723,5605761,5605312],"length":1,"stats":{"Line":0}},{"line":25,"address":[5605355],"length":1,"stats":{"Line":0}},{"line":27,"address":[5605555,5605489],"length":1,"stats":{"Line":0}},{"line":32,"address":[5606691,5605792],"length":1,"stats":{"Line":0}},{"line":33,"address":[5606519,5606238,5606337,5605839,5606127],"length":1,"stats":{"Line":0}},{"line":34,"address":[5605920],"length":1,"stats":{"Line":0}},{"line":35,"address":[5606176],"length":1,"stats":{"Line":0}},{"line":37,"address":[5606091],"length":1,"stats":{"Line":0}},{"line":40,"address":[5606250],"length":1,"stats":{"Line":0}},{"line":41,"address":[5238003,5238028,5237712],"length":1,"stats":{"Line":0}},{"line":42,"address":[5237750],"length":1,"stats":{"Line":0}},{"line":43,"address":[5239198,5237841,5238048,5239256],"length":1,"stats":{"Line":0}},{"line":44,"address":[5238232,5238095],"length":1,"stats":{"Line":0}},{"line":46,"address":[5238449],"length":1,"stats":{"Line":0}},{"line":47,"address":[5238351,5238437,5238241],"length":1,"stats":{"Line":0}},{"line":48,"address":[5238413,5239234,5238277],"length":1,"stats":{"Line":0}},{"line":51,"address":[5238499],"length":1,"stats":{"Line":0}},{"line":53,"address":[5238531],"length":1,"stats":{"Line":0}},{"line":54,"address":[5238548,5239003,5239151],"length":1,"stats":{"Line":0}},{"line":60,"address":[5238731],"length":1,"stats":{"Line":0}},{"line":61,"address":[5239207,5238749,5240048,5238807],"length":1,"stats":{"Line":0}},{"line":62,"address":[5240098],"length":1,"stats":{"Line":0}},{"line":63,"address":[5240204],"length":1,"stats":{"Line":0}},{"line":64,"address":[5240729],"length":1,"stats":{"Line":0}},{"line":67,"address":[5240595,5240717,5240331],"length":1,"stats":{"Line":0}},{"line":70,"address":[5239060,5239296],"length":1,"stats":{"Line":0}},{"line":71,"address":[5239316],"length":1,"stats":{"Line":0}},{"line":81,"address":[5606989,5606768,5606964],"length":1,"stats":{"Line":0}},{"line":82,"address":[5606797,5606864,5606982],"length":1,"stats":{"Line":0}},{"line":86,"address":[5608222,5608401,5607008],"length":1,"stats":{"Line":0}},{"line":87,"address":[5607030],"length":1,"stats":{"Line":0}},{"line":88,"address":[5607128,5607228,5607433,5607355],"length":1,"stats":{"Line":0}},{"line":89,"address":[5608299,5607435],"length":1,"stats":{"Line":0}},{"line":90,"address":[5608366,5608324],"length":1,"stats":{"Line":0}},{"line":94,"address":[5607466],"length":1,"stats":{"Line":0}},{"line":95,"address":[5239360,5239393],"length":1,"stats":{"Line":0}},{"line":98,"address":[5607664],"length":1,"stats":{"Line":0}},{"line":100,"address":[5239424,5239461],"length":1,"stats":{"Line":0}},{"line":103,"address":[5607768,5607888],"length":1,"stats":{"Line":0}},{"line":106,"address":[5240023,5239609,5239584,5239994],"length":1,"stats":{"Line":0}},{"line":107,"address":[5239932,5239653,5239779],"length":1,"stats":{"Line":0}},{"line":108,"address":[5239731,5239812,5240032],"length":1,"stats":{"Line":0}},{"line":109,"address":[5239833,5239978,5240007],"length":1,"stats":{"Line":0}},{"line":113,"address":[5607941],"length":1,"stats":{"Line":0}},{"line":114,"address":[5608008],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":45},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","components","dashboard_components","metric_grid.rs"],"content":"use super::{metric_box::MetricBox, metric_chart::MetricChart};\nuse eframe::egui;\n\npub struct MetricGrid {\n    columns: usize,\n    spacing: f32,\n}\n\nimpl Default for MetricGrid {\n    fn default() -\u003e Self {\n        Self {\n            columns: 3,\n            spacing: 10.0,\n        }\n    }\n}\n\nimpl MetricGrid {\n    pub fn show\u003cF\u003e(\u0026self, ui: \u0026mut egui::Ui, add_contents: F)\n    where\n        F: FnOnce(\u0026mut MetricGridBuilder),\n    {\n        let available_width = ui.available_width();\n\n        // First calculate the total minimum width needed\n        let min_total_width = (MetricBox::MIN_WIDTH * self.columns as f32)\n            + (self.spacing * (self.columns - 1) as f32);\n\n        // If available width is less than minimum, use minimum\n        let actual_width = available_width.max(min_total_width);\n\n        // Recalculate column width taking spacing into account\n        let column_width =\n            (actual_width - (self.spacing * (self.columns - 1) as f32)) / self.columns as f32;\n\n        egui::Grid::new(\"metrics_grid\")\n            .spacing([self.spacing, self.spacing])\n            .min_col_width(column_width)\n            .max_col_width(column_width)\n            .show(ui, |ui| {\n                let mut builder = MetricGridBuilder {\n                    ui,\n                    column_width,\n                    current_column: 0,\n                    columns: self.columns,\n                };\n                add_contents(\u0026mut builder);\n\n                if builder.current_column \u003e 0 \u0026\u0026 builder.current_column \u003c builder.columns {\n                    builder.new_row();\n                }\n            });\n    }\n}\n\npub struct MetricGridBuilder\u003c'a\u003e {\n    ui: \u0026'a mut egui::Ui,\n    column_width: f32,\n    current_column: usize,\n    columns: usize,\n}\n\nimpl\u003c'a\u003e MetricGridBuilder\u003c'a\u003e {\n    pub fn add_metric(\u0026mut self, metric: MetricBox) {\n        if self.current_column \u003e= self.columns {\n            self.new_row();\n        }\n\n        self.ui\n            .add_sized([self.column_width, MetricBox::MIN_HEIGHT], metric);\n        self.current_column += 1;\n    }\n\n    pub fn add_chart(\u0026mut self, chart: MetricChart) {\n        if self.current_column \u003e= self.columns {\n            self.new_row();\n        }\n        self.ui\n            .add_sized([self.column_width, MetricBox::MIN_HEIGHT], chart);\n        self.current_column += 1;\n    }\n\n    pub fn new_row(\u0026mut self) {\n        if self.current_column \u003e 0 {\n            self.ui.end_row();\n        }\n        self.current_column = 0;\n    }\n}\n","traces":[{"line":10,"address":[4335648],"length":1,"stats":{"Line":0}},{"line":19,"address":[5441636,5440672],"length":1,"stats":{"Line":0}},{"line":23,"address":[5440829,5440744],"length":1,"stats":{"Line":0}},{"line":26,"address":[5440838,5441049],"length":1,"stats":{"Line":0}},{"line":27,"address":[5440927,5441075],"length":1,"stats":{"Line":0}},{"line":30,"address":[5441106,5441062],"length":1,"stats":{"Line":0}},{"line":33,"address":[5441115,5441361],"length":1,"stats":{"Line":0}},{"line":34,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[5441410,5441605,5441330],"length":1,"stats":{"Line":0}},{"line":37,"address":[5441387],"length":1,"stats":{"Line":0}},{"line":38,"address":[],"length":0,"stats":{"Line":0}},{"line":39,"address":[],"length":0,"stats":{"Line":0}},{"line":40,"address":[5441664,5441539],"length":1,"stats":{"Line":0}},{"line":41,"address":[5441690],"length":1,"stats":{"Line":0}},{"line":42,"address":[],"length":0,"stats":{"Line":0}},{"line":43,"address":[5441676],"length":1,"stats":{"Line":0}},{"line":44,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[5441683],"length":1,"stats":{"Line":0}},{"line":47,"address":[5441714],"length":1,"stats":{"Line":0}},{"line":49,"address":[5441730,5441743],"length":1,"stats":{"Line":0}},{"line":50,"address":[5441755],"length":1,"stats":{"Line":0}},{"line":64,"address":[4335664,4335988,4336013],"length":1,"stats":{"Line":0}},{"line":65,"address":[4335689],"length":1,"stats":{"Line":0}},{"line":66,"address":[4335861,4335902],"length":1,"stats":{"Line":0}},{"line":69,"address":[4335729,4335812],"length":1,"stats":{"Line":0}},{"line":70,"address":[4335732,4335907],"length":1,"stats":{"Line":0}},{"line":71,"address":[4335928,4335968],"length":1,"stats":{"Line":0}},{"line":74,"address":[4336032,4336362,4336337],"length":1,"stats":{"Line":0}},{"line":75,"address":[4336057],"length":1,"stats":{"Line":0}},{"line":76,"address":[4336253,4336212],"length":1,"stats":{"Line":0}},{"line":78,"address":[4336093,4336171],"length":1,"stats":{"Line":0}},{"line":79,"address":[4336101,4336258],"length":1,"stats":{"Line":0}},{"line":80,"address":[4336317,4336279],"length":1,"stats":{"Line":0}},{"line":83,"address":[4336384],"length":1,"stats":{"Line":0}},{"line":84,"address":[4336398],"length":1,"stats":{"Line":0}},{"line":85,"address":[4336428],"length":1,"stats":{"Line":0}},{"line":87,"address":[4336410],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":37},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","components","dashboard_components","mod.rs"],"content":"pub mod job_table;\npub mod metric_box;\npub mod metric_grid;\npub mod metric_chart;\npub mod job_table_col_selection;\npub mod job_table_sorting;","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","components","gantt_aggregate_by.rs"],"content":"#[derive(Clone, Copy, Debug, PartialEq, Eq)]\npub enum AggregateByLevel1Enum {\n    Owner,\n    Cluster,\n    Host,\n}\n\n#[derive(PartialEq, Clone, Copy)]\npub enum AggregateByLevel2Enum {\n    Owner,\n    Host,\n    None,\n}\n\npub struct AggregateBy {\n    pub level_1: AggregateByLevel1Enum,\n    pub level_2: AggregateByLevel2Enum,\n}\n\nimpl Default for AggregateBy {\n    fn default() -\u003e Self {\n        Self {\n            level_1: AggregateByLevel1Enum::Cluster, // Default value for the first level is Cluster\n            level_2: AggregateByLevel2Enum::Host, // Default value for the second level is Host\n        }\n    }\n}\n\n/*\n * To manage the aggregation levels, wich is similar to a vertical zoom in the Gantt chart (the horizontal zoom being the time range)\n * The rule for aggregation is:\n * The first level must be higher than the second level, the order is:\n * Cluster -\u003e Host -\u003e Owner -\u003e None\n */\nimpl AggregateBy {\n    pub fn ui(\u0026mut self, ui: \u0026mut egui::Ui) {\n        egui::Grid::new(\"aggregate_by_grid\")\n            .num_columns(3)\n            .show(ui, |ui| {\n                ui.label(format!(\"{}:\", t!(\"app.gantt.settings.aggregate_by\")));\n                ui.label(format!(\"{} 1:\", t!(\"app.gantt.settings.level\")));\n                let mut on_change_level_1 = false;\n                on_change_level_1 |= ui\n                    .radio_value(\u0026mut self.level_1, AggregateByLevel1Enum::Cluster, \"Cluster\")\n                    .clicked();\n                on_change_level_1 |= ui\n                    .radio_value(\n                        \u0026mut self.level_1,\n                        AggregateByLevel1Enum::Host,\n                        t!(\"app.gantt.settings.host\"),\n                    )\n                    .clicked();\n                on_change_level_1 |= ui\n                    .radio_value(\n                        \u0026mut self.level_1,\n                        AggregateByLevel1Enum::Owner,\n                        t!(\"app.gantt.settings.owner\"),\n                    )\n                    .clicked();\n                ui.end_row();\n\n                if on_change_level_1 {\n                    self.level_2 = match self.level_1 {\n                        AggregateByLevel1Enum::Cluster =\u003e AggregateByLevel2Enum::Host,\n                        AggregateByLevel1Enum::Host =\u003e AggregateByLevel2Enum::Owner,\n                        AggregateByLevel1Enum::Owner =\u003e AggregateByLevel2Enum::None,\n                    }\n                }\n\n                ui.label(\"\");\n                match self.level_1 {\n                    AggregateByLevel1Enum::Cluster =\u003e {\n                        ui.label(format!(\"{} 2:\", t!(\"app.gantt.settings.level\")));\n                        ui.radio_value(\n                            \u0026mut self.level_2,\n                            AggregateByLevel2Enum::Host,\n                            t!(\"app.gantt.settings.host\"),\n                        );\n                        ui.radio_value(\n                            \u0026mut self.level_2,\n                            AggregateByLevel2Enum::Owner,\n                            t!(\"app.gantt.settings.owner\"),\n                        );\n                        ui.radio_value(\n                            \u0026mut self.level_2,\n                            AggregateByLevel2Enum::None,\n                            t!(\"app.gantt.settings.none\"),\n                        );\n                    }\n                    AggregateByLevel1Enum::Owner =\u003e {}\n                    AggregateByLevel1Enum::Host =\u003e {\n                        ui.label(format!(\"{} 2:\", t!(\"app.gantt.settings.level\")));\n                        ui.radio_value(\n                            \u0026mut self.level_2,\n                            AggregateByLevel2Enum::Owner,\n                            t!(\"app.gantt.settings.owner\"),\n                        );\n                        ui.radio_value(\n                            \u0026mut self.level_2,\n                            AggregateByLevel2Enum::None,\n                            t!(\"app.gantt.settings.none\"),\n                        );\n                    }\n                }\n                ui.end_row();\n            });\n    }\n}\n","traces":[{"line":36,"address":[4355600],"length":1,"stats":{"Line":0}},{"line":37,"address":[4355697,4355632],"length":1,"stats":{"Line":0}},{"line":39,"address":[4355690],"length":1,"stats":{"Line":0}},{"line":40,"address":[4910242,4909158,4909763,4919001],"length":1,"stats":{"Line":0}},{"line":41,"address":[4918929,4910292,4910809,4911320],"length":1,"stats":{"Line":0}},{"line":42,"address":[4911364],"length":1,"stats":{"Line":0}},{"line":43,"address":[4911579,4911388],"length":1,"stats":{"Line":0}},{"line":44,"address":[4911372],"length":1,"stats":{"Line":0}},{"line":45,"address":[4911528,4911597],"length":1,"stats":{"Line":0}},{"line":46,"address":[4912056,4912273],"length":1,"stats":{"Line":0}},{"line":48,"address":[4911614],"length":1,"stats":{"Line":0}},{"line":49,"address":[4911630],"length":1,"stats":{"Line":0}},{"line":50,"address":[4911638,4911817,4912038,4912087],"length":1,"stats":{"Line":0}},{"line":52,"address":[4911972,4912511,4912291,4918893,4912222,4911741],"length":1,"stats":{"Line":0}},{"line":53,"address":[4912848,4913065],"length":1,"stats":{"Line":0}},{"line":55,"address":[4912384],"length":1,"stats":{"Line":0}},{"line":56,"address":[4912400],"length":1,"stats":{"Line":0}},{"line":57,"address":[4912408,4912879,4912609,4912830],"length":1,"stats":{"Line":0}},{"line":59,"address":[4912533,4918857,4913195,4912764,4913083,4913014],"length":1,"stats":{"Line":0}},{"line":60,"address":[4913177],"length":1,"stats":{"Line":0}},{"line":62,"address":[4913183,4913409],"length":1,"stats":{"Line":0}},{"line":63,"address":[4913318,4913392],"length":1,"stats":{"Line":0}},{"line":64,"address":[4913374],"length":1,"stats":{"Line":0}},{"line":65,"address":[4913384],"length":1,"stats":{"Line":0}},{"line":66,"address":[4913364],"length":1,"stats":{"Line":0}},{"line":70,"address":[4913222],"length":1,"stats":{"Line":0}},{"line":71,"address":[4913271],"length":1,"stats":{"Line":0}},{"line":72,"address":[4916359],"length":1,"stats":{"Line":0}},{"line":73,"address":[4914062,4913648,4913436,4914541,4916513],"length":1,"stats":{"Line":0}},{"line":74,"address":[4915015],"length":1,"stats":{"Line":0}},{"line":75,"address":[4914585],"length":1,"stats":{"Line":0}},{"line":76,"address":[4914598],"length":1,"stats":{"Line":0}},{"line":77,"address":[4914606,4914779,4915046,4915000],"length":1,"stats":{"Line":0}},{"line":79,"address":[4915614],"length":1,"stats":{"Line":0}},{"line":80,"address":[4915168],"length":1,"stats":{"Line":0}},{"line":81,"address":[4915181],"length":1,"stats":{"Line":0}},{"line":82,"address":[4915599,4915378,4915189,4915645],"length":1,"stats":{"Line":0}},{"line":84,"address":[4916213],"length":1,"stats":{"Line":0}},{"line":85,"address":[4915767],"length":1,"stats":{"Line":0}},{"line":86,"address":[4915780],"length":1,"stats":{"Line":0}},{"line":87,"address":[4916198,4915977,4915788,4916244],"length":1,"stats":{"Line":0}},{"line":91,"address":[4918689],"length":1,"stats":{"Line":0}},{"line":92,"address":[4917478,4913542,4918785,4916999,4916585],"length":1,"stats":{"Line":0}},{"line":93,"address":[4917946],"length":1,"stats":{"Line":0}},{"line":94,"address":[4917522],"length":1,"stats":{"Line":0}},{"line":95,"address":[4917535],"length":1,"stats":{"Line":0}},{"line":96,"address":[4917710,4917977,4917931,4917543],"length":1,"stats":{"Line":0}},{"line":98,"address":[4918543],"length":1,"stats":{"Line":0}},{"line":99,"address":[4918099],"length":1,"stats":{"Line":0}},{"line":100,"address":[4918111],"length":1,"stats":{"Line":0}},{"line":101,"address":[4918574,4918529,4918119,4918308],"length":1,"stats":{"Line":0}},{"line":105,"address":[4913422],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":52},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","components","gantt_job_color.rs"],"content":"#[derive(PartialEq)]\npub enum JobColorEnum {\n    Random,\n    State,\n}\n\npub struct JobColor {\n    pub color: JobColorEnum,\n}\n\nimpl Default for JobColor {\n    fn default() -\u003e Self {\n        Self {\n            color: JobColorEnum::Random, // Default value for the job color is Random\n        }\n    }\n}\n\nimpl JobColor {\n\n    /**\n     * Returns true if the the selected job color is random\n     */\n    pub fn is_random(\u0026self) -\u003e bool {\n        self.color == JobColorEnum::Random\n    }\n\n    pub fn ui(\u0026mut self, ui: \u0026mut egui::Ui) {\n        ui.horizontal(|ui| {\n            ui.label(format!(\"{}:\", t!(\"app.gantt.settings.job_color\")));\n            // The job color can be random or based on the job state\n            ui.horizontal(|ui| {\n                ui.radio_value(\n                    \u0026mut self.color,\n                    JobColorEnum::Random,\n                    t!(\"app.gantt.settings.job_color_random\"),\n                );\n                ui.radio_value(\n                    \u0026mut self.color,\n                    JobColorEnum::State,\n                    t!(\"app.gantt.settings.job_color_state\"),\n                );\n            });\n        });\n    }\n}\n","traces":[{"line":24,"address":[4924496],"length":1,"stats":{"Line":0}},{"line":25,"address":[4924501],"length":1,"stats":{"Line":0}},{"line":28,"address":[4924528],"length":1,"stats":{"Line":0}},{"line":29,"address":[4924545],"length":1,"stats":{"Line":0}},{"line":30,"address":[5671193,5671700,5671832,5671774,5670680],"length":1,"stats":{"Line":0}},{"line":32,"address":[5671734,5671872,5673133],"length":1,"stats":{"Line":0}},{"line":33,"address":[5672331,5671897],"length":1,"stats":{"Line":0}},{"line":34,"address":[5671913],"length":1,"stats":{"Line":0}},{"line":35,"address":[5671923],"length":1,"stats":{"Line":0}},{"line":36,"address":[5671931,5672098,5672319,5672362],"length":1,"stats":{"Line":0}},{"line":38,"address":[5672921],"length":1,"stats":{"Line":0}},{"line":39,"address":[5672481],"length":1,"stats":{"Line":0}},{"line":40,"address":[5672491],"length":1,"stats":{"Line":0}},{"line":41,"address":[5672499,5672955,5672909,5672688],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":14},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","components","job_details.rs"],"content":"use crate::models::data_structure::cluster::Cluster;\nuse crate::models::data_structure::job::Job;\nuse crate::models::utils::date_converter::format_timestamp;\nuse eframe::egui;\n\npub struct JobDetailsWindow {\n    pub open: bool,\n    pub job: Job,\n    pub cluster: Vec\u003cCluster\u003e,\n}\n\nimpl JobDetailsWindow {\n    pub fn new(job: Job, cluster: Vec\u003cCluster\u003e) -\u003e Self {\n        Self {\n            open: true,\n            job: job,\n            cluster: cluster,\n        }\n    }\n\n    pub fn ui(\u0026mut self, ui: \u0026mut egui::Ui) {\n        // If the window is not open, do not render it\n        if !self.open {\n            return;\n        }\n\n        egui::Window::new(format!(\n            \"{}: {}\",\n            t!(\"app.details.general.title\"),\n            self.job.id\n        ))\n        .collapsible(true)\n        .movable(true)\n        .open(\u0026mut self.open)\n        .vscroll(true)\n        .show(ui.ctx(), |ui| {\n            // Base information\n            ui.group(|ui| {\n                ui.heading(t!(\"app.details.basic_info.title\"));\n                ui.horizontal(|ui| {\n                    ui.label(format!(\"{}:\", t!(\"app.details.basic_info.owner\")));\n                    ui.strong(self.job.owner.to_string());\n                });\n                ui.horizontal(|ui| {\n                    ui.label(format!(\"{}:\", t!(\"app.details.basic_info.queue\")));\n                    ui.strong(self.job.queue.to_string());\n                });\n                ui.horizontal(|ui| {\n                    ui.label(format!(\"{}:\", t!(\"app.details.basic_info.command\")));\n                    ui.strong(self.job.command.to_string());\n                });\n            });\n\n            ui.add_space(8.0);\n\n            // Status\n            ui.group(|ui| {\n                ui.heading(t!(\"app.details.status.title\"));\n                ui.horizontal(|ui| {\n                    ui.label(format!(\"{}:\", t!(\"app.details.status.state\")));\n                    let state_text = self.job.state.get_label();\n                    let (state_color, bg_color) = self.job.state.get_color();\n                    ui.label(\n                        egui::RichText::new(state_text)\n                            .color(state_color)\n                            .background_color(bg_color)\n                            .strong(),\n                    );\n                });\n                if let Some(exit_code) = self.job.exit_code {\n                    ui.horizontal(|ui| {\n                        ui.label(\"Exit Code: \");\n                        ui.strong(exit_code.to_string());\n                    });\n                }\n                if let Some(message) = \u0026self.job.message {\n                    ui.horizontal(|ui| {\n                        ui.label(format!(\"{}:\", t!(\"app.details.status.message\")));\n                        ui.label(message);\n                    });\n                }\n            });\n\n            ui.add_space(8.0);\n\n            // Timing information\n            ui.group(|ui| {\n                ui.heading(t!(\"app.details.timing_info.title\"));\n\n                ui.horizontal(|ui| {\n                    ui.label(format!(\n                        \"{}:\",\n                        t!(\"app.details.timing_info.submission_time\")\n                    ));\n                    ui.strong(format_timestamp(self.job.submission_time));\n                });\n                ui.horizontal(|ui| {\n                    ui.label(format!(\n                        \"{}:\",\n                        t!(\"app.details.timing_info.scheduled_start_time\")\n                    ));\n                    ui.strong(format_timestamp(self.job.scheduled_start));\n                });\n                ui.horizontal(|ui| {\n                    ui.label(format!(\n                        \"{}:\",\n                        t!(\"app.details.timing_info.actual_start_time\")\n                    ));\n                    ui.strong(format_timestamp(self.job.start_time));\n                });\n                ui.horizontal(|ui| {\n                    ui.label(format!(\"{}:\", t!(\"app.details.timing_info.stop_time\")));\n                    ui.strong(format_timestamp(self.job.stop_time));\n                });\n                ui.horizontal(|ui| {\n                    ui.label(format!(\"{}:\", t!(\"app.details.timing_info.wall_time\")));\n                    ui.strong(format!(\"{} seconds\", self.job.walltime));\n                });\n            });\n\n            ui.add_space(8.0);\n\n            if !self.cluster.is_empty() {\n                // Ressources\n                ui.group(|ui| {\n                    ui.heading(t!(\"app.details.resources.title\"));\n                    egui::CollapsingHeader::new(t!(\"app.details.resources.cluster\"))\n                        .default_open(false)\n                        .show(ui, |ui| {\n                            for cluster in \u0026self.cluster {\n                                egui::CollapsingHeader::new(format!(\"{}\", cluster.name))\n                                    .default_open(false)\n                                    .show(ui, |ui| {\n                                        for host in \u0026cluster.hosts {\n                                            egui::CollapsingHeader::new(format!(\"{}\", host.name))\n                                                .default_open(false)\n                                                .show(ui, |ui| {\n                                                    ui.horizontal(|ui| {\n                                                        ui.label(\"Network Address: \");\n                                                        ui.strong(format!(\n                                                            \"{}\",\n                                                            host.network_address\n                                                        ));\n                                                    });\n\n                                                    for cpu in \u0026host.cpus {\n                                                        egui::CollapsingHeader::new(format!(\n                                                            \"{}\",\n                                                            cpu.name\n                                                        ))\n                                                        .default_open(false)\n                                                        .show(ui, |ui| {\n                                                            ui.horizontal(|ui| {\n                                                                ui.label(\"Chassis: \");\n                                                                ui.strong(format!(\n                                                                    \"{}\",\n                                                                    cpu.chassis\n                                                                ));\n                                                            });\n\n                                                            ui.horizontal(|ui| {\n                                                                ui.label(\"Core Count: \");\n                                                                ui.strong(format!(\n                                                                    \"{}\",\n                                                                    cpu.core_count\n                                                                ));\n                                                            });\n\n                                                            ui.horizontal(|ui| {\n                                                                ui.label(\"CPU Frequency: \");\n                                                                ui.strong(format!(\n                                                                    \"{}\",\n                                                                    cpu.cpufreq\n                                                                ));\n                                                            });\n\n                                                            for resource in \u0026cpu.resources {\n                                                                egui::CollapsingHeader::new(\n                                                                    format!(\"{}\", resource.id),\n                                                                )\n                                                                .default_open(false)\n                                                                .show(ui, |ui| {\n                                                                    ui.horizontal(|ui| {\n                                                                        ui.label(\"State: \");\n                                                                        ui.strong(format!(\n                                                                            \"{}\",\n                                                                            resource.state\n                                                                        ));\n                                                                    });\n                                                                    ui.horizontal(|ui| {\n                                                                        ui.label(\"Thread Count: \");\n                                                                        ui.strong(format!(\n                                                                            \"{}\",\n                                                                            resource.thread_count\n                                                                        ));\n                                                                    });\n                                                                });\n                                                            }\n                                                        });\n                                                    }\n                                                });\n                                        }\n                                    });\n                            }\n                        });\n                });\n            }\n\n            ui.add_space(8.0);\n        });\n    }\n\n    pub fn is_open(\u0026self) -\u003e bool {\n        self.open\n    }\n}\n","traces":[{"line":13,"address":[5354096],"length":1,"stats":{"Line":0}},{"line":21,"address":[5355835,5354192,5355867],"length":1,"stats":{"Line":0}},{"line":23,"address":[5354232],"length":1,"stats":{"Line":0}},{"line":27,"address":[5355776,5355474,5354597,5355876,5355381,5354369,5354809,5354950],"length":1,"stats":{"Line":0}},{"line":29,"address":[5354272,5354439,5354777,5354663],"length":1,"stats":{"Line":0}},{"line":34,"address":[5355454],"length":1,"stats":{"Line":0}},{"line":36,"address":[4526560],"length":1,"stats":{"Line":0}},{"line":38,"address":[4526976,4526585,4527724],"length":1,"stats":{"Line":0}},{"line":39,"address":[4527000,4527666],"length":1,"stats":{"Line":0}},{"line":40,"address":[4527760,4528935,4527548],"length":1,"stats":{"Line":0}},{"line":41,"address":[4528297,4528957,4527784,4528804,4528899],"length":1,"stats":{"Line":0}},{"line":42,"address":[4528834],"length":1,"stats":{"Line":0}},{"line":44,"address":[4529008,4530183,4527587],"length":1,"stats":{"Line":0}},{"line":45,"address":[4530147,4530205,4529545,4530052,4529032],"length":1,"stats":{"Line":0}},{"line":46,"address":[4530082],"length":1,"stats":{"Line":0}},{"line":48,"address":[4530256,4531431,4527627],"length":1,"stats":{"Line":0}},{"line":49,"address":[4531300,4530280,4530793,4531395,4531453],"length":1,"stats":{"Line":0}},{"line":50,"address":[4531330],"length":1,"stats":{"Line":0}},{"line":54,"address":[4526654],"length":1,"stats":{"Line":0}},{"line":57,"address":[4526677,4532342,4531504],"length":1,"stats":{"Line":0}},{"line":58,"address":[4532123,4532306,4531529],"length":1,"stats":{"Line":0}},{"line":59,"address":[4533849,4533881,4532368,4532074],"length":1,"stats":{"Line":0}},{"line":60,"address":[4533890,4533390,4532914,4532393],"length":1,"stats":{"Line":0}},{"line":61,"address":[4533431],"length":1,"stats":{"Line":0}},{"line":62,"address":[4533520,4533457],"length":1,"stats":{"Line":0}},{"line":63,"address":[4533787],"length":1,"stats":{"Line":0}},{"line":64,"address":[4533572],"length":1,"stats":{"Line":0}},{"line":70,"address":[4532152,4532109],"length":1,"stats":{"Line":0}},{"line":71,"address":[4532166,4533968],"length":1,"stats":{"Line":0}},{"line":72,"address":[4533993],"length":1,"stats":{"Line":0}},{"line":73,"address":[4534027],"length":1,"stats":{"Line":0}},{"line":76,"address":[4532206],"length":1,"stats":{"Line":0}},{"line":77,"address":[4534096,4535253,4532263],"length":1,"stats":{"Line":0}},{"line":78,"address":[4535140,4535217,4534633,4535275,4534120],"length":1,"stats":{"Line":0}},{"line":79,"address":[4535174],"length":1,"stats":{"Line":0}},{"line":84,"address":[4526753],"length":1,"stats":{"Line":0}},{"line":87,"address":[4535312,4526776,4536140],"length":1,"stats":{"Line":0}},{"line":88,"address":[4536082,4535336],"length":1,"stats":{"Line":0}},{"line":90,"address":[4535884,4536176,4537354],"length":1,"stats":{"Line":0}},{"line":91,"address":[4537376,4536533,4536305,4536745,4537318,4537220,4536200],"length":1,"stats":{"Line":0}},{"line":93,"address":[4536375,4536599,4536713,4536208],"length":1,"stats":{"Line":0}},{"line":95,"address":[4537250],"length":1,"stats":{"Line":0}},{"line":97,"address":[4538602,4535924,4537424],"length":1,"stats":{"Line":0}},{"line":98,"address":[4537781,4538566,4537448,4538468,4537553,4538624,4537993],"length":1,"stats":{"Line":0}},{"line":100,"address":[4537961,4537847,4537623,4537456],"length":1,"stats":{"Line":0}},{"line":102,"address":[4538498],"length":1,"stats":{"Line":0}},{"line":104,"address":[4538672,4535964,4539850],"length":1,"stats":{"Line":0}},{"line":105,"address":[4538696,4538801,4539029,4539716,4539814,4539241,4539872],"length":1,"stats":{"Line":0}},{"line":107,"address":[4539095,4538704,4538871,4539209],"length":1,"stats":{"Line":0}},{"line":109,"address":[4539746],"length":1,"stats":{"Line":0}},{"line":111,"address":[4541098,4536004,4539920],"length":1,"stats":{"Line":0}},{"line":112,"address":[4540964,4539944,4541062,4541120,4540457],"length":1,"stats":{"Line":0}},{"line":113,"address":[4540994],"length":1,"stats":{"Line":0}},{"line":115,"address":[4541168,4542546,4536044],"length":1,"stats":{"Line":0}},{"line":116,"address":[4542510,4542568,4541192,4542212,4541705],"length":1,"stats":{"Line":0}},{"line":117,"address":[4542333,4542242,4542467],"length":1,"stats":{"Line":0}},{"line":121,"address":[4526876],"length":1,"stats":{"Line":0}},{"line":123,"address":[4526894],"length":1,"stats":{"Line":0}},{"line":125,"address":[4542608,4526917,4543848],"length":1,"stats":{"Line":0}},{"line":126,"address":[4543870,4542633,4543275],"length":1,"stats":{"Line":0}},{"line":127,"address":[4543587,4543692,4543366,4543179],"length":1,"stats":{"Line":0}},{"line":129,"address":[4543920,4543671],"length":1,"stats":{"Line":0}},{"line":130,"address":[4543945,4544014],"length":1,"stats":{"Line":0}},{"line":131,"address":[4544248,4544118],"length":1,"stats":{"Line":0}},{"line":133,"address":[4544352],"length":1,"stats":{"Line":0}},{"line":134,"address":[4544377,4544450],"length":1,"stats":{"Line":0}},{"line":135,"address":[4544684,4544554],"length":1,"stats":{"Line":0}},{"line":137,"address":[4544784],"length":1,"stats":{"Line":0}},{"line":138,"address":[4544809,4545264],"length":1,"stats":{"Line":0}},{"line":139,"address":[4545289],"length":1,"stats":{"Line":0}},{"line":140,"address":[4545418,4545553,4545323],"length":1,"stats":{"Line":0}},{"line":146,"address":[4544923,4544835],"length":1,"stats":{"Line":0}},{"line":147,"address":[4545029,4545159],"length":1,"stats":{"Line":0}},{"line":152,"address":[4545600],"length":1,"stats":{"Line":0}},{"line":153,"address":[4545625,4546144],"length":1,"stats":{"Line":0}},{"line":154,"address":[4546169],"length":1,"stats":{"Line":0}},{"line":155,"address":[4546433,4546298,4546203],"length":1,"stats":{"Line":0}},{"line":161,"address":[4545656,4546480],"length":1,"stats":{"Line":0}},{"line":162,"address":[4546505],"length":1,"stats":{"Line":0}},{"line":163,"address":[4546634,4546539,4546769],"length":1,"stats":{"Line":0}},{"line":169,"address":[4545693,4546816],"length":1,"stats":{"Line":0}},{"line":170,"address":[4546841],"length":1,"stats":{"Line":0}},{"line":171,"address":[4546970,4547105,4546875],"length":1,"stats":{"Line":0}},{"line":177,"address":[4545813,4545725],"length":1,"stats":{"Line":0}},{"line":178,"address":[4546049],"length":1,"stats":{"Line":0}},{"line":179,"address":[4545919],"length":1,"stats":{"Line":0}},{"line":182,"address":[4547152],"length":1,"stats":{"Line":0}},{"line":183,"address":[4547248,4547176],"length":1,"stats":{"Line":0}},{"line":184,"address":[4547273],"length":1,"stats":{"Line":0}},{"line":185,"address":[4547537,4547402,4547307],"length":1,"stats":{"Line":0}},{"line":190,"address":[4547584,4547206],"length":1,"stats":{"Line":0}},{"line":191,"address":[4547609],"length":1,"stats":{"Line":0}},{"line":192,"address":[4547738,4547643,4547873],"length":1,"stats":{"Line":0}},{"line":209,"address":[4526953],"length":1,"stats":{"Line":0}},{"line":213,"address":[5355952],"length":1,"stats":{"Line":0}},{"line":214,"address":[5355957],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":96},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","components","mod.rs"],"content":"pub mod dashboard_components;\npub mod gantt_aggregate_by;\npub mod gantt_job_color;\npub mod job_details;\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","main_page","anthentification.rs"],"content":"use crate::{models::data_structure::application_context::ApplicationContext, views::view::View};\nuse eframe::egui::{self, RichText};\n\npub struct Authentification {\n    username: String,\n    password: String,\n    error_message: Option\u003cString\u003e,\n}\n\nimpl Default for Authentification {\n    fn default() -\u003e Self {\n        Authentification {\n            username: String::new(),\n            password: String::new(),\n            error_message: None,\n        }\n    }\n}\n\n/*\n * The Authentification view is a simple form with a username and a password field.\n * Currently the form is hardcoded to accept only the username \"admin\" and the password \"admin\".\n * This view is a proof of concept and can be replaced by a more complex authentication system if needed.\n */\nimpl View for Authentification {\n    fn render(\u0026mut self, ui: \u0026mut egui::Ui, app: \u0026mut ApplicationContext) {\n        // Center the form\n        ui.vertical_centered(|ui| {\n            ui.add_space(50.0);\n\n            // Title\n            ui.heading(RichText::new(t!(\"app.authentification.title\")).size(24.0));\n            ui.add_space(20.0);\n\n            // Container of the form\n            egui::Frame::none()\n                .fill(ui.visuals().window_fill())\n                .rounding(8.0)\n                .inner_margin(20.0)\n                .show(ui, |ui| {\n                    ui.set_width(300.0);\n\n                    // username field\n                    ui.label(RichText::new(t!(\"app.authentification.username\")));\n                    ui.add_space(4.0);\n                    ui.text_edit_singleline(\u0026mut self.username);\n                    ui.add_space(12.0);\n\n                    // password field\n                    ui.label(RichText::new(t!(\"app.authentification.password\")));\n                    ui.add_space(4.0);\n                    let password_edit =\n                        ui.add(egui::TextEdit::singleline(\u0026mut self.password).password(true));\n                    ui.add_space(20.0);\n\n                    // Error message\n                    if let Some(error) = \u0026self.error_message {\n                        ui.colored_label(egui::Color32::RED, error);\n                        ui.add_space(8.0);\n                    }\n\n                    // Connect button\n                    if ui.button(t!(\"app.authentification.login\")).clicked()\n                        || password_edit.lost_focus()\n                            \u0026\u0026 ui.input(|i| i.key_pressed(egui::Key::Enter))\n                    {\n                        if self.username == \"admin\" \u0026\u0026 self.password == \"admin\" {\n                            app.login(\u0026self.username.clone());\n                        } else {\n                            self.error_message = Some(\"Identifiants incorrects\".to_string());\n                        }\n\n                        self.password.clear();\n                    }\n                });\n        });\n    }\n}\n","traces":[{"line":11,"address":[5210672,5210851],"length":1,"stats":{"Line":0}},{"line":13,"address":[5210690],"length":1,"stats":{"Line":0}},{"line":14,"address":[5210700],"length":1,"stats":{"Line":0}},{"line":26,"address":[5210880],"length":1,"stats":{"Line":0}},{"line":28,"address":[4386384,4387389],"length":1,"stats":{"Line":0}},{"line":29,"address":[4386422],"length":1,"stats":{"Line":0}},{"line":32,"address":[4386443,4387331],"length":1,"stats":{"Line":0}},{"line":33,"address":[4387037],"length":1,"stats":{"Line":0}},{"line":36,"address":[4387050,4387123,4387280],"length":1,"stats":{"Line":0}},{"line":37,"address":[4387102,4387069],"length":1,"stats":{"Line":0}},{"line":40,"address":[4387424,4390590,4390545,4387233],"length":1,"stats":{"Line":0}},{"line":41,"address":[4387468],"length":1,"stats":{"Line":0}},{"line":44,"address":[4388285,4387509,4390639],"length":1,"stats":{"Line":0}},{"line":45,"address":[4388111],"length":1,"stats":{"Line":0}},{"line":46,"address":[4388132],"length":1,"stats":{"Line":0}},{"line":47,"address":[4388183],"length":1,"stats":{"Line":0}},{"line":50,"address":[4388927,4390603,4388307,4388188],"length":1,"stats":{"Line":0}},{"line":51,"address":[4388800],"length":1,"stats":{"Line":0}},{"line":53,"address":[4388813],"length":1,"stats":{"Line":0}},{"line":54,"address":[4388920],"length":1,"stats":{"Line":0}},{"line":57,"address":[4389001],"length":1,"stats":{"Line":0}},{"line":58,"address":[4389061,4389172],"length":1,"stats":{"Line":0}},{"line":59,"address":[4389207],"length":1,"stats":{"Line":0}},{"line":63,"address":[4389226,4389108,4389721,4390554,4390020],"length":1,"stats":{"Line":0}},{"line":64,"address":[4389907],"length":1,"stats":{"Line":0}},{"line":65,"address":[4389970,4390688,4390697],"length":1,"stats":{"Line":0}},{"line":67,"address":[4390158,4389999,4390117],"length":1,"stats":{"Line":0}},{"line":68,"address":[4390435,4390198],"length":1,"stats":{"Line":0}},{"line":70,"address":[4390240,4390123],"length":1,"stats":{"Line":0}},{"line":73,"address":[4390416,4390540],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":30},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","main_page","dashboard.rs"],"content":"use crate::models::data_structure::job::JobState;\nuse crate::views::components::dashboard_components::job_table::JobTable;\nuse crate::views::components::dashboard_components::metric_box::MetricBox;\nuse crate::views::components::dashboard_components::metric_chart::create_jobstate_chart;\nuse crate::views::components::dashboard_components::metric_grid::MetricGrid;\nuse crate::{models::data_structure::application_context::ApplicationContext, views::view::View};\nuse eframe::egui::{self, RichText};\nuse strum::IntoEnumIterator;\n\npub struct Dashboard {\n    job_table: JobTable,\n    metric_grid: MetricGrid,\n    show_chart: bool,\n}\n\nimpl Default for Dashboard {\n    fn default() -\u003e Self {\n        Dashboard {\n            job_table: JobTable::default(),\n            metric_grid: MetricGrid::default(),\n            show_chart: false,\n        }\n    }\n}\n\nimpl View for Dashboard {\n    fn render(\u0026mut self, ui: \u0026mut egui::Ui, app: \u0026mut ApplicationContext) {\n        egui::CentralPanel::default().show(ui.ctx(), |ui| {\n            ui.heading(RichText::new(t!(\"app.dashboard.title\")).strong().size(20.0));\n\n            // Button to toggle between the job chart and the job state metrics\n            if ui\n                .button(if self.show_chart {\n                    t!(\"app.dashboard.show_metrics\")\n                } else {\n                    t!(\"app.dashboard.show_charts\")\n                })\n                .clicked()\n            {\n                self.show_chart = !self.show_chart;\n            }\n\n            self.metric_grid.show(ui, |grid| {\n                if self.show_chart {\n                    // Add the job state chart\n                    let chart = create_jobstate_chart(app.filtered_jobs.clone());\n                    grid.add_chart(chart);\n                } else {\n                    // Add total jobs metric\n                    grid.add_metric(MetricBox::new(\n                        t!(\"app.dashboard.total_jobs\").to_string(),\n                        app.filtered_jobs.len().to_string(),\n                        egui::Color32::from_rgb(128, 128, 128),\n                    ));\n\n                    // Add the job state metrics\n                    for state in JobState::iter() {\n                        let count = app\n                            .filtered_jobs\n                            .iter()\n                            .filter(|j| j.state == state)\n                            .count();\n\n                        if count \u003e 0 {\n                            let translation_key =\n                                format!(\"app.job_state.{}\", state.to_string().to_lowercase());\n                            grid.add_metric(MetricBox::new(\n                                t!(\u0026translation_key).to_string(),\n                                count.to_string(),\n                                state.get_color().1,\n                            ));\n                        }\n                    }\n                    let start_time = app.get_start_date();\n                    let end_time = app.get_end_date();\n\n                    // Add time range metrics\n                    grid.add_metric(MetricBox::new(\n                        t!(\"app.dashboard.start_time\").to_string(),\n                        start_time.format(\"%Y-%m-%d %H:%M\").to_string(),\n                        egui::Color32::from_rgb(70, 130, 180),\n                    ));\n\n                    grid.add_metric(MetricBox::new(\n                        t!(\"app.dashboard.end_time\").to_string(),\n                        end_time.format(\"%Y-%m-%d %H:%M\").to_string(),\n                        egui::Color32::from_rgb(70, 130, 180),\n                    ));\n                }\n            });\n\n            ui.add_space(10.0);\n            ui.separator();\n\n            // Draw the job table\n            self.job_table.ui(ui, app);\n        });\n    }\n}\n","traces":[{"line":17,"address":[4778736,4778592],"length":1,"stats":{"Line":0}},{"line":19,"address":[4778614],"length":1,"stats":{"Line":0}},{"line":20,"address":[4778619],"length":1,"stats":{"Line":0}},{"line":27,"address":[4778768],"length":1,"stats":{"Line":0}},{"line":28,"address":[4778814],"length":1,"stats":{"Line":0}},{"line":29,"address":[5215825,5217302,5215177],"length":1,"stats":{"Line":0}},{"line":32,"address":[5217100,5216461],"length":1,"stats":{"Line":0}},{"line":33,"address":[5216435,5215814,5217028],"length":1,"stats":{"Line":0}},{"line":34,"address":[5215944,5216707,5216967,5216928],"length":1,"stats":{"Line":0}},{"line":36,"address":[5216374,5215844,5216114,5216335],"length":1,"stats":{"Line":0}},{"line":38,"address":[5217106,5217052],"length":1,"stats":{"Line":0}},{"line":40,"address":[5217141],"length":1,"stats":{"Line":0}},{"line":43,"address":[5217169,5217344,5220760,5220827],"length":1,"stats":{"Line":0}},{"line":44,"address":[5220709,5217383],"length":1,"stats":{"Line":0}},{"line":46,"address":[5217595],"length":1,"stats":{"Line":0}},{"line":47,"address":[5217659],"length":1,"stats":{"Line":0}},{"line":50,"address":[5218276,5218376],"length":1,"stats":{"Line":0}},{"line":51,"address":[5217492,5217753,5217974,5218072],"length":1,"stats":{"Line":0}},{"line":52,"address":[5218150,5218080],"length":1,"stats":{"Line":0}},{"line":53,"address":[5218198,5218255],"length":1,"stats":{"Line":0}},{"line":57,"address":[5218469,5218713,5218522],"length":1,"stats":{"Line":0}},{"line":58,"address":[5218727],"length":1,"stats":{"Line":0}},{"line":61,"address":[5222593,5222576],"length":1,"stats":{"Line":0}},{"line":64,"address":[5218803],"length":1,"stats":{"Line":0}},{"line":66,"address":[5221153,5220941],"length":1,"stats":{"Line":0}},{"line":67,"address":[5222167,5222267],"length":1,"stats":{"Line":0}},{"line":68,"address":[5221676,5221465,5221889,5221987,5221564],"length":1,"stats":{"Line":0}},{"line":69,"address":[5221995,5222060],"length":1,"stats":{"Line":0}},{"line":70,"address":[5222129,5222076],"length":1,"stats":{"Line":0}},{"line":74,"address":[5218571],"length":1,"stats":{"Line":0}},{"line":75,"address":[5218592],"length":1,"stats":{"Line":0}},{"line":78,"address":[5219457,5219557],"length":1,"stats":{"Line":0}},{"line":79,"address":[5219114,5218893,5218613,5219212],"length":1,"stats":{"Line":0}},{"line":80,"address":[5219360,5219312,5219220],"length":1,"stats":{"Line":0}},{"line":81,"address":[5219383,5219436],"length":1,"stats":{"Line":0}},{"line":84,"address":[5220461,5220561],"length":1,"stats":{"Line":0}},{"line":85,"address":[5219897,5220216,5219708,5220118],"length":1,"stats":{"Line":0}},{"line":86,"address":[5220224,5220364,5220316],"length":1,"stats":{"Line":0}},{"line":87,"address":[5220387,5220440],"length":1,"stats":{"Line":0}},{"line":92,"address":[5217191],"length":1,"stats":{"Line":0}},{"line":93,"address":[5217209],"length":1,"stats":{"Line":0}},{"line":96,"address":[5217246],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":42},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","main_page","gantt.rs"],"content":"use crate::models::data_structure::cluster::Cluster;\nuse crate::models::data_structure::resource::ResourceState;\nuse crate::models::utils::date_converter::format_timestamp;\nuse crate::models::utils::utils::cluster_contain_host;\nuse crate::models::utils::utils::compare_string_with_number;\nuse crate::models::utils::utils::contains_cluster;\nuse crate::models::utils::utils::contains_host;\nuse crate::models::utils::utils::get_all_clusters;\nuse crate::models::utils::utils::get_all_hosts;\nuse crate::models::utils::utils::get_all_resources;\nuse crate::models::utils::utils::get_cluster_from_name;\nuse crate::models::utils::utils::get_cluster_state_from_name;\nuse crate::models::utils::utils::get_host_state_from_name;\nuse crate::models::utils::utils::get_tree_structure_for_job;\nuse crate::views::view::View;\nuse crate::{\n    models::data_structure::{\n        application_context::ApplicationContext,\n        job::{Job, JobState},\n    },\n    views::components::{\n        gantt_aggregate_by::{AggregateBy, AggregateByLevel1Enum, AggregateByLevel2Enum},\n        gantt_job_color::JobColor,\n        job_details::JobDetailsWindow,\n    },\n};\nuse chrono::{DateTime, Local, TimeZone};\nuse eframe::egui;\nuse egui::{\n    lerp, pos2, remap_clamp, Align2, Color32, FontId, Frame, PointerButton, Pos2, Rect, Response,\n    Rgba, RichText, ScrollArea, Sense, Shape, Stroke, TextStyle,\n};\nuse std::collections::BTreeMap;\n\n/**\n * GanttChart struct\n */\npub struct GanttChart {\n    options: Options,                           // options for the GanttChart\n    job_details_windows: Vec\u003cJobDetailsWindow\u003e, // job details windows\n\n    // Tracks which top-level categories (e.g., owners, hosts, or clusters) are collapsed in the Gantt view\n    // Key: The category name (e.g., \"user1\" for owner, \"host1\" for host)\n    // Value: true if collapsed (hidden), false if expanded (visible)\n    collapsed_jobs_level_1: BTreeMap\u003cString, bool\u003e,\n\n    // Tracks which second-level subcategories are collapsed within their parent categories\n    // Key: Tuple of (parent_category, subcategory) - e.g., (\"cluster1\", \"host1\")\n    // Value: true if collapsed (hidden), false if expanded (visible)\n    collapsed_jobs_level_2: BTreeMap\u003c(String, String), bool\u003e,\n\n    initial_start_s: Option\u003ci64\u003e, // Initial start timestamp\n    initial_end_s: Option\u003ci64\u003e, // Initial end timestamp\n}\n\n/**\n * Default implementation for the GanttChart\n */\nimpl Default for GanttChart {\n    fn default() -\u003e Self {\n        GanttChart {\n            options: Default::default(),\n            job_details_windows: Vec::new(),\n            collapsed_jobs_level_1: BTreeMap::new(),\n            collapsed_jobs_level_2: BTreeMap::new(),\n            initial_start_s: None,\n            initial_end_s: None,\n        }\n    }\n}\n\n/**\n * Implementation of the View trait for the GanttChart\n */\nimpl View for GanttChart {\n    fn render(\u0026mut self, ui: \u0026mut egui::Ui, app: \u0026mut ApplicationContext) {\n        ui.heading(RichText::new(t!(\"app.gantt.title\")).strong());\n\n        let reset_view = false;\n\n        // Initialize initial timestamps if not already done\n        if self.initial_start_s.is_none() {\n            self.initial_start_s = Some(app.get_start_date().timestamp());\n            self.initial_end_s = Some(app.get_end_date().timestamp());\n        }\n\n        // Settings menu\n        ui.horizontal(|ui| {\n            ui.menu_button(t!(\"app.gantt.settings.title\"), |ui| {\n                ui.set_max_height(500.0);\n\n                // Aggregate by component (levels)\n                self.options.aggregate_by.ui(ui);\n                ui.separator();\n\n                // If last aggregation level is set to cluster or host\n                if (self.options.aggregate_by.level_1 != AggregateByLevel1Enum::Owner\n                    \u0026\u0026 self.options.aggregate_by.level_2 == AggregateByLevel2Enum::None)\n                    || (self.options.aggregate_by.level_1 == AggregateByLevel1Enum::Cluster\n                        \u0026\u0026 self.options.aggregate_by.level_2 == AggregateByLevel2Enum::Host)\n                {\n                    if ui\n                        .checkbox(\n                            \u0026mut self.options.see_all_res,\n                            t!(\"app.gantt.settings.show_resources\"),\n                        )\n                        .clicked()\n                    {\n                        if self.options.see_all_res {\n                            app.all_jobs.push(Job {\n                                id: 0,\n                                owner: \"all_resources\".to_string(),\n                                state: JobState::Unknown,\n                                scheduled_start: 0,\n                                walltime: 0,\n                                hosts: get_all_hosts(\u0026app.all_clusters),\n                                clusters: get_all_clusters(\u0026app.all_clusters),\n                                command: String::new(),\n                                message: None,\n                                queue: String::new(),\n                                assigned_resources: get_all_resources(\u0026app.all_clusters),\n                                submission_time: 0,\n                                start_time: 0,\n                                stop_time: 0,\n                                exit_code: None,\n                                gantt_color: Color32::TRANSPARENT,\n                                main_resource_state: ResourceState::Unknown,\n                            });\n                        } else {\n                            app.all_jobs.retain(|job| job.id != 0);\n                        }\n                    }\n                    ui.separator();\n                } else {\n                    if self.options.see_all_res {\n                        app.all_jobs.retain(|job| job.id != 0);\n                    }\n                    self.options.see_all_res = false;\n                }\n\n                ui.checkbox(\n                    \u0026mut self.options.squash_resources,\n                    t!(\"app.gantt.settings.squash_resources\"),\n                );\n                ui.separator();\n\n                // Job color component (random, state)\n                self.options.job_color.ui(ui);\n            });\n\n            // Help button\n            ui.menu_button(\"❓\", |ui| {\n                ui.label(t!(\"app.gantt.help\"));\n            });\n\n            // Reset to now button\n            ui.with_layout(egui::Layout::right_to_left(egui::Align::Center), |ui| {\n                if ui.button(t!(\"app.gantt.now\")).clicked() {\n                    self.options.zoom_to_relative_s_range = Some((\n                        ui.ctx().input(|i| i.time),\n                        (\n                            0.,\n                            (self.initial_end_s.unwrap() - self.initial_start_s.unwrap()) as f64,\n                        ),\n                    ));\n                }\n            });\n        });\n\n        // Canvas\n        Frame::canvas(ui.style()).show(ui, |ui| {\n            ui.visuals_mut().clip_rect_margin = 0.0;\n\n            // Calculate the y-coordinate of the fixed timeline\n            let fixed_timeline_y = ui.min_rect().top();\n\n            let available_height = ui.max_rect().bottom() - ui.min_rect().bottom();\n            ScrollArea::vertical().show(ui, |ui| {\n                let mut canvas = ui.available_rect_before_wrap();\n                canvas.max.y = f32::INFINITY;\n                let response = ui.interact(canvas, ui.id().with(\"canvas\"), Sense::click_and_drag());\n\n                let min_s = self.initial_start_s.unwrap();\n                let max_s = self.initial_end_s.unwrap();\n\n                // Initialize canvas info\n                let info = Info {\n                    ctx: ui.ctx().clone(),\n                    canvas,\n                    response,\n                    painter: ui.painter_at(canvas),\n                    text_height: app.font_size as f32,\n                    start_s: min_s,\n                    stop_s: max_s,\n                    font_id: TextStyle::Body.resolve(ui.style()),\n                };\n\n                // When we reset the view, we want to zoom to the full range\n                if reset_view {\n                    self.options.zoom_to_relative_s_range = Some((\n                        info.ctx.input(|i| i.time),\n                        (0., (info.stop_s - info.start_s) as f64),\n                    ));\n                }\n\n                // Interact with the canvas\n                interact_with_canvas(\u0026mut self.options, \u0026info.response, \u0026info);\n\n                // Put the timeline\n                let where_to_put_timeline = info.painter.add(Shape::Noop);\n\n                // Paint the canvas\n                let max_y = ui_canvas(\n                    \u0026mut self.options,\n                    app,\n                    \u0026info,\n                    fixed_timeline_y,\n                    (min_s, max_s),\n                    \u0026mut self.job_details_windows,\n                    \u0026mut self.collapsed_jobs_level_1,\n                    \u0026mut self.collapsed_jobs_level_2,\n                    \u0026app.all_clusters,\n                );\n\n                let mut used_rect = canvas;\n                used_rect.max.y = max_y;\n\n                // Fill out space that we don't use so that the `ScrollArea` doesn't collapse in height:\n                used_rect.max.y = used_rect.max.y.max(used_rect.min.y + available_height);\n\n                let timeline = paint_timeline(\u0026info, used_rect, \u0026self.options, min_s);\n                info.painter\n                    .set(where_to_put_timeline, Shape::Vec(timeline));\n\n                // Adding a line to show the current time AFTER all other elements\n                let current_time_line = paint_current_time_line(\u0026info, \u0026self.options, used_rect);\n                info.painter.add(current_time_line);\n\n                ui.allocate_rect(used_rect, Sense::hover());\n\n                {\n                    // Calculate the visible time range from the canvas parameters\n                    let visible_start_s = info.start_s\n                        + ((-self.options.sideways_pan_in_points / info.canvas.width())\n                            * self.options.canvas_width_s) as i64;\n                    let visible_end_s = visible_start_s + self.options.canvas_width_s as i64;\n\n                    let start = Local.timestamp_opt(visible_start_s, 0).unwrap();\n                    let end = Local.timestamp_opt(visible_end_s, 0).unwrap();\n\n                    app.set_localdate(start, end);\n                }\n            });\n        });\n\n        // Part to display the details of a job when clicked\n        self.job_details_windows.retain(|w| w.is_open());\n\n        // Display job detail windows\n        for window in self.job_details_windows.iter_mut() {\n            window.ui(ui);\n        }\n    }\n}\n\n/****************************************************************************************************************************/\n// CANVAS INFO\n/****************************************************************************************************************************/\n\nstruct Info {\n    ctx: egui::Context,     // context\n    canvas: Rect,           // canvas to paint\n    response: Response,     // response from the canvas\n    painter: egui::Painter, // painter for the canvas\n    text_height: f32,       // height of a line of text\n    start_s: i64,           // start time in seconds\n    stop_s: i64,            // stop time in seconds\n    font_id: FontId,        // font id\n}\n\nimpl Info {\n    /**\n     * Returns the x-coordinate (in points from the canvas) to the given timestamp\n     */\n    fn point_from_s(\u0026self, options: \u0026Options, ns: i64) -\u003e f32 {\n        self.canvas.min.x\n            + options.sideways_pan_in_points\n            + self.canvas.width() * ((ns - self.start_s) as f32) / options.canvas_width_s\n    }\n}\n\n/****************************************************************************************************************************/\n// OPTIONS\n/****************************************************************************************************************************/\n\n/**\n * Options struct\n */\npub struct Options {\n    pub canvas_width_s: f32,                                   // Canvas width\n    pub sideways_pan_in_points: f32,                           // Sideways pan in points\n    pub cull_width: f32,                                       // Culling width\n    pub min_width: f32,                                        // Minimum width of a job\n    pub rect_height: f32,                                      // Height of a job\n    pub spacing: f32,                                          // Vertical spacing between jobs\n    pub rounding: f32,                                         // Rounded corners\n    pub aggregate_by: AggregateBy,                             // Aggregate by\n    pub job_color: JobColor,                                   // Job color\n    pub see_all_res: bool,                                     // See all resources\n    pub current_hovered_job: Option\u003cJob\u003e,                      // Current hovered job\n    pub previous_hovered_job: Option\u003cJob\u003e,                     // Previous hovered job\n    pub current_hovered_resource_state: Option\u003cResourceState\u003e, // Current hovered resource state\n    pub squash_resources: bool,                                // Squash resources\n    #[cfg_attr(feature = \"serde\", serde(skip))]\n    zoom_to_relative_s_range: Option\u003c(f64, (f64, f64))\u003e, // Zoom to relative s range\n}\n\n/**\n * Default implementation for the Options struct\n */\nimpl Default for Options {\n    fn default() -\u003e Self {\n        Self {\n            canvas_width_s: 0.0,              // no zoom\n            sideways_pan_in_points: 0.0,      // no pan\n            cull_width: 0.0,                  // no culling\n            min_width: 1.0,                   // minimum width of a job\n            rect_height: 16.0,                // height of a job\n            spacing: 5.0,                     // vertical spacing between jobs\n            rounding: 4.0,                    // rounded corners\n            aggregate_by: Default::default(), // aggregate by component\n            job_color: Default::default(),    // job color component\n            zoom_to_relative_s_range: None,   // no zooming by default\n            current_hovered_job: None,        // no hovered job by default\n            previous_hovered_job: None,       // no previous hovered job by default\n            squash_resources: false,          // don't squash resources by default\n            see_all_res: false,\n            current_hovered_resource_state: None, // no hovered resource stae by default\n        }\n    }\n}\n\n/****************************************************************************************************************************/\n// CANVAS PAINTING\n/****************************************************************************************************************************/\n\n/**\n * Paints the UI canvas\n */\nfn ui_canvas(\n    options: \u0026mut Options,\n    app: \u0026ApplicationContext,\n    info: \u0026Info,\n    fixed_timeline_y: f32,\n    (min_ns, max_ns): (i64, i64),\n    details_window: \u0026mut Vec\u003cJobDetailsWindow\u003e,\n    collapsed_jobs_level_1: \u0026mut BTreeMap\u003cString, bool\u003e,\n    collapsed_jobs_level_2: \u0026mut BTreeMap\u003c(String, String), bool\u003e,\n    all_cluster: \u0026Vec\u003cCluster\u003e,\n) -\u003e f32 {\n    if options.canvas_width_s \u003c= 0.0 {\n        options.canvas_width_s = (max_ns - min_ns) as f32;\n        options.zoom_to_relative_s_range = None;\n    }\n\n    let mut cursor_y = info.canvas.top();\n    cursor_y += info.text_height;\n\n    // Get filtered jobs to display\n    let jobs = app.filtered_jobs.clone();\n\n    match options.aggregate_by.level_1 {\n\n        // Aggregate by owner as level 1 only\n        AggregateByLevel1Enum::Owner =\u003e {\n            let mut jobs_by_owner: BTreeMap\u003cString, Vec\u003cJob\u003e\u003e = BTreeMap::new();\n            // for each job, we add it to the corresponding owner\n            for job in jobs {\n                jobs_by_owner\n                    .entry(job.owner.clone())\n                    .or_insert_with(Vec::new)\n                    .push(job.clone());\n            }\n            // Paint the aggregated jobs with owner as level 1\n            cursor_y = paint_aggregated_jobs_level_1(\n                info,\n                options,\n                jobs_by_owner,\n                cursor_y,\n                details_window,\n                collapsed_jobs_level_1,\n                app.font_size,\n                all_cluster,\n                AggregateByLevel1Enum::Owner,\n            );\n        }\n\n        // Aggregate by host as level 1\n        AggregateByLevel1Enum::Host =\u003e {\n            match options.aggregate_by.level_2 {\n\n                // Aggregate by owner as level 2\n                AggregateByLevel2Enum::Owner =\u003e {\n                    let mut jobs_by_host_by_owner: BTreeMap\u003cString, BTreeMap\u003cString, Vec\u003cJob\u003e\u003e\u003e =\n                        BTreeMap::new();\n                    let filtered_clusters = app.filters.clusters.clone().unwrap_or_default();\n                    // for each job, we add it to the corresponding host and owner\n                    for job in jobs {\n                        for host in job.hosts.iter() {\n                            if filtered_clusters.len() != 0\n                                \u0026\u0026 !contains_host(\u0026filtered_clusters, host)\n                            {\n                                continue;\n                            }\n                            jobs_by_host_by_owner\n                                .entry(host.clone())\n                                .or_insert_with(BTreeMap::new)\n                                .entry(job.owner.clone())\n                                .or_insert_with(Vec::new)\n                                .push(job.clone());\n                        }\n                    }\n\n                    // Paint the aggregated jobs with host as level 1 and owner as level 2\n                    cursor_y = paint_aggregated_jobs_level_2(\n                        info,\n                        options,\n                        jobs_by_host_by_owner,\n                        cursor_y,\n                        details_window,\n                        collapsed_jobs_level_1,\n                        collapsed_jobs_level_2,\n                        app.font_size,\n                        all_cluster,\n                        AggregateByLevel1Enum::Host,\n                        AggregateByLevel2Enum::Owner,\n                    );\n                }\n\n                // No aggregation as level 2 so we only aggregate by host as level 1\n                AggregateByLevel2Enum::None =\u003e {\n                    let mut jobs_by_host: BTreeMap\u003cString, Vec\u003cJob\u003e\u003e = BTreeMap::new();\n                    let filtered_clusters = app.filters.clusters.clone().unwrap_or_default();\n\n                    // for each job, we add it to the corresponding host\n                    for job in jobs {\n                        for host in job.hosts.iter() {\n                            if filtered_clusters.len() != 0\n                                \u0026\u0026 !contains_host(\u0026filtered_clusters, host)\n                            {\n                                continue;\n                            }\n                            jobs_by_host\n                                .entry(host.clone())\n                                .or_insert_with(Vec::new)\n                                .push(job.clone());\n                        }\n                    }\n\n                    // Paint the aggregated jobs with host as level 1\n                    cursor_y = paint_aggregated_jobs_level_1(\n                        info,\n                        options,\n                        jobs_by_host,\n                        cursor_y,\n                        details_window,\n                        collapsed_jobs_level_1,\n                        app.font_size,\n                        all_cluster,\n                        AggregateByLevel1Enum::Host,\n                    );\n                }\n                AggregateByLevel2Enum::Host =\u003e {\n                    // nothing to do here\n                }\n            }\n        }\n\n        // Aggregate by cluster as level 1\n        AggregateByLevel1Enum::Cluster =\u003e match options.aggregate_by.level_2 {\n\n            // Aggregate by owner as level 2\n            AggregateByLevel2Enum::Owner =\u003e {\n                let mut jobs_by_cluster_by_owner: BTreeMap\u003cString, BTreeMap\u003cString, Vec\u003cJob\u003e\u003e\u003e =\n                    BTreeMap::new();\n                let filtered_clusters = app.filters.clusters.clone().unwrap_or_default();\n\n                // for each job, we add it to the corresponding cluster and owner\n                for job in jobs {\n                    for cluster in job.clusters.iter() {\n                        if filtered_clusters.len() != 0\n                            \u0026\u0026 contains_cluster(\u0026filtered_clusters, cluster)\n                        {\n                            continue;\n                        }\n                        jobs_by_cluster_by_owner\n                            .entry(cluster.clone())\n                            .or_insert_with(BTreeMap::new)\n                            .entry(job.owner.clone())\n                            .or_insert_with(Vec::new)\n                            .push(job.clone());\n                    }\n                }\n\n                // Paint the aggregated jobs with cluster as level 1 and owner as level 2\n                cursor_y = paint_aggregated_jobs_level_2(\n                    info,\n                    options,\n                    jobs_by_cluster_by_owner,\n                    cursor_y,\n                    details_window,\n                    collapsed_jobs_level_1,\n                    collapsed_jobs_level_2,\n                    app.font_size,\n                    all_cluster,\n                    AggregateByLevel1Enum::Cluster,\n                    AggregateByLevel2Enum::Owner,\n                );\n            }\n\n            // No aggregation as level 2 so we only aggregate by cluster as level 1\n            AggregateByLevel2Enum::None =\u003e {\n                let mut jobs_by_cluster: BTreeMap\u003cString, Vec\u003cJob\u003e\u003e = BTreeMap::new();\n                let filtered_clusters = app.filters.clusters.clone().unwrap_or_default();\n\n                // for each job, we add it to the corresponding cluster\n                for job in jobs {\n                    for cluster in job.clusters.iter() {\n                        if filtered_clusters.len() != 0\n                            \u0026\u0026 contains_cluster(\u0026filtered_clusters, cluster)\n                        {\n                            continue;\n                        }\n                        jobs_by_cluster\n                            .entry(cluster.clone())\n                            .or_insert_with(Vec::new)\n                            .push(job.clone());\n                    }\n                }\n\n                // Paint the aggregated jobs with cluster as level 1\n                cursor_y = paint_aggregated_jobs_level_1(\n                    info,\n                    options,\n                    jobs_by_cluster,\n                    cursor_y,\n                    details_window,\n                    collapsed_jobs_level_1,\n                    app.font_size,\n                    all_cluster,\n                    AggregateByLevel1Enum::Cluster,\n                );\n            }\n\n            // Aggregate by host as level 2\n            AggregateByLevel2Enum::Host =\u003e {\n                let mut jobs_by_cluster_by_host: BTreeMap\u003cString, BTreeMap\u003cString, Vec\u003cJob\u003e\u003e\u003e =\n                    BTreeMap::new();\n                let filtered_clusters = app.filters.clusters.clone().unwrap_or_default();\n\n                // for each job, we add it to the corresponding cluster and host\n                for job in jobs {\n                    for cluster in job.clusters.iter() {\n                        for host in job.hosts.iter() {\n                            if filtered_clusters.len() != 0\n                                \u0026\u0026 !contains_host(\u0026filtered_clusters, host)\n                            {\n                                continue;\n                            }\n                            // We don't add the host to the cluster if this host doesn't belong to the cluster\n                            let curr_cluster =\n                                get_cluster_from_name(\u0026app.all_clusters, \u0026cluster).unwrap();\n\n                            if cluster_contain_host(\u0026curr_cluster, \u0026host) {\n                                jobs_by_cluster_by_host\n                                    .entry(cluster.clone())\n                                    .or_insert_with(BTreeMap::new)\n                                    .entry(host.clone())\n                                    .or_insert_with(Vec::new)\n                                    .push(job.clone());\n                            }\n                        }\n                    }\n                }\n\n                // Paint the aggregated jobs with cluster as level 1 and host as level 2\n                cursor_y = paint_aggregated_jobs_level_2(\n                    info,\n                    options,\n                    jobs_by_cluster_by_host,\n                    cursor_y,\n                    details_window,\n                    collapsed_jobs_level_1,\n                    collapsed_jobs_level_2,\n                    app.font_size,\n                    all_cluster,\n                    AggregateByLevel1Enum::Cluster,\n                    AggregateByLevel2Enum::Host,\n                );\n            }\n        },\n    }\n\n    // Paint tooltip for hovered job/resource state\n    paint_tooltip(info, options);\n\n    // Update previous hovered job for next frame\n    options.previous_hovered_job = options.current_hovered_job.clone();\n    options.current_hovered_job = None; // Reset for next frame, but keep previous_hovered_job\n\n    // Paint the timeline text on top of everything\n    paint_timeline_text_on_top(info, options, fixed_timeline_y);\n\n    cursor_y\n}\n\n/**\n * Interacts with the canvas\n */\nfn interact_with_canvas(options: \u0026mut Options, response: \u0026Response, info: \u0026Info) {\n    if response.drag_delta().x != 0.0 {\n        options.sideways_pan_in_points += response.drag_delta().x;\n        options.zoom_to_relative_s_range = None;\n    }\n\n    if response.hovered() {\n        // Sideways pan with e.g. a touch pad:\n        if info.ctx.input(|i| i.smooth_scroll_delta.x != 0.0) {\n            options.sideways_pan_in_points += info.ctx.input(|i| i.smooth_scroll_delta.x);\n            options.zoom_to_relative_s_range = None;\n        }\n\n        let mut zoom_factor = info.ctx.input(|i| i.zoom_delta_2d().x);\n\n        if response.dragged_by(PointerButton::Secondary) {\n            zoom_factor *= (response.drag_delta().y * 0.01).exp();\n        }\n\n        if zoom_factor != 1.0 {\n            let new_width = options.canvas_width_s / zoom_factor;\n\n            // Apply a limit to the zoom\n            let max_canvas_width = 2 * 24 * 60 * 60; // 2 days in seconds\n            if new_width \u003c= max_canvas_width as f32 {\n                options.canvas_width_s = new_width;\n\n                if let Some(mouse_pos) = response.hover_pos() {\n                    let zoom_center = mouse_pos.x - info.canvas.min.x;\n                    options.sideways_pan_in_points =\n                        (options.sideways_pan_in_points - zoom_center) * zoom_factor + zoom_center;\n                }\n            }\n            options.zoom_to_relative_s_range = None;\n        }\n    }\n\n    if response.double_clicked() {\n        // Reset view\n        options.zoom_to_relative_s_range = Some((\n            info.ctx.input(|i| i.time),\n            (0., (info.stop_s - info.start_s) as f64),\n        ));\n    }\n\n    if let Some((start_time, (start_s, end_s))) = options.zoom_to_relative_s_range {\n        const ZOOM_DURATION: f32 = 0.75;\n        let t = (info.ctx.input(|i| i.time - start_time) as f32 / ZOOM_DURATION).min(1.0);\n\n        let canvas_width = response.rect.width();\n\n        let target_canvas_width_s = (end_s - start_s) as f32;\n        let target_pan_in_points = -canvas_width * start_s as f32 / target_canvas_width_s;\n\n        options.canvas_width_s = lerp(\n            options.canvas_width_s.recip()..=target_canvas_width_s.recip(),\n            t,\n        )\n        .recip();\n        options.sideways_pan_in_points =\n            lerp(options.sideways_pan_in_points..=target_pan_in_points, t);\n\n        if t \u003e= 1.0 {\n            options.zoom_to_relative_s_range = None;\n        }\n\n        info.ctx.request_repaint();\n    }\n}\n\n/**\n * ThemeColors struct\n */\nstruct ThemeColors {\n    text: Color32,\n    text_dim: Color32,\n    line: Color32,\n    aggregated_line_level_1: Rgba,\n    aggregated_line_level_2: Rgba,\n    background: Color32,\n    background_timeline: Color32,\n    hatch: Color32,\n}\n\n/**\n * Returns the theme colors for the Gantt chart\n */\nfn get_theme_colors(style: \u0026egui::Style) -\u003e ThemeColors {\n\n    if style.visuals.dark_mode { // Dark mode\n        ThemeColors {\n            text: Color32::WHITE,\n            text_dim: Color32::from_white_alpha(229),\n            line: Color32::WHITE,\n            aggregated_line_level_1: Rgba::from_white_alpha(0.4),\n            aggregated_line_level_2: Rgba::from_white_alpha(0.5),\n            background: Color32::from_black_alpha(100),\n            background_timeline: Color32::from_black_alpha(150),\n            hatch: Color32::from_rgba_premultiplied(0, 150, 150, 150),\n        }\n    } else { // Light mode\n        ThemeColors {\n            text: Color32::BLACK,\n            text_dim: Color32::from_black_alpha(229),\n            line: Color32::BLACK,\n            aggregated_line_level_1: Rgba::from_black_alpha(0.5),\n            aggregated_line_level_2: Rgba::from_black_alpha(0.7),\n            background: Color32::from_black_alpha(50),\n            background_timeline: Color32::from_black_alpha(20),\n            hatch: Color32::from_rgba_premultiplied(0, 0, 139, 150),\n        }\n    }\n}\n\n/****************************************************************************************************************************/\n// JOB PAINTING\n/****************************************************************************************************************************/\n\n/**\n * Paints a tooltip for a job and/or resource state\n */\nfn paint_tooltip(info: \u0026Info, options: \u0026mut Options) {\n    let mut tooltip_text = String::new();\n\n    // Add job info if there's a hovered job\n    if let Some(job) = \u0026options.current_hovered_job {\n        tooltip_text.push_str(\u0026format!(\n            \"{}: {}\\n{}: {:?}\\n{}: {}\\n{}: {}\\n{}: {} seconds\",\n            t!(\"app.details.tooltip.job_id\"),\n            job.id,\n            t!(\"app.details.tooltip.owner\"),\n            job.owner,\n            t!(\"app.details.tooltip.state\"),\n            job.state.get_label(),\n            t!(\"app.details.tooltip.start_time\"),\n            format_timestamp(job.scheduled_start),\n            t!(\"app.details.tooltip.walltime\"),\n            job.walltime\n        ));\n    }\n\n    // Add resource state info if there's a hovered resource state\n    if let Some(resource_state) = \u0026options.current_hovered_resource_state {\n        if !tooltip_text.is_empty() {\n            tooltip_text.push_str(\"\\n\");\n        }\n        tooltip_text.push_str(\u0026format!(\n            \"{} State: {:?}\",\n            if (options.aggregate_by.level_2 == AggregateByLevel2Enum::None\n                \u0026\u0026 options.aggregate_by.level_1 == AggregateByLevel1Enum::Host)\n                || options.aggregate_by.level_2 == AggregateByLevel2Enum::Host\n            {\n                \"Host\"\n            } else if options.aggregate_by.level_2 == AggregateByLevel2Enum::None\n                \u0026\u0026 options.aggregate_by.level_1 == AggregateByLevel1Enum::Cluster\n            {\n                \"Cluster\"\n            } else {\n                \"Resource\"\n            },\n            resource_state\n        ));\n        options.current_hovered_resource_state = None; // Reset for next frame\n    }\n\n    // Show tooltip if we have any text to display\n    if !tooltip_text.is_empty() {\n        if let Some(_pointer_pos) = info.response.hover_pos() {\n            egui::show_tooltip_at_pointer(\n                \u0026info.ctx,\n                info.response.layer_id,\n                egui::Id::new(\"tooltip\"),\n                |ui| {\n                    ui.set_max_width(800.0);\n                    ui.label(tooltip_text);\n                },\n            );\n        }\n    }\n}\n\n/**\n * Paints jobs with 1 level of aggregation\n */\nfn paint_aggregated_jobs_level_1(\n    info: \u0026Info,\n    options: \u0026mut Options,\n    jobs: BTreeMap\u003cString, Vec\u003cJob\u003e\u003e,\n    mut cursor_y: f32,\n    details_window: \u0026mut Vec\u003cJobDetailsWindow\u003e,\n    collapsed_jobs: \u0026mut BTreeMap\u003cString, bool\u003e,\n    font_size: i32,\n    all_cluster: \u0026Vec\u003cCluster\u003e,\n    aggregate_by: AggregateByLevel1Enum,\n) -\u003e f32 {\n    let theme_colors = get_theme_colors(\u0026info.ctx.style());\n\n    let spacing_between_level_1 = 5.0 + font_size as f32; // Spacing between level 1 key\n    let spacing_between_jobs = 5.0; // Spacing between jobs\n    let offset_level_1 = 10.0; // Offset for level 1 key\n\n    cursor_y += spacing_between_level_1;\n\n    // Sort the level 1 keys\n    let mut sorted_level_1: Vec\u003cString\u003e = jobs.keys().cloned().collect();\n    sorted_level_1.sort_by(|a, b| compare_string_with_number(\u0026a, \u0026b));\n\n    let aggregation_height = font_size as f32 + 5.0 + offset_level_1;\n\n    // Store header positions and data to draw them last if squashing is enabled\n    let mut header_data = Vec::new();\n\n    // Display jobs\n    for level_1 in sorted_level_1 {\n        let job_list = jobs.get(\u0026level_1).unwrap();\n        // Draw a line to separate\n        info.painter.line_segment(\n            [\n                pos2(info.canvas.min.x, cursor_y),\n                pos2(info.canvas.max.x, cursor_y),\n            ],\n            Stroke::new(1.5, theme_colors.aggregated_line_level_1), // More marked line\n        );\n\n        cursor_y += offset_level_1;\n\n        let text_pos = pos2(info.canvas.min.x, cursor_y);\n\n        // Check if the section is collapsed\n        let is_collapsed = collapsed_jobs.entry(level_1.clone()).or_insert(false);\n\n        // Store header info for later if squashing\n        if options.squash_resources {\n            header_data.push((level_1.clone(), text_pos, *is_collapsed));\n        } else {\n            // Paint the job info immediately if not squashing\n            paint_job_info(info, \u0026level_1, text_pos, is_collapsed, 1);\n        }\n\n        cursor_y += spacing_between_level_1; // Spacing after the owner\n\n        let state;\n\n        // Get the state of the resource\n        if aggregate_by == AggregateByLevel1Enum::Owner {\n            state = ResourceState::Alive;\n        } else if aggregate_by == AggregateByLevel1Enum::Host {\n            state = get_host_state_from_name(all_cluster, \u0026level_1);\n        } else {\n            state = get_cluster_state_from_name(all_cluster, \u0026level_1);\n        }\n\n        // Only show jobs if section is not collapsed\n        if !*is_collapsed {\n            // Save the initial cursor position for squashed rendering\n            let initial_job_y = cursor_y;\n\n            for job in job_list {\n                // When squashing, use the initial Y position for all jobs in this level\n                let job_start_y = if options.squash_resources {\n                    initial_job_y\n                } else {\n                    cursor_y\n                };\n\n                // Draw the job\n                paint_job(\n                    info,\n                    options,\n                    \u0026job,\n                    job_start_y,\n                    details_window,\n                    all_cluster,\n                    state,\n                    aggregation_height,\n                );\n\n                // Only increment cursor if not squashing\n                if !options.squash_resources {\n                    cursor_y += info.text_height + spacing_between_jobs + options.spacing;\n                }\n            }\n\n            // If we're squashing, just add one line of spacing after all jobs\n            if options.squash_resources \u0026\u0026 !job_list.is_empty() {\n                cursor_y += info.text_height + spacing_between_jobs + options.spacing;\n            }\n            if !options.squash_resources {\n                cursor_y += spacing_between_level_1;\n            }\n        }\n        if !options.squash_resources {\n            cursor_y += spacing_between_level_1;\n        }\n    }\n\n    // Now draw all headers on top if squashing is enabled\n    if options.squash_resources {\n        for (name, pos, is_collapsed) in header_data {\n            // Create a background to make the text more readable\n            let galley = info.ctx.fonts(|f| {\n                let collapsed_symbol = if is_collapsed { \"⏵\" } else { \"⏷\" };\n                let label = format!(\"{} {}\", collapsed_symbol, name);\n                f.layout_no_wrap(label, info.font_id.clone(), theme_colors.text_dim)\n            });\n            let rect = Rect::from_min_size(pos, galley.size());\n            info.painter\n                .rect_filled(rect.expand(4.0), 4.0, theme_colors.background_timeline);\n\n            // Then paint the job info\n            let mut is_collapsed_copy = is_collapsed;\n            paint_job_info(info, \u0026name, pos, \u0026mut is_collapsed_copy, 1);\n            // Update the real collapsed state if changed\n            if is_collapsed_copy != is_collapsed {\n                *collapsed_jobs.get_mut(\u0026name).unwrap() = is_collapsed_copy;\n            }\n        }\n    }\n\n    cursor_y\n}\n\n/**\n * Paints jobs with 2 levels of aggregation\n */\nfn paint_aggregated_jobs_level_2(\n    info: \u0026Info,\n    options: \u0026mut Options,\n    jobs: BTreeMap\u003cString, BTreeMap\u003cString, Vec\u003cJob\u003e\u003e\u003e,\n    mut cursor_y: f32,\n    details_window: \u0026mut Vec\u003cJobDetailsWindow\u003e,\n    collapsed_jobs_level_1: \u0026mut BTreeMap\u003cString, bool\u003e,\n    collapsed_jobs_level_2: \u0026mut BTreeMap\u003c(String, String), bool\u003e,\n    font_size: i32,\n    all_cluster: \u0026Vec\u003cCluster\u003e,\n    aggregate_by_level_1: AggregateByLevel1Enum,\n    aggregate_by_level_2: AggregateByLevel2Enum,\n) -\u003e f32 {\n    let theme_colors = get_theme_colors(\u0026info.ctx.style());\n\n    let spacing_between_level_1 = font_size as f32; // Spacing between level 1 key\n    let spacing_between_level_2 = font_size as f32 + 5.0; // Spacing between level 2 key\n    let spacing_between_jobs = 5.0; // Spacing between jobs\n    let offset_level_1 = 10.0; // Offset for level 1 key\n\n    cursor_y += spacing_between_level_1;\n\n    // Sort the level 1 keys\n    let mut sorted_level_1: Vec\u003cString\u003e = jobs.keys().cloned().collect();\n    sorted_level_1.sort_by(|a, b| compare_string_with_number(\u0026a, \u0026b));\n\n    // Store header positions and data to draw them last if squashing is enabled\n    let mut header_data_level_1 = Vec::new();\n    let mut header_data_level_2 = Vec::new();\n\n    for level_1 in sorted_level_1 {\n        let level_2_map = jobs.get(\u0026level_1).unwrap();\n        let level_1_key = level_1.clone();\n\n        // Draw a line to separate\n        info.painter.line_segment(\n            [\n                pos2(info.canvas.min.x, cursor_y),\n                pos2(info.canvas.max.x, cursor_y),\n            ],\n            Stroke::new(1.5, theme_colors.aggregated_line_level_1), // More marked line\n        );\n\n        cursor_y += offset_level_1;\n\n        let text_pos = pos2(info.canvas.min.x, cursor_y);\n\n        // Check if the level 1 is collapsed\n        let is_collapsed_level_1 = collapsed_jobs_level_1\n            .entry(level_1.clone())\n            .or_insert(false);\n\n        // Either store header info for later or paint immediately\n        if options.squash_resources {\n            header_data_level_1.push((level_1.clone(), text_pos, *is_collapsed_level_1));\n        } else {\n            // Paint the job info immediately if not squashing\n            paint_job_info(info, \u0026level_1, text_pos, is_collapsed_level_1, 1);\n        }\n\n        cursor_y += spacing_between_level_1;\n\n        // Only show jobs if section is not collapsed\n        if !*is_collapsed_level_1 {\n            // Sort the level 2 keys\n            let mut sorted_level_2: Vec\u003c_\u003e = level_2_map.keys().collect();\n            sorted_level_2.sort_by(|a, b| compare_string_with_number(\u0026a, \u0026b));\n\n            // Display level 2\n            for level_2 in sorted_level_2 {\n                if let Some(job_list) = level_2_map.get(level_2) {\n                    // Draw a line to separate\n                    info.painter.line_segment(\n                        [\n                            pos2(info.canvas.min.x, cursor_y),\n                            pos2(info.canvas.max.x, cursor_y),\n                        ],\n                        Stroke::new(0.5, theme_colors.aggregated_line_level_2), // Line more discreet\n                    );\n\n                    cursor_y += spacing_between_level_2;\n\n                    let text_pos = pos2(info.canvas.min.x + 20.0, cursor_y);\n\n                    // Check if the level 2 is collapsed\n                    let is_collapsed_level_2 = collapsed_jobs_level_2\n                        .entry((level_1_key.to_string(), level_2.to_string()))\n                        .or_insert(false);\n\n                    // Either store header info for later or paint immediately\n                    if options.squash_resources {\n                        header_data_level_2.push((\n                            level_1_key.clone(),\n                            level_2.to_string(),\n                            text_pos,\n                            *is_collapsed_level_2,\n                        ));\n                    } else {\n                        // Paint the job info immediately if not squashing\n                        paint_job_info(\n                            info,\n                            \u0026level_2.to_string(),\n                            text_pos,\n                            is_collapsed_level_2,\n                            2,\n                        );\n                    }\n\n                    cursor_y += spacing_between_level_2;\n\n                    let state;\n\n                    // Get the state of the resource\n                    if aggregate_by_level_2 == AggregateByLevel2Enum::Host {\n                        state = get_host_state_from_name(all_cluster, \u0026level_2);\n                    } else if aggregate_by_level_2 == AggregateByLevel2Enum::None {\n                        if aggregate_by_level_1 == AggregateByLevel1Enum::Host {\n                            state = get_host_state_from_name(all_cluster, \u0026level_1);\n                        } else if aggregate_by_level_1 == AggregateByLevel1Enum::Cluster {\n                            state = get_cluster_state_from_name(all_cluster, \u0026level_1);\n                        } else {\n                            state = ResourceState::Alive;\n                        }\n                    } else {\n                        state = ResourceState::Alive;\n                    }\n\n                    // Only show jobs if section is not collapsed\n                    if !*is_collapsed_level_2 {\n                        // Save the initial cursor position for squashed rendering\n                        let initial_job_y = cursor_y;\n\n                        // Display jobs\n                        for job in job_list.iter() {\n                            // When squashing, use the initial Y position for all jobs in this level\n                            let job_start_y = if options.squash_resources {\n                                initial_job_y\n                            } else {\n                                cursor_y\n                            };\n\n                            // Adjust aggregation height for the first job of the second level\n                            let adjusted_aggregation_height = spacing_between_level_2 * 2.0;\n\n                            // Draw the job\n                            paint_job(\n                                info,\n                                options,\n                                job,\n                                job_start_y,\n                                details_window,\n                                all_cluster,\n                                state,\n                                adjusted_aggregation_height,\n                            );\n\n                            // Only increment cursor if not squashing\n                            if !options.squash_resources \u0026\u0026 !job_list.is_empty() {\n                                cursor_y +=\n                                    info.text_height + spacing_between_jobs + options.spacing;\n                            }\n                        }\n\n                        // If we're squashing, just add one line of spacing after all jobs\n                        if options.squash_resources {\n                            cursor_y += info.text_height + spacing_between_jobs + options.spacing;\n                        }\n                    }\n                    if !options.squash_resources {\n                        cursor_y += spacing_between_level_2;\n                    }\n                }\n            }\n        }\n        if !options.squash_resources {\n            cursor_y += spacing_between_level_1;\n        }\n    }\n\n    // Now draw all headers on top if squashing is enabled\n    if options.squash_resources {\n        // First, draw level 1 headers\n        for (name, pos, is_collapsed) in header_data_level_1 {\n            // Create a background to make the text more readable\n            let galley = info.ctx.fonts(|f| {\n                let collapsed_symbol = if is_collapsed { \"⏵\" } else { \"⏷\" };\n                let label = format!(\"{} {}\", collapsed_symbol, name);\n                f.layout_no_wrap(label, info.font_id.clone(), theme_colors.text_dim)\n            });\n            let rect = Rect::from_min_size(pos, galley.size());\n            info.painter\n                .rect_filled(rect.expand(4.0), 4.0, theme_colors.background_timeline);\n\n            // Then paint the job info\n            let mut is_collapsed_copy = is_collapsed;\n            paint_job_info(info, \u0026name, pos, \u0026mut is_collapsed_copy, 1);\n            // Update the real collapsed state if changed\n            if is_collapsed_copy != is_collapsed {\n                *collapsed_jobs_level_1.get_mut(\u0026name).unwrap() = is_collapsed_copy;\n            }\n        }\n\n        // Then draw level 2 headers on top of everything\n        for (level_1_key, level_2_key, pos, is_collapsed) in header_data_level_2 {\n            // Then paint the job info\n            let mut is_collapsed_copy = is_collapsed;\n            paint_job_info(info, \u0026level_2_key, pos, \u0026mut is_collapsed_copy, 2);\n            // Update the real collapsed state if changed\n            if is_collapsed_copy != is_collapsed {\n                *collapsed_jobs_level_2\n                    .get_mut(\u0026(level_1_key, level_2_key))\n                    .unwrap() = is_collapsed_copy;\n            }\n        }\n    }\n\n    cursor_y\n}\n\n#[derive(PartialEq)]\nenum PaintResult {\n    Culled,\n    Painted,\n    Hovered,\n}\n\n/**\n * Paints a job\n */\nfn paint_job(\n    info: \u0026Info,\n    options: \u0026mut Options,\n    job: \u0026Job,\n    top_y: f32,\n    details_window: \u0026mut Vec\u003cJobDetailsWindow\u003e,\n    all_cluster: \u0026Vec\u003cCluster\u003e,\n    state: ResourceState,\n    aggregation_height: f32,\n) -\u003e PaintResult {\n    let theme_colors = get_theme_colors(\u0026info.ctx.style());\n    let start_x = info.point_from_s(options, job.scheduled_start); // Start time\n    // If the job is not finished, we use the scheduled start time + walltime otherwise we use the stop time\n    let stop_time = if job.stop_time \u003e 0 {\n        job.stop_time\n    } else {\n        job.scheduled_start + job.walltime\n    };\n    let end_x = info.point_from_s(options, stop_time);\n    let width = end_x - start_x; // Width of the job\n\n    if width \u003c options.cull_width {\n        return PaintResult::Culled;\n    }\n\n    // Calculate the total line height including all spacing components\n    let spacing_between_jobs = 5.0;\n    let total_line_height = info.text_height + spacing_between_jobs + options.spacing;\n\n    // When squashing, use the full line height to completely eliminate gaps\n    let height = if options.squash_resources {\n        total_line_height + aggregation_height\n    } else {\n        options.rect_height\n    };\n\n    // Use no rounding when squashing\n    let rounding = if options.squash_resources {\n        0.0\n    } else {\n        options.rounding\n    };\n\n    // Create the rectangle for the job\n    let rect = Rect::from_min_size(\n        pos2(\n            start_x,\n            if options.squash_resources {\n                top_y - aggregation_height\n            } else {\n                top_y\n            },\n        ),\n        egui::vec2(width.max(options.min_width), height),\n    );\n\n    let is_job_trully_hovered = if let Some(mouse_pos) = info.response.hover_pos() {\n        rect.contains(mouse_pos)\n    } else {\n        false\n    };\n\n    // Update how we determine if a job is hovered\n    let is_job_hovered = (if let Some(mouse_pos) = info.response.hover_pos() {\n        rect.contains(mouse_pos)\n    } else {\n        false\n    }) || options\n        .current_hovered_job\n        .as_ref()\n        .map_or(false, |j| j.id == job.id)\n        || options\n            .previous_hovered_job\n            .as_ref()\n            .map_or(false, |j| j.id == job.id);\n\n    // If this job is being directly hovered, update the tooltip and hovered ID\n    if is_job_trully_hovered \u0026\u0026 options.current_hovered_job.is_none() {\n        options.current_hovered_job = Some(job.clone());\n    }\n\n    // Add click detection for the job\n    if is_job_hovered \u0026\u0026 info.response.secondary_clicked() {\n        let window =\n            JobDetailsWindow::new(job.clone(), get_tree_structure_for_job(job, all_cluster));\n        // Check if a window for this job already exists, if so, don't open a new one\n        if !details_window.iter().any(|w| w.job.id == job.id) {\n            details_window.push(window);\n        }\n    }\n\n    // Zoom to job if clicked\n    if is_job_hovered \u0026\u0026 info.response.clicked() {\n        // Zoom to job\n        let job_duration_s = job.walltime as f64;\n        let job_start_s = job.scheduled_start as f64;\n        let job_end_s = if job.stop_time \u003e 0 {\n            job.stop_time as f64\n        } else {\n            job_start_s + job_duration_s\n        };\n        options.zoom_to_relative_s_range = Some((\n            info.ctx.input(|i| i.time),\n            (\n                job_start_s - info.start_s as f64,\n                job_end_s - info.start_s as f64,\n            ),\n        ));\n    }\n\n    // Caculate the color of the job depending the selected job color int gantt component\n    let (hovered_color, normal_color) = if options.job_color.is_random() {\n        job.get_gantt_color()\n    } else {\n        job.state.get_color()\n    };\n\n    // If the job is hovered, we make it brighter\n    let fill_color = if is_job_hovered {\n        hovered_color\n    } else {\n        normal_color\n    };\n\n    // Paint the job rectangle\n    info.painter.rect_filled(rect, rounding, fill_color);\n\n    // Paint ressource hatch\n    if state == ResourceState::Dead || state == ResourceState::Absent {\n\n        // Define the color of the hachure depending the state of the resource\n        let hachure_color = match state {\n            ResourceState::Dead =\u003e Color32::from_rgba_premultiplied(255, 0, 0, 150),\n            ResourceState::Absent =\u003e theme_colors.hatch,\n            _ =\u003e Color32::TRANSPARENT,\n        };\n\n        let hachure_spacing = 10.0; // Spacing between hachure lines\n        let mut shapes = Vec::new();\n        let mut x = info.canvas.min.x;\n        let current_time_x = info.point_from_s(options, chrono::Utc::now().timestamp());\n\n        // Use the same y-position adjustment as the job rectangle\n        let hatch_y = if options.squash_resources {\n            top_y - aggregation_height\n        } else {\n            top_y\n        };\n\n        // Define the rectangle where the hachure will be drawn\n        let hover_rect = match state {\n            ResourceState::Dead =\u003e Rect::from_min_max(\n                pos2(info.canvas.min.x, hatch_y),\n                pos2(info.canvas.max.x, hatch_y + height), // draw hachure until the canvas max visible x\n            ),\n            ResourceState::Absent =\u003e Rect::from_min_max(\n                pos2(info.canvas.min.x, hatch_y),\n                pos2(current_time_x, hatch_y + height), // only draw hachure until current time\n            ),\n            _ =\u003e Rect::from_min_max(pos2(0.0, 0.0), pos2(0.0, 0.0)), // draw nothing\n        };\n\n        // We check if the mouse is hovering the hachure\n        let is_hachure_hovered = if let Some(mouse_pos) = info.response.hover_pos() {\n            hover_rect.contains(mouse_pos)\n        } else {\n            false\n        };\n\n        // Final color of the hachure\n        let final_hachure_color = if is_hachure_hovered {\n            hachure_color.gamma_multiply(1.5) // More visible when hovered\n        } else {\n            hachure_color\n        };\n\n        while x \u003c info.canvas.max.x {\n            if state == ResourceState::Absent \u0026\u0026 x \u003e= current_time_x {\n                break;\n            }\n            shapes.push(Shape::line_segment(\n                [\n                    pos2(x, hatch_y),\n                    pos2(x + hachure_spacing, hatch_y + height),\n                ],\n                Stroke::new(2.0, final_hachure_color),\n            ));\n            x += hachure_spacing;\n        }\n\n        info.painter.extend(shapes);\n\n        // Display tooltip if hovered\n        if is_hachure_hovered {\n            options.current_hovered_resource_state = Some(state.clone());\n        }\n    }\n\n    if width \u003e 20.0 {\n        let text = format!(\"{} ({})\", job.owner, job.id);\n        info.painter.text(\n            rect.center(),\n            Align2::CENTER_CENTER,\n            text,\n            info.font_id.clone(),\n            if is_job_hovered {\n                theme_colors.text\n            } else {\n                theme_colors.text_dim\n            },\n        );\n    }\n\n    if is_job_hovered {\n        PaintResult::Hovered\n    } else {\n        PaintResult::Painted\n    }\n}\n\n/**\n * Paints a job info appearing on the left side of the canvas\n */\nfn paint_job_info(info: \u0026Info, info_label: \u0026str, pos: Pos2, collapsed: \u0026mut bool, level: u8) {\n    let theme_colors = get_theme_colors(\u0026info.ctx.style());\n    let collapsed_symbol = if *collapsed { \"⏵\" } else { \"⏷\" }; // Symbol to show if the section is collapsed or not\n    let label = format!(\"{} {}\", collapsed_symbol, info_label); // Add the symbol and the name of the section\n\n    let galley = info\n        .ctx\n        .fonts(|f| f.layout_no_wrap(label, info.font_id.clone(), theme_colors.text_dim));\n\n    let offset_x = if level == 1 { 0.0 } else { 50.0 };\n    let rect = Rect::from_min_size(pos2(pos.x + offset_x, pos.y), galley.size());\n\n    // Check if the section is hovered\n    let is_hovered = if let Some(mouse_pos) = info.response.hover_pos() {\n        rect.contains(mouse_pos)\n    } else {\n        false\n    };\n\n    // If the section is hovered, depending on the theme, we change the text color\n    let text_color = if is_hovered {\n        theme_colors.text\n    } else {\n        theme_colors.text_dim\n    };\n\n    // Paint the background and the text\n    info.painter.rect_filled(rect.expand(2.0), 0.0, theme_colors.background);\n\n    // Paint the text\n    info.painter.galley(rect.min, galley, text_color);\n\n    // If the section is hovered and clicked, we change the collapsed state (open/close)\n    if is_hovered \u0026\u0026 info.response.clicked() {\n        *collapsed = !(*collapsed);\n    }\n}\n\n/****************************************************************************************************************************/\n// TIMELINE\n/****************************************************************************************************************************/\n\n/**\n * Paints the timeline text labels\n */\nfn paint_timeline_text(\n    info: \u0026Info,\n    canvas: Rect,\n    options: \u0026Options,\n    grid_spacing_minutes: i64,\n    fixed_timeline_y: f32,\n    alpha_multiplier: f32,\n    zoom_factor: f32,\n) -\u003e Vec\u003cegui::Shape\u003e {\n    let mut shapes = vec![];\n    let big_alpha = remap_clamp(zoom_factor, 0.0..=1.0, 0.5..=1.0);\n    let medium_alpha = remap_clamp(zoom_factor, 0.0..=1.0, 0.1..=0.5);\n    let mut grid_s = 0;\n\n    // Paint the timeline text labels\n    loop {\n\n        // Calculate the x position of the line\n        let line_x = info.point_from_s(options, grid_s);\n\n        // If the line is out of the canvas, we stop\n        if line_x \u003e canvas.max.x {\n            break;\n        }\n\n        // If the line is inside the canvas, we paint it\n        if canvas.min.x \u003c= line_x {\n            let big_line = grid_s % (grid_spacing_minutes * 20) == 0;\n            let medium_line = grid_s % (grid_spacing_minutes * 10) == 0;\n\n            // Determine the alpha of the text\n            let text_alpha = if big_line {\n                big_alpha\n            } else if medium_line {\n                medium_alpha\n            } else {\n                0.0\n            };\n\n            // If the text is visible, we paint it\n            if text_alpha \u003e 0.0 {\n                let text = grid_text(grid_s);\n                let text_x = line_x + 4.0;\n                let text_color = if info.ctx.style().visuals.dark_mode {\n                    Color32::from(Rgba::from_white_alpha(\n                        (text_alpha * alpha_multiplier * 2.0).min(1.0),\n                    ))\n                } else {\n                    Color32::from(Rgba::from_black_alpha(\n                        (text_alpha * alpha_multiplier * 2.0).min(1.0),\n                    ))\n                };\n\n                // Paint the text\n                info.painter.fonts(|f| {\n                    shapes.push(egui::Shape::text(\n                        f,\n                        pos2(text_x, fixed_timeline_y),\n                        Align2::LEFT_TOP,\n                        \u0026text,\n                        info.font_id.clone(),\n                        text_color,\n                    ));\n                });\n            }\n        }\n\n        grid_s += grid_spacing_minutes;\n    }\n\n    shapes\n}\n\nfn paint_timeline_text_on_top(info: \u0026Info, options: \u0026Options, fixed_timeline_y: f32) {\n    let max_lines = info.canvas.width() / 4.0;\n    let mut grid_spacing_minutes = 180;\n    while options.canvas_width_s / (grid_spacing_minutes as f32) \u003e max_lines {\n        grid_spacing_minutes *= 10;\n    }\n\n    let theme_colors = get_theme_colors(\u0026info.ctx.style());\n\n    // Determine the alpha multiplier of the lines depending on the theme\n    let alpha_multiplier = if info.ctx.style().visuals.dark_mode {\n        0.3\n    } else {\n        0.8\n    };\n\n    let num_tiny_lines = options.canvas_width_s / (grid_spacing_minutes as f32);\n    let zoom_factor = remap_clamp(num_tiny_lines, (0.1 * max_lines)..=max_lines, 1.0..=0.0);\n\n    // Paint background rect first\n    let bg_rect = Rect::from_min_size(\n        pos2(info.canvas.min.x, fixed_timeline_y),\n        egui::vec2(info.canvas.width(), info.text_height + 5.0),\n    );\n    info.painter\n        .rect_filled(bg_rect, 0.0, theme_colors.background_timeline);\n\n    // Paint timeline text on top of background\n    let timeline_text = paint_timeline_text(\n        info,\n        info.canvas,\n        options,\n        grid_spacing_minutes,\n        fixed_timeline_y,\n        alpha_multiplier,\n        zoom_factor,\n    );\n\n    // Add the shapes to the painter\n    for shape in timeline_text {\n        info.painter.add(shape);\n    }\n\n}\n\n/**\n * Paints the timeline\n */\nfn paint_timeline(info: \u0026Info, canvas: Rect, options: \u0026Options, _start_s: i64) -\u003e Vec\u003cegui::Shape\u003e {\n    let mut shapes = vec![];\n    let theme_colors = get_theme_colors(\u0026info.ctx.style());\n\n    // Determine the alpha multiplier of the lines depending on the theme\n    let alpha_multiplier = if info.ctx.style().visuals.dark_mode {\n        0.3\n    } else {\n        0.8\n    };\n\n    let max_lines = canvas.width() / 4.0; // Maximum number of lines that can be displayed\n    let mut grid_spacing_minutes = 180; // 180 seconds = 3 minutes repesenting the grid spacing\n\n    while options.canvas_width_s / (grid_spacing_minutes as f32) \u003e max_lines {\n        grid_spacing_minutes *= 10;\n    }\n\n    let num_tiny_lines = options.canvas_width_s / (grid_spacing_minutes as f32);\n    let zoom_factor = remap_clamp(num_tiny_lines, (0.1 * max_lines)..=max_lines, 1.0..=0.0);\n    let zoom_factor = zoom_factor * zoom_factor;\n    let big_alpha = remap_clamp(zoom_factor, 0.0..=1.0, 0.5..=1.0);\n    let medium_alpha = remap_clamp(zoom_factor, 0.0..=1.0, 0.1..=0.5);\n    let tiny_alpha = remap_clamp(zoom_factor, 0.0..=1.0, 0.0..=0.1);\n\n    let mut grid_s = 0;\n\n    // Paint the timeline lines\n    loop {\n\n        // Calculate the x position of the line\n        let line_x = info.point_from_s(options, grid_s);\n\n        // If the line is out of the canvas, we stop\n        if line_x \u003e canvas.max.x {\n            break;\n        }\n\n        // If the line is inside the canvas, we paint it\n        if canvas.min.x \u003c= line_x {\n            let big_line = grid_s % (grid_spacing_minutes * 20) == 0;\n            let medium_line = grid_s % (grid_spacing_minutes * 10) == 0;\n\n            // Determine the alpha of the line\n            let line_alpha = if big_line {\n                big_alpha\n            } else if medium_line {\n                medium_alpha\n            } else {\n                tiny_alpha\n            };\n\n            // Paint the line\n            shapes.push(egui::Shape::line_segment(\n                [pos2(line_x, canvas.min.y), pos2(line_x, canvas.max.y)],\n                Stroke::new(\n                    1.0,\n                    theme_colors\n                        .line\n                        .linear_multiply(line_alpha * alpha_multiplier),\n                ),\n            ));\n        }\n\n        grid_s += grid_spacing_minutes;\n    }\n\n    shapes\n}\n\n/**\n * Paints the current red time line on the canvas\n */\nfn paint_current_time_line(info: \u0026Info, options: \u0026Options, canvas: Rect) -\u003e egui::Shape {\n    let current_time = chrono::Utc::now().timestamp(); // Current time in seconds\n    let line_x = info.point_from_s(options, current_time); // Current time in pixels\n\n    // Paint the current time line\n    egui::Shape::line_segment(\n        [pos2(line_x, canvas.min.y), pos2(line_x, canvas.max.y)],\n        Stroke::new(2.0, Color32::RED), // Keep red for both themes for better visibility\n    )\n}\n\n/**\n * Converts a timestamp to a string\n */\nfn grid_text(ts: i64) -\u003e String {\n    if ts == 0 {\n        \"N/A\".to_string()\n    } else {\n        if let Some(dt) = DateTime::from_timestamp(ts, 0) {\n            dt.with_timezone(\u0026Local)\n                .format(\"%Y-%m-%d %H:%M:%S\")\n                .to_string()\n        } else {\n            \"Invalid timestamp\".to_string()\n        }\n    }\n}\n","traces":[{"line":60,"address":[4399584,4400024],"length":1,"stats":{"Line":0}},{"line":62,"address":[4399606],"length":1,"stats":{"Line":0}},{"line":63,"address":[4399619],"length":1,"stats":{"Line":0}},{"line":64,"address":[4399671],"length":1,"stats":{"Line":0}},{"line":65,"address":[4399723],"length":1,"stats":{"Line":0}},{"line":76,"address":[4401531,4400048],"length":1,"stats":{"Line":0}},{"line":77,"address":[4400095,4401495,4400715],"length":1,"stats":{"Line":0}},{"line":79,"address":[4400685],"length":1,"stats":{"Line":0}},{"line":82,"address":[4401403,4400693],"length":1,"stats":{"Line":0}},{"line":83,"address":[4401230],"length":1,"stats":{"Line":0}},{"line":84,"address":[4401319],"length":1,"stats":{"Line":0}},{"line":88,"address":[5609525,5608464],"length":1,"stats":{"Line":0}},{"line":89,"address":[5608664,5609552,5612305,5608489,5608888],"length":1,"stats":{"Line":0}},{"line":90,"address":[5609590],"length":1,"stats":{"Line":0}},{"line":93,"address":[5609630],"length":1,"stats":{"Line":0}},{"line":94,"address":[5609643],"length":1,"stats":{"Line":0}},{"line":97,"address":[5609669,5609927],"length":1,"stats":{"Line":0}},{"line":98,"address":[5609726],"length":1,"stats":{"Line":0}},{"line":99,"address":[5609693],"length":1,"stats":{"Line":0}},{"line":100,"address":[5609886],"length":1,"stats":{"Line":0}},{"line":102,"address":[5610670,5610378,5610559],"length":1,"stats":{"Line":0}},{"line":104,"address":[5609756],"length":1,"stats":{"Line":0}},{"line":105,"address":[5610350,5610385,5609765,5610129],"length":1,"stats":{"Line":0}},{"line":107,"address":[5610672,5610511,5610728,5612349,5610059,5610565,5610811,5610284],"length":1,"stats":{"Line":0}},{"line":109,"address":[5610800],"length":1,"stats":{"Line":0}},{"line":110,"address":[5611249,5610854],"length":1,"stats":{"Line":0}},{"line":112,"address":[5610862],"length":1,"stats":{"Line":0}},{"line":113,"address":[5610892],"length":1,"stats":{"Line":0}},{"line":116,"address":[5610900],"length":1,"stats":{"Line":0}},{"line":117,"address":[5610968],"length":1,"stats":{"Line":0}},{"line":118,"address":[5611036],"length":1,"stats":{"Line":0}},{"line":119,"address":[5611094],"length":1,"stats":{"Line":0}},{"line":120,"address":[5611110],"length":1,"stats":{"Line":0}},{"line":121,"address":[5611166],"length":1,"stats":{"Line":0}},{"line":125,"address":[5611230],"length":1,"stats":{"Line":0}},{"line":127,"address":[5611241],"length":1,"stats":{"Line":0}},{"line":130,"address":[5612400,5610835,5612410],"length":1,"stats":{"Line":0}},{"line":133,"address":[5610696],"length":1,"stats":{"Line":0}},{"line":135,"address":[5609870],"length":1,"stats":{"Line":0}},{"line":136,"address":[5609934,5612442,5612432],"length":1,"stats":{"Line":0}},{"line":138,"address":[5609920],"length":1,"stats":{"Line":0}},{"line":141,"address":[5612069],"length":1,"stats":{"Line":0}},{"line":142,"address":[5609950],"length":1,"stats":{"Line":0}},{"line":143,"address":[5611820,5612041,5609959,5612076],"length":1,"stats":{"Line":0}},{"line":145,"address":[5612196],"length":1,"stats":{"Line":0}},{"line":148,"address":[5612233],"length":1,"stats":{"Line":0}},{"line":152,"address":[5613082,5612464,5609126],"length":1,"stats":{"Line":0}},{"line":153,"address":[5612484,5613027],"length":1,"stats":{"Line":0}},{"line":157,"address":[5609178,5613104,5614372,5614327,5609290],"length":1,"stats":{"Line":0}},{"line":158,"address":[5614124,5613851,5613129,5614336,5613672,5614306],"length":1,"stats":{"Line":0}},{"line":159,"address":[5614166],"length":1,"stats":{"Line":0}},{"line":160,"address":[5613927,5614400,5614405],"length":1,"stats":{"Line":0}},{"line":163,"address":[5614161,5614031,5614106,5614311,5613951],"length":1,"stats":{"Line":0}},{"line":171,"address":[4400937],"length":1,"stats":{"Line":0}},{"line":172,"address":[5614454],"length":1,"stats":{"Line":0}},{"line":175,"address":[5614476,5614511],"length":1,"stats":{"Line":0}},{"line":177,"address":[5614517,5614558],"length":1,"stats":{"Line":0}},{"line":178,"address":[5617619,5614600,5614784,5617547],"length":1,"stats":{"Line":0}},{"line":179,"address":[5614815],"length":1,"stats":{"Line":0}},{"line":180,"address":[5614848],"length":1,"stats":{"Line":0}},{"line":181,"address":[5614859],"length":1,"stats":{"Line":0}},{"line":183,"address":[5615078,5615219],"length":1,"stats":{"Line":0}},{"line":184,"address":[5615227,5615325],"length":1,"stats":{"Line":0}},{"line":187,"address":[5615760],"length":1,"stats":{"Line":0}},{"line":188,"address":[5615333],"length":1,"stats":{"Line":0}},{"line":189,"address":[5615395],"length":1,"stats":{"Line":0}},{"line":190,"address":[5615411],"length":1,"stats":{"Line":0}},{"line":191,"address":[5615531],"length":1,"stats":{"Line":0}},{"line":192,"address":[5615634],"length":1,"stats":{"Line":0}},{"line":195,"address":[5615713,5615652],"length":1,"stats":{"Line":0}},{"line":199,"address":[5615990,5616291],"length":1,"stats":{"Line":0}},{"line":200,"address":[5616151],"length":1,"stats":{"Line":0}},{"line":201,"address":[5617664,5617669,5616036],"length":1,"stats":{"Line":0}},{"line":202,"address":[5616097,5616296],"length":1,"stats":{"Line":0}},{"line":207,"address":[5616007],"length":1,"stats":{"Line":0}},{"line":210,"address":[5616316],"length":1,"stats":{"Line":0}},{"line":213,"address":[5616434],"length":1,"stats":{"Line":0}},{"line":214,"address":[5616409],"length":1,"stats":{"Line":0}},{"line":215,"address":[5616397],"length":1,"stats":{"Line":0}},{"line":217,"address":[5616401],"length":1,"stats":{"Line":0}},{"line":219,"address":[5616412],"length":1,"stats":{"Line":0}},{"line":220,"address":[5616416],"length":1,"stats":{"Line":0}},{"line":221,"address":[5616420],"length":1,"stats":{"Line":0}},{"line":222,"address":[5616424],"length":1,"stats":{"Line":0}},{"line":225,"address":[5616492],"length":1,"stats":{"Line":0}},{"line":226,"address":[5616508],"length":1,"stats":{"Line":0}},{"line":229,"address":[5616517],"length":1,"stats":{"Line":0}},{"line":231,"address":[5616591],"length":1,"stats":{"Line":0}},{"line":232,"address":[5616646,5616698],"length":1,"stats":{"Line":0}},{"line":233,"address":[5616654],"length":1,"stats":{"Line":0}},{"line":236,"address":[5616725],"length":1,"stats":{"Line":0}},{"line":237,"address":[5616775],"length":1,"stats":{"Line":0}},{"line":239,"address":[5616802],"length":1,"stats":{"Line":0}},{"line":243,"address":[5616997,5617165,5617264],"length":1,"stats":{"Line":0}},{"line":244,"address":[5617010,5617118,5617111],"length":1,"stats":{"Line":0}},{"line":245,"address":[5617115],"length":1,"stats":{"Line":0}},{"line":246,"address":[5617199,5617295,5617329],"length":1,"stats":{"Line":0}},{"line":248,"address":[5617303,5617350],"length":1,"stats":{"Line":0}},{"line":249,"address":[5617389],"length":1,"stats":{"Line":0}},{"line":251,"address":[5617457],"length":1,"stats":{"Line":0}},{"line":257,"address":[5617680,5617705],"length":1,"stats":{"Line":0}},{"line":260,"address":[4401472,4401170,4401408],"length":1,"stats":{"Line":0}},{"line":261,"address":[4401488],"length":1,"stats":{"Line":0}},{"line":285,"address":[4401568],"length":1,"stats":{"Line":0}},{"line":286,"address":[4401591,4401704],"length":1,"stats":{"Line":0}},{"line":288,"address":[4401613,4401649,4401713],"length":1,"stats":{"Line":0}},{"line":322,"address":[4401744],"length":1,"stats":{"Line":0}},{"line":331,"address":[4401761],"length":1,"stats":{"Line":0}},{"line":332,"address":[4401774],"length":1,"stats":{"Line":0}},{"line":350,"address":[4402096,4403590,4410880],"length":1,"stats":{"Line":0}},{"line":361,"address":[4402664,4402353],"length":1,"stats":{"Line":0}},{"line":362,"address":[4402669,4402560],"length":1,"stats":{"Line":0}},{"line":363,"address":[4402605],"length":1,"stats":{"Line":0}},{"line":366,"address":[4402385,4402411],"length":1,"stats":{"Line":0}},{"line":367,"address":[4402420],"length":1,"stats":{"Line":0}},{"line":370,"address":[4402450],"length":1,"stats":{"Line":0}},{"line":372,"address":[4402493],"length":1,"stats":{"Line":0}},{"line":376,"address":[4402695],"length":1,"stats":{"Line":0}},{"line":378,"address":[4402864,4403100,4402973,4403186],"length":1,"stats":{"Line":0}},{"line":379,"address":[4403550,4403489],"length":1,"stats":{"Line":0}},{"line":380,"address":[4403196],"length":1,"stats":{"Line":0}},{"line":382,"address":[4403535],"length":1,"stats":{"Line":0}},{"line":385,"address":[4403330],"length":1,"stats":{"Line":0}},{"line":388,"address":[4403266],"length":1,"stats":{"Line":0}},{"line":389,"address":[4403306],"length":1,"stats":{"Line":0}},{"line":392,"address":[4403315],"length":1,"stats":{"Line":0}},{"line":394,"address":[4403322],"length":1,"stats":{"Line":0}},{"line":400,"address":[4402772],"length":1,"stats":{"Line":0}},{"line":404,"address":[4408041],"length":1,"stats":{"Line":0}},{"line":406,"address":[4408074,4408158],"length":1,"stats":{"Line":0}},{"line":408,"address":[4408165,4408395,4408268,4408473],"length":1,"stats":{"Line":0}},{"line":409,"address":[4408799,4408475,4408991],"length":1,"stats":{"Line":0}},{"line":410,"address":[4409023],"length":1,"stats":{"Line":0}},{"line":411,"address":[4409087],"length":1,"stats":{"Line":0}},{"line":415,"address":[4409330,4409188,4409269],"length":1,"stats":{"Line":0}},{"line":416,"address":[4409060],"length":1,"stats":{"Line":0}},{"line":418,"address":[4409218],"length":1,"stats":{"Line":0}},{"line":420,"address":[4409315],"length":1,"stats":{"Line":0}},{"line":425,"address":[4408640],"length":1,"stats":{"Line":0}},{"line":428,"address":[4408569],"length":1,"stats":{"Line":0}},{"line":429,"address":[4408609],"length":1,"stats":{"Line":0}},{"line":433,"address":[4408618],"length":1,"stats":{"Line":0}},{"line":435,"address":[4408624],"length":1,"stats":{"Line":0}},{"line":436,"address":[4408632],"length":1,"stats":{"Line":0}},{"line":442,"address":[4408056],"length":1,"stats":{"Line":0}},{"line":443,"address":[4409383,4409467],"length":1,"stats":{"Line":0}},{"line":446,"address":[4409577,4409782,4409704,4409474],"length":1,"stats":{"Line":0}},{"line":447,"address":[4410616,4409784,4410454],"length":1,"stats":{"Line":0}},{"line":448,"address":[4410645],"length":1,"stats":{"Line":0}},{"line":449,"address":[4410697],"length":1,"stats":{"Line":0}},{"line":453,"address":[4410780,4410835],"length":1,"stats":{"Line":0}},{"line":454,"address":[4410673],"length":1,"stats":{"Line":0}},{"line":456,"address":[4410823],"length":1,"stats":{"Line":0}},{"line":461,"address":[4409934],"length":1,"stats":{"Line":0}},{"line":464,"address":[4409870],"length":1,"stats":{"Line":0}},{"line":465,"address":[4409910],"length":1,"stats":{"Line":0}},{"line":468,"address":[4409919],"length":1,"stats":{"Line":0}},{"line":470,"address":[4409926],"length":1,"stats":{"Line":0}},{"line":480,"address":[4402713],"length":1,"stats":{"Line":0}},{"line":484,"address":[4403625],"length":1,"stats":{"Line":0}},{"line":486,"address":[4403676,4403760],"length":1,"stats":{"Line":0}},{"line":489,"address":[4403870,4403767,4403997,4404075],"length":1,"stats":{"Line":0}},{"line":490,"address":[4404077,4404401,4404593],"length":1,"stats":{"Line":0}},{"line":491,"address":[4404625],"length":1,"stats":{"Line":0}},{"line":492,"address":[4404689],"length":1,"stats":{"Line":0}},{"line":496,"address":[4404872,4404933,4404791],"length":1,"stats":{"Line":0}},{"line":497,"address":[4404662],"length":1,"stats":{"Line":0}},{"line":499,"address":[4404821],"length":1,"stats":{"Line":0}},{"line":501,"address":[4404918],"length":1,"stats":{"Line":0}},{"line":506,"address":[4404242],"length":1,"stats":{"Line":0}},{"line":509,"address":[4404171],"length":1,"stats":{"Line":0}},{"line":510,"address":[4404211],"length":1,"stats":{"Line":0}},{"line":514,"address":[4404220],"length":1,"stats":{"Line":0}},{"line":516,"address":[4404226],"length":1,"stats":{"Line":0}},{"line":517,"address":[4404234],"length":1,"stats":{"Line":0}},{"line":523,"address":[4403658],"length":1,"stats":{"Line":0}},{"line":524,"address":[4406841,4406925],"length":1,"stats":{"Line":0}},{"line":527,"address":[4407162,4407035,4407240,4406932],"length":1,"stats":{"Line":0}},{"line":528,"address":[4407537,4407242,4407729],"length":1,"stats":{"Line":0}},{"line":529,"address":[4407761],"length":1,"stats":{"Line":0}},{"line":530,"address":[4407825],"length":1,"stats":{"Line":0}},{"line":534,"address":[4407927,4407988],"length":1,"stats":{"Line":0}},{"line":535,"address":[4407798],"length":1,"stats":{"Line":0}},{"line":537,"address":[4407973],"length":1,"stats":{"Line":0}},{"line":542,"address":[4407392],"length":1,"stats":{"Line":0}},{"line":545,"address":[4407328],"length":1,"stats":{"Line":0}},{"line":546,"address":[4407368],"length":1,"stats":{"Line":0}},{"line":549,"address":[4407377],"length":1,"stats":{"Line":0}},{"line":551,"address":[4407384],"length":1,"stats":{"Line":0}},{"line":557,"address":[4403640],"length":1,"stats":{"Line":0}},{"line":559,"address":[4404986,4405070],"length":1,"stats":{"Line":0}},{"line":562,"address":[4405307,4405077,4405180,4405385],"length":1,"stats":{"Line":0}},{"line":563,"address":[4405387,4405903,4405711],"length":1,"stats":{"Line":0}},{"line":564,"address":[4405919],"length":1,"stats":{"Line":0}},{"line":565,"address":[4406172],"length":1,"stats":{"Line":0}},{"line":566,"address":[4406254],"length":1,"stats":{"Line":0}},{"line":571,"address":[4406375,4406209],"length":1,"stats":{"Line":0}},{"line":574,"address":[4406455,4406550],"length":1,"stats":{"Line":0}},{"line":575,"address":[4406646,4406727,4406788],"length":1,"stats":{"Line":0}},{"line":576,"address":[4406595],"length":1,"stats":{"Line":0}},{"line":578,"address":[4406676],"length":1,"stats":{"Line":0}},{"line":580,"address":[4406773],"length":1,"stats":{"Line":0}},{"line":587,"address":[4405552],"length":1,"stats":{"Line":0}},{"line":590,"address":[4405481],"length":1,"stats":{"Line":0}},{"line":591,"address":[4405521],"length":1,"stats":{"Line":0}},{"line":595,"address":[4405530],"length":1,"stats":{"Line":0}},{"line":597,"address":[4405536],"length":1,"stats":{"Line":0}},{"line":598,"address":[4405544],"length":1,"stats":{"Line":0}},{"line":605,"address":[4403415],"length":1,"stats":{"Line":0}},{"line":608,"address":[4410031],"length":1,"stats":{"Line":0}},{"line":609,"address":[4410187],"length":1,"stats":{"Line":0}},{"line":612,"address":[4410322],"length":1,"stats":{"Line":0}},{"line":614,"address":[4410329],"length":1,"stats":{"Line":0}},{"line":620,"address":[4410912],"length":1,"stats":{"Line":0}},{"line":621,"address":[4410971,4411091],"length":1,"stats":{"Line":0}},{"line":622,"address":[4411012],"length":1,"stats":{"Line":0}},{"line":623,"address":[4411038],"length":1,"stats":{"Line":0}},{"line":626,"address":[4410999],"length":1,"stats":{"Line":0}},{"line":628,"address":[5617728,5617733],"length":1,"stats":{"Line":0}},{"line":629,"address":[4411204],"length":1,"stats":{"Line":0}},{"line":630,"address":[4411237],"length":1,"stats":{"Line":0}},{"line":633,"address":[4411142],"length":1,"stats":{"Line":0}},{"line":635,"address":[4411168,4411378],"length":1,"stats":{"Line":0}},{"line":636,"address":[4411335],"length":1,"stats":{"Line":0}},{"line":639,"address":[4411301,4411625],"length":1,"stats":{"Line":0}},{"line":640,"address":[4411385],"length":1,"stats":{"Line":0}},{"line":643,"address":[4411545,4411417],"length":1,"stats":{"Line":0}},{"line":644,"address":[4411534],"length":1,"stats":{"Line":0}},{"line":645,"address":[4411646],"length":1,"stats":{"Line":0}},{"line":647,"address":[4411654,4411776],"length":1,"stats":{"Line":0}},{"line":648,"address":[4411726],"length":1,"stats":{"Line":0}},{"line":649,"address":[4411764],"length":1,"stats":{"Line":0}},{"line":650,"address":[4411743],"length":1,"stats":{"Line":0}},{"line":653,"address":[4411566],"length":1,"stats":{"Line":0}},{"line":657,"address":[4411098,4412015],"length":1,"stats":{"Line":0}},{"line":659,"address":[4411878],"length":1,"stats":{"Line":0}},{"line":660,"address":[4411806],"length":1,"stats":{"Line":0}},{"line":661,"address":[4412020,4411829],"length":1,"stats":{"Line":0}},{"line":665,"address":[4411786,4412046],"length":1,"stats":{"Line":0}},{"line":667,"address":[4412100],"length":1,"stats":{"Line":0}},{"line":669,"address":[4412203],"length":1,"stats":{"Line":0}},{"line":671,"address":[4412212],"length":1,"stats":{"Line":0}},{"line":672,"address":[4412235],"length":1,"stats":{"Line":0}},{"line":674,"address":[4412507],"length":1,"stats":{"Line":0}},{"line":675,"address":[4412276],"length":1,"stats":{"Line":0}},{"line":679,"address":[4412742],"length":1,"stats":{"Line":0}},{"line":680,"address":[4412531],"length":1,"stats":{"Line":0}},{"line":682,"address":[4412864,4412750],"length":1,"stats":{"Line":0}},{"line":683,"address":[4412805],"length":1,"stats":{"Line":0}},{"line":686,"address":[4412778],"length":1,"stats":{"Line":0}},{"line":707,"address":[4412880],"length":1,"stats":{"Line":0}},{"line":709,"address":[4412901,4413146],"length":1,"stats":{"Line":0}},{"line":712,"address":[4413151],"length":1,"stats":{"Line":0}},{"line":714,"address":[4413179],"length":1,"stats":{"Line":0}},{"line":715,"address":[4413197],"length":1,"stats":{"Line":0}},{"line":716,"address":[4413215],"length":1,"stats":{"Line":0}},{"line":717,"address":[4413243],"length":1,"stats":{"Line":0}},{"line":718,"address":[4413271],"length":1,"stats":{"Line":0}},{"line":723,"address":[4412914],"length":1,"stats":{"Line":0}},{"line":725,"address":[4412936],"length":1,"stats":{"Line":0}},{"line":726,"address":[4412954],"length":1,"stats":{"Line":0}},{"line":727,"address":[4412972],"length":1,"stats":{"Line":0}},{"line":728,"address":[4412994],"length":1,"stats":{"Line":0}},{"line":729,"address":[4413022],"length":1,"stats":{"Line":0}},{"line":741,"address":[4420860,4419270,4413408],"length":1,"stats":{"Line":0}},{"line":742,"address":[4413447],"length":1,"stats":{"Line":0}},{"line":745,"address":[4413524],"length":1,"stats":{"Line":0}},{"line":746,"address":[4414992,4416863,4416074,4419162,4417447,4415267,4414546,4415899,4417091,4419279,4419241,4414780,4417303,4415713,4413822,4414265,4415501,4416514,4414053,4416302,4416700],"length":1,"stats":{"Line":0}},{"line":748,"address":[4413771,4414233,4413895,4414119,4413586],"length":1,"stats":{"Line":0}},{"line":750,"address":[4414846,4414409,4414622,4414960],"length":1,"stats":{"Line":0}},{"line":752,"address":[4415567,4415343,4415681,4415130],"length":1,"stats":{"Line":0}},{"line":753,"address":[4415765],"length":1,"stats":{"Line":0}},{"line":754,"address":[4416482,4415943,4416368,4416144],"length":1,"stats":{"Line":0}},{"line":755,"address":[4416566],"length":1,"stats":{"Line":0}},{"line":756,"address":[4416744,4417271,4416933,4417157],"length":1,"stats":{"Line":0}},{"line":762,"address":[4413664,4420569,4419647],"length":1,"stats":{"Line":0}},{"line":763,"address":[4419700,4419663],"length":1,"stats":{"Line":0}},{"line":764,"address":[4419706,4419766],"length":1,"stats":{"Line":0}},{"line":766,"address":[4420290,4420435,4420514],"length":1,"stats":{"Line":0}},{"line":768,"address":[4419881,4419741,4419772],"length":1,"stats":{"Line":0}},{"line":769,"address":[4419819],"length":1,"stats":{"Line":0}},{"line":770,"address":[4419890,4419786],"length":1,"stats":{"Line":0}},{"line":772,"address":[4419854],"length":1,"stats":{"Line":0}},{"line":773,"address":[4420038,4419904,4419966],"length":1,"stats":{"Line":0}},{"line":774,"address":[4419976],"length":1,"stats":{"Line":0}},{"line":776,"address":[4420011],"length":1,"stats":{"Line":0}},{"line":778,"address":[4419939],"length":1,"stats":{"Line":0}},{"line":782,"address":[4420548],"length":1,"stats":{"Line":0}},{"line":786,"address":[4419682,4420578],"length":1,"stats":{"Line":0}},{"line":787,"address":[4420630,4420592],"length":1,"stats":{"Line":0}},{"line":789,"address":[4420687],"length":1,"stats":{"Line":0}},{"line":790,"address":[4420702],"length":1,"stats":{"Line":0}},{"line":791,"address":[4420718],"length":1,"stats":{"Line":0}},{"line":792,"address":[4420765],"length":1,"stats":{"Line":0}},{"line":793,"address":[5617924],"length":1,"stats":{"Line":0}},{"line":794,"address":[5618003],"length":1,"stats":{"Line":0}},{"line":804,"address":[4420896,4425133,4423328],"length":1,"stats":{"Line":0}},{"line":815,"address":[4421023,4421113],"length":1,"stats":{"Line":0}},{"line":817,"address":[4421246],"length":1,"stats":{"Line":0}},{"line":818,"address":[4421280],"length":1,"stats":{"Line":0}},{"line":819,"address":[4421291],"length":1,"stats":{"Line":0}},{"line":821,"address":[4421302],"length":1,"stats":{"Line":0}},{"line":824,"address":[4421332],"length":1,"stats":{"Line":0}},{"line":825,"address":[4421393,4421485],"length":1,"stats":{"Line":0}},{"line":827,"address":[4421499],"length":1,"stats":{"Line":0}},{"line":830,"address":[4421553],"length":1,"stats":{"Line":0}},{"line":833,"address":[4421811,4421873,4421560,4421676],"length":1,"stats":{"Line":0}},{"line":834,"address":[4421913,4423478],"length":1,"stats":{"Line":0}},{"line":836,"address":[4423486,4423765],"length":1,"stats":{"Line":0}},{"line":838,"address":[4423501],"length":1,"stats":{"Line":0}},{"line":839,"address":[4423580],"length":1,"stats":{"Line":0}},{"line":841,"address":[4423687],"length":1,"stats":{"Line":0}},{"line":844,"address":[4423816],"length":1,"stats":{"Line":0}},{"line":846,"address":[4423846],"length":1,"stats":{"Line":0}},{"line":849,"address":[4423941],"length":1,"stats":{"Line":0}},{"line":852,"address":[4424042],"length":1,"stats":{"Line":0}},{"line":853,"address":[4424076,4424227],"length":1,"stats":{"Line":0}},{"line":856,"address":[4424144,4424059],"length":1,"stats":{"Line":0}},{"line":859,"address":[4424162],"length":1,"stats":{"Line":0}},{"line":864,"address":[4424327,4424184,4424381],"length":1,"stats":{"Line":0}},{"line":865,"address":[4424359],"length":1,"stats":{"Line":0}},{"line":866,"address":[4424333,4424481,4424387],"length":1,"stats":{"Line":0}},{"line":867,"address":[4424474,4424436],"length":1,"stats":{"Line":0}},{"line":869,"address":[4424409,4424451],"length":1,"stats":{"Line":0}},{"line":873,"address":[4424463],"length":1,"stats":{"Line":0}},{"line":875,"address":[4424491],"length":1,"stats":{"Line":0}},{"line":877,"address":[4424515,4424568,4424673],"length":1,"stats":{"Line":0}},{"line":879,"address":[4424689,4424869],"length":1,"stats":{"Line":0}},{"line":880,"address":[4424877],"length":1,"stats":{"Line":0}},{"line":882,"address":[4424851],"length":1,"stats":{"Line":0}},{"line":889,"address":[4424927],"length":1,"stats":{"Line":0}},{"line":890,"address":[4424935],"length":1,"stats":{"Line":0}},{"line":898,"address":[4425039,4424968],"length":1,"stats":{"Line":0}},{"line":899,"address":[4424997],"length":1,"stats":{"Line":0}},{"line":904,"address":[4424817,4424654,4424738],"length":1,"stats":{"Line":0}},{"line":905,"address":[4424775],"length":1,"stats":{"Line":0}},{"line":907,"address":[4424715,4424846],"length":1,"stats":{"Line":0}},{"line":908,"address":[4424828],"length":1,"stats":{"Line":0}},{"line":911,"address":[4424540],"length":1,"stats":{"Line":0}},{"line":912,"address":[4425053],"length":1,"stats":{"Line":0}},{"line":917,"address":[4421939],"length":1,"stats":{"Line":0}},{"line":918,"address":[4422236,4422175,4421985],"length":1,"stats":{"Line":0}},{"line":920,"address":[5618224,5618749,5618781],"length":1,"stats":{"Line":0}},{"line":921,"address":[5618249],"length":1,"stats":{"Line":0}},{"line":922,"address":[5618449,5618382],"length":1,"stats":{"Line":0}},{"line":923,"address":[5618555,5618762],"length":1,"stats":{"Line":0}},{"line":925,"address":[4422548,4422624],"length":1,"stats":{"Line":0}},{"line":926,"address":[4422863,4422950],"length":1,"stats":{"Line":0}},{"line":927,"address":[4422877],"length":1,"stats":{"Line":0}},{"line":930,"address":[4422998],"length":1,"stats":{"Line":0}},{"line":931,"address":[4423022],"length":1,"stats":{"Line":0}},{"line":933,"address":[4423108,4423301],"length":1,"stats":{"Line":0}},{"line":934,"address":[4423296,4423163],"length":1,"stats":{"Line":0}},{"line":939,"address":[4421948],"length":1,"stats":{"Line":0}},{"line":945,"address":[4427917,4432808,4425152],"length":1,"stats":{"Line":0}},{"line":958,"address":[4425311,4425433],"length":1,"stats":{"Line":0}},{"line":960,"address":[4425566],"length":1,"stats":{"Line":0}},{"line":961,"address":[4425596],"length":1,"stats":{"Line":0}},{"line":962,"address":[4425621],"length":1,"stats":{"Line":0}},{"line":963,"address":[4425300],"length":1,"stats":{"Line":0}},{"line":965,"address":[4425632],"length":1,"stats":{"Line":0}},{"line":968,"address":[4425662],"length":1,"stats":{"Line":0}},{"line":969,"address":[4425815,4425723],"length":1,"stats":{"Line":0}},{"line":972,"address":[4425830],"length":1,"stats":{"Line":0}},{"line":973,"address":[4425837],"length":1,"stats":{"Line":0}},{"line":975,"address":[4426014,4426149,4425898,4426211],"length":1,"stats":{"Line":0}},{"line":976,"address":[4426251,4428940],"length":1,"stats":{"Line":0}},{"line":977,"address":[4428948],"length":1,"stats":{"Line":0}},{"line":980,"address":[4428983,4429356],"length":1,"stats":{"Line":0}},{"line":982,"address":[4429001],"length":1,"stats":{"Line":0}},{"line":983,"address":[4429144],"length":1,"stats":{"Line":0}},{"line":985,"address":[4429269],"length":1,"stats":{"Line":0}},{"line":988,"address":[4429407],"length":1,"stats":{"Line":0}},{"line":990,"address":[4429437],"length":1,"stats":{"Line":0}},{"line":993,"address":[4429601],"length":1,"stats":{"Line":0}},{"line":994,"address":[4429550],"length":1,"stats":{"Line":0}},{"line":998,"address":[4429657],"length":1,"stats":{"Line":0}},{"line":999,"address":[4429861,4429697],"length":1,"stats":{"Line":0}},{"line":1002,"address":[4429780,4429674],"length":1,"stats":{"Line":0}},{"line":1005,"address":[4429806],"length":1,"stats":{"Line":0}},{"line":1008,"address":[4429824,4430437],"length":1,"stats":{"Line":0}},{"line":1010,"address":[4429973,4430022],"length":1,"stats":{"Line":0}},{"line":1011,"address":[4430045,4430125],"length":1,"stats":{"Line":0}},{"line":1014,"address":[4430390,4430330,4430132],"length":1,"stats":{"Line":0}},{"line":1015,"address":[4430450,4430406],"length":1,"stats":{"Line":0}},{"line":1017,"address":[4430850,4430523],"length":1,"stats":{"Line":0}},{"line":1019,"address":[4430541],"length":1,"stats":{"Line":0}},{"line":1020,"address":[4430638],"length":1,"stats":{"Line":0}},{"line":1022,"address":[4430763],"length":1,"stats":{"Line":0}},{"line":1025,"address":[4430910],"length":1,"stats":{"Line":0}},{"line":1027,"address":[4430932],"length":1,"stats":{"Line":0}},{"line":1030,"address":[4431217],"length":1,"stats":{"Line":0}},{"line":1031,"address":[4431055],"length":1,"stats":{"Line":0}},{"line":1035,"address":[4431267],"length":1,"stats":{"Line":0}},{"line":1036,"address":[4431611],"length":1,"stats":{"Line":0}},{"line":1037,"address":[4431299],"length":1,"stats":{"Line":0}},{"line":1038,"address":[4431525],"length":1,"stats":{"Line":0}},{"line":1040,"address":[4431609],"length":1,"stats":{"Line":0}},{"line":1046,"address":[4431337,4431276],"length":1,"stats":{"Line":0}},{"line":1053,"address":[4431474],"length":1,"stats":{"Line":0}},{"line":1058,"address":[4431741,4431496,4432049],"length":1,"stats":{"Line":0}},{"line":1059,"address":[4431781,4432042],"length":1,"stats":{"Line":0}},{"line":1060,"address":[4431807,4431835,4431747],"length":1,"stats":{"Line":0}},{"line":1061,"address":[4431886,4431837,4432033],"length":1,"stats":{"Line":0}},{"line":1062,"address":[4431934,4432026],"length":1,"stats":{"Line":0}},{"line":1063,"address":[4431977,4431949,4431892,4432017],"length":1,"stats":{"Line":0}},{"line":1064,"address":[4431995],"length":1,"stats":{"Line":0}},{"line":1066,"address":[4431955],"length":1,"stats":{"Line":0}},{"line":1069,"address":[4431813],"length":1,"stats":{"Line":0}},{"line":1073,"address":[4431868],"length":1,"stats":{"Line":0}},{"line":1075,"address":[4432062],"length":1,"stats":{"Line":0}},{"line":1078,"address":[4432301,4432086,4432139],"length":1,"stats":{"Line":0}},{"line":1080,"address":[4432322,4432414],"length":1,"stats":{"Line":0}},{"line":1081,"address":[4432422],"length":1,"stats":{"Line":0}},{"line":1083,"address":[4432396],"length":1,"stats":{"Line":0}},{"line":1087,"address":[4432477],"length":1,"stats":{"Line":0}},{"line":1094,"address":[4432490],"length":1,"stats":{"Line":0}},{"line":1102,"address":[4432523,4432627],"length":1,"stats":{"Line":0}},{"line":1103,"address":[4432609],"length":1,"stats":{"Line":0}},{"line":1104,"address":[4432585],"length":1,"stats":{"Line":0}},{"line":1109,"address":[4432279,4432391],"length":1,"stats":{"Line":0}},{"line":1110,"address":[4432349],"length":1,"stats":{"Line":0}},{"line":1113,"address":[4432659,4432111],"length":1,"stats":{"Line":0}},{"line":1114,"address":[4432641],"length":1,"stats":{"Line":0}},{"line":1119,"address":[4429988],"length":1,"stats":{"Line":0}},{"line":1120,"address":[4432691],"length":1,"stats":{"Line":0}},{"line":1125,"address":[4426277],"length":1,"stats":{"Line":0}},{"line":1127,"address":[4426574,4426323,4426513],"length":1,"stats":{"Line":0}},{"line":1129,"address":[4426676,4428019],"length":1,"stats":{"Line":0}},{"line":1130,"address":[5619017],"length":1,"stats":{"Line":0}},{"line":1131,"address":[5619150,5619217],"length":1,"stats":{"Line":0}},{"line":1132,"address":[5619323,5619530],"length":1,"stats":{"Line":0}},{"line":1134,"address":[4428103,4428027],"length":1,"stats":{"Line":0}},{"line":1135,"address":[4428429,4428342],"length":1,"stats":{"Line":0}},{"line":1136,"address":[4428356],"length":1,"stats":{"Line":0}},{"line":1139,"address":[4428477],"length":1,"stats":{"Line":0}},{"line":1140,"address":[4428501],"length":1,"stats":{"Line":0}},{"line":1142,"address":[4428780,4428587],"length":1,"stats":{"Line":0}},{"line":1143,"address":[4428642,4428775],"length":1,"stats":{"Line":0}},{"line":1148,"address":[4427011,4426768,4426958,4427893],"length":1,"stats":{"Line":0}},{"line":1150,"address":[4427168],"length":1,"stats":{"Line":0}},{"line":1151,"address":[4427183,4427402],"length":1,"stats":{"Line":0}},{"line":1153,"address":[4427416],"length":1,"stats":{"Line":0}},{"line":1154,"address":[4427782,4427627],"length":1,"stats":{"Line":0}},{"line":1155,"address":[4427475],"length":1,"stats":{"Line":0}},{"line":1156,"address":[4427461,4427787,4427642],"length":1,"stats":{"Line":0}},{"line":1161,"address":[4426286],"length":1,"stats":{"Line":0}},{"line":1174,"address":[4432832,4439018],"length":1,"stats":{"Line":0}},{"line":1184,"address":[4432976],"length":1,"stats":{"Line":0}},{"line":1185,"address":[4433172],"length":1,"stats":{"Line":0}},{"line":1187,"address":[4433298,4433210,4433280],"length":1,"stats":{"Line":0}},{"line":1188,"address":[4433265],"length":1,"stats":{"Line":0}},{"line":1190,"address":[4433290,4433300,4433228],"length":1,"stats":{"Line":0}},{"line":1192,"address":[4433332],"length":1,"stats":{"Line":0}},{"line":1193,"address":[4433374],"length":1,"stats":{"Line":0}},{"line":1195,"address":[4433396],"length":1,"stats":{"Line":0}},{"line":1196,"address":[4433478],"length":1,"stats":{"Line":0}},{"line":1200,"address":[4432965],"length":1,"stats":{"Line":0}},{"line":1201,"address":[4433425],"length":1,"stats":{"Line":0}},{"line":1204,"address":[4433516,4433467],"length":1,"stats":{"Line":0}},{"line":1205,"address":[4433536],"length":1,"stats":{"Line":0}},{"line":1207,"address":[4433499],"length":1,"stats":{"Line":0}},{"line":1211,"address":[4433591,4433557],"length":1,"stats":{"Line":0}},{"line":1212,"address":[4433593],"length":1,"stats":{"Line":0}},{"line":1214,"address":[4433574],"length":1,"stats":{"Line":0}},{"line":1219,"address":[4433699],"length":1,"stats":{"Line":0}},{"line":1221,"address":[4433613,4433640],"length":1,"stats":{"Line":0}},{"line":1222,"address":[4433660],"length":1,"stats":{"Line":0}},{"line":1224,"address":[4433631],"length":1,"stats":{"Line":0}},{"line":1227,"address":[4433744],"length":1,"stats":{"Line":0}},{"line":1230,"address":[4433938],"length":1,"stats":{"Line":0}},{"line":1231,"address":[4434162],"length":1,"stats":{"Line":0}},{"line":1233,"address":[4434173],"length":1,"stats":{"Line":0}},{"line":1237,"address":[4434432,4434483,4434189],"length":1,"stats":{"Line":0}},{"line":1238,"address":[4434413],"length":1,"stats":{"Line":0}},{"line":1240,"address":[4434424],"length":1,"stats":{"Line":0}},{"line":1241,"address":[4434450],"length":1,"stats":{"Line":0}},{"line":1244,"address":[5619578,5619568],"length":1,"stats":{"Line":0}},{"line":1245,"address":[4434501],"length":1,"stats":{"Line":0}},{"line":1248,"address":[5619626,5619616],"length":1,"stats":{"Line":0}},{"line":1251,"address":[4434577,4434540,4434757],"length":1,"stats":{"Line":0}},{"line":1252,"address":[4434616],"length":1,"stats":{"Line":0}},{"line":1256,"address":[4434789,4435244,4434550],"length":1,"stats":{"Line":0}},{"line":1257,"address":[4434812,4439101],"length":1,"stats":{"Line":0}},{"line":1260,"address":[4435048,4434968],"length":1,"stats":{"Line":0}},{"line":1261,"address":[4435146,4435234],"length":1,"stats":{"Line":0}},{"line":1266,"address":[4435385,4434762,4435747,4435305],"length":1,"stats":{"Line":0}},{"line":1268,"address":[4435407],"length":1,"stats":{"Line":0}},{"line":1269,"address":[4435434],"length":1,"stats":{"Line":0}},{"line":1270,"address":[4435461,4435502],"length":1,"stats":{"Line":0}},{"line":1271,"address":[4435512],"length":1,"stats":{"Line":0}},{"line":1273,"address":[4435489],"length":1,"stats":{"Line":0}},{"line":1275,"address":[4435613],"length":1,"stats":{"Line":0}},{"line":1276,"address":[4435538],"length":1,"stats":{"Line":0}},{"line":1278,"address":[4435578],"length":1,"stats":{"Line":0}},{"line":1279,"address":[4435591],"length":1,"stats":{"Line":0}},{"line":1285,"address":[4435835,4435272],"length":1,"stats":{"Line":0}},{"line":1286,"address":[4435806],"length":1,"stats":{"Line":0}},{"line":1288,"address":[4435760],"length":1,"stats":{"Line":0}},{"line":1292,"address":[4435863,4435887],"length":1,"stats":{"Line":0}},{"line":1293,"address":[4435889],"length":1,"stats":{"Line":0}},{"line":1295,"address":[4435873],"length":1,"stats":{"Line":0}},{"line":1299,"address":[4435911],"length":1,"stats":{"Line":0}},{"line":1302,"address":[4438177,4436008],"length":1,"stats":{"Line":0}},{"line":1305,"address":[4436058],"length":1,"stats":{"Line":0}},{"line":1306,"address":[4436143],"length":1,"stats":{"Line":0}},{"line":1307,"address":[4436185],"length":1,"stats":{"Line":0}},{"line":1308,"address":[4436128],"length":1,"stats":{"Line":0}},{"line":1311,"address":[4436199],"length":1,"stats":{"Line":0}},{"line":1312,"address":[4436210],"length":1,"stats":{"Line":0}},{"line":1313,"address":[4436243],"length":1,"stats":{"Line":0}},{"line":1314,"address":[4436320,4436260],"length":1,"stats":{"Line":0}},{"line":1317,"address":[4436413,4436440],"length":1,"stats":{"Line":0}},{"line":1318,"address":[4436460],"length":1,"stats":{"Line":0}},{"line":1320,"address":[4436431],"length":1,"stats":{"Line":0}},{"line":1324,"address":[4436473],"length":1,"stats":{"Line":0}},{"line":1326,"address":[4436549],"length":1,"stats":{"Line":0}},{"line":1327,"address":[4436714],"length":1,"stats":{"Line":0}},{"line":1330,"address":[4436612],"length":1,"stats":{"Line":0}},{"line":1331,"address":[4436959],"length":1,"stats":{"Line":0}},{"line":1333,"address":[4437166,4437241],"length":1,"stats":{"Line":0}},{"line":1337,"address":[4437246,4436898,4437452],"length":1,"stats":{"Line":0}},{"line":1338,"address":[4437458],"length":1,"stats":{"Line":0}},{"line":1340,"address":[4437444],"length":1,"stats":{"Line":0}},{"line":1344,"address":[4437467,4437491],"length":1,"stats":{"Line":0}},{"line":1345,"address":[4437583,4437493],"length":1,"stats":{"Line":0}},{"line":1347,"address":[4437477],"length":1,"stats":{"Line":0}},{"line":1350,"address":[4438154,4437555],"length":1,"stats":{"Line":0}},{"line":1351,"address":[4437683,4437778],"length":1,"stats":{"Line":0}},{"line":1354,"address":[4438043],"length":1,"stats":{"Line":0}},{"line":1356,"address":[4437719],"length":1,"stats":{"Line":0}},{"line":1357,"address":[4437822],"length":1,"stats":{"Line":0}},{"line":1359,"address":[4437955],"length":1,"stats":{"Line":0}},{"line":1361,"address":[4438128],"length":1,"stats":{"Line":0}},{"line":1364,"address":[4437614],"length":1,"stats":{"Line":0}},{"line":1367,"address":[4438233,4438159],"length":1,"stats":{"Line":0}},{"line":1368,"address":[4438190],"length":1,"stats":{"Line":0}},{"line":1372,"address":[4438958,4436106],"length":1,"stats":{"Line":0}},{"line":1373,"address":[4438395,4438325,4438522],"length":1,"stats":{"Line":0}},{"line":1374,"address":[4438843,4438530],"length":1,"stats":{"Line":0}},{"line":1377,"address":[4438682],"length":1,"stats":{"Line":0}},{"line":1378,"address":[4438738],"length":1,"stats":{"Line":0}},{"line":1379,"address":[4438786,4438810],"length":1,"stats":{"Line":0}},{"line":1380,"address":[4438812],"length":1,"stats":{"Line":0}},{"line":1382,"address":[4438796],"length":1,"stats":{"Line":0}},{"line":1387,"address":[4438235,4438971],"length":1,"stats":{"Line":0}},{"line":1388,"address":[4438973],"length":1,"stats":{"Line":0}},{"line":1390,"address":[4438963],"length":1,"stats":{"Line":0}},{"line":1397,"address":[4439120,4440993,4440961],"length":1,"stats":{"Line":0}},{"line":1398,"address":[4439213],"length":1,"stats":{"Line":0}},{"line":1399,"address":[4439352],"length":1,"stats":{"Line":0}},{"line":1400,"address":[4439633],"length":1,"stats":{"Line":0}},{"line":1402,"address":[4439800,4439886],"length":1,"stats":{"Line":0}},{"line":1404,"address":[4439914,4439810],"length":1,"stats":{"Line":0}},{"line":1406,"address":[4439922],"length":1,"stats":{"Line":0}},{"line":1407,"address":[4439969,4440079],"length":1,"stats":{"Line":0}},{"line":1410,"address":[4440533,4440308],"length":1,"stats":{"Line":0}},{"line":1411,"address":[4440539],"length":1,"stats":{"Line":0}},{"line":1413,"address":[4440525],"length":1,"stats":{"Line":0}},{"line":1417,"address":[4440548,4440572],"length":1,"stats":{"Line":0}},{"line":1418,"address":[4440574],"length":1,"stats":{"Line":0}},{"line":1420,"address":[4440558],"length":1,"stats":{"Line":0}},{"line":1424,"address":[4440593],"length":1,"stats":{"Line":0}},{"line":1427,"address":[4440722],"length":1,"stats":{"Line":0}},{"line":1430,"address":[4440805,4440836,4440935,4440956],"length":1,"stats":{"Line":0}},{"line":1431,"address":[4440946],"length":1,"stats":{"Line":0}},{"line":1442,"address":[4441008,4442731],"length":1,"stats":{"Line":0}},{"line":1451,"address":[4441117],"length":1,"stats":{"Line":0}},{"line":1452,"address":[4441134,4441208],"length":1,"stats":{"Line":0}},{"line":1453,"address":[4441297],"length":1,"stats":{"Line":0}},{"line":1454,"address":[4441416],"length":1,"stats":{"Line":0}},{"line":1457,"address":[4442705],"length":1,"stats":{"Line":0}},{"line":1460,"address":[4441441],"length":1,"stats":{"Line":0}},{"line":1463,"address":[4441482],"length":1,"stats":{"Line":0}},{"line":1468,"address":[4441499],"length":1,"stats":{"Line":0}},{"line":1469,"address":[4441801,4441602],"length":1,"stats":{"Line":0}},{"line":1470,"address":[4441827,4441964,4441767],"length":1,"stats":{"Line":0}},{"line":1473,"address":[4441958,4442010],"length":1,"stats":{"Line":0}},{"line":1474,"address":[4442001],"length":1,"stats":{"Line":0}},{"line":1475,"address":[4441989,4442024],"length":1,"stats":{"Line":0}},{"line":1476,"address":[4442032],"length":1,"stats":{"Line":0}},{"line":1478,"address":[4442012],"length":1,"stats":{"Line":0}},{"line":1482,"address":[4442041],"length":1,"stats":{"Line":0}},{"line":1483,"address":[4442062],"length":1,"stats":{"Line":0}},{"line":1484,"address":[4442107],"length":1,"stats":{"Line":0}},{"line":1485,"address":[4442192,4442120],"length":1,"stats":{"Line":0}},{"line":1486,"address":[4442612],"length":1,"stats":{"Line":0}},{"line":1487,"address":[4442560],"length":1,"stats":{"Line":0}},{"line":1490,"address":[4442378],"length":1,"stats":{"Line":0}},{"line":1491,"address":[4442326],"length":1,"stats":{"Line":0}},{"line":1496,"address":[4442441],"length":1,"stats":{"Line":0}},{"line":1497,"address":[5619960,5620076],"length":1,"stats":{"Line":0}},{"line":1499,"address":[5619968],"length":1,"stats":{"Line":0}},{"line":1501,"address":[5620014],"length":1,"stats":{"Line":0}},{"line":1502,"address":[5620023],"length":1,"stats":{"Line":0}},{"line":1503,"address":[5620063],"length":1,"stats":{"Line":0}},{"line":1509,"address":[4441570,4442697,4442710],"length":1,"stats":{"Line":0}},{"line":1512,"address":[4441522],"length":1,"stats":{"Line":0}},{"line":1515,"address":[4442768,4444153],"length":1,"stats":{"Line":0}},{"line":1516,"address":[4442849,4442816],"length":1,"stats":{"Line":0}},{"line":1517,"address":[4442876],"length":1,"stats":{"Line":0}},{"line":1518,"address":[4442896,4444185],"length":1,"stats":{"Line":0}},{"line":1519,"address":[4442973,4444180,4444190],"length":1,"stats":{"Line":0}},{"line":1522,"address":[4442925,4443003],"length":1,"stats":{"Line":0}},{"line":1525,"address":[4443086,4443223],"length":1,"stats":{"Line":0}},{"line":1526,"address":[4443239],"length":1,"stats":{"Line":0}},{"line":1528,"address":[4443206],"length":1,"stats":{"Line":0}},{"line":1531,"address":[4443267],"length":1,"stats":{"Line":0}},{"line":1532,"address":[4443309],"length":1,"stats":{"Line":0}},{"line":1536,"address":[4443431],"length":1,"stats":{"Line":0}},{"line":1537,"address":[4443497],"length":1,"stats":{"Line":0}},{"line":1539,"address":[4443654,4443675],"length":1,"stats":{"Line":0}},{"line":1540,"address":[4443661],"length":1,"stats":{"Line":0}},{"line":1545,"address":[4443767],"length":1,"stats":{"Line":0}},{"line":1547,"address":[4443797],"length":1,"stats":{"Line":0}},{"line":1549,"address":[4443802],"length":1,"stats":{"Line":0}},{"line":1554,"address":[4443989,4444042,4443832],"length":1,"stats":{"Line":0}},{"line":1555,"address":[4444122],"length":1,"stats":{"Line":0}},{"line":1563,"address":[4444208,4446558],"length":1,"stats":{"Line":0}},{"line":1564,"address":[4444279],"length":1,"stats":{"Line":0}},{"line":1565,"address":[4444304,4444382],"length":1,"stats":{"Line":0}},{"line":1568,"address":[4444743,4444508],"length":1,"stats":{"Line":0}},{"line":1569,"address":[4444726],"length":1,"stats":{"Line":0}},{"line":1571,"address":[4444676],"length":1,"stats":{"Line":0}},{"line":1574,"address":[4444751],"length":1,"stats":{"Line":0}},{"line":1575,"address":[4444778],"length":1,"stats":{"Line":0}},{"line":1577,"address":[4446532,4444804],"length":1,"stats":{"Line":0}},{"line":1578,"address":[4444916,4446537,4446524],"length":1,"stats":{"Line":0}},{"line":1581,"address":[4444845],"length":1,"stats":{"Line":0}},{"line":1582,"address":[4444890,4444949],"length":1,"stats":{"Line":0}},{"line":1583,"address":[4445033],"length":1,"stats":{"Line":0}},{"line":1584,"address":[4445052],"length":1,"stats":{"Line":0}},{"line":1585,"address":[4445171],"length":1,"stats":{"Line":0}},{"line":1586,"address":[4445290],"length":1,"stats":{"Line":0}},{"line":1588,"address":[4445404],"length":1,"stats":{"Line":0}},{"line":1591,"address":[4446493],"length":1,"stats":{"Line":0}},{"line":1594,"address":[4445432],"length":1,"stats":{"Line":0}},{"line":1597,"address":[4445476],"length":1,"stats":{"Line":0}},{"line":1602,"address":[4445496],"length":1,"stats":{"Line":0}},{"line":1603,"address":[4445800,4445597],"length":1,"stats":{"Line":0}},{"line":1604,"address":[4445761,4445826,4445963],"length":1,"stats":{"Line":0}},{"line":1607,"address":[4446009,4445957],"length":1,"stats":{"Line":0}},{"line":1608,"address":[4446000],"length":1,"stats":{"Line":0}},{"line":1609,"address":[4445988,4446026],"length":1,"stats":{"Line":0}},{"line":1610,"address":[4446034],"length":1,"stats":{"Line":0}},{"line":1612,"address":[4446017],"length":1,"stats":{"Line":0}},{"line":1616,"address":[4446390],"length":1,"stats":{"Line":0}},{"line":1617,"address":[4446057],"length":1,"stats":{"Line":0}},{"line":1618,"address":[4446318],"length":1,"stats":{"Line":0}},{"line":1620,"address":[4446261,4446225],"length":1,"stats":{"Line":0}},{"line":1622,"address":[4446239],"length":1,"stats":{"Line":0}},{"line":1627,"address":[4446485,4445562,4446498],"length":1,"stats":{"Line":0}},{"line":1630,"address":[4445519],"length":1,"stats":{"Line":0}},{"line":1636,"address":[4446592],"length":1,"stats":{"Line":0}},{"line":1637,"address":[4446634],"length":1,"stats":{"Line":0}},{"line":1638,"address":[4446685],"length":1,"stats":{"Line":0}},{"line":1642,"address":[4446704],"length":1,"stats":{"Line":0}},{"line":1643,"address":[4446777],"length":1,"stats":{"Line":0}},{"line":1650,"address":[4447185,4446896],"length":1,"stats":{"Line":0}},{"line":1651,"address":[4446926],"length":1,"stats":{"Line":0}},{"line":1652,"address":[4446937],"length":1,"stats":{"Line":0}},{"line":1654,"address":[4446961,4447010],"length":1,"stats":{"Line":0}},{"line":1655,"address":[4447028],"length":1,"stats":{"Line":0}},{"line":1659,"address":[4447114],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":664},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","main_page","mod.rs"],"content":"pub mod dashboard;\npub mod gantt;\npub mod anthentification;","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","menu","filtering.rs"],"content":"use crate::models::utils::utils::compare_string_with_number;\n\nuse crate::models::data_structure::{\n    application_context::ApplicationContext, cluster::Cluster, filters::JobFilters, job::JobState,\n};\nuse eframe::egui::{self, Grid};\nuse egui::ScrollArea;\nuse strum::IntoEnumIterator;\n\n/* `Filtering` manages the job filtering UI and functionality.\n * It provides a modal window where users can select various criteria\n * to filter jobs, including by owner, state, and resource (clusters/hosts).\n *\n * The component maintains temporary filter state until the user applies\n * the selected filters, at which point they are transferred to the main application.\n */\npub struct Filtering {\n    open: bool,\n    temp_filters: JobFilters,\n}\n\nimpl Default for Filtering {\n    fn default() -\u003e Self {\n        Filtering {\n            open: false,\n            temp_filters: JobFilters::default(),\n        }\n    }\n}\n\nimpl Filtering {\n    pub fn open(\u0026mut self) {\n        self.open = true;\n    }\n\n    /* Renders the filtering window and handles user interaction\n     *\n     * This window provides multiple filter categories (owners, states, clusters, hosts)\n     * that users can select to narrow down the jobs displayed in the application.\n     * Changes are only applied when the user clicks the Apply button.\n     */\n    pub fn ui(\u0026mut self, ui: \u0026mut egui::Ui, app: \u0026mut ApplicationContext) {\n        let mut open = self.open;\n        // If the window is open, render the filters\n        if self.open {\n            egui::Window::new(t!(\"app.filter.page_title\"))\n                .collapsible(true)\n                .movable(true)\n                .open(\u0026mut open)\n                .default_size([600.0, 500.0])\n                .show(ui.ctx(), |ui| {\n                    ui.heading(t!(\"app.filter.title\"));\n\n                    ui.separator(); // Add a separator\n\n                    egui::CollapsingHeader::new(t!(\"app.filter.owner\"))\n                        .default_open(false)\n                        .show(ui, |ui| {\n                            self.render_owners_selector(ui, app);\n                        });\n                    ui.add_space(10.0);\n\n                    egui::CollapsingHeader::new(t!(\"app.filter.state\"))\n                        .default_open(false)\n                        .show(ui, |ui| {\n                            self.render_states_selector(ui);\n                        });\n                    ui.add_space(10.0);\n\n                    ui.menu_button(\"Clusters\", |ui| {\n                        self.render_cluster_menu(ui, app);\n                    });\n\n                    ui.add_space(20.0);\n\n                    ui.horizontal(|ui| {\n                        if ui.button(t!(\"app.filters.apply\")).clicked() {\n                            app.filters = JobFilters::copy(\u0026self.temp_filters); // add the temporary filters to the app filters\n                            app.filter_jobs(); // Filter the jobs\n                            self.open = false; // Close the window\n                        }\n                        if ui.button(t!(\"app.filters.reset\")).clicked() {\n                            self.reset_filters(); // Reset the filters\n                            app.filters = JobFilters::default();\n                        }\n                    });\n                });\n        }\n        self.open = open;\n    }\n\n    pub fn reset_filters(\u0026mut self) {\n        self.temp_filters = JobFilters::default();\n    }\n\n    /* Renders the job owner selection grid\n     *\n     * This selector displays a grid of checkboxes for all unique job owners,\n     * allowing the user to filter jobs by one or more owners.\n     */\n    fn render_owners_selector(\u0026mut self, ui: \u0026mut egui::Ui, app: \u0026mut ApplicationContext) {\n        let unique_owners = app.get_unique_owners();\n        let mut selected_owners = self.temp_filters.owners.clone().unwrap_or_default();\n\n        Grid::new(\"owners_grid\")\n            .num_columns(2)\n            .spacing([10.0, 5.0])\n            .show(ui, |ui| {\n                for (i, owner) in unique_owners.iter().enumerate() {\n                    let mut is_selected = selected_owners.contains(owner);\n                    if ui.checkbox(\u0026mut is_selected, owner).changed() {\n                        if is_selected {\n                            selected_owners.push(owner.clone());\n                        } else {\n                            selected_owners.retain(|o| o != owner);\n                        }\n                        self.temp_filters.set_owners(if selected_owners.is_empty() {\n                            None\n                        } else {\n                            Some(selected_owners.clone())\n                        });\n                    }\n                    if i % 2 == 1 {\n                        ui.end_row();\n                    }\n                }\n            });\n    }\n\n    /*\n     * Render the states selector\n     * This selector is used to select the states of the jobs on which the jobs will be filtered\n     */\n    fn render_states_selector(\u0026mut self, ui: \u0026mut egui::Ui) {\n        let mut selected_states = self.temp_filters.states.clone().unwrap_or_default();\n\n        Grid::new(\"states_grid\")\n            .num_columns(2)\n            .spacing([10.0, 5.0])\n            .show(ui, |ui| {\n                for (i, state) in JobState::iter().enumerate() {\n                    let mut is_selected = selected_states.contains(\u0026state);\n                    if ui.checkbox(\u0026mut is_selected, state.get_label()).changed() {\n                        if is_selected {\n                            selected_states.push(state);\n                        } else {\n                            selected_states.retain(|s| s != \u0026state);\n                        }\n                        self.temp_filters.set_states(if selected_states.is_empty() {\n                            None\n                        } else {\n                            Some(selected_states.clone())\n                        });\n                    }\n                    if i % 2 == 1 {\n                        ui.end_row();\n                    }\n                }\n            });\n    }\n\n    /*\n     * Render the cluster menu\n     * This menu is used to select the clusters on which the jobs will be filtered\n     */\n    fn render_cluster_menu(\u0026mut self, ui: \u0026mut egui::Ui, app: \u0026mut ApplicationContext) {\n        ui.set_max_width(124.0);\n\n        for cluster in \u0026app.all_clusters {\n            ui.horizontal(|ui| {\n                let mut is_selected = self\n                    .temp_filters\n                    .clusters\n                    .as_ref()\n                    .map_or(false, |clusters| {\n                        clusters.iter().any(|c| c.name == cluster.name)\n                    });\n\n                if ui.checkbox(\u0026mut is_selected, \"\").changed() {\n                    if is_selected {\n                        if let Some(clusters) = \u0026mut self.temp_filters.clusters {\n                            clusters.push(cluster.clone());\n                        } else {\n                            self.temp_filters.clusters = Some(vec![cluster.clone()]);\n                        }\n                    } else {\n                        if let Some(clusters) = \u0026mut self.temp_filters.clusters {\n                            clusters.retain(|c| c.name != cluster.name);\n                        }\n                    }\n                }\n\n                ui.label(\u0026cluster.name);\n\n                ui.with_layout(egui::Layout::right_to_left(egui::Align::Center), |ui| {\n                    ui.menu_button(\" \", |ui| {\n                        self.render_host_menu(ui, cluster);\n                    });\n                });\n            });\n        }\n    }\n\n    /*\n     * Render the host menu\n     * This menu is used to select the hosts of a cluster on which the jobs will be filtered\n     */\n    fn render_host_menu(\u0026mut self, ui: \u0026mut egui::Ui, cluster: \u0026Cluster) {\n        ui.set_max_width(300.0);\n\n        let mut hosts = cluster.hosts.clone();\n        hosts.sort_by(|a, b| compare_string_with_number(\u0026a.name, \u0026b.name));\n\n        let mut selected_cluster = self\n            .temp_filters\n            .clusters\n            .as_mut()\n            .and_then(|clusters| clusters.iter_mut().find(|c| c.name == cluster.name));\n\n        if let Some(cluster) = selected_cluster.as_mut() {\n            if ui.button(\"Deselect All\").clicked() {\n                cluster.hosts.clear();\n            }\n        }\n\n        ScrollArea::vertical()\n            .min_scrolled_height(50.0)\n            .max_height(250.0)\n            .show(ui, |ui| {\n                for host in hosts {\n                    let mut is_selected = selected_cluster\n                        .as_ref()\n                        .map_or(false, |c| c.hosts.iter().any(|h| h.name == host.name));\n\n                    if ui.checkbox(\u0026mut is_selected, \u0026host.name).changed() {\n                        if let Some(cluster) = selected_cluster.as_mut() {\n                            if is_selected {\n                                cluster.hosts.push(host.clone());\n                            } else {\n                                cluster.hosts.retain(|h| h.name != host.name);\n                            }\n                        }\n                    }\n                }\n            });\n    }\n}\n","traces":[{"line":23,"address":[5030720],"length":1,"stats":{"Line":0}},{"line":26,"address":[5030733],"length":1,"stats":{"Line":0}},{"line":32,"address":[5030784],"length":1,"stats":{"Line":0}},{"line":33,"address":[5030789],"length":1,"stats":{"Line":0}},{"line":42,"address":[5030800,5031780,5031735],"length":1,"stats":{"Line":0}},{"line":43,"address":[5030846],"length":1,"stats":{"Line":0}},{"line":45,"address":[5030871,5031689],"length":1,"stats":{"Line":0}},{"line":46,"address":[5031574,5031067,5030900,5031288,5031448],"length":1,"stats":{"Line":0}},{"line":50,"address":[5031500,5031426],"length":1,"stats":{"Line":0}},{"line":51,"address":[5031508],"length":1,"stats":{"Line":0}},{"line":52,"address":[4731506,4730814,4732913],"length":1,"stats":{"Line":0}},{"line":54,"address":[4731390],"length":1,"stats":{"Line":0}},{"line":56,"address":[4731409,4731598,4731929,4731819],"length":1,"stats":{"Line":0}},{"line":58,"address":[4731903,4732960],"length":1,"stats":{"Line":0}},{"line":59,"address":[4732992],"length":1,"stats":{"Line":0}},{"line":61,"address":[4732042],"length":1,"stats":{"Line":0}},{"line":63,"address":[4732455,4732234,4732560,4732047],"length":1,"stats":{"Line":0}},{"line":65,"address":[4733024,4732539],"length":1,"stats":{"Line":0}},{"line":66,"address":[4733038],"length":1,"stats":{"Line":0}},{"line":68,"address":[4732662],"length":1,"stats":{"Line":0}},{"line":70,"address":[4733056,4732680],"length":1,"stats":{"Line":0}},{"line":71,"address":[4733088],"length":1,"stats":{"Line":0}},{"line":74,"address":[4732734],"length":1,"stats":{"Line":0}},{"line":76,"address":[4732752,4733120,4735025],"length":1,"stats":{"Line":0}},{"line":77,"address":[4733975,4735083,4733150,4734075,4733701,4734186],"length":1,"stats":{"Line":0}},{"line":78,"address":[4734094,4734045],"length":1,"stats":{"Line":0}},{"line":79,"address":[4734167],"length":1,"stats":{"Line":0}},{"line":80,"address":[4734177],"length":1,"stats":{"Line":0}},{"line":82,"address":[4735047,4735020,4734191,4734826,4734638,4733875,4734931],"length":1,"stats":{"Line":0}},{"line":83,"address":[4734896],"length":1,"stats":{"Line":0}},{"line":84,"address":[4734914,4734950],"length":1,"stats":{"Line":0}},{"line":89,"address":[5030882],"length":1,"stats":{"Line":0}},{"line":92,"address":[5031911,5031808],"length":1,"stats":{"Line":0}},{"line":93,"address":[5031944,5031829],"length":1,"stats":{"Line":0}},{"line":101,"address":[5032404,5031968],"length":1,"stats":{"Line":0}},{"line":102,"address":[5032027],"length":1,"stats":{"Line":0}},{"line":103,"address":[5032037,5032104],"length":1,"stats":{"Line":0}},{"line":105,"address":[5032201,5032346,5032111,5032230],"length":1,"stats":{"Line":0}},{"line":107,"address":[5032208],"length":1,"stats":{"Line":0}},{"line":108,"address":[4735120],"length":1,"stats":{"Line":0}},{"line":109,"address":[4735295,4735145],"length":1,"stats":{"Line":0}},{"line":110,"address":[4735332],"length":1,"stats":{"Line":0}},{"line":111,"address":[4735435,4735375],"length":1,"stats":{"Line":0}},{"line":112,"address":[4735471],"length":1,"stats":{"Line":0}},{"line":113,"address":[4735536],"length":1,"stats":{"Line":0}},{"line":115,"address":[4735774,4735512,4735760],"length":1,"stats":{"Line":0}},{"line":117,"address":[4735699,4735724,4735598],"length":1,"stats":{"Line":0}},{"line":118,"address":[4735701],"length":1,"stats":{"Line":0}},{"line":120,"address":[4735626],"length":1,"stats":{"Line":0}},{"line":123,"address":[4735488],"length":1,"stats":{"Line":0}},{"line":124,"address":[4735747],"length":1,"stats":{"Line":0}},{"line":134,"address":[5032432,5032741],"length":1,"stats":{"Line":0}},{"line":135,"address":[5032470],"length":1,"stats":{"Line":0}},{"line":137,"address":[5032593,5032504,5032622],"length":1,"stats":{"Line":0}},{"line":139,"address":[5032600],"length":1,"stats":{"Line":0}},{"line":140,"address":[4735808],"length":1,"stats":{"Line":0}},{"line":141,"address":[4735838,4735956],"length":1,"stats":{"Line":0}},{"line":142,"address":[4735988],"length":1,"stats":{"Line":0}},{"line":143,"address":[4736112,4736026],"length":1,"stats":{"Line":0}},{"line":144,"address":[4736148],"length":1,"stats":{"Line":0}},{"line":145,"address":[4736204],"length":1,"stats":{"Line":0}},{"line":147,"address":[4736184,4736397,4736384],"length":1,"stats":{"Line":0}},{"line":149,"address":[4736349,4736325,4736229],"length":1,"stats":{"Line":0}},{"line":150,"address":[4736327],"length":1,"stats":{"Line":0}},{"line":152,"address":[4736252],"length":1,"stats":{"Line":0}},{"line":155,"address":[4736165],"length":1,"stats":{"Line":0}},{"line":156,"address":[4736372],"length":1,"stats":{"Line":0}},{"line":166,"address":[5032768],"length":1,"stats":{"Line":0}},{"line":167,"address":[5032827],"length":1,"stats":{"Line":0}},{"line":169,"address":[5032846,5032927],"length":1,"stats":{"Line":0}},{"line":170,"address":[5032940],"length":1,"stats":{"Line":0}},{"line":171,"address":[4736462,4736484],"length":1,"stats":{"Line":0}},{"line":175,"address":[4737504,4736479],"length":1,"stats":{"Line":0}},{"line":176,"address":[4737529,4737609,4737584],"length":1,"stats":{"Line":0}},{"line":179,"address":[4736502,4736556],"length":1,"stats":{"Line":0}},{"line":180,"address":[4736586],"length":1,"stats":{"Line":0}},{"line":181,"address":[4737471,4736955,4737038],"length":1,"stats":{"Line":0}},{"line":182,"address":[4737046],"length":1,"stats":{"Line":0}},{"line":184,"address":[4737498,4737104],"length":1,"stats":{"Line":0}},{"line":187,"address":[4736902,4737010],"length":1,"stats":{"Line":0}},{"line":188,"address":[4737632,4737018,4737657],"length":1,"stats":{"Line":0}},{"line":193,"address":[4736607],"length":1,"stats":{"Line":0}},{"line":195,"address":[4736761,4736649,4737680],"length":1,"stats":{"Line":0}},{"line":196,"address":[4737776,4737718],"length":1,"stats":{"Line":0}},{"line":197,"address":[4737808],"length":1,"stats":{"Line":0}},{"line":208,"address":[5033761,5032976,5033588],"length":1,"stats":{"Line":0}},{"line":209,"address":[5033035],"length":1,"stats":{"Line":0}},{"line":211,"address":[5033065],"length":1,"stats":{"Line":0}},{"line":212,"address":[4737877,4737840],"length":1,"stats":{"Line":0}},{"line":214,"address":[5033184],"length":1,"stats":{"Line":0}},{"line":218,"address":[4738016,4737961,4737936,4738033],"length":1,"stats":{"Line":0}},{"line":220,"address":[5033243],"length":1,"stats":{"Line":0}},{"line":221,"address":[5033469,5033323],"length":1,"stats":{"Line":0}},{"line":222,"address":[5033569],"length":1,"stats":{"Line":0}},{"line":226,"address":[5033362,5033738,5033621],"length":1,"stats":{"Line":0}},{"line":229,"address":[4738828,4738064],"length":1,"stats":{"Line":0}},{"line":230,"address":[4738236,4738089,4738294],"length":1,"stats":{"Line":0}},{"line":231,"address":[4738406,4738477],"length":1,"stats":{"Line":0}},{"line":233,"address":[4738878,4738969,4738944,4738864],"length":1,"stats":{"Line":0}},{"line":235,"address":[4738530,4738568],"length":1,"stats":{"Line":0}},{"line":236,"address":[4738635],"length":1,"stats":{"Line":0}},{"line":237,"address":[4738714],"length":1,"stats":{"Line":0}},{"line":238,"address":[4738801,4738756],"length":1,"stats":{"Line":0}},{"line":240,"address":[4738992,4738791,4738729,4739017],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":104},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","menu","menu.rs"],"content":"use crate::{\n    models::data_structure::{\n        application_context::ApplicationContext, application_options::ApplicationOptions,\n    },\n    views::view::View,\n};\nuse eframe::egui;\n\nuse super::options::Options;\n\npub struct Menu {\n    options_pane: Options,\n}\n\nimpl Default for Menu {\n    fn default() -\u003e Self {\n        let application_options = ApplicationOptions::default();\n\n        // Load saved options from file if it exists\n        let options_pane = if std::path::Path::new(\"options.json\").exists() {\n            Options::load_from_file(\"options.json\")\n        } else {\n            Options::new(application_options.clone())\n        };\n\n        Menu { options_pane }\n    }\n}\n\nimpl View for Menu {\n    fn render(\u0026mut self, ui: \u0026mut egui::Ui, app: \u0026mut ApplicationContext) {\n        self.options_pane\n            .apply_options(ui.ctx(), \u0026mut app.font_size);\n\n        ui.horizontal(|ui| {\n            // Menu File\n            ui.menu_button(t!(\"app.menu.file\"), |ui| {\n                ui.set_max_width(200.0);\n                ui.vertical(|ui| {\n                    if app.user_connected.is_some() {\n                        ui.label(t!(\n                            \"app.menu.connected_as\",\n                            user = app.user_connected.as_ref().unwrap()\n                        ));\n                        ui.separator();\n                        if ui.button(t!(\"app.menu.logout\")).clicked() {\n                            app.logout();\n                        }\n                    } else {\n                        if ui.button(t!(\"app.menu.login\")).clicked() {\n                            app.view_type = crate::views::view::ViewType::Authentification;\n                        }\n                    }\n\n                    if ui.button(t!(\"app.menu.quit\")).clicked() {\n                        std::process::exit(0);\n                    }\n                });\n            });\n\n            // Menu Options\n            if ui.button(t!(\"app.menu.options\")).clicked() {\n                self.options_pane.open();\n            }\n\n            // Show External Window\n            self.options_pane.ui(ui, \u0026mut app.font_size);\n        });\n    }\n}\n","traces":[{"line":16,"address":[5719696],"length":1,"stats":{"Line":0}},{"line":17,"address":[5719712],"length":1,"stats":{"Line":0}},{"line":20,"address":[5719738],"length":1,"stats":{"Line":0}},{"line":21,"address":[5719835],"length":1,"stats":{"Line":0}},{"line":23,"address":[5719771],"length":1,"stats":{"Line":0}},{"line":31,"address":[5719920],"length":1,"stats":{"Line":0}},{"line":32,"address":[5720004],"length":1,"stats":{"Line":0}},{"line":33,"address":[5719979],"length":1,"stats":{"Line":0}},{"line":35,"address":[5599092,5597632,5599137],"length":1,"stats":{"Line":0}},{"line":37,"address":[5599200,5598066,5597662,5597845],"length":1,"stats":{"Line":0}},{"line":38,"address":[5599236],"length":1,"stats":{"Line":0}},{"line":39,"address":[5599296,5600754,5600799,5599255],"length":1,"stats":{"Line":0}},{"line":40,"address":[5599327],"length":1,"stats":{"Line":0}},{"line":41,"address":[5599717,5599820,5600812,5599525,5601699,5603547],"length":1,"stats":{"Line":0}},{"line":42,"address":[5599498],"length":1,"stats":{"Line":0}},{"line":43,"address":[5599638,5599556],"length":1,"stats":{"Line":0}},{"line":45,"address":[5601820],"length":1,"stats":{"Line":0}},{"line":46,"address":[5601839,5602452,5603511,5602720,5602002],"length":1,"stats":{"Line":0}},{"line":47,"address":[5602702],"length":1,"stats":{"Line":0}},{"line":50,"address":[5600351,5600730,5599895,5599392,5600634,5600763],"length":1,"stats":{"Line":0}},{"line":51,"address":[5600701],"length":1,"stats":{"Line":0}},{"line":55,"address":[5600534,5602739,5603356,5603189,5603456],"length":1,"stats":{"Line":0}},{"line":56,"address":[5603445],"length":1,"stats":{"Line":0}},{"line":62,"address":[5599101,5598332,5598994,5599073,5598779,5598213],"length":1,"stats":{"Line":0}},{"line":63,"address":[5599061],"length":1,"stats":{"Line":0}},{"line":67,"address":[5598964],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":26},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","menu","mod.rs"],"content":"// Modules : menu\n\npub mod filtering;\npub mod menu;\npub mod options;\npub mod tools;","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","menu","options.rs"],"content":"use crate::models::data_structure::application_options::{\n    ApplicationOptions, LanguageOption, ThemeOption,\n};\nuse eframe::egui::{self};\nuse std::time::{Duration, Instant};\n\nuse eframe::egui::Grid;\n\npub struct Options {\n    open: bool,\n    application_options: ApplicationOptions,\n    save_status: Option\u003c(String, Instant)\u003e,\n}\n\nimpl Options {\n    pub fn open(\u0026mut self) {\n        self.open = true;\n    }\n\n    pub fn new(application_options: ApplicationOptions) -\u003e Self {\n        Options {\n            application_options,\n            save_status: None,\n            open: false,\n        }\n    }\n\n    // Save the current options to a file for persistence\n    pub fn save_to_file(\u0026mut self, file_path: \u0026str) {\n        match serde_json::to_string(\u0026self.application_options)\n            .and_then(|json| std::fs::write(file_path, json).map_err(serde_json::Error::io))\n        {\n            Ok(_) =\u003e {\n                self.save_status =\n                    Some((t!(\"app.options.save.success\").to_string(), Instant::now()));\n            }\n            Err(_) =\u003e {\n                self.save_status = Some((t!(\"app.options.save.error\").to_string(), Instant::now()));\n            }\n        }\n    }\n\n    // Load the options from a file, or fallback to default if file read fails\n    pub fn load_from_file(file_path: \u0026str) -\u003e Self {\n        let application_options = match std::fs::read_to_string(file_path) {\n            Ok(json) =\u003e {\n                serde_json::from_str(\u0026json).unwrap_or_else(|_| ApplicationOptions::default())\n            }\n            Err(_) =\u003e ApplicationOptions::default(), // Fallback to default if file read fails\n        };\n\n        Options {\n            application_options,\n            open: false,\n            save_status: None, // No status message on initial load\n        }\n    }\n\n    pub fn apply_options(\u0026self, ctx: \u0026egui::Context, app_font_size: \u0026mut i32) {\n        self.apply_theme(ctx);\n        self.apply_language();\n        self.apply_font_size(ctx, app_font_size);\n    }\n\n    fn apply_theme(\u0026self, ctx: \u0026egui::Context) {\n        let new_visuals = match self.application_options.selected_theme {\n            ThemeOption::Dark =\u003e egui::Visuals::dark(),\n            ThemeOption::Light =\u003e egui::Visuals::light(),\n        };\n\n        if ctx.style().visuals.dark_mode != new_visuals.dark_mode {\n            ctx.set_visuals(new_visuals);\n        }\n    }\n\n    fn apply_language(\u0026self) {\n        rust_i18n::set_locale(match self.application_options.selected_language {\n            LanguageOption::English =\u003e \"en\",\n            LanguageOption::Français =\u003e \"fr\",\n        });\n    }\n\n    fn apply_font_size(\u0026self, ctx: \u0026egui::Context, app_font_size: \u0026mut i32) {\n        let mut style = (*ctx.style()).clone();\n        let font_size = self.application_options.font_size;\n\n        for text_style in [\n            egui::TextStyle::Body,\n            egui::TextStyle::Button,\n            egui::TextStyle::Heading,\n            egui::TextStyle::Monospace,\n            egui::TextStyle::Small,\n        ] {\n            style.text_styles.insert(\n                text_style,\n                egui::FontId::new(font_size as f32, egui::FontFamily::Proportional),\n            );\n        }\n\n        ctx.set_style(style);\n        *app_font_size = font_size;\n    }\n}\n\nimpl Options {\n    pub fn ui(\u0026mut self, ui: \u0026mut egui::Ui, app_font_size: \u0026mut i32) {\n        let mut open = self.open; // Local copy to avoid borrowing issues\n\n        egui::Window::new(t!(\"app.options.title\"))\n            .collapsible(true)\n            .movable(true)\n            .open(\u0026mut open)\n            .default_size([400.0, 500.0])\n            .show(ui.ctx(), |ui| {\n                Grid::new(\"options_grid\")\n                    .num_columns(2)\n                    .spacing([10.0, 8.0])\n                    .striped(true)\n                    .show(ui, |ui| {\n                        self.render_theme_selector(ui);\n                        self.render_language_selector(ui);\n                        self.render_font_size_selector(ui, app_font_size);\n                    });\n\n                ui.add_space(10.0);\n\n                if ui.button(t!(\"app.options.save.title\")).clicked() {\n                    self.save_to_file(\"options.json\");\n                }\n\n                // Show the save status message for a few seconds\n                if let Some((message, timestamp)) = \u0026self.save_status {\n                    if timestamp.elapsed() \u003c Duration::new(3, 0) {\n                        ui.label(message);\n                    } else {\n                        self.save_status = None; // Clear the message after timeout\n                    }\n                }\n            });\n        self.open = open;\n    }\n\n    fn render_language_selector(\u0026mut self, ui: \u0026mut egui::Ui) {\n        ui.label(t!(\"app.options.language.title\"));\n        egui::ComboBox::from_label(t!(\"app.options.language.choose\"))\n            .selected_text(format!(\"{:?}\", self.application_options.selected_language))\n            .show_ui(ui, |ui| {\n                for (lang, label) in [\n                    (LanguageOption::English, t!(\"app.options.language.en\")),\n                    (LanguageOption::Français, t!(\"app.options.language.fr\")),\n                ] {\n                    if ui\n                        .selectable_value(\n                            \u0026mut self.application_options.selected_language,\n                            lang,\n                            label,\n                        )\n                        .clicked()\n                    {\n                        self.apply_language();\n                    }\n                }\n            });\n        ui.end_row();\n    }\n\n    fn render_font_size_selector(\u0026mut self, ui: \u0026mut egui::Ui, app_font_size: \u0026mut i32) {\n        ui.label(t!(\"app.options.font_size.title\"));\n        egui::ComboBox::from_label(t!(\"app.options.font_size.choose\"))\n            .selected_text(format!(\"{}\", self.application_options.font_size))\n            .show_ui(ui, |ui| {\n                for size in 10..=30 {\n                    if ui\n                        .selectable_value(\n                            \u0026mut self.application_options.font_size,\n                            size,\n                            size.to_string(),\n                        )\n                        .clicked()\n                    {\n                        self.apply_font_size(ui.ctx(), app_font_size);\n                    }\n                }\n            });\n        ui.end_row();\n    }\n\n    fn render_theme_selector(\u0026mut self, ui: \u0026mut egui::Ui) {\n        ui.label(t!(\"app.options.theme.title\"));\n        egui::ComboBox::from_label(t!(\"app.options.theme.choose\"))\n            .selected_text(format!(\"{:?}\", self.application_options.selected_theme))\n            .show_ui(ui, |ui| {\n                for (theme, label) in [\n                    (ThemeOption::Dark, t!(\"app.options.theme.dark\")),\n                    (ThemeOption::Light, t!(\"app.options.theme.light\")),\n                ] {\n                    if ui\n                        .selectable_value(\n                            \u0026mut self.application_options.selected_theme,\n                            theme,\n                            label,\n                        )\n                        .clicked()\n                    {\n                        self.apply_theme(ui.ctx());\n                    }\n                }\n            });\n        ui.end_row();\n    }\n}\n","traces":[{"line":16,"address":[4755744],"length":1,"stats":{"Line":0}},{"line":17,"address":[4755749],"length":1,"stats":{"Line":0}},{"line":20,"address":[4755760],"length":1,"stats":{"Line":0}},{"line":29,"address":[4757881,4755840,4756974],"length":1,"stats":{"Line":0}},{"line":30,"address":[4755876],"length":1,"stats":{"Line":0}},{"line":31,"address":[4710064,4710072],"length":1,"stats":{"Line":0}},{"line":34,"address":[4756746],"length":1,"stats":{"Line":0}},{"line":35,"address":[4756843,4755964,4756983,4756145],"length":1,"stats":{"Line":0}},{"line":37,"address":[4757840],"length":1,"stats":{"Line":0}},{"line":38,"address":[4756028,4757029,4757845],"length":1,"stats":{"Line":0}},{"line":44,"address":[4757904,4758258,4758385],"length":1,"stats":{"Line":0}},{"line":45,"address":[4757937],"length":1,"stats":{"Line":0}},{"line":46,"address":[4757980],"length":1,"stats":{"Line":0}},{"line":47,"address":[4710121,4710112],"length":1,"stats":{"Line":0}},{"line":49,"address":[4758272,4758022],"length":1,"stats":{"Line":0}},{"line":59,"address":[4758416],"length":1,"stats":{"Line":0}},{"line":60,"address":[4758450],"length":1,"stats":{"Line":0}},{"line":61,"address":[4758460],"length":1,"stats":{"Line":0}},{"line":62,"address":[4758480],"length":1,"stats":{"Line":0}},{"line":65,"address":[4758759,4758496],"length":1,"stats":{"Line":0}},{"line":66,"address":[4758524],"length":1,"stats":{"Line":0}},{"line":67,"address":[4758551],"length":1,"stats":{"Line":0}},{"line":68,"address":[4758538],"length":1,"stats":{"Line":0}},{"line":71,"address":[4758567],"length":1,"stats":{"Line":0}},{"line":72,"address":[4758709],"length":1,"stats":{"Line":0}},{"line":76,"address":[4758784],"length":1,"stats":{"Line":0}},{"line":77,"address":[4758793,4758849],"length":1,"stats":{"Line":0}},{"line":78,"address":[4758807],"length":1,"stats":{"Line":0}},{"line":79,"address":[4758829],"length":1,"stats":{"Line":0}},{"line":83,"address":[4759865,4758880],"length":1,"stats":{"Line":0}},{"line":84,"address":[4758939],"length":1,"stats":{"Line":0}},{"line":85,"address":[4759130],"length":1,"stats":{"Line":0}},{"line":87,"address":[4759204,4759524,4759476],"length":1,"stats":{"Line":0}},{"line":88,"address":[4759144],"length":1,"stats":{"Line":0}},{"line":89,"address":[4759156],"length":1,"stats":{"Line":0}},{"line":90,"address":[4759168],"length":1,"stats":{"Line":0}},{"line":91,"address":[4759180],"length":1,"stats":{"Line":0}},{"line":92,"address":[4759192],"length":1,"stats":{"Line":0}},{"line":94,"address":[4759556,4759774],"length":1,"stats":{"Line":0}},{"line":95,"address":[4759569],"length":1,"stats":{"Line":0}},{"line":96,"address":[4759609],"length":1,"stats":{"Line":0}},{"line":100,"address":[4759648],"length":1,"stats":{"Line":0}},{"line":101,"address":[4759714],"length":1,"stats":{"Line":0}},{"line":106,"address":[4760873,4759904,4760828],"length":1,"stats":{"Line":0}},{"line":107,"address":[4759950],"length":1,"stats":{"Line":0}},{"line":109,"address":[4760523,4759975,4760142,4760363,4760649],"length":1,"stats":{"Line":0}},{"line":113,"address":[4760501,4760575],"length":1,"stats":{"Line":0}},{"line":114,"address":[4710224,4711631],"length":1,"stats":{"Line":0}},{"line":115,"address":[4710254,4710351,4710459],"length":1,"stats":{"Line":0}},{"line":117,"address":[4710329],"length":1,"stats":{"Line":0}},{"line":119,"address":[4711696,4710439],"length":1,"stats":{"Line":0}},{"line":120,"address":[4711731],"length":1,"stats":{"Line":0}},{"line":121,"address":[4711746],"length":1,"stats":{"Line":0}},{"line":122,"address":[4711761],"length":1,"stats":{"Line":0}},{"line":125,"address":[4710491],"length":1,"stats":{"Line":0}},{"line":127,"address":[4711361,4711267,4711653,4711040,4710496],"length":1,"stats":{"Line":0}},{"line":128,"address":[4711334],"length":1,"stats":{"Line":0}},{"line":132,"address":[4711223,4711384],"length":1,"stats":{"Line":0}},{"line":133,"address":[4711626,4711404],"length":1,"stats":{"Line":0}},{"line":134,"address":[4711527],"length":1,"stats":{"Line":0}},{"line":136,"address":[4711498,4711556],"length":1,"stats":{"Line":0}},{"line":140,"address":[4760769],"length":1,"stats":{"Line":0}},{"line":143,"address":[4762491,4760896,4762446],"length":1,"stats":{"Line":0}},{"line":144,"address":[4760929,4762504,4761579],"length":1,"stats":{"Line":0}},{"line":145,"address":[4762293,4762216,4761670,4761483,4761891],"length":1,"stats":{"Line":0}},{"line":146,"address":[4762424,4761958,4762269,4762054],"length":1,"stats":{"Line":0}},{"line":147,"address":[4713642,4713723,4711792],"length":1,"stats":{"Line":0}},{"line":148,"address":[4712977,4713060,4712795,4711817,4713123],"length":1,"stats":{"Line":0}},{"line":149,"address":[4712354,4712008,4712232,4711833],"length":1,"stats":{"Line":0}},{"line":150,"address":[4712745,4712282,4712547,4712879,4712436],"length":1,"stats":{"Line":0}},{"line":152,"address":[4713578,4713175,4713115],"length":1,"stats":{"Line":0}},{"line":154,"address":[4713166],"length":1,"stats":{"Line":0}},{"line":158,"address":[4713584,4713530],"length":1,"stats":{"Line":0}},{"line":160,"address":[4713625],"length":1,"stats":{"Line":0}},{"line":164,"address":[4762391],"length":1,"stats":{"Line":0}},{"line":167,"address":[4764110,4764155,4762544],"length":1,"stats":{"Line":0}},{"line":168,"address":[4762590,4763241,4764168],"length":1,"stats":{"Line":0}},{"line":169,"address":[4763144,4763875,4763554,4763957,4763333],"length":1,"stats":{"Line":0}},{"line":170,"address":[4763713,4764088,4763933,4763621],"length":1,"stats":{"Line":0}},{"line":171,"address":[4714145,4713744],"length":1,"stats":{"Line":0}},{"line":172,"address":[4713774,4713866],"length":1,"stats":{"Line":0}},{"line":173,"address":[4714071,4713916],"length":1,"stats":{"Line":0}},{"line":175,"address":[4713874],"length":1,"stats":{"Line":0}},{"line":177,"address":[4713888],"length":1,"stats":{"Line":0}},{"line":179,"address":[4714029,4714077],"length":1,"stats":{"Line":0}},{"line":181,"address":[4714109],"length":1,"stats":{"Line":0}},{"line":185,"address":[4764055],"length":1,"stats":{"Line":0}},{"line":188,"address":[4765803,4765758,4764208],"length":1,"stats":{"Line":0}},{"line":189,"address":[4764241,4764891,4765816],"length":1,"stats":{"Line":0}},{"line":190,"address":[4764982,4765203,4764795,4765605,4765528],"length":1,"stats":{"Line":0}},{"line":191,"address":[4765736,4765581,4765270,4765366],"length":1,"stats":{"Line":0}},{"line":192,"address":[4716139,4714176,4716058],"length":1,"stats":{"Line":0}},{"line":193,"address":[4714201,4715179,4715361,4715444,4715507],"length":1,"stats":{"Line":0}},{"line":194,"address":[4714392,4714616,4714217,4714738],"length":1,"stats":{"Line":0}},{"line":195,"address":[4714666,4714820,4715129,4714931,4715263],"length":1,"stats":{"Line":0}},{"line":197,"address":[4715499,4715962,4715559],"length":1,"stats":{"Line":0}},{"line":199,"address":[4715550],"length":1,"stats":{"Line":0}},{"line":203,"address":[4715914,4715968],"length":1,"stats":{"Line":0}},{"line":205,"address":[4716014],"length":1,"stats":{"Line":0}},{"line":209,"address":[4765703],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":100},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","menu","tools.rs"],"content":"use crate::models::data_structure::job::Job;\nuse crate::models::data_structure::job::JobState;\nuse crate::models::data_structure::resource::ResourceState;\nuse crate::models::utils::utils::get_all_clusters;\nuse crate::models::utils::utils::get_all_hosts;\nuse crate::models::utils::utils::get_all_resources;\nuse crate::views::menu::tools::egui::Color32;\nuse crate::{\n    models::data_structure::application_context::ApplicationContext,\n    views::view::{View, ViewType},\n};\nuse eframe::egui;\n\nuse super::filtering::Filtering;\n\npub struct Tools {\n    filtering_pane: Filtering,\n}\n\nimpl Default for Tools {\n    fn default() -\u003e Self {\n        Tools {\n            filtering_pane: Filtering::default(),\n        }\n    }\n}\n\n/*\n * The Tools struct is a view that contains the common buttons between the Dashboard and Gantt views.\n */\nimpl View for Tools {\n    fn render(\u0026mut self, ui: \u0026mut egui::Ui, app: \u0026mut ApplicationContext) {\n        ui.horizontal(|ui| {\n            ui.set_height(25.0);\n\n            ui.label(t!(\"app.mode\"));\n\n            // Dashboard Button\n            let is_dashboard_selected = matches!(app.view_type, ViewType::Dashboard);\n\n            let dashboard_btn = egui::Button::new(\"📊 Dashboard\").frame(is_dashboard_selected);\n            if ui.add(dashboard_btn).clicked() {\n                app.view_type = ViewType::Dashboard;\n                ui.close_menu();\n                if app.all_jobs.iter().any(|job| job.id == 0) {\n                    app.see_all_jobs = true;\n                }\n\n                app.all_jobs.retain(|job| job.id != 0);\n            }\n\n            // Gantt Button\n            let gantt_btn = egui::Button::new(\"📅 Gantt\").frame(!is_dashboard_selected);\n            if ui.add(gantt_btn).clicked() {\n                app.view_type = ViewType::Gantt;\n                ui.close_menu();\n\n                if app.see_all_jobs {\n                    app.see_all_jobs = false;\n                    app.all_jobs.push(Job {\n                        id: 0,\n                        owner: \"all_resources\".to_string(),\n                        state: JobState::Unknown,\n                        scheduled_start: 0,\n                        walltime: 0,\n                        hosts: get_all_hosts(\u0026app.all_clusters),\n                        clusters: get_all_clusters(\u0026app.all_clusters),\n                        command: String::new(),\n                        message: None,\n                        queue: String::new(),\n                        assigned_resources: get_all_resources(\u0026app.all_clusters),\n                        submission_time: 0,\n                        start_time: 0,\n                        stop_time: 0,\n                        exit_code: None,\n                        gantt_color: Color32::TRANSPARENT,\n                        main_resource_state: ResourceState::Unknown,\n                    });\n                }\n            }\n\n            // On the right side\n            ui.with_layout(egui::Layout::right_to_left(egui::Align::Center), |ui| {\n                let refresh_btn = egui::Button::new(\"⟳\");\n                let refresh_btn_response = if *app.is_refreshing.lock().unwrap() {\n                    ui.add_enabled(false, refresh_btn)\n                } else {\n                    ui.add(refresh_btn)\n                };\n                if refresh_btn_response.clicked() {\n                    app.instant_update();\n                }\n\n                // Menu Refresh Rate\n                ui.menu_button(\n                    \"🕓 \".to_string() + \u0026t!(\"app.menu.refresh_rate.button\"),\n                    |ui| {\n                        ui.set_min_width(70.0); // Set the minimum width to 150.0\n\n                        let refresh_rates = vec![\n                            (30, t!(\"app.menu.refresh_rate.refresh_30\")),\n                            (60, t!(\"app.menu.refresh_rate.refresh_60\")),\n                            (300, t!(\"app.menu.refresh_rate.refresh_300\")),\n                        ];\n\n                        for (rate, label) in refresh_rates {\n                            let selected = *app.refresh_rate.lock().unwrap() == rate;\n                            let display_label = if selected {\n                                format!(\"{} ✔\", label)\n                            } else {\n                                label.to_string()\n                            };\n                            if ui.selectable_label(selected, display_label).clicked() {\n                                app.update_refresh_rate(rate);\n                                ui.close_menu();\n                            }\n                        }\n                    },\n                );\n\n                // Menu Filters\n                let filters_btn =\n                    egui::Button::new(\"🔎 \".to_string() + \u0026t!(\"app.menu.filters\")).frame(true);\n                if ui.add(filters_btn).clicked() {\n                    self.filtering_pane.open();\n                }\n            });\n\n            // Show External Window\n            self.filtering_pane.ui(ui, app);\n        });\n    }\n}\n","traces":[{"line":21,"address":[5729408],"length":1,"stats":{"Line":0}},{"line":23,"address":[5729425],"length":1,"stats":{"Line":0}},{"line":32,"address":[5729472],"length":1,"stats":{"Line":0}},{"line":33,"address":[5363600,5366185,5366216],"length":1,"stats":{"Line":0}},{"line":34,"address":[5363643],"length":1,"stats":{"Line":0}},{"line":36,"address":[5364412,5363668,5366229],"length":1,"stats":{"Line":0}},{"line":39,"address":[5364199],"length":1,"stats":{"Line":0}},{"line":41,"address":[5364231],"length":1,"stats":{"Line":0}},{"line":42,"address":[5364434,5364293],"length":1,"stats":{"Line":0}},{"line":43,"address":[5364523],"length":1,"stats":{"Line":0}},{"line":44,"address":[5364549],"length":1,"stats":{"Line":0}},{"line":45,"address":[5364555,5366272,5364842,5366282],"length":1,"stats":{"Line":0}},{"line":46,"address":[5364830],"length":1,"stats":{"Line":0}},{"line":49,"address":[5366304,5366314,5364808],"length":1,"stats":{"Line":0}},{"line":53,"address":[5364625],"length":1,"stats":{"Line":0}},{"line":54,"address":[5364844,5364689],"length":1,"stats":{"Line":0}},{"line":55,"address":[5364933],"length":1,"stats":{"Line":0}},{"line":56,"address":[5364959],"length":1,"stats":{"Line":0}},{"line":58,"address":[5364965],"length":1,"stats":{"Line":0}},{"line":59,"address":[5365261],"length":1,"stats":{"Line":0}},{"line":60,"address":[5365684,5365273],"length":1,"stats":{"Line":0}},{"line":62,"address":[5365288],"length":1,"stats":{"Line":0}},{"line":63,"address":[5365313],"length":1,"stats":{"Line":0}},{"line":66,"address":[5365321],"length":1,"stats":{"Line":0}},{"line":67,"address":[5365392],"length":1,"stats":{"Line":0}},{"line":68,"address":[5365468],"length":1,"stats":{"Line":0}},{"line":69,"address":[5365526],"length":1,"stats":{"Line":0}},{"line":70,"address":[5365542],"length":1,"stats":{"Line":0}},{"line":71,"address":[5365593],"length":1,"stats":{"Line":0}},{"line":75,"address":[5365665],"length":1,"stats":{"Line":0}},{"line":77,"address":[5365676],"length":1,"stats":{"Line":0}},{"line":83,"address":[5364988,5365100,5369767,5369534,5366336],"length":1,"stats":{"Line":0}},{"line":84,"address":[5366375],"length":1,"stats":{"Line":0}},{"line":85,"address":[5366460,5366571,5366829],"length":1,"stats":{"Line":0}},{"line":86,"address":[5367151],"length":1,"stats":{"Line":0}},{"line":88,"address":[5366971],"length":1,"stats":{"Line":0}},{"line":90,"address":[5367281],"length":1,"stats":{"Line":0}},{"line":91,"address":[5367314],"length":1,"stats":{"Line":0}},{"line":95,"address":[5367950],"length":1,"stats":{"Line":0}},{"line":96,"address":[5369709,5367287,5367331],"length":1,"stats":{"Line":0}},{"line":97,"address":[5373723,5367926,5369808,5371841],"length":1,"stats":{"Line":0}},{"line":98,"address":[5369858],"length":1,"stats":{"Line":0}},{"line":100,"address":[5371135,5369917,5373759,5370533,5371453,5371515,5374075,5370858,5370008,5371706,5370345,5373911,5371040,5373842,5370634,5371359,5370115,5374022,5373976],"length":1,"stats":{"Line":0}},{"line":101,"address":[5370179,5370493,5370056,5369930,5370377],"length":1,"stats":{"Line":0}},{"line":102,"address":[5370423,5370581,5371000,5370890,5370692],"length":1,"stats":{"Line":0}},{"line":103,"address":[5370936,5371193,5371082,5371481,5371391],"length":1,"stats":{"Line":0}},{"line":106,"address":[5372289,5372479,5372529],"length":1,"stats":{"Line":0}},{"line":107,"address":[5372702,5372926,5372582],"length":1,"stats":{"Line":0}},{"line":108,"address":[5373053],"length":1,"stats":{"Line":0}},{"line":109,"address":[5373273,5373394],"length":1,"stats":{"Line":0}},{"line":111,"address":[5373075,5373194],"length":1,"stats":{"Line":0}},{"line":113,"address":[5373496,5373208],"length":1,"stats":{"Line":0}},{"line":114,"address":[5373615],"length":1,"stats":{"Line":0}},{"line":115,"address":[5373638],"length":1,"stats":{"Line":0}},{"line":123,"address":[5368234,5369601,5369543,5369202],"length":1,"stats":{"Line":0}},{"line":124,"address":[5369382,5369210],"length":1,"stats":{"Line":0}},{"line":125,"address":[5369501],"length":1,"stats":{"Line":0}},{"line":130,"address":[5365238],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":58},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","mod.rs"],"content":"// Module: views\npub mod components;\npub mod main_page;\npub mod menu;\npub mod view;\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","view.rs"],"content":"use eframe::egui;\n\nuse crate::models::data_structure::application_context::ApplicationContext;\n\npub trait View {\n    fn render(\u0026mut self, ui: \u0026mut egui::Ui, app: \u0026mut ApplicationContext);\n}\n\npub enum ViewType {\n    Dashboard,\n    Gantt,\n    Authentification,\n}\n","traces":[],"covered":0,"coverable":0}]};
        var previousData = {"files":[{"path":["/","home","amaury","Documents","info5","0projet","app","src","app.rs"],"content":"use crate::models::utils::secret::Secret;\nuse crate::views::main_page::dashboard::Dashboard;\nuse crate::views::main_page::gantt::GanttChart;\nuse crate::views::menu::menu::Menu;\nuse crate::views::menu::tools::Tools;\nuse crate::views::view::View;\nuse crate::{\n    models::data_structure::application_context::ApplicationContext,\n    views::main_page::anthentification::Authentification,\n};\nuse eframe::egui::{self, CentralPanel, TopBottomPanel};\n\npub struct App {\n    pub dashboard_view: Dashboard,\n    pub gantt_view: GanttChart,\n    pub authentification_view: Authentification,\n    pub menu: Menu,\n    pub secret: Secret,\n    pub tools: Tools,\n    pub application_context: ApplicationContext,\n}\n\nimpl App {\n    pub fn new() -\u003e Self {\n        let app = App {\n            secret: Secret::default(),\n            dashboard_view: Dashboard::default(),\n            gantt_view: GanttChart::default(),\n            authentification_view: Authentification::default(),\n            menu: Menu::default(),\n            tools: Tools::default(),\n            application_context: ApplicationContext::default(),\n        };\n\n        app\n    }\n}\n\nimpl eframe::App for App {\n    fn update(\u0026mut self, ctx: \u0026egui::Context, _frame: \u0026mut eframe::Frame) {\n        self.secret.update(ctx);\n        self.secret.draw_snake_game(ctx);\n\n        TopBottomPanel::top(\"menu_bar\").show(ctx, |ui| {\n            self.menu.render(ui, \u0026mut self.application_context);\n        });\n\n        // Check for updates\n        self.application_context.check_data_update();\n\n        CentralPanel::default().show(ctx, |_ui| {\n            TopBottomPanel::top(\"tool_bar\").show(ctx, |ui| {\n                self.tools.render(ui, \u0026mut self.application_context);\n            });\n\n            CentralPanel::default().show(ctx, |ui| match self.application_context.view_type {\n                crate::views::view::ViewType::Dashboard =\u003e {\n                    self.dashboard_view\n                        .render(ui, \u0026mut self.application_context);\n                }\n                crate::views::view::ViewType::Gantt =\u003e {\n                    self.gantt_view.render(ui, \u0026mut self.application_context);\n                }\n                crate::views::view::ViewType::Authentification =\u003e {\n                    self.authentification_view\n                        .render(ui, \u0026mut self.application_context);\n                }\n            });\n        });\n\n        TopBottomPanel::bottom(\"status_bar\").show(ctx, |ui| {\n            ui.horizontal(|ui| {\n                // Display the current refresh rate\n                ui.with_layout(egui::Layout::right_to_left(egui::Align::Center), |ui| {\n                    if *self.application_context.is_refreshing.lock().unwrap() {\n                        ui.add(egui::Spinner::new());\n                        ui.label(t!(\"app.refreshing\"));\n                    }\n                });\n            });\n        });\n        ctx.request_repaint();\n    }\n}\n","traces":[{"line":24,"address":[5034704,5035256],"length":1,"stats":{"Line":0}},{"line":26,"address":[5034726],"length":1,"stats":{"Line":0}},{"line":27,"address":[5034739],"length":1,"stats":{"Line":0}},{"line":28,"address":[5034791],"length":1,"stats":{"Line":0}},{"line":29,"address":[5034843],"length":1,"stats":{"Line":0}},{"line":30,"address":[5034895],"length":1,"stats":{"Line":0}},{"line":31,"address":[5034947],"length":1,"stats":{"Line":0}},{"line":32,"address":[5034999],"length":1,"stats":{"Line":0}},{"line":40,"address":[5035280],"length":1,"stats":{"Line":0}},{"line":41,"address":[5035320],"length":1,"stats":{"Line":0}},{"line":42,"address":[5035341],"length":1,"stats":{"Line":0}},{"line":44,"address":[4395904],"length":1,"stats":{"Line":0}},{"line":45,"address":[4395936],"length":1,"stats":{"Line":0}},{"line":49,"address":[5035431],"length":1,"stats":{"Line":0}},{"line":51,"address":[5035443],"length":1,"stats":{"Line":0}},{"line":52,"address":[4395987,4396176],"length":1,"stats":{"Line":0}},{"line":53,"address":[4396208],"length":1,"stats":{"Line":0}},{"line":56,"address":[4396240,4396050,4396259],"length":1,"stats":{"Line":0}},{"line":58,"address":[4396316,4396309],"length":1,"stats":{"Line":0}},{"line":59,"address":[4396312],"length":1,"stats":{"Line":0}},{"line":62,"address":[4396333],"length":1,"stats":{"Line":0}},{"line":65,"address":[4396358,4396366],"length":1,"stats":{"Line":0}},{"line":66,"address":[4396362],"length":1,"stats":{"Line":0}},{"line":71,"address":[4396384],"length":1,"stats":{"Line":0}},{"line":72,"address":[4396432,4396397],"length":1,"stats":{"Line":0}},{"line":74,"address":[4397693,4396688,4396452,4396558],"length":1,"stats":{"Line":0}},{"line":75,"address":[4397633,4396713,4396922],"length":1,"stats":{"Line":0}},{"line":76,"address":[4397033],"length":1,"stats":{"Line":0}},{"line":77,"address":[4397092,4397197,4397638],"length":1,"stats":{"Line":0}},{"line":82,"address":[5035683],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":30},{"path":["/","home","amaury","Documents","info5","0projet","app","src","main.rs"],"content":"mod app;\nmod models;\nmod views;\n\n#[macro_use]\nextern crate rust_i18n;\ni18n!(\"src/i18n\");\n\n#[cfg(not(target_arch = \"wasm32\"))]\nfn main() -\u003e Result\u003c(), eframe::Error\u003e {\n    // Configure the native options\n    let options = eframe::NativeOptions::default();\n\n    // Start the native app\n    eframe::run_native(\n        \u0026t!(\"app.title\"),\n        options,\n        Box::new(|_cc| Ok(Box::new(app::App::new()))),\n    )\n}\n\n// When compiling to web using trunk:\n#[cfg(target_arch = \"wasm32\")]\nfn main() {\n    use eframe::wasm_bindgen::JsCast as _;\n\n    // Redirect `log` message to `console.log` and friends:\n    eframe::WebLogger::init(log::LevelFilter::Debug).ok();\n\n    let web_options = eframe::WebOptions::default();\n\n    wasm_bindgen_futures::spawn_local(async {\n        let document = web_sys::window()\n            .expect(\"No window\")\n            .document()\n            .expect(\"No document\");\n\n        let canvas = document\n            .get_element_by_id(\"the_canvas_id\")\n            .expect(\"Failed to find the_canvas_id\")\n            .dyn_into::\u003cweb_sys::HtmlCanvasElement\u003e()\n            .expect(\"the_canvas_id was not a HtmlCanvasElement\");\n\n        let start_result = eframe::WebRunner::new()\n            .start(\n                canvas,\n                web_options,\n                Box::new(|_cc| Ok(Box::new(app::App::new()))),\n            )\n            .await;\n\n        // Remove the loading text and spinner:\n        if let Some(loading_text) = document.get_element_by_id(\"loading_text\") {\n            match start_result {\n                Ok(_) =\u003e {\n                    loading_text.remove();\n                }\n                Err(e) =\u003e {\n                    loading_text.set_inner_html(\n                        \"\u003cp\u003e The app has crashed. See the developer console for details. \u003c/p\u003e\",\n                    );\n                    panic!(\"Failed to start eframe: {e:?}\");\n                }\n            }\n        }\n    });\n}\n\n#[cfg(test)]\nmod tests;\n","traces":[{"line":7,"address":[4907041,4907120,4906968,4906944,4907008,4907134],"length":1,"stats":{"Line":0}},{"line":10,"address":[4905744,4906917,4906838],"length":1,"stats":{"Line":0}},{"line":12,"address":[4905761],"length":1,"stats":{"Line":0}},{"line":16,"address":[4905807,4906230,4906034,4905922],"length":1,"stats":{"Line":0}},{"line":17,"address":[4906351],"length":1,"stats":{"Line":0}},{"line":18,"address":[4999440,4999469,4999584],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":6},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","data_structure","application_context.rs"],"content":"use super::cluster::Cluster;\nuse super::filters::JobFilters;\nuse super::job::Job;\nuse super::resource::Resource;\nuse super::strata::Strata;\nuse crate::models::data_structure::cpu::Cpu;\nuse crate::models::data_structure::host::Host;\nuse crate::models::data_structure::resource::ResourceState;\nuse crate::models::utils::utils::{get_clusters_for_job, get_hosts_for_job};\nuse crate::views::components::dashboard_components::job_table_sorting::JobSortable;\nuse crate::views::view::ViewType;\nuse chrono::{DateTime, Local};\nuse std::sync::mpsc::{channel, Receiver, Sender};\nuse std::sync::{Arc, Mutex};\n\n/*\n`ApplicationContext` is the central state container for the entire application.\nIt manages jobs, clusters, resources, and application state, including filtering mechanisms\nand communication channels for data updates.\n*/\npub struct ApplicationContext {\n    pub all_jobs: Vec\u003cJob\u003e,\n    pub swap_all_jobs: Vec\u003cJob\u003e, // Used to store all jobs when refreshing (and swapped with all_jobs when refreshing is done)\n    pub filtered_jobs: Vec\u003cJob\u003e, // Subset of all_jobs that match the filters\n\n    pub all_clusters: Vec\u003cCluster\u003e,\n    pub swap_all_clusters: Vec\u003cCluster\u003e, // Used to store all clusters when refreshing (and swapped with all_clusters when refreshing is done)\n\n    // Application view state\n    pub start_date: Arc\u003cMutex\u003cDateTime\u003cLocal\u003e\u003e\u003e,\n    pub end_date: Arc\u003cMutex\u003cDateTime\u003cLocal\u003e\u003e\u003e,\n    pub view_type: ViewType,\n    pub is_loading: bool,\n    pub user_connected: Option\u003cString\u003e,\n    pub is_refreshing: Arc\u003cMutex\u003cbool\u003e\u003e,\n    pub refresh_rate: Arc\u003cMutex\u003cu64\u003e\u003e,\n    pub filters: JobFilters,\n\n    // Communication channels for background data updates\n    pub jobs_receiver: Receiver\u003cVec\u003cJob\u003e\u003e,\n    pub jobs_sender: Sender\u003cVec\u003cJob\u003e\u003e,\n    pub resources_receiver: Receiver\u003cVec\u003cStrata\u003e\u003e,\n    pub resources_sender: Sender\u003cVec\u003cStrata\u003e\u003e,\n\n    pub font_size: i32,\n    pub see_all_jobs: bool,\n}\n\nimpl ApplicationContext {\n    pub fn check_job_update(\u0026mut self) {\n        if let Ok(new_jobs) = self.jobs_receiver.try_recv() {\n            self.swap_all_jobs = new_jobs;\n            self.is_loading = false;\n        }\n    }\n\n    /*\n    Checks for and processes any new resource data received from the background thread.\n     This method builds the hierarchical structure of clusters, hosts, CPUs, and resources\n     from the flat resource data received.\n     */\n    pub fn check_ressource_update(\u0026mut self) {\n        if let Ok(new_resources) = self.resources_receiver.try_recv() {\n            // for every resources get the cluster name with resource.cluster and if there is no cluster with this name in all_clusters add it to all_clusters\n            for resource in new_resources.iter() {\n                let cluster_name = resource.cluster.as_ref().unwrap_or(\u0026\"\".to_string()).clone();\n                if cluster_name == \"\" {\n                    continue;\n                }\n                if !self\n                    .swap_all_clusters\n                    .iter()\n                    .any(|cluster| cluster.name == cluster_name)\n                {\n                    // Add the cluster to all_clusters with one host being resource.host\n                    let new_cluster = Cluster {\n                        name: cluster_name.clone(),\n                        hosts: vec![Host {\n                            name: resource.host.as_ref().unwrap_or(\u0026\"\".to_string()).clone(),\n                            cpus: vec![Cpu {\n                                name: resource.cputype.as_ref().unwrap_or(\u0026\"\".to_string()).clone(),\n                                resources: vec![Resource {\n                                    id: resource.resource_id.unwrap_or(0),\n                                    state: match resource\n                                        .state\n                                        .as_ref()\n                                        .unwrap_or(\u0026\"\".to_string())\n                                        .as_str()\n                                    {\n                                        \"Dead\" =\u003e super::resource::ResourceState::Dead,\n                                        \"Alive\" =\u003e super::resource::ResourceState::Alive,\n                                        \"Absent\" =\u003e super::resource::ResourceState::Absent,\n                                        _ =\u003e super::resource::ResourceState::Unknown,\n                                    },\n                                    thread_count: resource.thread_count.unwrap_or(0) as i32,\n                                }],\n                                core_count: resource.core_count.unwrap_or(0) as i32,\n                                cpufreq: resource\n                                    .cpufreq\n                                    .as_ref()\n                                    .unwrap_or(\u0026\"\".to_string())\n                                    .parse::\u003cf32\u003e()\n                                    .unwrap_or(0.0),\n                                chassis: resource\n                                    .chassis\n                                    .as_ref()\n                                    .unwrap_or(\u0026\"\".to_string())\n                                    .clone(),\n                                resource_ids: vec![resource.resource_id.unwrap_or(0)],\n                            }],\n                            network_address: resource\n                                .network_address\n                                .as_ref()\n                                .unwrap_or(\u0026\"\".to_string())\n                                .clone(),\n                            resource_ids: vec![resource.resource_id.unwrap_or(0)],\n                            state: ResourceState::Unknown,\n                        }],\n                        resource_ids: vec![resource.resource_id.unwrap_or(0)],\n                        state: ResourceState::Unknown,\n                    };\n\n                    // Add the cluster to all_clusters\n                    self.swap_all_clusters.push(new_cluster);\n                } else {\n                    // if the cluster already exists, check if the host exists and add the host if it doesn't\n                    let cluster = self\n                        .swap_all_clusters\n                        .iter_mut()\n                        .find(|cluster| cluster.name == cluster_name)\n                        .unwrap();\n                    if !cluster.hosts.iter().any(|host| {\n                        host.name == resource.host.as_ref().unwrap_or(\u0026\"\".to_string()).clone()\n                    }) {\n                        cluster.hosts.push(Host {\n                            name: resource.host.as_ref().unwrap_or(\u0026\"\".to_string()).clone(),\n                            cpus: vec![Cpu {\n                                name: resource.cputype.as_ref().unwrap_or(\u0026\"\".to_string()).clone(),\n                                resources: vec![Resource {\n                                    id: resource.resource_id.unwrap_or(0),\n                                    state: match resource\n                                        .state\n                                        .as_ref()\n                                        .unwrap_or(\u0026\"\".to_string())\n                                        .as_str()\n                                    {\n                                        \"Dead\" =\u003e super::resource::ResourceState::Dead,\n                                        \"Alive\" =\u003e super::resource::ResourceState::Alive,\n                                        \"Absent\" =\u003e super::resource::ResourceState::Absent,\n                                        _ =\u003e super::resource::ResourceState::Unknown,\n                                    },\n                                    thread_count: resource.thread_count.unwrap_or(0) as i32,\n                                }],\n                                core_count: resource.core_count.unwrap_or(0) as i32,\n                                cpufreq: resource\n                                    .cpufreq\n                                    .as_ref()\n                                    .unwrap_or(\u0026\"\".to_string())\n                                    .parse::\u003cf32\u003e()\n                                    .unwrap_or(0.0),\n                                chassis: resource\n                                    .chassis\n                                    .as_ref()\n                                    .unwrap_or(\u0026\"\".to_string())\n                                    .clone(),\n                                resource_ids: vec![resource.resource_id.unwrap_or(0)],\n                            }],\n                            network_address: resource\n                                .network_address\n                                .as_ref()\n                                .unwrap_or(\u0026\"\".to_string())\n                                .clone(),\n                            resource_ids: vec![resource.resource_id.unwrap_or(0)],\n                            state: ResourceState::Unknown,\n                        });\n                        // add the resource id to the cluster\n                        cluster.resource_ids.push(resource.resource_id.unwrap_or(0));\n                    } else {\n                        // if the host already exists, check if the cpu exists and add the cpu if it doesn't\n                        let host = cluster\n                            .hosts\n                            .iter_mut()\n                            .find(|host| {\n                                host.name\n                                    == resource.host.as_ref().unwrap_or(\u0026\"\".to_string()).clone()\n                            })\n                            .unwrap();\n                        if !host.cpus.iter().any(|cpu| {\n                            cpu.name == resource.cputype.as_ref().unwrap_or(\u0026\"\".to_string()).clone()\n                        }) {\n                            host.cpus.push(Cpu {\n                                name: resource.cputype.as_ref().unwrap_or(\u0026\"\".to_string()).clone(),\n                                resources: vec![Resource {\n                                    id: resource.resource_id.unwrap_or(0),\n                                    state: match resource\n                                        .state\n                                        .as_ref()\n                                        .unwrap_or(\u0026\"\".to_string())\n                                        .as_str()\n                                    {\n                                        \"Dead\" =\u003e super::resource::ResourceState::Dead,\n                                        \"Alive\" =\u003e super::resource::ResourceState::Alive,\n                                        \"Absent\" =\u003e super::resource::ResourceState::Absent,\n                                        _ =\u003e super::resource::ResourceState::Unknown,\n                                    },\n                                    thread_count: resource.thread_count.unwrap_or(0) as i32,\n                                }],\n                                core_count: resource.core_count.unwrap_or(0) as i32,\n                                cpufreq: resource\n                                    .cpufreq\n                                    .as_ref()\n                                    .unwrap_or(\u0026\"\".to_string())\n                                    .parse::\u003cf32\u003e()\n                                    .unwrap_or(0.0),\n                                chassis: resource\n                                    .chassis\n                                    .as_ref()\n                                    .unwrap_or(\u0026\"\".to_string())\n                                    .clone(),\n                                resource_ids: vec![resource.resource_id.unwrap_or(0)],\n                            });\n\n                            // add the resource id to the host and the cluster\n                            host.resource_ids.push(resource.resource_id.unwrap_or(0));\n                            cluster.resource_ids.push(resource.resource_id.unwrap_or(0));\n                        } else {\n                            // if the cpu already exists, add the resource to the cpu\n                            let cpu = host\n                                .cpus\n                                .iter_mut()\n                                .find(|cpu| {\n                                    cpu.name\n                                        == resource\n                                            .cputype\n                                            .as_ref()\n                                            .unwrap_or(\u0026\"\".to_string())\n                                            .clone()\n                                })\n                                .unwrap();\n                            cpu.resources.push(Resource {\n                                id: resource.resource_id.unwrap_or(0),\n                                state: match resource\n                                    .state\n                                    .as_ref()\n                                    .unwrap_or(\u0026\"\".to_string())\n                                    .as_str()\n                                {\n                                    \"Dead\" =\u003e super::resource::ResourceState::Dead,\n                                    \"Alive\" =\u003e super::resource::ResourceState::Alive,\n                                    \"Absent\" =\u003e super::resource::ResourceState::Absent,\n                                    _ =\u003e super::resource::ResourceState::Unknown,\n                                },\n                                thread_count: resource.thread_count.unwrap_or(0) as i32,\n                            });\n\n                            // add the resource id to the cpu, the host and the cluster\n                            cpu.resource_ids.push(resource.resource_id.unwrap_or(0));\n                            host.resource_ids.push(resource.resource_id.unwrap_or(0));\n                            cluster.resource_ids.push(resource.resource_id.unwrap_or(0));\n                        }\n                    }\n                }\n            }\n            for job in self.swap_all_jobs.iter_mut() {\n                job.clusters = get_clusters_for_job(job, \u0026self.swap_all_clusters);\n                job.hosts = get_hosts_for_job(job, \u0026self.swap_all_clusters);\n                job.update_majority_resource_state(\u0026self.swap_all_clusters);\n            }\n\n            // For each host set is state to the state the most resources have\n            for cluster in self.swap_all_clusters.iter_mut() {\n                for host in cluster.hosts.iter_mut() {\n                    let mut dead_count = 0;\n                    let mut alive_count = 0;\n                    let mut absent_count = 0;\n                    for cpu in host.cpus.iter() {\n                        for resource in cpu.resources.iter() {\n                            match resource.state {\n                                ResourceState::Dead =\u003e dead_count += 1,\n                                ResourceState::Alive =\u003e alive_count += 1,\n                                ResourceState::Absent =\u003e absent_count += 1,\n                                _ =\u003e (),\n                            }\n                        }\n                    }\n                    if dead_count \u003e= alive_count \u0026\u0026 dead_count \u003e= absent_count {\n                        host.state = ResourceState::Dead;\n                    } else if absent_count \u003e= dead_count \u0026\u0026 absent_count \u003e= alive_count {\n                        host.state = ResourceState::Absent;\n                    } else if alive_count \u003e dead_count \u0026\u0026 alive_count \u003e absent_count {\n                        host.state = ResourceState::Alive;\n                    } else {\n                        host.state = ResourceState::Unknown;\n                    }\n                }\n            }\n\n            // For each cluster set is state to the state the most hosts have\n            for cluster in self.swap_all_clusters.iter_mut() {\n                let mut dead_count = 0;\n                let mut alive_count = 0;\n                let mut absent_count = 0;\n                for host in cluster.hosts.iter() {\n                    match host.state {\n                        ResourceState::Dead =\u003e dead_count += 1,\n                        ResourceState::Alive =\u003e alive_count += 1,\n                        ResourceState::Absent =\u003e absent_count += 1,\n                        _ =\u003e (),\n                    }\n                }\n                if dead_count \u003e= alive_count \u0026\u0026 dead_count \u003e= absent_count {\n                    cluster.state = ResourceState::Dead;\n                } else if absent_count \u003e= dead_count \u0026\u0026 absent_count \u003e= alive_count {\n                    cluster.state = ResourceState::Absent;\n                } else if alive_count \u003e dead_count \u0026\u0026 alive_count \u003e absent_count {\n                    cluster.state = ResourceState::Alive;\n                } else {\n                    cluster.state = ResourceState::Unknown;\n                }\n            }\n            // Swap all_jobs and all_clusters with swap_all_jobs and swap_all_clusters\n            // If there is a job with id 0 in all_jobs, we keep it\n            let has_job_0 = self.all_jobs.iter().any(|job| job.id == 0);\n            if has_job_0 {\n                // Get the job with id 0\n                let job_0 = self\n                    .all_jobs\n                    .iter()\n                    .find(|job| job.id == 0)\n                    .unwrap()\n                    .clone();\n                self.swap_all_jobs.push(job_0);\n            }\n\n            self.all_jobs = self.swap_all_jobs.clone();\n            self.all_clusters = self.swap_all_clusters.clone();\n        }\n    }\n\n    pub fn check_data_update(\u0026mut self) {\n        self.check_job_update();\n        self.check_ressource_update();\n\n        // set filter date to the date of the app context\n        self.filters\n            .set_scheduled_start_time(self.start_date.lock().unwrap().timestamp());\n        self.filters\n            .set_wall_time(self.end_date.lock().unwrap().timestamp());\n\n        self.filter_jobs();\n    }\n\n    pub fn logout(\u0026mut self) {\n        self.user_connected = None;\n        self.view_type = ViewType::Authentification;\n    }\n\n    pub fn login(\u0026mut self, username: \u0026str) {\n        self.user_connected = Some(username.to_string());\n        self.view_type = ViewType::Dashboard;\n    }\n\n    /* Returns a deduplicated, sorted list of all unique job owners\n     * Used for filtering functionality in the UI\n     */\n    pub fn get_unique_owners(\u0026self) -\u003e Vec\u003cString\u003e {\n        let mut owners: Vec\u003cString\u003e = self.all_jobs.iter().map(|job| job.owner.clone()).collect();\n        // remove the owner all_resources if it exists\n        owners.retain(|owner| owner != \"all_resources\");\n        owners.sort();\n        owners.dedup();\n        owners\n    }\n\n    /*\n     * Applies the current filters to all_jobs and updates filtered_jobs\n     * This method handles all filtering logic including:\n     * - Job owner filtering\n     * - Job state filtering\n     * - Time range filtering\n     * - Cluster resource filtering\n     */\n    pub fn filter_jobs(\u0026mut self) {\n        self.filtered_jobs = self\n            .all_jobs\n            .iter()\n            .filter(|job| {\n                job.id == 0\n                    || (self\n                        .filters\n                        .owners\n                        .as_ref()\n                        .map_or(true, |owners| owners.contains(\u0026job.owner)))\n                        \u0026\u0026 (self\n                            .filters\n                            .states\n                            .as_ref()\n                            .map_or(true, |states| states.contains(\u0026job.state)))\n                        \u0026\u0026 (((self\n                            .filters\n                            .scheduled_start_time\n                            .map_or(true, |time| time \u003c= job.scheduled_start))\n                            \u0026\u0026 (self\n                                .filters\n                                .wall_time\n                                .map_or(true, |time| time \u003e= job.scheduled_start)))\n                            || ((self\n                                .filters\n                                .scheduled_start_time\n                                .map_or(true, |time| time \u003c= job.get_end_date()))\n                                \u0026\u0026 (self\n                                    .filters\n                                    .wall_time\n                                    .map_or(true, |time| time \u003e= job.get_end_date())))\n                            || ((self\n                                .filters\n                                .scheduled_start_time\n                                .map_or(true, |time| time \u003e= job.start_time))\n                                \u0026\u0026 (self\n                                    .filters\n                                    .wall_time\n                                    .map_or(true, |time| time \u003c= job.get_end_date()))))\n                        \u0026\u0026 (self.filters.clusters.is_none() || {\n                            let selected_clusters = self.filters.clusters.as_ref().unwrap();\n                            selected_clusters.iter().any(|cluster| {\n                                cluster.hosts.iter().any(|host| {\n                                    host.cpus.iter().any(|cpu| {\n                                        cpu.resources.iter().any(|resource| {\n                                            job.assigned_resources.contains(\u0026resource.id)\n                                        })\n                                    })\n                                })\n                            })\n                        })\n            })\n            .cloned() // Clone filtred jobs here\n            .collect();\n    }\n}\n\nimpl Default for ApplicationContext {\n    // Creates a default ApplicationContext with initial values and sets up the background\n    // data refresh mechanism.\n    fn default() -\u003e Self {\n        let (jobs_sender, jobs_receiver) = channel();\n        let (resources_sender, resources_receiver) = channel();\n\n        let now: DateTime\u003cLocal\u003e = Local::now();\n        let mut context = Self {\n            all_jobs: Vec::new(),\n            all_clusters: Vec::new(),\n\n            swap_all_jobs: Vec::new(),\n            swap_all_clusters: Vec::new(),\n\n            jobs_receiver: jobs_receiver,\n            jobs_sender: jobs_sender,\n            resources_receiver: resources_receiver,\n            resources_sender: resources_sender,\n            user_connected: None,\n\n            filtered_jobs: Vec::new(),\n            filters: JobFilters::default(),\n            start_date: Arc::new(Mutex::new(now - chrono::Duration::hours(1))),\n            end_date: Arc::new(Mutex::new(now + chrono::Duration::hours(1))),\n            view_type: ViewType::Gantt,\n            is_loading: false,\n            is_refreshing: Arc::new(Mutex::new(false)),\n            refresh_rate: Arc::new(Mutex::new(30)),\n\n            font_size: 16,\n            see_all_jobs: false,\n        };\n        context.update_periodically();\n        context\n    }\n}\n","traces":[{"line":50,"address":[4811873,4811696],"length":1,"stats":{"Line":0}},{"line":51,"address":[4811946,4811712],"length":1,"stats":{"Line":0}},{"line":52,"address":[4811903,4811849,4811797],"length":1,"stats":{"Line":0}},{"line":53,"address":[4811939],"length":1,"stats":{"Line":0}},{"line":62,"address":[4821069,4811984,4829345],"length":1,"stats":{"Line":0}},{"line":63,"address":[4812025],"length":1,"stats":{"Line":0}},{"line":65,"address":[4812152,4812275,4812475],"length":1,"stats":{"Line":0}},{"line":66,"address":[4816253,4812499],"length":1,"stats":{"Line":0}},{"line":67,"address":[4816429],"length":1,"stats":{"Line":0}},{"line":70,"address":[4816547,4816479],"length":1,"stats":{"Line":0}},{"line":73,"address":[5507152,5507177],"length":1,"stats":{"Line":0}},{"line":77,"address":[4816645],"length":1,"stats":{"Line":0}},{"line":78,"address":[4816939,4816840,4816723,4821557,4821220,4821413,4821326,4816798,4821485,4821123,4819747],"length":1,"stats":{"Line":0}},{"line":119,"address":[4820176,4820247],"length":1,"stats":{"Line":0}},{"line":124,"address":[4820922],"length":1,"stats":{"Line":0}},{"line":127,"address":[4821753,4821578,4816680],"length":1,"stats":{"Line":0}},{"line":130,"address":[5507217,5507200],"length":1,"stats":{"Line":0}},{"line":132,"address":[4821761],"length":1,"stats":{"Line":0}},{"line":133,"address":[5507267,5507381],"length":1,"stats":{"Line":0}},{"line":135,"address":[4824881,4821918],"length":1,"stats":{"Line":0}},{"line":136,"address":[4822105,4822011,4821930],"length":1,"stats":{"Line":0}},{"line":137,"address":[4825641,4822206,4825514,4825553,4822134,4822248,4822347,4825590,4823981],"length":1,"stats":{"Line":0}},{"line":138,"address":[4822297,4822387,4822214],"length":1,"stats":{"Line":0}},{"line":139,"address":[4822666,4823008,4822488,4822536,4822416],"length":1,"stats":{"Line":0}},{"line":140,"address":[4822496],"length":1,"stats":{"Line":0}},{"line":141,"address":[4822631,4822573,4822706],"length":1,"stats":{"Line":0}},{"line":144,"address":[4822616],"length":1,"stats":{"Line":0}},{"line":147,"address":[4822767,4822848],"length":1,"stats":{"Line":0}},{"line":148,"address":[4822913,4822865,4822822],"length":1,"stats":{"Line":0}},{"line":149,"address":[4822946,4822887,4822930],"length":1,"stats":{"Line":0}},{"line":150,"address":[4822936],"length":1,"stats":{"Line":0}},{"line":152,"address":[4822962],"length":1,"stats":{"Line":0}},{"line":154,"address":[4823200],"length":1,"stats":{"Line":0}},{"line":155,"address":[4823277,4823335,4823410],"length":1,"stats":{"Line":0}},{"line":158,"address":[4823320],"length":1,"stats":{"Line":0}},{"line":161,"address":[4823685,4823555,4823610],"length":1,"stats":{"Line":0}},{"line":164,"address":[4823595],"length":1,"stats":{"Line":0}},{"line":166,"address":[4823709,4823784],"length":1,"stats":{"Line":0}},{"line":168,"address":[4824510,4824415,4824585],"length":1,"stats":{"Line":0}},{"line":171,"address":[4824495],"length":1,"stats":{"Line":0}},{"line":173,"address":[4824684,4824609],"length":1,"stats":{"Line":0}},{"line":174,"address":[4824873],"length":1,"stats":{"Line":0}},{"line":177,"address":[4825383],"length":1,"stats":{"Line":0}},{"line":180,"address":[4825662,4825837,4821964],"length":1,"stats":{"Line":0}},{"line":183,"address":[5507763,5507520],"length":1,"stats":{"Line":0}},{"line":184,"address":[5507534,5507682],"length":1,"stats":{"Line":0}},{"line":185,"address":[5507542,5507656],"length":1,"stats":{"Line":0}},{"line":188,"address":[4825845],"length":1,"stats":{"Line":0}},{"line":189,"address":[5507811,5507925],"length":1,"stats":{"Line":0}},{"line":191,"address":[4827791,4826002],"length":1,"stats":{"Line":0}},{"line":192,"address":[4826189,4826014,4826095],"length":1,"stats":{"Line":0}},{"line":193,"address":[4826468,4826290,4826338,4826218,4826810],"length":1,"stats":{"Line":0}},{"line":194,"address":[4826298],"length":1,"stats":{"Line":0}},{"line":195,"address":[4826508,4826375,4826433],"length":1,"stats":{"Line":0}},{"line":198,"address":[4826418],"length":1,"stats":{"Line":0}},{"line":201,"address":[4826569,4826650],"length":1,"stats":{"Line":0}},{"line":202,"address":[4826667,4826624,4826715],"length":1,"stats":{"Line":0}},{"line":203,"address":[4826732,4826689,4826748],"length":1,"stats":{"Line":0}},{"line":204,"address":[4826738],"length":1,"stats":{"Line":0}},{"line":206,"address":[4826764],"length":1,"stats":{"Line":0}},{"line":208,"address":[4827002],"length":1,"stats":{"Line":0}},{"line":209,"address":[4827137,4827079,4827212],"length":1,"stats":{"Line":0}},{"line":212,"address":[4827122],"length":1,"stats":{"Line":0}},{"line":215,"address":[4827357,4827487,4827412],"length":1,"stats":{"Line":0}},{"line":218,"address":[4827397],"length":1,"stats":{"Line":0}},{"line":220,"address":[4827511,4827586],"length":1,"stats":{"Line":0}},{"line":224,"address":[4828175],"length":1,"stats":{"Line":0}},{"line":225,"address":[4828268],"length":1,"stats":{"Line":0}},{"line":228,"address":[4826048,4828593,4828410],"length":1,"stats":{"Line":0}},{"line":231,"address":[5508064,5508307],"length":1,"stats":{"Line":0}},{"line":232,"address":[5508078,5508226],"length":1,"stats":{"Line":0}},{"line":233,"address":[5508144,5508200,5508086],"length":1,"stats":{"Line":0}},{"line":236,"address":[5508129],"length":1,"stats":{"Line":0}},{"line":240,"address":[4829028,4828601],"length":1,"stats":{"Line":0}},{"line":241,"address":[4828610],"length":1,"stats":{"Line":0}},{"line":242,"address":[4828702,4828775,4828650],"length":1,"stats":{"Line":0}},{"line":245,"address":[4828690],"length":1,"stats":{"Line":0}},{"line":248,"address":[4828884,4828818],"length":1,"stats":{"Line":0}},{"line":249,"address":[4828937,4828898,4828861],"length":1,"stats":{"Line":0}},{"line":250,"address":[4828967,4828951,4828914],"length":1,"stats":{"Line":0}},{"line":251,"address":[4828957],"length":1,"stats":{"Line":0}},{"line":253,"address":[4828983],"length":1,"stats":{"Line":0}},{"line":257,"address":[4829113],"length":1,"stats":{"Line":0}},{"line":258,"address":[4829194],"length":1,"stats":{"Line":0}},{"line":259,"address":[4829275],"length":1,"stats":{"Line":0}},{"line":264,"address":[4812541,4812749,4812445],"length":1,"stats":{"Line":0}},{"line":265,"address":[4815926,4812773],"length":1,"stats":{"Line":0}},{"line":266,"address":[4816052],"length":1,"stats":{"Line":0}},{"line":267,"address":[4816217],"length":1,"stats":{"Line":0}},{"line":271,"address":[4812711,4812814,4813014],"length":1,"stats":{"Line":0}},{"line":272,"address":[4814795,4813030],"length":1,"stats":{"Line":0}},{"line":273,"address":[4814985],"length":1,"stats":{"Line":0}},{"line":274,"address":[4814996],"length":1,"stats":{"Line":0}},{"line":275,"address":[4815007],"length":1,"stats":{"Line":0}},{"line":276,"address":[4815018,4815241],"length":1,"stats":{"Line":0}},{"line":277,"address":[4815257,4815511],"length":1,"stats":{"Line":0}},{"line":278,"address":[4815693],"length":1,"stats":{"Line":0}},{"line":279,"address":[4815729,4815805],"length":1,"stats":{"Line":0}},{"line":280,"address":[4815845,4815752],"length":1,"stats":{"Line":0}},{"line":281,"address":[4815775,4815885],"length":1,"stats":{"Line":0}},{"line":286,"address":[4815223,4815347,4815305],"length":1,"stats":{"Line":0}},{"line":287,"address":[4815329],"length":1,"stats":{"Line":0}},{"line":288,"address":[4815370,4815287,4815412],"length":1,"stats":{"Line":0}},{"line":289,"address":[4815394],"length":1,"stats":{"Line":0}},{"line":290,"address":[4815490,4815352,4815443],"length":1,"stats":{"Line":0}},{"line":291,"address":[4815472],"length":1,"stats":{"Line":0}},{"line":293,"address":[4815425],"length":1,"stats":{"Line":0}},{"line":299,"address":[4812984,4813076,4813276],"length":1,"stats":{"Line":0}},{"line":300,"address":[4813300],"length":1,"stats":{"Line":0}},{"line":301,"address":[4813311],"length":1,"stats":{"Line":0}},{"line":302,"address":[4813322],"length":1,"stats":{"Line":0}},{"line":303,"address":[4814335,4813333,4814155],"length":1,"stats":{"Line":0}},{"line":304,"address":[4814351],"length":1,"stats":{"Line":0}},{"line":305,"address":[4814673,4814597],"length":1,"stats":{"Line":0}},{"line":306,"address":[4814620,4814712],"length":1,"stats":{"Line":0}},{"line":307,"address":[4814749,4814643],"length":1,"stats":{"Line":0}},{"line":311,"address":[4814405,4814317,4814447],"length":1,"stats":{"Line":0}},{"line":312,"address":[4814429],"length":1,"stats":{"Line":0}},{"line":313,"address":[4814387,4814512,4814470],"length":1,"stats":{"Line":0}},{"line":314,"address":[4814494],"length":1,"stats":{"Line":0}},{"line":315,"address":[4814452,4814543,4814590],"length":1,"stats":{"Line":0}},{"line":316,"address":[4814572],"length":1,"stats":{"Line":0}},{"line":318,"address":[4814525],"length":1,"stats":{"Line":0}},{"line":323,"address":[5508336,5508346],"length":1,"stats":{"Line":0}},{"line":324,"address":[4813475],"length":1,"stats":{"Line":0}},{"line":326,"address":[4813748,4813527],"length":1,"stats":{"Line":0}},{"line":329,"address":[5508368,5508378],"length":1,"stats":{"Line":0}},{"line":332,"address":[4813763],"length":1,"stats":{"Line":0}},{"line":335,"address":[4813487,4813805],"length":1,"stats":{"Line":0}},{"line":336,"address":[4813937],"length":1,"stats":{"Line":0}},{"line":340,"address":[4829408,4830076],"length":1,"stats":{"Line":0}},{"line":341,"address":[4829428],"length":1,"stats":{"Line":0}},{"line":342,"address":[4829438],"length":1,"stats":{"Line":0}},{"line":345,"address":[4829736],"length":1,"stats":{"Line":0}},{"line":346,"address":[4829448,4829646,4829743],"length":1,"stats":{"Line":0}},{"line":347,"address":[4830041],"length":1,"stats":{"Line":0}},{"line":348,"address":[4829758,4830048,4829956],"length":1,"stats":{"Line":0}},{"line":350,"address":[4830063],"length":1,"stats":{"Line":0}},{"line":353,"address":[4830112,4830188],"length":1,"stats":{"Line":0}},{"line":354,"address":[4830219,4830136],"length":1,"stats":{"Line":0}},{"line":355,"address":[4830255],"length":1,"stats":{"Line":0}},{"line":358,"address":[4830394,4830288],"length":1,"stats":{"Line":0}},{"line":359,"address":[4830425,4830317],"length":1,"stats":{"Line":0}},{"line":360,"address":[4830461],"length":1,"stats":{"Line":0}},{"line":366,"address":[4830496,4830724],"length":1,"stats":{"Line":0}},{"line":367,"address":[4830528],"length":1,"stats":{"Line":0}},{"line":369,"address":[5508478,5508464],"length":1,"stats":{"Line":0}},{"line":370,"address":[4830624],"length":1,"stats":{"Line":0}},{"line":371,"address":[4830676],"length":1,"stats":{"Line":0}},{"line":372,"address":[4830693],"length":1,"stats":{"Line":0}},{"line":383,"address":[4830752,4830977],"length":1,"stats":{"Line":1}},{"line":384,"address":[4831017,4830889,4830772],"length":1,"stats":{"Line":3}},{"line":387,"address":[4830803],"length":1,"stats":{"Line":5}},{"line":388,"address":[5508536],"length":1,"stats":{"Line":3}},{"line":389,"address":[5508579,5508560,5508606],"length":1,"stats":{"Line":7}},{"line":393,"address":[5508576,5509097,5509072],"length":1,"stats":{"Line":5}},{"line":394,"address":[5508618,5508638],"length":1,"stats":{"Line":5}},{"line":398,"address":[5508635,5509136,5509161],"length":1,"stats":{"Line":6}},{"line":399,"address":[5508678,5508664],"length":1,"stats":{"Line":6}},{"line":402,"address":[5508675,5509200,5509210],"length":1,"stats":{"Line":3}},{"line":403,"address":[5508756,5508742],"length":1,"stats":{"Line":4}},{"line":406,"address":[5509232,5509242,5508753],"length":1,"stats":{"Line":4}},{"line":407,"address":[5508702,5508716],"length":1,"stats":{"Line":3}},{"line":410,"address":[5509282,5509264,5508713],"length":1,"stats":{"Line":3}},{"line":411,"address":[5508866,5508852],"length":1,"stats":{"Line":0}},{"line":414,"address":[5509312,5508863,5509330],"length":1,"stats":{"Line":0}},{"line":415,"address":[5508809,5508823],"length":1,"stats":{"Line":2}},{"line":418,"address":[5509370,5509360,5508820],"length":1,"stats":{"Line":3}},{"line":419,"address":[5508906,5508892],"length":1,"stats":{"Line":2}},{"line":422,"address":[5509392,5509410,5508903],"length":1,"stats":{"Line":3}},{"line":423,"address":[5508777,5509055],"length":1,"stats":{"Line":4}},{"line":424,"address":[5508934,5508992],"length":1,"stats":{"Line":2}},{"line":425,"address":[5508997,5509440],"length":1,"stats":{"Line":2}},{"line":426,"address":[5509472,5509536],"length":1,"stats":{"Line":2}},{"line":427,"address":[5509568,5509632],"length":1,"stats":{"Line":2}},{"line":428,"address":[5509728,5509664],"length":1,"stats":{"Line":2}},{"line":429,"address":[5509746],"length":1,"stats":{"Line":1}},{"line":444,"address":[4833213,4831072,4833054],"length":1,"stats":{"Line":6}},{"line":445,"address":[4831089],"length":1,"stats":{"Line":6}},{"line":446,"address":[4831258,4831210],"length":1,"stats":{"Line":12}},{"line":448,"address":[4831338],"length":1,"stats":{"Line":6}},{"line":450,"address":[4831406],"length":1,"stats":{"Line":6}},{"line":451,"address":[4831421],"length":1,"stats":{"Line":6}},{"line":453,"address":[4831473],"length":1,"stats":{"Line":6}},{"line":454,"address":[4831525],"length":1,"stats":{"Line":6}},{"line":462,"address":[4831743],"length":1,"stats":{"Line":6}},{"line":463,"address":[4831802],"length":1,"stats":{"Line":6}},{"line":464,"address":[4831913,4831851],"length":1,"stats":{"Line":12}},{"line":465,"address":[4832013,4832078],"length":1,"stats":{"Line":12}},{"line":468,"address":[4832181,4832244],"length":1,"stats":{"Line":12}},{"line":469,"address":[4832385,4832330],"length":1,"stats":{"Line":12}},{"line":474,"address":[4832939],"length":1,"stats":{"Line":6}},{"line":475,"address":[4832991],"length":1,"stats":{"Line":1}}],"covered":41,"coverable":193},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","data_structure","application_options.rs"],"content":"use serde::{Serialize, Deserialize};\n\n#[derive(Debug, PartialEq, Eq, Clone, Serialize, Deserialize)]\npub enum LanguageOption {\n    English,\n    Français,\n}\n\n#[derive(Debug, PartialEq, Eq, Clone, Serialize, Deserialize)]\npub enum ThemeOption {\n    Light,\n    Dark\n}\n\n#[derive(Clone, Serialize, Deserialize)]\npub struct ApplicationOptions {\n    pub selected_language: LanguageOption,\n    pub font_size: i32,\n    pub selected_theme: ThemeOption\n}\n\nimpl Default for ApplicationOptions {\n    fn default() -\u003e Self {\n        ApplicationOptions {\n            selected_language: LanguageOption::English,\n            font_size: 14,\n            selected_theme: ThemeOption::Dark\n        }\n    }\n}","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","data_structure","cluster.rs"],"content":"use crate::models::data_structure::host::Host;\n\nuse super::resource::ResourceState;\n\n#[derive(Clone, Debug, PartialEq)]\npub struct Cluster {\n    pub name: String,\n    pub hosts: Vec\u003cHost\u003e,\n    pub resource_ids: Vec\u003cu32\u003e,\n    pub state: ResourceState,\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","data_structure","cpu.rs"],"content":"use crate::models::data_structure::resource::Resource;\n\n#[derive(Clone, Debug, PartialEq)]\n\npub struct Cpu {\n    pub name: String,\n    pub resources: Vec\u003cResource\u003e,\n    pub chassis: String,\n    pub core_count: i32,\n    pub cpufreq: f32,\n    pub resource_ids: Vec\u003cu32\u003e,\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","data_structure","filters.rs"],"content":"use super::{cluster::Cluster, job::JobState};\n\n#[derive(Default, Debug, Clone)]\n\npub struct JobFilters {\n    pub owners: Option\u003cVec\u003cString\u003e\u003e,\n    pub states: Option\u003cVec\u003cJobState\u003e\u003e,\n    pub scheduled_start_time: Option\u003ci64\u003e,\n    pub wall_time: Option\u003ci64\u003e,\n    pub clusters: Option\u003cVec\u003cCluster\u003e\u003e,\n}\n\n#[allow(dead_code)]\nimpl JobFilters {\n    pub fn new() -\u003e Self {\n        Self::default()\n    }\n\n    pub fn copy(filter: \u0026JobFilters) -\u003e Self {\n        JobFilters {\n            owners: filter.owners.clone(),\n            states: filter.states.clone(),\n            scheduled_start_time: filter.scheduled_start_time,\n            wall_time: filter.wall_time,\n            clusters: filter.clusters.clone(),\n        }\n    }\n\n    pub fn set_owners(\u0026mut self, owners: Option\u003cVec\u003cString\u003e\u003e) {\n        self.owners = owners;\n    }\n\n    pub fn set_states(\u0026mut self, states: Option\u003cVec\u003cJobState\u003e\u003e) {\n        self.states = states;\n    }\n\n    pub fn set_scheduled_start_time(\u0026mut self, scheduled_start_time: i64) {\n        self.scheduled_start_time = Some(scheduled_start_time);\n    }\n\n    pub fn set_wall_time(\u0026mut self, wall_time: i64) {\n        self.wall_time = Some(wall_time);\n    }\n\n    pub fn set_clusters(\u0026mut self, selected_clusters: Option\u003cVec\u003cCluster\u003e\u003e) {\n        self.clusters = selected_clusters;\n    }\n\n    pub fn reset(\u0026mut self) {\n        *self = Self::default();\n    }\n}\n","traces":[{"line":15,"address":[5618800],"length":1,"stats":{"Line":0}},{"line":16,"address":[5618808],"length":1,"stats":{"Line":0}},{"line":19,"address":[5618832,5619160],"length":1,"stats":{"Line":0}},{"line":21,"address":[5618862],"length":1,"stats":{"Line":0}},{"line":22,"address":[5618881],"length":1,"stats":{"Line":0}},{"line":23,"address":[5618943],"length":1,"stats":{"Line":0}},{"line":24,"address":[5618959],"length":1,"stats":{"Line":0}},{"line":25,"address":[5618977],"length":1,"stats":{"Line":0}},{"line":29,"address":[5619184,5619241],"length":1,"stats":{"Line":1}},{"line":30,"address":[5619202,5619276],"length":1,"stats":{"Line":2}},{"line":33,"address":[5619312,5619365],"length":1,"stats":{"Line":1}},{"line":34,"address":[5619400,5619330],"length":1,"stats":{"Line":2}},{"line":37,"address":[5619440],"length":1,"stats":{"Line":0}},{"line":38,"address":[5619450],"length":1,"stats":{"Line":0}},{"line":41,"address":[5619488],"length":1,"stats":{"Line":0}},{"line":42,"address":[5619498],"length":1,"stats":{"Line":0}},{"line":45,"address":[5619536,5619589],"length":1,"stats":{"Line":0}},{"line":46,"address":[5619624,5619554],"length":1,"stats":{"Line":0}},{"line":49,"address":[5619767,5619664],"length":1,"stats":{"Line":0}},{"line":50,"address":[5619685,5619800],"length":1,"stats":{"Line":0}}],"covered":4,"coverable":20},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","data_structure","host.rs"],"content":"use crate::models::data_structure::cpu::Cpu;\nuse crate::models::data_structure::resource::ResourceState;\n\n#[derive(Clone, Debug, PartialEq)]\n\npub struct Host {\n    pub name: String,\n    pub cpus: Vec\u003cCpu\u003e,\n    pub network_address: String,\n    pub resource_ids: Vec\u003cu32\u003e,\n    pub state: ResourceState,\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","data_structure","job.rs"],"content":"use crate::models::data_structure::resource::ResourceState;\nuse serde::{Deserialize, Serialize};\nuse std::fmt;\nuse strum_macros::EnumIter;\nuse super::cluster;\n\n#[derive(Clone, Deserialize, Serialize, PartialEq, EnumIter, Debug, Eq, PartialOrd, Ord, Hash)]\npub enum JobState {\n    Unknown,\n    Waiting,\n    Hold,\n    ToLaunch,\n    ToError,\n    ToAckReservation,\n    Launching,\n    Running,\n    Suspended,\n    Resuming,\n    Finishing,\n    Terminated,\n    Error,\n}\n\nimpl fmt::Display for JobState {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter\u003c'_\u003e) -\u003e fmt::Result {\n        match self {\n            JobState::Unknown =\u003e write!(f, \"Unknown\"),\n            JobState::Waiting =\u003e write!(f, \"Waiting\"),\n            JobState::Hold =\u003e write!(f, \"Hold\"),\n            JobState::ToLaunch =\u003e write!(f, \"ToLaunch\"),\n            JobState::ToError =\u003e write!(f, \"ToError\"),\n            JobState::ToAckReservation =\u003e write!(f, \"ToAckReservation\"),\n            JobState::Launching =\u003e write!(f, \"Launching\"),\n            JobState::Running =\u003e write!(f, \"Running\"),\n            JobState::Suspended =\u003e write!(f, \"Suspended\"),\n            JobState::Resuming =\u003e write!(f, \"Resuming\"),\n            JobState::Finishing =\u003e write!(f, \"Finishing\"),\n            JobState::Terminated =\u003e write!(f, \"Terminated\"),\n            JobState::Error =\u003e write!(f, \"Error\"),\n        }\n    }\n}\n\nimpl JobState {\n    pub fn get_label(\u0026self) -\u003e String {\n        match self {\n            JobState::Unknown =\u003e t!(\"app.job_state.unknown\").to_string(),\n            JobState::Waiting =\u003e t!(\"app.job_state.waiting\").to_string(),\n            JobState::Hold =\u003e t!(\"app.job_state.hold\").to_string(),\n            JobState::ToLaunch =\u003e t!(\"app.job_state.to_launch\").to_string(),\n            JobState::ToError =\u003e t!(\"app.job_state.to_error\").to_string(),\n            JobState::ToAckReservation =\u003e t!(\"app.job_state.to_ack_reservation\").to_string(),\n            JobState::Launching =\u003e t!(\"app.job_state.launching\").to_string(),\n            JobState::Running =\u003e t!(\"app.job_state.running\").to_string(),\n            JobState::Suspended =\u003e t!(\"app.job_state.suspended\").to_string(),\n            JobState::Resuming =\u003e t!(\"app.job_state.resuming\").to_string(),\n            JobState::Finishing =\u003e t!(\"app.job_state.finishing\").to_string(),\n            JobState::Terminated =\u003e t!(\"app.job_state.terminated\").to_string(),\n            JobState::Error =\u003e t!(\"app.job_state.error\").to_string(),\n        }\n    }\n\n    pub fn get_color(\u0026self) -\u003e (egui::Color32, egui::Color32) {\n        match self {\n            JobState::Unknown =\u003e (\n                egui::Color32::from_rgb(200, 200, 200), // Neutral Gray\n                egui::Color32::from_rgb(120, 120, 120), // Darker Gray\n            ),\n            JobState::Waiting =\u003e (\n                egui::Color32::from_rgb(135, 206, 250), // SkyBlue\n                egui::Color32::from_rgb(30, 144, 255),  // DodgerBlue\n            ),\n            JobState::Hold =\u003e (\n                egui::Color32::from_rgb(255, 236, 179), // Light Amber\n                egui::Color32::from_rgb(255, 193, 7),   // Amber\n            ),\n            JobState::ToLaunch =\u003e (\n                egui::Color32::from_rgb(178, 235, 242), // LightCyanBlue\n                egui::Color32::from_rgb(38, 198, 218),  // CyanBlue\n            ),\n            JobState::ToError =\u003e (\n                egui::Color32::from_rgb(255, 204, 203), // LightPink\n                egui::Color32::from_rgb(244, 67, 54),   // Red\n            ),\n            JobState::ToAckReservation =\u003e (\n                egui::Color32::from_rgb(224, 191, 255), // Soft Purple\n                egui::Color32::from_rgb(156, 39, 176),  // Purple\n            ),\n            JobState::Launching =\u003e (\n                egui::Color32::from_rgb(197, 255, 198), // MintGreen\n                egui::Color32::from_rgb(56, 142, 60),   // DarkGreen\n            ),\n            JobState::Running =\u003e (\n                egui::Color32::from_rgb(165, 214, 167), // Soft Green\n                egui::Color32::from_rgb(67, 160, 71),   // Medium Green\n            ),\n            JobState::Suspended =\u003e (\n                egui::Color32::from_rgb(255, 221, 147), // Soft Orange\n                egui::Color32::from_rgb(255, 87, 34),   // Deep Orange\n            ),\n            JobState::Resuming =\u003e (\n                egui::Color32::from_rgb(129, 199, 132), // Soft Teal Green\n                egui::Color32::from_rgb(0, 150, 136),   // Teal Green\n            ),\n            JobState::Finishing =\u003e (\n                egui::Color32::from_rgb(144, 202, 249), // Soft Blue\n                egui::Color32::from_rgb(33, 150, 243),  // Bright Blue\n            ),\n            JobState::Terminated =\u003e (\n                egui::Color32::from_rgb(200, 230, 255), // Soft End Blue\n                egui::Color32::from_rgb(13, 71, 161),   // Deep Blue\n            ),\n            JobState::Error =\u003e (\n                egui::Color32::from_rgb(255, 138, 128), // Soft Red\n                egui::Color32::from_rgb(183, 28, 28),   // Dark Red\n            ),\n        }\n    }\n}\n\nuse crate::views::components::dashboard_components::job_table_sorting::JobSortable;\n\n#[derive(Clone, Debug)]\n\npub struct Job {\n    pub id: u32,\n    pub owner: String,\n    pub state: JobState,\n    pub command: String,\n    pub walltime: i64,\n    pub message: Option\u003cString\u003e,\n    pub queue: String,\n    pub assigned_resources: Vec\u003cu32\u003e,\n    pub scheduled_start: i64,\n    pub submission_time: i64,\n    pub start_time: i64,\n    pub stop_time: i64,\n    pub exit_code: Option\u003ci32\u003e,\n    pub gantt_color: egui::Color32,\n    pub clusters: Vec\u003cString\u003e,\n    pub hosts: Vec\u003cString\u003e,\n    pub main_resource_state: ResourceState,\n}\n\nimpl JobSortable for Job {\n    fn get_id(\u0026self) -\u003e \u0026u32 {\n        \u0026self.id\n    }\n\n    fn get_owner(\u0026self) -\u003e \u0026str {\n        \u0026self.owner\n    }\n\n    fn get_state(\u0026self) -\u003e \u0026JobState {\n        \u0026self.state\n    }\n\n    fn get_start_time(\u0026self) -\u003e u64 {\n        self.start_time as u64\n    }\n\n    fn get_walltime(\u0026self) -\u003e u64 {\n        self.walltime as u64\n    }\n\n    fn get_queue(\u0026self) -\u003e \u0026str {\n        \u0026self.queue\n    }\n\n    fn get_command(\u0026self) -\u003e \u0026str {\n        \u0026self.command\n    }\n\n    fn get_message(\u0026self) -\u003e Option\u003c\u0026str\u003e {\n        self.message.as_deref()\n    }\n\n    fn get_submission_time(\u0026self) -\u003e u64 {\n        self.submission_time as u64\n    }\n\n    fn get_scheduled_start(\u0026self) -\u003e u64 {\n        self.scheduled_start as u64\n    }\n\n    fn get_stop_time(\u0026self) -\u003e u64 {\n        self.stop_time as u64\n    }\n\n    fn get_exit_code(\u0026self) -\u003e \u0026Option\u003ci32\u003e {\n        \u0026self.exit_code\n    }\n\n    fn get_clusters(\u0026self) -\u003e \u0026Vec\u003cString\u003e {\n        \u0026self.clusters\n    }\n\n    fn get_end_date(\u0026self) -\u003e i64 {\n        if self.stop_time \u003e 0 {\n            self.stop_time\n        } else {\n            self.start_time + self.walltime\n        }\n    }\n}\n\nimpl Job {\n    pub fn _display(\u0026self) {\n        println!(\"Job ID: {}\", self.id);\n        println!(\"Owner: {}\", self.owner);\n        println!(\"State: {}\", self.state);\n        println!(\"Command: {}\", self.command);\n        println!(\"Walltime: {}\", self.walltime);\n        println!(\"Message: {:?}\", self.message);\n        println!(\"Queue: {}\", self.queue);\n        println!(\"Assigned Resources: {:?}\", self.assigned_resources);\n        println!(\"Scheduled Start: {:?}\", self.scheduled_start);\n        println!(\"Submission Time: {}\", self.submission_time);\n        println!(\"Start Time: {}\", self.start_time);\n        println!(\"Stop Time: {}\", self.stop_time);\n        println!(\"Exit Code: {:?}\", self.exit_code);\n        println!(\"Gant Color: {:?}\", self.gantt_color);\n        println!(\"Cluster: {:?}\", self.clusters);\n        println!(\"Host: {:?}\", self.hosts);\n    }\n\n    // Based on gantt color return a tuple of two colors (the second one is darker)\n    pub fn get_gantt_color(\u0026self) -\u003e (egui::Color32, egui::Color32) {\n        let r = self.gantt_color.r() as f32;\n        let g = self.gantt_color.g() as f32;\n        let b = self.gantt_color.b() as f32;\n\n        let darker = |c: f32| -\u003e u8 {\n            let value = (c * 0.8) as u8;\n            if value \u003e 0 {\n                value\n            } else {\n                1\n            }\n        };\n\n        (\n            egui::Color32::from_rgb(r as u8, g as u8, b as u8),\n            egui::Color32::from_rgb(darker(r), darker(g), darker(b)),\n        )\n    }\n\n    pub fn update_majority_resource_state(\u0026mut self, clusters: \u0026Vec\u003ccluster::Cluster\u003e) {\n        let mut dead_count = 0;\n        let mut alive_count = 0;\n        let mut absent_count = 0;\n\n        for cluster in clusters {\n            for host in \u0026cluster.hosts {\n                for cpu in \u0026host.cpus {\n                    for resource in \u0026cpu.resources {\n                        if self.assigned_resources.contains(\u0026resource.id) {\n                            match resource.state {\n                                ResourceState::Dead =\u003e dead_count += 1,\n                                ResourceState::Alive =\u003e alive_count += 1,\n                                ResourceState::Absent =\u003e absent_count += 1,\n                                _ =\u003e (),\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        self.main_resource_state = if dead_count \u003e= alive_count \u0026\u0026 dead_count \u003e= absent_count {\n            ResourceState::Dead\n        } else if absent_count \u003e= dead_count \u0026\u0026 absent_count \u003e= alive_count {\n            ResourceState::Absent\n        } else if alive_count \u003e dead_count \u0026\u0026 alive_count \u003e absent_count {\n            ResourceState::Alive\n        } else {\n            ResourceState::Unknown\n        };\n    }\n}","traces":[{"line":25,"address":[5488560],"length":1,"stats":{"Line":0}},{"line":26,"address":[5488587],"length":1,"stats":{"Line":0}},{"line":27,"address":[5488618],"length":1,"stats":{"Line":0}},{"line":28,"address":[5488661],"length":1,"stats":{"Line":0}},{"line":29,"address":[5488704],"length":1,"stats":{"Line":0}},{"line":30,"address":[5488747],"length":1,"stats":{"Line":0}},{"line":31,"address":[5488796],"length":1,"stats":{"Line":0}},{"line":32,"address":[5488845],"length":1,"stats":{"Line":0}},{"line":33,"address":[5488894],"length":1,"stats":{"Line":0}},{"line":34,"address":[5488943],"length":1,"stats":{"Line":0}},{"line":35,"address":[5488992],"length":1,"stats":{"Line":0}},{"line":36,"address":[5489041],"length":1,"stats":{"Line":0}},{"line":37,"address":[5489090],"length":1,"stats":{"Line":0}},{"line":38,"address":[5489136],"length":1,"stats":{"Line":0}},{"line":39,"address":[5489182],"length":1,"stats":{"Line":0}},{"line":45,"address":[5489248,5491267,5491312],"length":1,"stats":{"Line":0}},{"line":46,"address":[5489279],"length":1,"stats":{"Line":0}},{"line":47,"address":[5490749,5489420,5491276],"length":1,"stats":{"Line":0}},{"line":48,"address":[5491325,5489526],"length":1,"stats":{"Line":0}},{"line":49,"address":[5489632,5491863],"length":1,"stats":{"Line":0}},{"line":50,"address":[5489738,5492404],"length":1,"stats":{"Line":0}},{"line":51,"address":[5492945,5489844],"length":1,"stats":{"Line":0}},{"line":52,"address":[5493486,5489950],"length":1,"stats":{"Line":0}},{"line":53,"address":[5490050,5494021],"length":1,"stats":{"Line":0}},{"line":54,"address":[5490150,5494556],"length":1,"stats":{"Line":0}},{"line":55,"address":[5495091,5490250],"length":1,"stats":{"Line":0}},{"line":56,"address":[5490350,5495626],"length":1,"stats":{"Line":0}},{"line":57,"address":[5496161,5490450],"length":1,"stats":{"Line":0}},{"line":58,"address":[5496696,5490550],"length":1,"stats":{"Line":0}},{"line":59,"address":[5497231,5490650],"length":1,"stats":{"Line":0}},{"line":63,"address":[5497776],"length":1,"stats":{"Line":0}},{"line":64,"address":[5497788],"length":1,"stats":{"Line":0}},{"line":65,"address":[5497881],"length":1,"stats":{"Line":0}},{"line":66,"address":[5497817],"length":1,"stats":{"Line":0}},{"line":67,"address":[5497849],"length":1,"stats":{"Line":0}},{"line":69,"address":[5497978],"length":1,"stats":{"Line":0}},{"line":70,"address":[5497902],"length":1,"stats":{"Line":0}},{"line":71,"address":[5497940],"length":1,"stats":{"Line":0}},{"line":73,"address":[5498075],"length":1,"stats":{"Line":0}},{"line":74,"address":[5497999],"length":1,"stats":{"Line":0}},{"line":75,"address":[5498037],"length":1,"stats":{"Line":0}},{"line":77,"address":[5498172],"length":1,"stats":{"Line":0}},{"line":78,"address":[5498096],"length":1,"stats":{"Line":0}},{"line":79,"address":[5498134],"length":1,"stats":{"Line":0}},{"line":81,"address":[5498269],"length":1,"stats":{"Line":0}},{"line":82,"address":[5498193],"length":1,"stats":{"Line":0}},{"line":83,"address":[5498231],"length":1,"stats":{"Line":0}},{"line":85,"address":[5498366],"length":1,"stats":{"Line":0}},{"line":86,"address":[5498290],"length":1,"stats":{"Line":0}},{"line":87,"address":[5498328],"length":1,"stats":{"Line":0}},{"line":89,"address":[5498463],"length":1,"stats":{"Line":0}},{"line":90,"address":[5498387],"length":1,"stats":{"Line":0}},{"line":91,"address":[5498425],"length":1,"stats":{"Line":0}},{"line":93,"address":[5498560],"length":1,"stats":{"Line":0}},{"line":94,"address":[5498484],"length":1,"stats":{"Line":0}},{"line":95,"address":[5498522],"length":1,"stats":{"Line":0}},{"line":97,"address":[5498657],"length":1,"stats":{"Line":0}},{"line":98,"address":[5498581],"length":1,"stats":{"Line":0}},{"line":99,"address":[5498619],"length":1,"stats":{"Line":0}},{"line":101,"address":[5498751],"length":1,"stats":{"Line":0}},{"line":102,"address":[5498678],"length":1,"stats":{"Line":0}},{"line":103,"address":[5498716],"length":1,"stats":{"Line":0}},{"line":105,"address":[5498848],"length":1,"stats":{"Line":0}},{"line":106,"address":[5498772],"length":1,"stats":{"Line":0}},{"line":107,"address":[5498810],"length":1,"stats":{"Line":0}},{"line":109,"address":[5498945],"length":1,"stats":{"Line":0}},{"line":110,"address":[5498869],"length":1,"stats":{"Line":0}},{"line":111,"address":[5498907],"length":1,"stats":{"Line":0}},{"line":113,"address":[5499036],"length":1,"stats":{"Line":0}},{"line":114,"address":[5498963],"length":1,"stats":{"Line":0}},{"line":115,"address":[5499001],"length":1,"stats":{"Line":0}},{"line":146,"address":[5499072],"length":1,"stats":{"Line":0}},{"line":147,"address":[5499080],"length":1,"stats":{"Line":0}},{"line":150,"address":[5499088],"length":1,"stats":{"Line":0}},{"line":151,"address":[5499093],"length":1,"stats":{"Line":0}},{"line":154,"address":[5499104],"length":1,"stats":{"Line":0}},{"line":155,"address":[5499112],"length":1,"stats":{"Line":0}},{"line":158,"address":[5499120],"length":1,"stats":{"Line":0}},{"line":159,"address":[5499125],"length":1,"stats":{"Line":0}},{"line":162,"address":[5499136],"length":1,"stats":{"Line":0}},{"line":163,"address":[5499141],"length":1,"stats":{"Line":0}},{"line":166,"address":[5499152],"length":1,"stats":{"Line":0}},{"line":167,"address":[5499157],"length":1,"stats":{"Line":0}},{"line":170,"address":[5499168],"length":1,"stats":{"Line":0}},{"line":171,"address":[5499173],"length":1,"stats":{"Line":0}},{"line":174,"address":[5499184],"length":1,"stats":{"Line":0}},{"line":175,"address":[5499189],"length":1,"stats":{"Line":0}},{"line":178,"address":[5499216],"length":1,"stats":{"Line":0}},{"line":179,"address":[5499221],"length":1,"stats":{"Line":0}},{"line":182,"address":[5499232],"length":1,"stats":{"Line":0}},{"line":183,"address":[5499237],"length":1,"stats":{"Line":0}},{"line":186,"address":[5499248],"length":1,"stats":{"Line":0}},{"line":187,"address":[5499253],"length":1,"stats":{"Line":0}},{"line":190,"address":[5499264],"length":1,"stats":{"Line":0}},{"line":191,"address":[5499272],"length":1,"stats":{"Line":0}},{"line":194,"address":[5499280],"length":1,"stats":{"Line":0}},{"line":195,"address":[5499288],"length":1,"stats":{"Line":0}},{"line":198,"address":[5499296],"length":1,"stats":{"Line":1}},{"line":199,"address":[5499380,5499310,5499368],"length":1,"stats":{"Line":2}},{"line":200,"address":[5499356],"length":1,"stats":{"Line":0}},{"line":202,"address":[5499325,5499382,5499375],"length":1,"stats":{"Line":2}},{"line":208,"address":[5499408],"length":1,"stats":{"Line":0}},{"line":209,"address":[5499428,5499515],"length":1,"stats":{"Line":0}},{"line":210,"address":[5499660],"length":1,"stats":{"Line":0}},{"line":211,"address":[5499827,5499734],"length":1,"stats":{"Line":0}},{"line":212,"address":[5499997,5499907],"length":1,"stats":{"Line":0}},{"line":213,"address":[5500077,5500170],"length":1,"stats":{"Line":0}},{"line":214,"address":[5500250,5500343],"length":1,"stats":{"Line":0}},{"line":215,"address":[5500513,5500423],"length":1,"stats":{"Line":0}},{"line":216,"address":[5500683,5500593],"length":1,"stats":{"Line":0}},{"line":217,"address":[5500856,5500763],"length":1,"stats":{"Line":0}},{"line":218,"address":[5500936,5501029],"length":1,"stats":{"Line":0}},{"line":219,"address":[5501109,5501202],"length":1,"stats":{"Line":0}},{"line":220,"address":[5501282,5501375],"length":1,"stats":{"Line":0}},{"line":221,"address":[5501548,5501455],"length":1,"stats":{"Line":0}},{"line":222,"address":[5501721,5501628],"length":1,"stats":{"Line":0}},{"line":223,"address":[5501891,5501801],"length":1,"stats":{"Line":0}},{"line":224,"address":[5502061,5501971],"length":1,"stats":{"Line":0}},{"line":228,"address":[5502144],"length":1,"stats":{"Line":0}},{"line":229,"address":[5502153],"length":1,"stats":{"Line":0}},{"line":230,"address":[5502192],"length":1,"stats":{"Line":0}},{"line":231,"address":[5502220],"length":1,"stats":{"Line":0}},{"line":233,"address":[5276240],"length":1,"stats":{"Line":0}},{"line":234,"address":[5276251],"length":1,"stats":{"Line":0}},{"line":235,"address":[5276294,5276303],"length":1,"stats":{"Line":0}},{"line":236,"address":[5276309],"length":1,"stats":{"Line":0}},{"line":238,"address":[5276298],"length":1,"stats":{"Line":0}},{"line":243,"address":[5502259],"length":1,"stats":{"Line":0}},{"line":244,"address":[5502361],"length":1,"stats":{"Line":0}},{"line":248,"address":[5502480],"length":1,"stats":{"Line":0}},{"line":249,"address":[5502521],"length":1,"stats":{"Line":0}},{"line":250,"address":[5502529],"length":1,"stats":{"Line":0}},{"line":251,"address":[5502537],"length":1,"stats":{"Line":0}},{"line":253,"address":[5502545,5502613],"length":1,"stats":{"Line":0}},{"line":254,"address":[5502626,5502765],"length":1,"stats":{"Line":0}},{"line":255,"address":[5502823],"length":1,"stats":{"Line":0}},{"line":256,"address":[5502905],"length":1,"stats":{"Line":0}},{"line":257,"address":[5503010],"length":1,"stats":{"Line":0}},{"line":258,"address":[5503048],"length":1,"stats":{"Line":0}},{"line":259,"address":[5503080,5503135],"length":1,"stats":{"Line":0}},{"line":260,"address":[5503097,5503164],"length":1,"stats":{"Line":0}},{"line":261,"address":[5503114,5503193],"length":1,"stats":{"Line":0}},{"line":270,"address":[5502677,5502601,5502744,5502659],"length":1,"stats":{"Line":0}},{"line":271,"address":[5502669],"length":1,"stats":{"Line":0}},{"line":272,"address":[5502691,5502647,5502709],"length":1,"stats":{"Line":0}},{"line":273,"address":[5502701],"length":1,"stats":{"Line":0}},{"line":274,"address":[5502679,5502719],"length":1,"stats":{"Line":0}},{"line":275,"address":[5502731],"length":1,"stats":{"Line":0}},{"line":277,"address":[5502711],"length":1,"stats":{"Line":0}}],"covered":3,"coverable":149},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","data_structure","mod.rs"],"content":"// Module : data_structure\n\npub mod application_context;\npub mod job;\npub mod filters;\npub mod application_options;\npub mod resource;\npub mod cluster;\npub mod host;\npub mod cpu;\npub mod strata;","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","data_structure","resource.rs"],"content":"use std::fmt::Display;\n#[derive(Debug, PartialEq, Copy)]\n\npub enum ResourceState {\n    Dead,\n    Alive,\n    Absent,\n    Unknown,\n}\n\nimpl Clone for ResourceState {\n    fn clone(\u0026self) -\u003e Self {\n        match self {\n            ResourceState::Dead =\u003e ResourceState::Dead,\n            ResourceState::Alive =\u003e ResourceState::Alive,\n            ResourceState::Absent =\u003e ResourceState::Absent,\n            ResourceState::Unknown =\u003e ResourceState::Unknown,\n        }\n    }\n}\n\n#[derive(Clone, Debug, PartialEq)]\npub struct Resource {\n    pub id: u32,\n    pub state: ResourceState,\n    pub thread_count: i32,\n}\n\nimpl Display for ResourceState {\n    fn fmt(\u0026self, f: \u0026mut std::fmt::Formatter\u003c'_\u003e) -\u003e std::fmt::Result {\n        match self {\n            ResourceState::Dead =\u003e write!(f, \"Dead\"),\n            ResourceState::Alive =\u003e write!(f, \"Alive\"),\n            ResourceState::Absent =\u003e write!(f, \"Absent\"),\n            ResourceState::Unknown =\u003e write!(f, \"Unknown\"),\n        }\n    }\n}\n","traces":[{"line":12,"address":[5028512],"length":1,"stats":{"Line":1}},{"line":13,"address":[5028517],"length":1,"stats":{"Line":2}},{"line":14,"address":[5028548],"length":1,"stats":{"Line":1}},{"line":15,"address":[5028555],"length":1,"stats":{"Line":2}},{"line":16,"address":[5028562],"length":1,"stats":{"Line":0}},{"line":17,"address":[5028569],"length":1,"stats":{"Line":0}},{"line":30,"address":[5028592],"length":1,"stats":{"Line":0}},{"line":31,"address":[5028619],"length":1,"stats":{"Line":0}},{"line":32,"address":[5028650],"length":1,"stats":{"Line":0}},{"line":33,"address":[5028690],"length":1,"stats":{"Line":0}},{"line":34,"address":[5028730],"length":1,"stats":{"Line":0}},{"line":35,"address":[5028770],"length":1,"stats":{"Line":0}}],"covered":4,"coverable":12},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","data_structure","strata.rs"],"content":"use serde::{Deserialize, Serialize};\n\n#[derive(Debug, Serialize, Deserialize, Clone)]\npub struct Strata {\n    #[serde(default)]\n    pub state_num: Option\u003ci32\u003e,\n    #[serde(default)]\n    pub thread_count: Option\u003ci32\u003e,\n    #[serde(default)]\n    pub rconsole: Option\u003cString\u003e,\n    #[serde(default)]\n    pub memnode: Option\u003ci64\u003e,\n    #[serde(default)]\n    pub cluster: Option\u003cString\u003e,\n    #[serde(default)]\n    pub desktop_computing: Option\u003cString\u003e,\n    #[serde(default)]\n    pub memcore: Option\u003ci32\u003e,\n    #[serde(default)]\n    pub production: Option\u003cString\u003e,\n    #[serde(default)]\n    pub eth_rate: Option\u003ci32\u003e,\n    #[serde(default)]\n    pub chassis: Option\u003cString\u003e,\n    #[serde(default)]\n    pub memcpu: Option\u003ci64\u003e,\n    #[serde(default)]\n    pub cluster_priority: Option\u003ci32\u003e,\n    #[serde(default)]\n    pub gpu_model: Option\u003cString\u003e,\n    #[serde(default)]\n    pub gpu_compute_capability: Option\u003cString\u003e,\n    #[serde(default)]\n    pub core_count: Option\u003ci32\u003e,\n    #[serde(default)]\n    pub next_state: Option\u003cString\u003e,\n    #[serde(default)]\n    pub cpufreq: Option\u003cString\u003e,\n    #[serde(default)]\n    pub comment: Option\u003cString\u003e,\n    #[serde(default)]\n    pub core: Option\u003ci32\u003e,\n    #[serde(default)]\n    pub cpuset: Option\u003cString\u003e,\n    #[serde(default)]\n    pub suspended_jobs: Option\u003cString\u003e,\n    #[serde(default)]\n    pub state: Option\u003cString\u003e,\n    #[serde(default)]\n    pub ip: Option\u003cString\u003e,\n    #[serde(default)]\n    pub network_address: Option\u003cString\u003e,\n    #[serde(default)]\n    pub resource_id: Option\u003cu32\u003e,\n    #[serde(default)]\n    pub host: Option\u003cString\u003e,\n    #[serde(default)]\n    pub nodemodel: Option\u003cString\u003e,\n    #[serde(default)]\n    pub cputype: Option\u003cString\u003e,\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","mod.rs"],"content":"// src/models/mod.rs\n\npub mod data_structure;\npub mod utils;\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","utils","date_converter.rs"],"content":"use chrono::{DateTime, Local};\n\npub fn format_timestamp(ts: i64) -\u003e String {\n    if ts == 0 {\n        \"N/A\".to_string()\n    } else {\n        if let Some(dt) = DateTime::from_timestamp(ts, 0) {\n            dt.with_timezone(\u0026Local)\n            .format(\"%Y-%m-%d %H:%M:%S %Z\")\n            .to_string()\n        } else {\n            \"Invalid timestamp\".to_string()\n        }\n    }\n}","traces":[{"line":3,"address":[4758688,4758977],"length":1,"stats":{"Line":0}},{"line":4,"address":[4758718],"length":1,"stats":{"Line":0}},{"line":5,"address":[4758729],"length":1,"stats":{"Line":0}},{"line":7,"address":[4758802,4758753],"length":1,"stats":{"Line":0}},{"line":8,"address":[4758820],"length":1,"stats":{"Line":0}},{"line":12,"address":[4758906],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":6},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","utils","mocker.rs"],"content":"use chrono::Local;\n\nuse crate::models::data_structure::{\n    job::{Job, JobState},\n    resource::ResourceState,\n    strata::Strata,\n};\n\n// Mocking Job\nfn mock_job(id: u32) -\u003e Job {\n    // Possible owner list\n    let owners = vec![\"alice\", \"bob\", \"charlie\", \"david\", \"eva\"];\n\n    // List of possible commands and their queues associated\n    let commands = vec![\n        (\"python3 train_model.py\", \"gpu\"),\n        (\"make test\", \"test\"),\n        (\"mpirun -np 4 simulation\", \"cpu\"),\n        (\"jupyter notebook\", \"interactive\"),\n        (\"gcc -O3 project.c\", \"compile\"),\n    ];\n\n    // Possible clusters list\n    let clusters_list = vec![\"cluster1\", \"cluster2\", \"cluster3\"];\n\n    // Possible hosts list\n    let hosts_list = vec![\"host1\", \"host2\", \"host3\", \"host4\"];\n\n    // Function to generate a random number\n    let random_index = |max: usize| -\u003e usize {\n        let mut buf = [0u8; 8];\n        getrandom::getrandom(\u0026mut buf).unwrap();\n        let value = u64::from_le_bytes(buf);\n        (value % max as u64) as usize\n    };\n\n    let random_float = || -\u003e f32 {\n        let mut buf = [0u8; 8];\n        getrandom::getrandom(\u0026mut buf).unwrap();\n        let value = u64::from_le_bytes(buf);\n        (value as f32) / (u64::MAX as f32)\n    };\n\n    // Coherent timestamp generation\n    let now = Local::now().timestamp();\n    let submission_time = now - (random_index(86400) as i64);\n    let scheduled_start = submission_time + (random_index(3300) as i64 + 300);\n    let start_time = if random_float() \u003c 0.7 {\n        scheduled_start\n    } else {\n        0\n    };\n    let walltime = random_index(5400) as i64 + 1800;\n    let stop_time = if start_time \u003e 0 \u0026\u0026 random_float() \u003c 0.3 {\n        start_time + walltime\n    } else {\n        0\n    };\n\n    // Randomly select the state based on the context\n    let state = if stop_time \u003e 0 {\n        JobState::Terminated\n    } else if start_time \u003e 0 {\n        let states = vec![JobState::Running, JobState::Suspended, JobState::Finishing];\n        states[random_index(states.len())].clone()\n    } else if scheduled_start \u003e now {\n        let states = vec![JobState::Waiting, JobState::Hold];\n        states[random_index(states.len())].clone()\n    } else {\n        let states = vec![JobState::ToLaunch, JobState::Launching, JobState::Waiting];\n        states[random_index(states.len())].clone()\n    };\n\n    // Command and queue selection\n    let (command, queue) = commands[random_index(commands.len())];\n\n    // Assigned ressources generation\n    let num_resources = random_index(7) + 1;\n    let assigned_resources = if start_time \u003e 0 {\n        let mut resources = Vec::new();\n        while resources.len() \u003c num_resources {\n            let resource = (random_index(20) + 1) as u32;\n            if !resources.contains(\u0026resource) {\n                resources.push(resource);\n            }\n        }\n        resources\n    } else {\n        vec![]\n    };\n\n    // Generate message based on the state\n    let message = match state {\n        JobState::Error =\u003e Some(\"Erreur d'exécution\".to_string()),\n        JobState::Hold =\u003e Some(\"En attente de ressources\".to_string()),\n        JobState::Suspended =\u003e Some(\"Suspendu par l'administrateur\".to_string()),\n        _ =\u003e None,\n    };\n\n    // Generate random clusters\n    let num_clusters = random_index(2) + 1;\n    let clusters = clusters_list\n        .iter()\n        .take(num_clusters)\n        .map(|\u0026c| c.to_string())\n        .collect();\n\n    // Generate random hosts\n    let num_hosts = random_index(3) + 1;\n    let hosts = hosts_list\n        .iter()\n        .take(num_hosts)\n        .map(|\u0026h| h.to_string())\n        .collect();\n\n    // Generate gantt color\n    let gantt_color = egui::Color32::from_rgb(\n        random_index(255) as u8,\n        random_index(255) as u8,\n        random_index(255) as u8,\n    );\n\n    // Generate main resource state\n    let main_resource_state = match random_index(3) {\n        0 =\u003e ResourceState::Alive,\n        1 =\u003e ResourceState::Dead,\n        _ =\u003e ResourceState::Absent,\n    };\n\n    Job {\n        id,\n        owner: owners[random_index(owners.len())].to_string(),\n        state,\n        command: command.to_string(),\n        walltime,\n        message,\n        queue: queue.to_string(),\n        assigned_resources,\n        scheduled_start,\n        submission_time,\n        start_time,\n        stop_time,\n        exit_code: if stop_time \u003e 0 {\n            Some((random_index(3) as i32) - 1)\n        } else {\n            None\n        },\n        gantt_color,\n        clusters,\n        hosts,\n        main_resource_state,\n    }\n}\n\npub fn mock_jobs() -\u003e Vec\u003cJob\u003e {\n    (1..=50).map(|id| mock_job(id)).collect()\n}\n\nfn mock_strata(id: u32) -\u003e Strata {\n    // Possible cluster list\n    let clusters_list = vec![\"cluster1\", \"cluster2\", \"cluster3\", \"cluster4\", \"cluster5\"];\n\n    // Possible hosts list\n    let hosts_list = vec![\"host1\", \"host2\", \"host3\", \"host4\", \"host5\", \"host6\"];\n\n    // Possible states list\n    let states_list = vec![\"Dead\", \"Alive\", \"Absent\", \"Unknown\"];\n\n    // Possible comments list\n    let comments_list = vec![\n        \"No issues\",\n        \"Minor issues\",\n        \"Major issues\",\n        \"Critical issues\",\n    ];\n\n    // Function to generate a random number\n    let random_index = |max: usize| -\u003e usize {\n        let mut buf = [0u8; 8];\n        getrandom::getrandom(\u0026mut buf).unwrap();\n        let value = u64::from_le_bytes(buf);\n        (value % max as u64) as usize\n    };\n\n    let random_float = || -\u003e f32 {\n        let mut buf = [0u8; 8];\n        getrandom::getrandom(\u0026mut buf).unwrap();\n        let value = u64::from_le_bytes(buf);\n        (value as f32) / (u64::MAX as f32)\n    };\n\n    Strata {\n        state_num: Some(random_index(10) as i32),\n        thread_count: Some(random_index(16) as i32),\n        rconsole: Some(format!(\"rconsole{}\", random_index(100))),\n        memnode: Some(random_index(64000) as i64),\n        cluster: Some(clusters_list[random_index(clusters_list.len())].to_string()),\n        desktop_computing: Some(\n            if random_index(2) == 0 {\n                \"enabled\"\n            } else {\n                \"disabled\"\n            }\n            .to_string(),\n        ),\n        memcore: Some(random_index(128) as i32),\n        production: Some(\n            if random_index(2) == 0 {\n                \"production\"\n            } else {\n                \"development\"\n            }\n            .to_string(),\n        ),\n        eth_rate: Some(random_index(1000) as i32),\n        chassis: Some(format!(\"chassis{}\", random_index(10))),\n        memcpu: Some(random_index(64000) as i64),\n        cluster_priority: Some(random_index(10) as i32),\n        gpu_model: Some(format!(\"gpu_model{}\", random_index(10))),\n        gpu_compute_capability: Some(format!(\"gpu_compute_capability{}\", random_index(10))),\n        core_count: Some(random_index(64) as i32),\n        next_state: Some(format!(\"next_state{}\", random_index(10))),\n        cpufreq: Some(format!(\"cpufreq{}\", random_index(10))),\n        comment: Some(comments_list[random_index(comments_list.len())].to_string()),\n        core: Some(random_index(64) as i32),\n        cpuset: Some(format!(\"cpuset{}\", random_index(10))),\n        suspended_jobs: Some(format!(\"suspended_jobs{}\", random_index(10))),\n        state: Some(states_list[random_index(states_list.len())].to_string()),\n        ip: Some(format!(\n            \"192.168.{}.{}\",\n            random_index(256),\n            random_index(256)\n        )),\n        network_address: Some(format!(\"network_address{}\", random_index(100))),\n        resource_id: Some(id),\n        host: Some(hosts_list[random_index(hosts_list.len())].to_string()),\n        nodemodel: Some(format!(\"nodemodel{}\", random_index(10))),\n        cputype: Some(format!(\"cputype{}\", random_index(10))),\n    }\n}\n\npub fn mock_stratas() -\u003e Vec\u003cStrata\u003e {\n    (1..=50).map(|id| mock_strata(id)).collect()\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","utils","mod.rs"],"content":"// Module: utils\n\npub mod date_converter;\npub mod parser;\npub mod updater;\npub mod utils;\npub mod secret;\n\n#[cfg(target_arch = \"wasm32\")]\npub mod mocker;","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","utils","parser.rs"],"content":"use crate::models::data_structure::job::{Job, JobState};\nuse crate::models::data_structure::resource::ResourceState;\nuse crate::models::data_structure::strata::Strata;\nuse crate::models::utils::utils::convert_id_to_color;\nuse serde_json::Value;\nuse std::fs::File;\nuse std::io::Read;\nuse std::process::Command;\n\n#[cfg(not(target_arch = \"wasm32\"))]\nuse chrono::{DateTime, Local};\n\n/**\n * Test SSH connection to the specified host\n */\npub fn test_connection(host: \u0026str) -\u003e Result\u003c(), String\u003e {\n    let ssh_test = Command::new(\"ssh\")\n        .args([host, \"true\"])\n        .status();\n\n    match ssh_test {\n        Ok(status) if status.success() =\u003e Ok(()),\n        Ok(status) =\u003e Err(format!(\"SSH command failed with status: {}\", status)),\n        Err(e) =\u003e Err(format!(\"Connection test failed: {}\", e)),\n    }\n}\n\n/**\n * Get the jobs for the specified period\n * Command: oarstat -J -g \"YYYY-MM-DD hh:mm:ss, YYYY-MM-DD hh:mm:ss\" \u003e /tmp/data.json\n * @param start_date: Start date of the period\n * @param end_date: End date of the period\n * @return List of jobs\n */\n#[cfg(not(target_arch = \"wasm32\"))]\npub fn get_current_jobs_for_period(start_date: DateTime\u003cLocal\u003e, end_date: DateTime\u003cLocal\u003e) -\u003e bool {\n    // Add a margin to the interval\n    let interval = end_date - start_date;\n    let margin = interval.num_seconds() * 30 / 100;\n    let start_date = start_date - chrono::Duration::seconds(margin);\n    let end_date = end_date + chrono::Duration::seconds(margin);\n\n    // Test connection first\n    if test_connection(\"grenoble.g5k\") != Ok(()) {\n        return false;\n    }\n\n    // Check if Data folder exists\n    let data_folder = std::path::Path::new(\"./data\");\n    if !data_folder.exists() {\n        std::fs::create_dir(data_folder).expect(\"Unable to create data folder\");\n    }\n\n    // Execute SSH command to generate JSON file and redirect output\n    let ssh_status = Command::new(\"ssh\")\n        .args([\n            \"grenoble.g5k\",\n            \u0026format!(\n                \"oarstat -J -g \\\"{}, {}\\\"\",\n                start_date.format(\"%Y-%m-%d %H:%M:%S\"),\n                end_date.format(\"%Y-%m-%d %H:%M:%S\")\n            ),\n        ])\n        .output()\n        .and_then(|output| std::fs::write(\"./data/data.json\", output.stdout));\n\n    if let Err(e) = ssh_status {\n        println!(\"Failed to execute SSH command: {}\", e);\n        return false;\n    }\n\n    true\n}\n\npub fn get_jobs_from_json(file_path: \u0026str) -\u003e Vec\u003cJob\u003e {\n    let file_res = File::open(file_path);\n\n    let mut file = match file_res {\n        Ok(file) =\u003e file,\n        Err(error) =\u003e {\n            println!(\"Unable to open file: {}\", error);\n            return Vec::new();\n        }\n    };\n\n    let mut data = String::new();\n    file.read_to_string(\u0026mut data)\n        .expect(\"Unable to read string\");\n\n    let json: Value = serde_json::from_str(\u0026data).expect(\"Unable to parse JSON\");\n    let mut jobs = Vec::new();\n\n    if let Some(jobs_section) = json.get(\"jobs\") {\n        if let Value::Object(map) = jobs_section {\n            for (_, value) in map {\n                jobs.push(from_json_value(\u0026value));\n            }\n        }\n    }\n\n    jobs\n}\n\npub fn get_resources_from_json(file_path: \u0026str) -\u003e Vec\u003cStrata\u003e {\n    // Open the file\n    let file_res = File::open(file_path);\n\n    let mut file = match file_res {\n        Ok(file) =\u003e file,\n        Err(error) =\u003e {\n            println!(\"Impossible d'ouvrir le fichier: {}\", error);\n            return Vec::new();\n        }\n    };\n\n    // Read the file content\n    let mut data = String::new();\n    if let Err(e) = file.read_to_string(\u0026mut data) {\n        println!(\"Impossible de lire le fichier: {}\", e);\n        return Vec::new();\n    }\n\n    // Parse the JSON content\n    let json: Value = match serde_json::from_str(\u0026data) {\n        Ok(v) =\u003e v,\n        Err(e) =\u003e {\n            println!(\"Impossible de parser le JSON: {}\", e);\n            return Vec::new();\n        }\n    };\n\n    let mut resources = Vec::new();\n\n    // Get the resources array\n    if let Some(resources_array) = json.get(\"resources\").and_then(|v| v.as_array()) {\n        for resource_value in resources_array {\n            // Try to parse the resource\n            if let Ok(resource) = serde_json::from_value::\u003cStrata\u003e(resource_value.clone()) {\n                resources.push(resource);\n            }\n        }\n    }\n\n    resources\n}\n\npub fn parse_state_from_json(json_str: \u0026str) -\u003e Result\u003cJobState, serde_json::Error\u003e {\n    serde_json::from_str(json_str)\n}\n\nfn from_json_value(json: \u0026Value) -\u003e Job {\n    Job {\n        id: json[\"id\"]\n            .as_str()\n            .unwrap_or(\"0\")\n            .parse::\u003cu32\u003e()\n            .unwrap_or(0),\n        owner: json[\"owner\"].as_str().unwrap_or(\"unknown\").to_string(),\n        state: parse_state_from_json(\u0026format!(\n            \"\\\"{}\\\"\",\n            json[\"state\"].as_str().unwrap_or(\"unknown\")\n        ))\n        .unwrap_or(JobState::Unknown),\n        command: json[\"command\"].as_str().unwrap_or(\"\").to_string(),\n        walltime: json[\"walltime\"].as_i64().unwrap_or(0) as i64,\n        message: json[\"message\"].as_str().map(|s| s.to_string()),\n        queue: json[\"queue\"].as_str().unwrap_or(\"default\").to_string(),\n        assigned_resources: json[\"resource_id\"]\n            .as_array()\n            .unwrap_or(\u0026Vec::new())\n            .iter()\n            .filter_map(|v| v.as_str().and_then(|s| s.parse::\u003cu32\u003e().ok()))\n            .collect(),\n        scheduled_start: json[\"start_time\"].as_i64().unwrap_or(0),\n        start_time: json[\"start_time\"].as_i64().unwrap_or(0),\n        stop_time: json[\"stop_time\"].as_i64().unwrap_or(0),\n        submission_time: json[\"submission_time\"].as_i64().unwrap_or(0),\n        exit_code: json[\"exit_code\"].as_i64().map(|n| n as i32),\n        gantt_color: convert_id_to_color(\n            json[\"id\"]\n                .as_str()\n                .unwrap_or(\"0\")\n                .parse::\u003cu32\u003e()\n                .unwrap_or(0),\n        ),\n        clusters: Vec::new(),\n        hosts: Vec::new(),\n        main_resource_state: ResourceState::Unknown,\n    }\n}\n","traces":[{"line":16,"address":[5654551,5653504,5654532],"length":1,"stats":{"Line":6}},{"line":17,"address":[5653644,5653547,5653714],"length":1,"stats":{"Line":18}},{"line":18,"address":[5653601],"length":1,"stats":{"Line":6}},{"line":21,"address":[5653795],"length":1,"stats":{"Line":0}},{"line":22,"address":[5653972,5653805,5654106],"length":1,"stats":{"Line":0}},{"line":23,"address":[5653978,5654135,5654261],"length":1,"stats":{"Line":0}},{"line":24,"address":[5653832,5654317,5654487],"length":1,"stats":{"Line":0}},{"line":36,"address":[5656677,5654592,5656696],"length":1,"stats":{"Line":6}},{"line":38,"address":[5654609],"length":1,"stats":{"Line":6}},{"line":39,"address":[5655009,5654699],"length":1,"stats":{"Line":6}},{"line":40,"address":[5654837],"length":1,"stats":{"Line":6}},{"line":41,"address":[5654899],"length":1,"stats":{"Line":6}},{"line":44,"address":[5655149,5654956,5655033],"length":1,"stats":{"Line":6}},{"line":45,"address":[5655162],"length":1,"stats":{"Line":0}},{"line":49,"address":[5655088],"length":1,"stats":{"Line":0}},{"line":50,"address":[5655138],"length":1,"stats":{"Line":0}},{"line":51,"address":[5655182],"length":1,"stats":{"Line":0}},{"line":55,"address":[5655216,5656081],"length":1,"stats":{"Line":0}},{"line":56,"address":[5656038],"length":1,"stats":{"Line":0}},{"line":58,"address":[5655444,5655631,5655967],"length":1,"stats":{"Line":0}},{"line":60,"address":[5655245],"length":1,"stats":{"Line":0}},{"line":61,"address":[5655476],"length":1,"stats":{"Line":0}},{"line":65,"address":[5655280,5655984,5656170],"length":1,"stats":{"Line":0}},{"line":67,"address":[5656317],"length":1,"stats":{"Line":0}},{"line":68,"address":[5656562],"length":1,"stats":{"Line":0}},{"line":69,"address":[5656631],"length":1,"stats":{"Line":0}},{"line":72,"address":[5656486],"length":1,"stats":{"Line":0}},{"line":75,"address":[5657698,5656736],"length":1,"stats":{"Line":3}},{"line":76,"address":[5656769],"length":1,"stats":{"Line":3}},{"line":78,"address":[5656780],"length":1,"stats":{"Line":3}},{"line":79,"address":[5656790],"length":1,"stats":{"Line":3}},{"line":80,"address":[5656823],"length":1,"stats":{"Line":0}},{"line":81,"address":[5657758],"length":1,"stats":{"Line":0}},{"line":82,"address":[5657826],"length":1,"stats":{"Line":0}},{"line":86,"address":[5656813],"length":1,"stats":{"Line":3}},{"line":87,"address":[5656980,5657065],"length":1,"stats":{"Line":6}},{"line":90,"address":[5657099],"length":1,"stats":{"Line":3}},{"line":91,"address":[5657195],"length":1,"stats":{"Line":3}},{"line":93,"address":[5657246,5657324],"length":1,"stats":{"Line":6}},{"line":94,"address":[5657382,5657446],"length":1,"stats":{"Line":6}},{"line":95,"address":[5657466],"length":1,"stats":{"Line":3}},{"line":96,"address":[5657597],"length":1,"stats":{"Line":2}},{"line":101,"address":[5657396],"length":1,"stats":{"Line":1}},{"line":104,"address":[5658540,5659719,5657856],"length":1,"stats":{"Line":1}},{"line":106,"address":[5657889],"length":1,"stats":{"Line":1}},{"line":108,"address":[5657908],"length":1,"stats":{"Line":1}},{"line":109,"address":[5657918],"length":1,"stats":{"Line":1}},{"line":110,"address":[5657951],"length":1,"stats":{"Line":0}},{"line":111,"address":[5659770],"length":1,"stats":{"Line":0}},{"line":112,"address":[5659844],"length":1,"stats":{"Line":0}},{"line":117,"address":[5657941],"length":1,"stats":{"Line":1}},{"line":118,"address":[5658193,5658108],"length":1,"stats":{"Line":2}},{"line":119,"address":[5658418],"length":1,"stats":{"Line":0}},{"line":120,"address":[5658492],"length":1,"stats":{"Line":0}},{"line":124,"address":[5658557],"length":1,"stats":{"Line":1}},{"line":125,"address":[5658628],"length":1,"stats":{"Line":1}},{"line":126,"address":[5658710],"length":1,"stats":{"Line":0}},{"line":127,"address":[5659600],"length":1,"stats":{"Line":0}},{"line":128,"address":[5659674],"length":1,"stats":{"Line":0}},{"line":132,"address":[5658700],"length":1,"stats":{"Line":1}},{"line":135,"address":[4712368,4712377],"length":1,"stats":{"Line":4}},{"line":136,"address":[5659033,5659114,5659493],"length":1,"stats":{"Line":3}},{"line":138,"address":[5659224],"length":1,"stats":{"Line":1}},{"line":139,"address":[5659334,5659438],"length":1,"stats":{"Line":2}},{"line":144,"address":[5659059],"length":1,"stats":{"Line":1}},{"line":147,"address":[5659872],"length":1,"stats":{"Line":2}},{"line":148,"address":[5659893],"length":1,"stats":{"Line":1}},{"line":151,"address":[5663239,5663151,5659920],"length":1,"stats":{"Line":2}},{"line":153,"address":[5659971],"length":1,"stats":{"Line":2}},{"line":158,"address":[5660135],"length":1,"stats":{"Line":2}},{"line":159,"address":[5660765,5660545,5660780,5660674],"length":1,"stats":{"Line":8}},{"line":164,"address":[5660818],"length":1,"stats":{"Line":2}},{"line":165,"address":[5661062,5660976],"length":1,"stats":{"Line":4}},{"line":166,"address":[4712400,4712422],"length":1,"stats":{"Line":2}},{"line":167,"address":[5661244,5661330],"length":1,"stats":{"Line":4}},{"line":168,"address":[5661537,5661451,5661658,5661591],"length":1,"stats":{"Line":8}},{"line":174,"address":[5661892,5661806],"length":1,"stats":{"Line":4}},{"line":175,"address":[5661966],"length":1,"stats":{"Line":2}},{"line":176,"address":[5662082],"length":1,"stats":{"Line":2}},{"line":177,"address":[5662198],"length":1,"stats":{"Line":2}},{"line":178,"address":[4712592,4712597],"length":1,"stats":{"Line":2}},{"line":179,"address":[5662601],"length":1,"stats":{"Line":2}},{"line":186,"address":[5662637],"length":1,"stats":{"Line":2}},{"line":187,"address":[5662656],"length":1,"stats":{"Line":2}}],"covered":55,"coverable":84},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","utils","secret.rs"],"content":"use chrono::{Duration, Utc};\nuse egui;\nuse rand::Rng;\n\npub struct Secret {\n    konami_sequence: Vec\u003cegui::Key\u003e,\n    is_konami_active: bool,\n    konami_start_time: Option\u003cchrono::DateTime\u003cUtc\u003e\u003e,\n    snake_game: Option\u003cSnakeGame\u003e,\n    last_update: chrono::DateTime\u003cUtc\u003e,\n    show_game: bool,\n}\n\nimpl Default for Secret {\n    fn default() -\u003e Self {\n        Secret {\n            konami_sequence: Vec::new(),\n            is_konami_active: false,\n            konami_start_time: None,\n            snake_game: None,\n            last_update: Utc::now(),\n            show_game: false,\n        }\n    }\n}\n\nconst KONAMI_CODE: [egui::Key; 10] = [\n    egui::Key::ArrowUp,\n    egui::Key::ArrowUp,\n    egui::Key::ArrowDown,\n    egui::Key::ArrowDown,\n    egui::Key::ArrowLeft,\n    egui::Key::ArrowRight,\n    egui::Key::ArrowLeft,\n    egui::Key::ArrowRight,\n    egui::Key::B,\n    egui::Key::A,\n];\n\nimpl Secret {\n    pub fn update(\u0026mut self, ctx: \u0026egui::Context) {\n        self.random_secret(ctx);\n\n        if self.is_konami_active {\n            let now = Utc::now();\n            if now.signed_duration_since(self.last_update) \u003e= Duration::milliseconds(500) {\n                if let Some(game) = \u0026mut self.snake_game {\n                    game.update();\n                    self.last_update = now;\n                }\n            }\n        }\n    }\n\n    pub fn random_secret(\u0026mut self, ctx: \u0026egui::Context) {\n        let input_state = ctx.input(|i| i.raw.clone());\n\n        for event in \u0026input_state.events {\n            if let egui::Event::Key { key, pressed, .. } = event {\n                if *pressed {\n                    self.konami_sequence.push(*key);\n\n                    if self.konami_sequence.len() \u003e KONAMI_CODE.len() {\n                        self.konami_sequence.remove(0);\n                    }\n\n                    if self.konami_sequence.len() == KONAMI_CODE.len()\n                        \u0026\u0026 self.konami_sequence == KONAMI_CODE\n                    {\n                        self.is_konami_active = true;\n                        self.snake_game = Some(SnakeGame::new());\n                        self.konami_start_time = Some(Utc::now());\n                        self.show_game = true;\n                    }\n                }\n            }\n        }\n\n        if let Some(game) = \u0026mut self.snake_game {\n            if ctx.input(|i| i.key_pressed(egui::Key::ArrowLeft)) {\n                game.direction = (-1, 0);\n            } else if ctx.input(|i| i.key_pressed(egui::Key::ArrowRight)) {\n                game.direction = (1, 0);\n            } else if ctx.input(|i| i.key_pressed(egui::Key::ArrowUp)) {\n                game.direction = (0, -1);\n            } else if ctx.input(|i| i.key_pressed(egui::Key::ArrowDown)) {\n                game.direction = (0, 1);\n            }\n        }\n    }\n\n    pub fn draw_snake_game(\u0026mut self, ctx: \u0026egui::Context) {\n        if self.is_konami_active \u0026\u0026 self.show_game {\n            egui::Window::new(\"Secret Snake Game\")\n                .collapsible(false)\n                .show(ctx, |ui| {\n                    if ui.button(\"Close\").clicked() {\n                        self.show_game = false;\n                    }\n                    if let Some(game) = \u0026self.snake_game {\n                        let (rect, _) =\n                            ui.allocate_exact_size(egui::vec2(200.0, 200.0), egui::Sense::hover());\n                        let painter = ui.painter();\n\n                        painter.rect_filled(rect, 0.0, egui::Color32::BLACK);\n\n                        for \u0026(x, y) in \u0026game.snake {\n                            painter.rect_filled(\n                                egui::Rect::from_min_size(\n                                    rect.min + egui::vec2(x as f32 * 10.0, y as f32 * 10.0),\n                                    egui::vec2(10.0, 10.0),\n                                ),\n                                0.0,\n                                egui::Color32::GREEN,\n                            );\n                        }\n\n                        painter.rect_filled(\n                            egui::Rect::from_min_size(\n                                rect.min\n                                    + egui::vec2(\n                                        game.food.0 as f32 * 10.0,\n                                        game.food.1 as f32 * 10.0,\n                                    ),\n                                egui::vec2(10.0, 10.0),\n                            ),\n                            0.0,\n                            egui::Color32::RED,\n                        );\n\n                        ui.label(format!(\"Score: {}\", game.score));\n\n                        if game.game_over {\n                            ui.label(\"Game Over!\");\n                        }\n                    }\n                });\n        }\n    }\n}\n\nstruct SnakeGame {\n    snake: Vec\u003c(i32, i32)\u003e,\n    food: (i32, i32),\n    direction: (i32, i32),\n    game_over: bool,\n    score: i32,\n}\n\nimpl SnakeGame {\n    fn new() -\u003e Self {\n        let mut game = SnakeGame {\n            snake: vec![(5, 5)],\n            food: (0, 0),\n            direction: (1, 0),\n            game_over: false,\n            score: 0,\n        };\n        game.generate_new_food();\n        game\n    }\n\n    fn update(\u0026mut self) {\n        if self.game_over {\n            return;\n        }\n\n        let head = self.snake[0];\n        let new_head = (\n            (head.0 + self.direction.0 + 20) % 20,\n            (head.1 + self.direction.1 + 20) % 20,\n        );\n\n        if self.snake.contains(\u0026new_head) {\n            self.game_over = true;\n            return;\n        }\n\n        self.snake.insert(0, new_head);\n\n        if new_head == self.food {\n            self.score += 1;\n            self.generate_new_food();\n        } else {\n            self.snake.pop();\n        }\n    }\n\n    fn generate_new_food(\u0026mut self) {\n        let mut rng = rand::thread_rng();\n        loop {\n            let new_food = (rng.gen_range(0..20), rng.gen_range(0..20));\n            if !self.snake.contains(\u0026new_food) {\n                self.food = new_food;\n                break;\n            }\n        }\n    }\n}\n","traces":[{"line":15,"address":[4925552,4925778,4925757],"length":1,"stats":{"Line":0}},{"line":17,"address":[4925573],"length":1,"stats":{"Line":0}},{"line":21,"address":[4925601],"length":1,"stats":{"Line":0}},{"line":41,"address":[4925792],"length":1,"stats":{"Line":0}},{"line":42,"address":[4925811],"length":1,"stats":{"Line":0}},{"line":44,"address":[4925821],"length":1,"stats":{"Line":0}},{"line":45,"address":[4925832],"length":1,"stats":{"Line":0}},{"line":46,"address":[4925848],"length":1,"stats":{"Line":0}},{"line":47,"address":[4925952,4926033],"length":1,"stats":{"Line":0}},{"line":48,"address":[4926007],"length":1,"stats":{"Line":0}},{"line":49,"address":[4926017],"length":1,"stats":{"Line":0}},{"line":55,"address":[4926048,4927055],"length":1,"stats":{"Line":0}},{"line":56,"address":[4371248,4371232],"length":1,"stats":{"Line":0}},{"line":58,"address":[4926171,4926303,4926091],"length":1,"stats":{"Line":0}},{"line":59,"address":[4926324,4926594],"length":1,"stats":{"Line":0}},{"line":60,"address":[4926629],"length":1,"stats":{"Line":0}},{"line":61,"address":[4926649],"length":1,"stats":{"Line":0}},{"line":63,"address":[4926671],"length":1,"stats":{"Line":0}},{"line":64,"address":[4926716],"length":1,"stats":{"Line":0}},{"line":67,"address":[4926699,4926741,4927050],"length":1,"stats":{"Line":0}},{"line":68,"address":[4926756],"length":1,"stats":{"Line":0}},{"line":70,"address":[4926792],"length":1,"stats":{"Line":0}},{"line":71,"address":[4926804],"length":1,"stats":{"Line":0}},{"line":72,"address":[4926970],"length":1,"stats":{"Line":0}},{"line":73,"address":[4927046],"length":1,"stats":{"Line":0}},{"line":79,"address":[4926370,4926258],"length":1,"stats":{"Line":0}},{"line":80,"address":[4371273,4371264],"length":1,"stats":{"Line":0}},{"line":81,"address":[4926439],"length":1,"stats":{"Line":0}},{"line":82,"address":[4371305,4371296],"length":1,"stats":{"Line":0}},{"line":83,"address":[4926486],"length":1,"stats":{"Line":0}},{"line":84,"address":[4371337,4371328],"length":1,"stats":{"Line":0}},{"line":85,"address":[4926533],"length":1,"stats":{"Line":0}},{"line":86,"address":[4371369,4371360],"length":1,"stats":{"Line":0}},{"line":87,"address":[4926570],"length":1,"stats":{"Line":0}},{"line":92,"address":[4927088],"length":1,"stats":{"Line":0}},{"line":93,"address":[4927121,4927140],"length":1,"stats":{"Line":0}},{"line":94,"address":[4927146,4927215],"length":1,"stats":{"Line":0}},{"line":96,"address":[4371392,4373123],"length":1,"stats":{"Line":0}},{"line":97,"address":[4371435,4371549],"length":1,"stats":{"Line":0}},{"line":98,"address":[4371624],"length":1,"stats":{"Line":0}},{"line":100,"address":[4371632],"length":1,"stats":{"Line":0}},{"line":101,"address":[4371872],"length":1,"stats":{"Line":0}},{"line":102,"address":[4371731,4371904],"length":1,"stats":{"Line":0}},{"line":103,"address":[4371922],"length":1,"stats":{"Line":0}},{"line":105,"address":[4371943],"length":1,"stats":{"Line":0}},{"line":107,"address":[4372031,4372726,4372062],"length":1,"stats":{"Line":0}},{"line":108,"address":[4373017],"length":1,"stats":{"Line":0}},{"line":110,"address":[4372761],"length":1,"stats":{"Line":0}},{"line":118,"address":[4372384],"length":1,"stats":{"Line":0}},{"line":120,"address":[4372126],"length":1,"stats":{"Line":0}},{"line":122,"address":[4372144],"length":1,"stats":{"Line":0}},{"line":123,"address":[4372161],"length":1,"stats":{"Line":0}},{"line":131,"address":[4372440,4372530,4372665],"length":1,"stats":{"Line":0}},{"line":133,"address":[4372706],"length":1,"stats":{"Line":0}},{"line":134,"address":[4373078],"length":1,"stats":{"Line":0}},{"line":151,"address":[4927486,4927248],"length":1,"stats":{"Line":0}},{"line":153,"address":[4927262,4927407],"length":1,"stats":{"Line":0}},{"line":159,"address":[4927395],"length":1,"stats":{"Line":0}},{"line":160,"address":[4927461],"length":1,"stats":{"Line":0}},{"line":163,"address":[4927520],"length":1,"stats":{"Line":0}},{"line":164,"address":[4927534],"length":1,"stats":{"Line":0}},{"line":168,"address":[4927545],"length":1,"stats":{"Line":0}},{"line":169,"address":[4927821],"length":1,"stats":{"Line":0}},{"line":170,"address":[4927714,4927609,4927586],"length":1,"stats":{"Line":0}},{"line":171,"address":[4927700,4927734,4927856],"length":1,"stats":{"Line":0}},{"line":174,"address":[4927829],"length":1,"stats":{"Line":0}},{"line":175,"address":[4927932],"length":1,"stats":{"Line":0}},{"line":179,"address":[4927877],"length":1,"stats":{"Line":0}},{"line":181,"address":[4927906],"length":1,"stats":{"Line":0}},{"line":182,"address":[4927966,4928002],"length":1,"stats":{"Line":0}},{"line":183,"address":[4927992],"length":1,"stats":{"Line":0}},{"line":185,"address":[4927946],"length":1,"stats":{"Line":0}},{"line":189,"address":[4928032,4928251],"length":1,"stats":{"Line":0}},{"line":190,"address":[4928046],"length":1,"stats":{"Line":0}},{"line":192,"address":[4928069,4928127],"length":1,"stats":{"Line":0}},{"line":193,"address":[4928159],"length":1,"stats":{"Line":0}},{"line":194,"address":[4928221],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":77},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","utils","updater.rs"],"content":"use chrono::{DateTime, Local};\n\nuse std::time::Duration;\n\nuse crate::models::data_structure::application_context::ApplicationContext;\n\n#[cfg(target_arch = \"wasm32\")]\nuse super::mocker::{mock_jobs,mock_stratas};\n\n\n#[cfg(not(target_arch = \"wasm32\"))]\nuse crate::models::utils::parser::get_current_jobs_for_period;\n\n#[cfg(not(target_arch = \"wasm32\"))]\nuse std::thread;\n\nuse super::parser::{get_jobs_from_json, get_resources_from_json};\n\nimpl ApplicationContext {\n    pub fn update_refresh_rate(\u0026mut self, new_rate: u64) {\n        let mut rate = self.refresh_rate.lock().unwrap();\n        *rate = new_rate;\n    }\n\n    #[allow(dead_code)]\n    pub fn update_start_date(\u0026mut self, new_start: DateTime\u003cLocal\u003e) {\n        let mut start = self.start_date.lock().unwrap();\n        *start = new_start;\n    }\n\n    #[allow(dead_code)]\n    pub fn update_end_date(\u0026mut self, new_end: DateTime\u003cLocal\u003e) {\n        let mut end = self.end_date.lock().unwrap();\n        *end = new_end;\n    }\n\n    #[allow(dead_code)]\n    pub fn get_start_date(\u0026self) -\u003e DateTime\u003cLocal\u003e {\n        *self.start_date.lock().unwrap()\n    }\n\n    #[allow(dead_code)]\n    pub fn get_end_date(\u0026self) -\u003e DateTime\u003cLocal\u003e {\n        *self.end_date.lock().unwrap()\n    }\n\n    pub fn set_localdate(\u0026mut self, start: DateTime\u003cLocal\u003e, end: DateTime\u003cLocal\u003e) {\n        let mut start_date = self.start_date.lock().unwrap(); // Lock acquired\n        let mut end_date = self.end_date.lock().unwrap(); // Lock acquired\n        *start_date = start; // Modify data\n        *end_date = end; // Modify data\n    } // Both locks are automatically released when MutexGuards go out of scope\n\n    pub fn instant_update(\u0026mut self) {\n        let is_refreshing = self.is_refreshing.clone();\n\n        // if the app is already refreshing, return\n        if *is_refreshing.lock().unwrap() {\n            return;\n        }\n\n        // set refreshing to true\n        *is_refreshing.lock().unwrap() = true;\n\n        // get dates\n        let start = *self.start_date.lock().unwrap();\n        let end = *self.end_date.lock().unwrap();\n\n        let jobs_sender = self.jobs_sender.clone();\n        let resources_sender = self.resources_sender.clone();\n        // Get the data in a different thread\n        #[cfg(not(target_arch = \"wasm32\"))]\n        {\n            let is_refreshing_clone = is_refreshing.clone();\n            thread::spawn(move || {\n                let res = get_current_jobs_for_period(start, end);\n                if res {\n                    let jobs = get_jobs_from_json(\"./data/data.json\");\n                    let resources = get_resources_from_json(\"./data/data.json\");\n                    jobs_sender.send(jobs).unwrap_or_else(|e| {\n                        println!(\"Error while sending jobs: {}\", e);\n                    });\n\n                    resources_sender.send(resources).unwrap_or_else(|e| {\n                        println!(\"Error while sending resources: {}\", e);\n                    });\n                }\n\n                // set refreshing to false\n                *is_refreshing_clone.lock().unwrap() = false;\n            });\n        }\n\n        #[cfg(target_arch = \"wasm32\")]\n        {\n            // LOG DEBUG\n            // log::info!(\"instant_update: start_date: {:?}, end_date: {:?}\", start, end);\n            let jobs = mock_jobs();\n            jobs_sender.send(jobs).unwrap();\n\n            let strata = mock_stratas();\n            resources_sender.send(strata).unwrap();\n            \n            // set refreshing to false\n            *is_refreshing.lock().unwrap() = false;\n        }\n    }\n\n    // In a different thread, update the data every refresh_rate seconds\n    pub fn update_periodically(\u0026mut self) {\n        let rate = *self.refresh_rate.lock().unwrap();\n        let jobs_sender = self.jobs_sender.clone();\n        let resources_sender = self.resources_sender.clone();\n        let is_refreshing = self.is_refreshing.clone();\n        let start_date = self.start_date.clone();\n        let end_date = self.end_date.clone();\n\n        // Get the data in a different thread\n        #[cfg(not(target_arch = \"wasm32\"))]\n        {\n            thread::spawn(move || {\n                loop {\n                    // Check if already refreshing\n                    if *is_refreshing.lock().unwrap() {\n                        thread::sleep(Duration::from_secs(rate));\n                        continue;\n                    }\n\n                    // Set refreshing to true\n                    *is_refreshing.lock().unwrap() = true;\n\n                    let start;\n                    let end;\n\n                    {\n                        start = *start_date.lock().unwrap();\n                        end = *end_date.lock().unwrap();\n                    }\n\n                    let res = get_current_jobs_for_period(start, end);\n                    if res {\n                        let jobs = get_jobs_from_json(\"./data/data.json\");\n                        let resources = get_resources_from_json(\"./data/data.json\");\n\n                        jobs_sender.send(jobs).unwrap_or_else(|e| {\n                            println!(\"Error while sending jobs: {}\", e);\n                        });\n\n                        resources_sender.send(resources).unwrap_or_else(|e| {\n                            println!(\"Error while sending resources: {}\", e);\n                        });\n                    }\n\n                    // Set refreshing to false\n                    *is_refreshing.lock().unwrap() = false;\n\n                    thread::sleep(Duration::from_secs(rate));\n                }\n            });\n        }\n\n        #[cfg(target_arch = \"wasm32\")]\n        {\n            // LOG DEBUG\n            // log::info!(\"update_periodically: start_date: {:?}, end_date: {:?}\", start, end);\n            let jobs = mock_jobs();\n            jobs_sender.send(jobs).unwrap();\n\n            let strata = mock_stratas();\n            resources_sender.send(strata).unwrap();\n        }\n    }\n\n    #[allow(dead_code)]\n    pub fn update_period(\u0026mut self, start_date: DateTime\u003cLocal\u003e, end_date: DateTime\u003cLocal\u003e) {\n        self.update_start_date(start_date);\n        self.update_end_date(end_date);\n        self.is_loading = true;\n\n        // Clone necessary value\n        let sender = self.jobs_sender.clone();\n        let start = start_date;\n        let end = end_date;\n\n        // Get the data in a different thread\n        #[cfg(not(target_arch = \"wasm32\"))]\n        {\n            thread::spawn(move || {\n                let res = get_current_jobs_for_period(start, end);\n                if res {\n                    let jobs = get_jobs_from_json(\"./data/data.json\");\n                    sender.send(jobs).unwrap();\n                }\n            });\n        }\n\n        #[cfg(target_arch = \"wasm32\")]\n        {\n            // LOG DEBUG\n            // log::info!(\"update_period: start_date: {:?}, end_date: {:?}\", start, end);\n            let jobs = mock_jobs();\n            sender.send(jobs).unwrap();\n        }\n    }\n}\n","traces":[{"line":20,"address":[4833248,4833531],"length":1,"stats":{"Line":0}},{"line":21,"address":[4833446,4833270],"length":1,"stats":{"Line":0}},{"line":22,"address":[4833460,4833510],"length":1,"stats":{"Line":0}},{"line":26,"address":[4833849,4833568],"length":1,"stats":{"Line":0}},{"line":27,"address":[4833755,4833585],"length":1,"stats":{"Line":0}},{"line":28,"address":[4833817,4833769],"length":1,"stats":{"Line":0}},{"line":32,"address":[4833888,4834169],"length":1,"stats":{"Line":0}},{"line":33,"address":[4834075,4833905],"length":1,"stats":{"Line":0}},{"line":34,"address":[4834089,4834137],"length":1,"stats":{"Line":0}},{"line":38,"address":[4834208,4834521],"length":1,"stats":{"Line":0}},{"line":39,"address":[4834422,4834484,4834243],"length":1,"stats":{"Line":0}},{"line":43,"address":[4834560,4834873],"length":1,"stats":{"Line":0}},{"line":44,"address":[4834595,4834836,4834774],"length":1,"stats":{"Line":0}},{"line":47,"address":[4834912,4835632],"length":1,"stats":{"Line":0}},{"line":48,"address":[4834942,4835151],"length":1,"stats":{"Line":0}},{"line":49,"address":[4835473,4835160,4835249],"length":1,"stats":{"Line":0}},{"line":50,"address":[4835495,4835557],"length":1,"stats":{"Line":0}},{"line":51,"address":[4835571],"length":1,"stats":{"Line":0}},{"line":52,"address":[4835607,4835515,4835184],"length":1,"stats":{"Line":0}},{"line":54,"address":[4837979,4835664,4837937],"length":1,"stats":{"Line":0}},{"line":55,"address":[4835687],"length":1,"stats":{"Line":0}},{"line":58,"address":[4835928,4835731,4836186],"length":1,"stats":{"Line":0}},{"line":63,"address":[4836611,4836336],"length":1,"stats":{"Line":0}},{"line":66,"address":[4836731,4836993],"length":1,"stats":{"Line":0}},{"line":67,"address":[4837371,4837109],"length":1,"stats":{"Line":0}},{"line":69,"address":[4837487],"length":1,"stats":{"Line":0}},{"line":70,"address":[4837550,4837625],"length":1,"stats":{"Line":0}},{"line":74,"address":[4837657,4837712],"length":1,"stats":{"Line":0}},{"line":75,"address":[5132080,5132966,5133008],"length":1,"stats":{"Line":0}},{"line":76,"address":[5132208,5132092],"length":1,"stats":{"Line":0}},{"line":77,"address":[5132588,5132220],"length":1,"stats":{"Line":0}},{"line":78,"address":[5132248],"length":1,"stats":{"Line":0}},{"line":79,"address":[5132280,5132353],"length":1,"stats":{"Line":0}},{"line":80,"address":[5132456,5132361,5133218,5133024],"length":1,"stats":{"Line":0}},{"line":81,"address":[5133146],"length":1,"stats":{"Line":0}},{"line":84,"address":[5133442,5133248,5132483],"length":1,"stats":{"Line":0}},{"line":85,"address":[5133370],"length":1,"stats":{"Line":0}},{"line":90,"address":[5132598,5132838,5132229],"length":1,"stats":{"Line":0}},{"line":110,"address":[4838000,4839015,4838970],"length":1,"stats":{"Line":6}},{"line":111,"address":[4838020,4838250],"length":1,"stats":{"Line":12}},{"line":112,"address":[4838349],"length":1,"stats":{"Line":6}},{"line":113,"address":[4838384,4838464],"length":1,"stats":{"Line":12}},{"line":114,"address":[4838488,4838555],"length":1,"stats":{"Line":12}},{"line":115,"address":[4838638,4838571],"length":1,"stats":{"Line":12}},{"line":116,"address":[4838654,4838721],"length":1,"stats":{"Line":12}},{"line":121,"address":[5133472,5136196,5136294],"length":1,"stats":{"Line":12}},{"line":122,"address":[5133487],"length":1,"stats":{"Line":6}},{"line":124,"address":[5133511,5133744,5134002],"length":1,"stats":{"Line":18}},{"line":125,"address":[5136249],"length":1,"stats":{"Line":0}},{"line":130,"address":[5134437,5134152],"length":1,"stats":{"Line":12}},{"line":136,"address":[5134563,5134828],"length":1,"stats":{"Line":12}},{"line":137,"address":[5134944,5135203],"length":1,"stats":{"Line":12}},{"line":140,"address":[5135311],"length":1,"stats":{"Line":6}},{"line":141,"address":[5135775,5135386],"length":1,"stats":{"Line":0}},{"line":142,"address":[5135417],"length":1,"stats":{"Line":0}},{"line":143,"address":[5135528,5135452],"length":1,"stats":{"Line":0}},{"line":145,"address":[5135640,5135536,5136514,5136320],"length":1,"stats":{"Line":0}},{"line":146,"address":[5136442],"length":1,"stats":{"Line":0}},{"line":149,"address":[5136544,5136738,5135670],"length":1,"stats":{"Line":0}},{"line":150,"address":[5136666],"length":1,"stats":{"Line":0}},{"line":155,"address":[5136031,5135398,5135785],"length":1,"stats":{"Line":0}},{"line":157,"address":[5136151],"length":1,"stats":{"Line":0}},{"line":175,"address":[4839056],"length":1,"stats":{"Line":0}},{"line":176,"address":[4839083],"length":1,"stats":{"Line":0}},{"line":177,"address":[4839123],"length":1,"stats":{"Line":0}},{"line":178,"address":[4839164],"length":1,"stats":{"Line":0}},{"line":181,"address":[4839171],"length":1,"stats":{"Line":0}},{"line":188,"address":[4839206],"length":1,"stats":{"Line":0}},{"line":189,"address":[5136875,5136780],"length":1,"stats":{"Line":0}},{"line":190,"address":[5136887],"length":1,"stats":{"Line":0}},{"line":191,"address":[5136909],"length":1,"stats":{"Line":0}},{"line":192,"address":[5137128,5136948],"length":1,"stats":{"Line":0}}],"covered":14,"coverable":72},{"path":["/","home","amaury","Documents","info5","0projet","app","src","models","utils","utils.rs"],"content":"use crate::models::data_structure::cluster::Cluster;\nuse crate::models::data_structure::cpu::Cpu;\nuse crate::models::data_structure::host::Host;\nuse crate::models::data_structure::job::Job;\nuse crate::models::data_structure::resource::ResourceState;\nuse std::hash::DefaultHasher;\nuse std::hash::Hash;\n//\nuse std::cmp::Ordering;\nuse std::hash::Hasher;\n\n// Convert a job ID to a color (using hash)\npub fn convert_id_to_color(id: u32) -\u003e egui::Color32 {\n    let mut hasher = DefaultHasher::new();\n    id.hash(\u0026mut hasher);\n    let hash = hasher.finish();\n\n    let r = ((hash \u003e\u003e 16) \u0026 0xFF) as u8;\n    let g = ((hash \u003e\u003e 8) \u0026 0xFF) as u8;\n    let b = (hash \u0026 0xFF) as u8;\n\n    egui::Color32::from_rgb(r, g, b)\n}\n\n/// Extracts all host names from a collection of clusters\npub fn get_all_hosts(clusters: \u0026Vec\u003cCluster\u003e) -\u003e Vec\u003cString\u003e {\n    let mut result: Vec\u003cString\u003e = Vec::new();\n\n    for cluster in clusters {\n        for host in \u0026cluster.hosts {\n            result.push(host.name.clone());\n        }\n    }\n\n    result\n}\n\npub fn cluster_contain_host(cluster: \u0026Cluster, host_name: \u0026str) -\u003e bool {\n    for host in \u0026cluster.hosts {\n        if host.name == host_name {\n            return true;\n        }\n    }\n    false\n}\n\npub fn get_cluster_from_name(clusters: \u0026Vec\u003cCluster\u003e, name: \u0026str) -\u003e Option\u003cCluster\u003e {\n    for cluster in clusters {\n        if cluster.name == name {\n            return Some(cluster.clone());\n        }\n    }\n    None\n}\n\n/// Extracts all cluster names from a collection of clusters\npub fn get_all_clusters(clusters: \u0026Vec\u003cCluster\u003e) -\u003e Vec\u003cString\u003e {\n    let mut result: Vec\u003cString\u003e = Vec::new();\n\n    for cluster in clusters {\n        result.push(cluster.name.clone());\n    }\n\n    result\n}\n\n/// Extracts all resource IDs from a collection of clusters\npub fn get_all_resources(clusters: \u0026Vec\u003cCluster\u003e) -\u003e Vec\u003cu32\u003e {\n    let mut result: Vec\u003cu32\u003e = Vec::new();\n\n    for cluster in clusters {\n        result.extend(cluster.resource_ids.iter());\n    }\n\n    result\n}\n\npub fn contains_host(cluster: \u0026Vec\u003cCluster\u003e, host_name: \u0026str) -\u003e bool {\n    for c in cluster {\n        for host in \u0026c.hosts {\n            if host.name == host_name {\n                return true;\n            }\n        }\n    }\n    false\n}\n\npub fn get_cluster_state_from_name(cluster: \u0026Vec\u003cCluster\u003e, cluster_name: \u0026String) -\u003e ResourceState {\n    for c in cluster {\n        if c.name == *cluster_name {\n            return c.state.clone();\n        }\n    }\n    ResourceState::Unknown\n}\n\npub fn get_host_state_from_name(cluster: \u0026Vec\u003cCluster\u003e, host_name: \u0026String) -\u003e ResourceState {\n    for c in cluster {\n        for host in \u0026c.hosts {\n            if host.name == *host_name {\n                return host.state.clone();\n            }\n        }\n    }\n    ResourceState::Unknown\n}\n\npub fn contains_cluster(cluster: \u0026Vec\u003cCluster\u003e, cluster_name: \u0026str) -\u003e bool {\n    for c in cluster {\n        if c.name == cluster_name {\n            return true;\n        }\n    }\n    false\n}\n\n// Compare two strings that may contain numbers (natural sort)\npub fn compare_string_with_number(a: \u0026str, b: \u0026str) -\u003e Ordering {\n    let mut strings_a: Vec\u003cString\u003e = Vec::new();\n    let mut strings_b: Vec\u003cString\u003e = Vec::new();\n    let mut int_a: Vec\u003ci32\u003e = Vec::new();\n    let mut int_b: Vec\u003ci32\u003e = Vec::new();\n    let mut order_a: Vec\u003cString\u003e = Vec::new();\n    let mut order_b: Vec\u003cString\u003e = Vec::new();\n\n    let mut curr = 0;\n\n    let mut string_count = 0;\n\n    if !a.chars().next().unwrap().is_numeric() {\n        order_a.push(\"string\".to_string());\n        strings_a.push(String::new());\n    }\n\n    for c in a.chars() {\n        if c.is_numeric() {\n            curr = curr * 10 + c.to_digit(10).unwrap() as i32;\n        } else if curr == 0 {\n            strings_a[string_count].push(c);\n        } else {\n            strings_a.push(String::new());\n            string_count += 1;\n            strings_a[string_count].push(c);\n            int_a.push(curr);\n            order_a.push(\"int\".to_string());\n            order_a.push(\"string\".to_string());\n            curr = 0;\n        }\n    }\n\n    if curr != 0 {\n        int_a.push(curr);\n        order_a.push(\"int\".to_string());\n    }\n\n    curr = 0;\n    string_count = 0;\n\n    if !b.chars().next().unwrap().is_numeric() {\n        order_b.push(\"string\".to_string());\n        strings_b.push(String::new());\n    }\n\n    for c in b.chars() {\n        if c.is_numeric() {\n            curr = curr * 10 + c.to_digit(10).unwrap() as i32;\n        } else if curr == 0 {\n            strings_b[string_count].push(c);\n        } else {\n            strings_b.push(String::new());\n            string_count += 1;\n            strings_b[string_count].push(c);\n            int_b.push(curr);\n            order_b.push(\"int\".to_string());\n            order_b.push(\"string\".to_string());\n            curr = 0;\n        }\n    }\n\n    if curr != 0 {\n        int_b.push(curr);\n        order_b.push(\"int\".to_string());\n    }\n\n    // Once the three vectors are created, we can compare them\n    // the comparison will be done in the same order as the order vector\n    let mut index_int = 0;\n    let mut index_string = 0;\n\n    for i in 0..order_a.len() {\n        if order_a[i] == \"int\" \u0026\u0026 order_b[i] == \"int\" {\n            if int_a[index_int] \u003c int_b[index_int] {\n                return Ordering::Less;\n            } else if int_a[index_int] \u003e int_b[index_int] {\n                return Ordering::Greater;\n            }\n            index_int += 1;\n        } else if order_a[i] == \"string\" \u0026\u0026 order_b[i] == \"string\" {\n            if strings_a[index_string] \u003c strings_b[index_string] {\n                return Ordering::Less;\n            } else if strings_a[index_string] \u003e strings_b[index_string] {\n                return Ordering::Greater;\n            }\n            index_string += 1;\n        } else if order_a[i] == \"int\" \u0026\u0026 order_b[i] == \"string\" {\n            return Ordering::Less;\n        } else if order_a[i] == \"string\" \u0026\u0026 order_b[i] == \"int\" {\n            return Ordering::Greater;\n        }\n    }\n\n    if order_a.len() \u003c order_b.len() {\n        return Ordering::Less;\n    } else if order_a.len() \u003e order_b.len() {\n        return Ordering::Greater;\n    }\n\n    return Ordering::Equal;\n}\n\n/* Return the name of all the clusters where the job is running\n * Used for job filtering and display in the UI\n */\npub fn get_clusters_for_job(job: \u0026Job, clusters: \u0026Vec\u003cCluster\u003e) -\u003e Vec\u003cString\u003e {\n    let mut result: Vec\u003cString\u003e = Vec::new();\n\n    for resource in \u0026job.assigned_resources {\n        for cluster in clusters {\n            if !result.contains(\u0026cluster.name) \u0026\u0026 cluster.resource_ids.contains(\u0026resource) {\n                result.push(cluster.name.clone());\n            }\n        }\n    }\n\n    result\n}\n\n/* Returns the names of all hosts where a job is running\n * Used for job filtering and display in the UI */\npub fn get_hosts_for_job(job: \u0026Job, clusters: \u0026Vec\u003cCluster\u003e) -\u003e Vec\u003cString\u003e {\n    let mut result: Vec\u003cString\u003e = Vec::new();\n\n    for resource in \u0026job.assigned_resources {\n        for cluster in clusters {\n            if cluster.resource_ids.contains(\u0026resource) {\n                for host in \u0026cluster.hosts {\n                    if !result.contains(\u0026host.name) \u0026\u0026 host.resource_ids.contains(\u0026resource) {\n                        result.push(host.name.clone());\n                    }\n                }\n            }\n        }\n    }\n\n    result\n}\n\n/*\nCreates a subset of the cluster hierarchy that only contains resources used by the job\n\nThis is used to create a view of the infrastructure specific to a job, useful for\njob details and resource utilization displays. The returned structure mirrors the\nfull cluster hierarchy but includes only the elements relevant to the job.\n */\npub fn get_tree_structure_for_job(job: \u0026Job, clusters: \u0026Vec\u003cCluster\u003e) -\u003e Vec\u003cCluster\u003e {\n    let mut result: Vec\u003cCluster\u003e = Vec::new();\n\n    for resource in \u0026job.assigned_resources {\n        for cluster in clusters {\n            if cluster.resource_ids.contains(\u0026resource) {\n                // if the cluster already exists in the result, add the resource to the resource_ids\n                if let Some(existing_cluster) = result.iter_mut().find(|c| c.name == cluster.name) {\n                    existing_cluster.resource_ids.push(*resource);\n                    // Then check if in the existing cluster the host already exists\n                    for host in \u0026cluster.hosts {\n                        if host.resource_ids.contains(\u0026resource) {\n                            if let Some(existing_host) = existing_cluster\n                                .hosts\n                                .iter_mut()\n                                .find(|h| h.name == host.name)\n                            {\n                                existing_host.resource_ids.push(*resource);\n                                // Then check if in the existing host the CPU already exists\n                                for cpu in \u0026host.cpus {\n                                    if cpu.resource_ids.contains(\u0026resource) {\n                                        if let Some(existing_cpu) = existing_host\n                                            .cpus\n                                            .iter_mut()\n                                            .find(|c| c.name == cpu.name)\n                                        {\n                                            existing_cpu.resource_ids.push(*resource);\n                                            // Then check if in the existing CPU the resource already exists\n                                            if let Some(existing_res) = existing_cpu\n                                                .resources\n                                                .iter_mut()\n                                                .find(|res| res.id == *resource)\n                                            {\n                                                existing_res.thread_count += 1;\n                                            } else {\n                                                let res = cpu\n                                                    .resources\n                                                    .iter()\n                                                    .find(|res| res.id == *resource);\n\n                                                if let Some(res) = res {\n                                                    existing_cpu.resources.push(res.clone());\n                                                }\n                                            }\n                                        } else {\n                                            let mut new_cpu = Cpu {\n                                                name: cpu.name.clone(),\n                                                resource_ids: vec![*resource],\n                                                chassis: cpu.chassis.clone(),\n                                                core_count: cpu.core_count,\n                                                cpufreq: cpu.cpufreq,\n                                                resources: Vec::new(),\n                                            };\n\n                                            let res = cpu\n                                                .resources\n                                                .iter()\n                                                .find(|res| res.id == *resource);\n\n                                            if let Some(res) = res {\n                                                new_cpu.resources.push(res.clone());\n                                            }\n\n                                            existing_host.cpus.push(new_cpu);\n                                        }\n                                    }\n                                }\n                            } else {\n                                let mut new_host = Host {\n                                    name: host.name.clone(),\n                                    resource_ids: vec![*resource],\n                                    cpus: Vec::new(),\n                                    network_address: host.network_address.clone(),\n                                    state: ResourceState::Unknown,\n                                };\n\n                                for cpu in \u0026host.cpus {\n                                    let mut new_cpu = Cpu {\n                                        name: cpu.name.clone(),\n                                        resource_ids: vec![*resource],\n                                        chassis: cpu.chassis.clone(),\n                                        core_count: cpu.core_count,\n                                        cpufreq: cpu.cpufreq,\n                                        resources: Vec::new(),\n                                    };\n\n                                    let res = cpu.resources.iter().find(|res| res.id == *resource);\n\n                                    if let Some(res) = res {\n                                        new_cpu.resources.push(res.clone());\n                                    }\n\n                                    new_host.cpus.push(new_cpu);\n                                }\n\n                                existing_cluster.hosts.push(new_host);\n                            }\n                        }\n                    }\n                } else {\n                    let new_cluster = Cluster {\n                        name: cluster.name.clone(),\n                        // new resource_ids with only the current resource\n                        resource_ids: vec![*resource],\n\n                        // for the host only keep the hosts that the job is running on\n                        hosts: cluster\n                            .hosts\n                            .iter()\n                            .filter(|host| host.resource_ids.contains(\u0026resource))\n                            .map(|host| {\n                                let mut new_host = Host {\n                                    name: host.name.clone(),\n                                    resource_ids: vec![*resource],\n                                    cpus: Vec::new(),\n                                    network_address: host.network_address.clone(),\n                                    state: ResourceState::Unknown,\n                                };\n\n                                // for the CPU only keep the CPUs that the job is running on\n                                new_host.cpus = host\n                                    .cpus\n                                    .iter()\n                                    .filter(|cpu| cpu.resource_ids.contains(\u0026resource))\n                                    .map(|cpu| {\n                                        let mut new_cpu = Cpu {\n                                            name: cpu.name.clone(),\n                                            resource_ids: vec![*resource],\n                                            chassis: cpu.chassis.clone(),\n                                            core_count: cpu.core_count,\n                                            cpufreq: cpu.cpufreq,\n                                            // get the current resource from the CPU resources and create a new vector with only that resource\n                                            resources: Vec::new(),\n                                        };\n\n                                        let res =\n                                            cpu.resources.iter().find(|res| res.id == *resource);\n\n                                        if let Some(res) = res {\n                                            new_cpu.resources.push(res.clone());\n                                        }\n\n                                        new_cpu\n                                    })\n                                    .collect();\n\n                                new_host\n                            })\n                            .collect(),\n                        state: ResourceState::Unknown,\n                    };\n\n                    result.push(new_cluster);\n                }\n            }\n        }\n    }\n    result\n}\n","traces":[{"line":13,"address":[4891136],"length":1,"stats":{"Line":1}},{"line":14,"address":[4891144],"length":1,"stats":{"Line":1}},{"line":15,"address":[4891154],"length":1,"stats":{"Line":1}},{"line":16,"address":[4891170],"length":1,"stats":{"Line":1}},{"line":18,"address":[4891185],"length":1,"stats":{"Line":1}},{"line":19,"address":[4891205],"length":1,"stats":{"Line":1}},{"line":20,"address":[4891223],"length":1,"stats":{"Line":1}},{"line":22,"address":[4891233],"length":1,"stats":{"Line":1}},{"line":26,"address":[4891280,4891701],"length":1,"stats":{"Line":1}},{"line":27,"address":[4891310],"length":1,"stats":{"Line":1}},{"line":29,"address":[4891504,4891329,4891397],"length":1,"stats":{"Line":3}},{"line":30,"address":[4891517],"length":1,"stats":{"Line":1}},{"line":31,"address":[4891646],"length":1,"stats":{"Line":1}},{"line":35,"address":[4891470],"length":1,"stats":{"Line":1}},{"line":38,"address":[4891728],"length":1,"stats":{"Line":1}},{"line":39,"address":[4891747,4891814],"length":1,"stats":{"Line":2}},{"line":40,"address":[4891824],"length":1,"stats":{"Line":1}},{"line":41,"address":[4891851],"length":1,"stats":{"Line":1}},{"line":44,"address":[4891807],"length":1,"stats":{"Line":1}},{"line":47,"address":[4891872],"length":1,"stats":{"Line":1}},{"line":48,"address":[4891996,4891920],"length":1,"stats":{"Line":2}},{"line":49,"address":[4892013],"length":1,"stats":{"Line":1}},{"line":50,"address":[4892046],"length":1,"stats":{"Line":1}},{"line":53,"address":[4891981],"length":1,"stats":{"Line":1}},{"line":57,"address":[4892361,4892080],"length":1,"stats":{"Line":1}},{"line":58,"address":[4892107],"length":1,"stats":{"Line":1}},{"line":60,"address":[4892194,4892126,4892299],"length":1,"stats":{"Line":3}},{"line":61,"address":[4892312],"length":1,"stats":{"Line":1}},{"line":64,"address":[4892265],"length":1,"stats":{"Line":1}},{"line":68,"address":[4892724,4892384],"length":1,"stats":{"Line":1}},{"line":69,"address":[4892414],"length":1,"stats":{"Line":1}},{"line":71,"address":[4892433,4892501,4892614],"length":1,"stats":{"Line":3}},{"line":72,"address":[4892630],"length":1,"stats":{"Line":1}},{"line":75,"address":[4892580],"length":1,"stats":{"Line":1}},{"line":78,"address":[4892752],"length":1,"stats":{"Line":1}},{"line":79,"address":[4892771,4892834],"length":1,"stats":{"Line":2}},{"line":80,"address":[4892844,4892876],"length":1,"stats":{"Line":2}},{"line":81,"address":[4892931],"length":1,"stats":{"Line":1}},{"line":82,"address":[4892947],"length":1,"stats":{"Line":1}},{"line":86,"address":[4892827],"length":1,"stats":{"Line":1}},{"line":89,"address":[4892960],"length":1,"stats":{"Line":1}},{"line":90,"address":[4893047,4892979],"length":1,"stats":{"Line":2}},{"line":91,"address":[4893061],"length":1,"stats":{"Line":1}},{"line":92,"address":[4893085],"length":1,"stats":{"Line":1}},{"line":95,"address":[4893035],"length":1,"stats":{"Line":1}},{"line":98,"address":[4893104],"length":1,"stats":{"Line":1}},{"line":99,"address":[4893123,4893186],"length":1,"stats":{"Line":2}},{"line":100,"address":[4893196,4893226],"length":1,"stats":{"Line":2}},{"line":101,"address":[4893290],"length":1,"stats":{"Line":1}},{"line":102,"address":[4893305],"length":1,"stats":{"Line":1}},{"line":106,"address":[4893179],"length":1,"stats":{"Line":1}},{"line":109,"address":[4893328],"length":1,"stats":{"Line":1}},{"line":110,"address":[4893410,4893347],"length":1,"stats":{"Line":2}},{"line":111,"address":[4893420],"length":1,"stats":{"Line":1}},{"line":112,"address":[4893447],"length":1,"stats":{"Line":1}},{"line":115,"address":[4893403],"length":1,"stats":{"Line":1}},{"line":119,"address":[4898384,4893456],"length":1,"stats":{"Line":1}},{"line":120,"address":[4893527],"length":1,"stats":{"Line":1}},{"line":121,"address":[4893568],"length":1,"stats":{"Line":1}},{"line":122,"address":[4893616],"length":1,"stats":{"Line":1}},{"line":123,"address":[4893676],"length":1,"stats":{"Line":1}},{"line":124,"address":[4893736],"length":1,"stats":{"Line":1}},{"line":125,"address":[4893796],"length":1,"stats":{"Line":1}},{"line":127,"address":[4893872],"length":1,"stats":{"Line":1}},{"line":129,"address":[4893883],"length":1,"stats":{"Line":1}},{"line":131,"address":[4893895,4893975,4894095],"length":1,"stats":{"Line":3}},{"line":132,"address":[4894188,4894122],"length":1,"stats":{"Line":3}},{"line":133,"address":[4894230],"length":1,"stats":{"Line":2}},{"line":136,"address":[4894165,4894289,4894424],"length":1,"stats":{"Line":5}},{"line":137,"address":[4898358,4894445,4897769],"length":1,"stats":{"Line":5}},{"line":138,"address":[4898363,4897787,4898336,4898219],"length":1,"stats":{"Line":3}},{"line":139,"address":[4897775,4898202],"length":1,"stats":{"Line":3}},{"line":140,"address":[4897880,4897818],"length":1,"stats":{"Line":3}},{"line":142,"address":[4897892,4897861],"length":1,"stats":{"Line":2}},{"line":143,"address":[4897926,4897996],"length":1,"stats":{"Line":1}},{"line":144,"address":[4898029,4897961],"length":1,"stats":{"Line":2}},{"line":145,"address":[4898036],"length":1,"stats":{"Line":1}},{"line":146,"address":[4898069],"length":1,"stats":{"Line":1}},{"line":147,"address":[4898130],"length":1,"stats":{"Line":1}},{"line":148,"address":[4898191],"length":1,"stats":{"Line":1}},{"line":152,"address":[4894412],"length":1,"stats":{"Line":1}},{"line":153,"address":[4894524],"length":1,"stats":{"Line":1}},{"line":154,"address":[4894557],"length":1,"stats":{"Line":1}},{"line":157,"address":[4894478],"length":1,"stats":{"Line":1}},{"line":158,"address":[4894489],"length":1,"stats":{"Line":1}},{"line":160,"address":[4894639,4894501,4894759],"length":1,"stats":{"Line":3}},{"line":161,"address":[4894852,4894786],"length":1,"stats":{"Line":4}},{"line":162,"address":[4894894],"length":1,"stats":{"Line":2}},{"line":165,"address":[4894829,4894953,4895088],"length":1,"stats":{"Line":6}},{"line":166,"address":[4897736,4897147,4895109],"length":1,"stats":{"Line":5}},{"line":167,"address":[4897597,4897714,4897165,4897741],"length":1,"stats":{"Line":3}},{"line":168,"address":[4897153,4897580],"length":1,"stats":{"Line":3}},{"line":169,"address":[4897258,4897196],"length":1,"stats":{"Line":4}},{"line":171,"address":[4897239,4897270],"length":1,"stats":{"Line":2}},{"line":172,"address":[4897304,4897374],"length":1,"stats":{"Line":1}},{"line":173,"address":[4897407,4897339],"length":1,"stats":{"Line":2}},{"line":174,"address":[4897414],"length":1,"stats":{"Line":1}},{"line":175,"address":[4897447],"length":1,"stats":{"Line":1}},{"line":176,"address":[4897508],"length":1,"stats":{"Line":1}},{"line":177,"address":[4897569],"length":1,"stats":{"Line":1}},{"line":181,"address":[4895076],"length":1,"stats":{"Line":1}},{"line":182,"address":[4895177],"length":1,"stats":{"Line":1}},{"line":183,"address":[4895210],"length":1,"stats":{"Line":1}},{"line":188,"address":[4895126],"length":1,"stats":{"Line":1}},{"line":189,"address":[4895138],"length":1,"stats":{"Line":1}},{"line":191,"address":[4895452,4895284,4895150],"length":1,"stats":{"Line":3}},{"line":192,"address":[4895694,4897009,4895476,4895781],"length":1,"stats":{"Line":5}},{"line":193,"address":[4895860,4896768],"length":1,"stats":{"Line":2}},{"line":194,"address":[4896880],"length":1,"stats":{"Line":1}},{"line":195,"address":[4896901,4896838],"length":1,"stats":{"Line":2}},{"line":196,"address":[4896983],"length":1,"stats":{"Line":1}},{"line":198,"address":[4897001,4896959,4897014],"length":1,"stats":{"Line":0}},{"line":199,"address":[4895736,4896735,4896000,4895913],"length":1,"stats":{"Line":8}},{"line":200,"address":[4896079,4896450],"length":1,"stats":{"Line":4}},{"line":201,"address":[4896581],"length":1,"stats":{"Line":1}},{"line":202,"address":[4896594,4896539],"length":1,"stats":{"Line":3}},{"line":203,"address":[4896706],"length":1,"stats":{"Line":1}},{"line":205,"address":[4896679,4896740,4896727],"length":1,"stats":{"Line":3}},{"line":206,"address":[4896132,4895955,4896216],"length":1,"stats":{"Line":0}},{"line":207,"address":[4896292],"length":1,"stats":{"Line":0}},{"line":208,"address":[4896174,4896313],"length":1,"stats":{"Line":0}},{"line":209,"address":[4896437],"length":1,"stats":{"Line":0}},{"line":213,"address":[4895425,4895513],"length":1,"stats":{"Line":2}},{"line":214,"address":[4895588],"length":1,"stats":{"Line":0}},{"line":215,"address":[4895598,4895561],"length":1,"stats":{"Line":2}},{"line":216,"address":[4895656],"length":1,"stats":{"Line":0}},{"line":219,"address":[4895646],"length":1,"stats":{"Line":1}},{"line":225,"address":[4899056,4898416],"length":1,"stats":{"Line":1}},{"line":226,"address":[4898459],"length":1,"stats":{"Line":1}},{"line":228,"address":[4898481,4898702,4898562],"length":1,"stats":{"Line":3}},{"line":229,"address":[4898718],"length":1,"stats":{"Line":1}},{"line":230,"address":[4898848],"length":1,"stats":{"Line":1}},{"line":231,"address":[4898998],"length":1,"stats":{"Line":1}},{"line":236,"address":[4898654],"length":1,"stats":{"Line":1}},{"line":241,"address":[4899088,4899986],"length":1,"stats":{"Line":1}},{"line":242,"address":[4899143],"length":1,"stats":{"Line":1}},{"line":244,"address":[4899168,4899255,4899410],"length":1,"stats":{"Line":3}},{"line":245,"address":[4899426],"length":1,"stats":{"Line":1}},{"line":246,"address":[4899568],"length":1,"stats":{"Line":1}},{"line":247,"address":[4899644],"length":1,"stats":{"Line":1}},{"line":248,"address":[4899778],"length":1,"stats":{"Line":1}},{"line":249,"address":[4899928],"length":1,"stats":{"Line":1}},{"line":256,"address":[4899359],"length":1,"stats":{"Line":1}},{"line":266,"address":[4900016,4905730,4903450],"length":1,"stats":{"Line":1}},{"line":267,"address":[4900071],"length":1,"stats":{"Line":1}},{"line":269,"address":[4900199,4900116,4900354],"length":1,"stats":{"Line":3}},{"line":270,"address":[4900370],"length":1,"stats":{"Line":1}},{"line":271,"address":[4900521],"length":1,"stats":{"Line":1}},{"line":273,"address":[4900618],"length":1,"stats":{"Line":3}},{"line":274,"address":[4900812],"length":1,"stats":{"Line":1}},{"line":276,"address":[4900882],"length":1,"stats":{"Line":1}},{"line":277,"address":[4901037],"length":1,"stats":{"Line":1}},{"line":278,"address":[4904298,4901134],"length":1,"stats":{"Line":2}},{"line":281,"address":[5637249,5637232],"length":1,"stats":{"Line":2}},{"line":283,"address":[4901332],"length":1,"stats":{"Line":0}},{"line":285,"address":[4901402],"length":1,"stats":{"Line":0}},{"line":286,"address":[4901557],"length":1,"stats":{"Line":0}},{"line":287,"address":[4901654,4903427],"length":1,"stats":{"Line":0}},{"line":290,"address":[5637297,5637280],"length":1,"stats":{"Line":0}},{"line":292,"address":[4901852],"length":1,"stats":{"Line":0}},{"line":294,"address":[4902192,4902036,4901922],"length":1,"stats":{"Line":0}},{"line":297,"address":[5637328,5637338],"length":1,"stats":{"Line":0}},{"line":299,"address":[4902120,4902189,4902197],"length":1,"stats":{"Line":0}},{"line":301,"address":[4902147,4902304,4902233],"length":1,"stats":{"Line":0}},{"line":304,"address":[4902288],"length":1,"stats":{"Line":0}},{"line":306,"address":[4902335],"length":1,"stats":{"Line":0}},{"line":307,"address":[4902392],"length":1,"stats":{"Line":0}},{"line":312,"address":[4901892],"length":1,"stats":{"Line":0}},{"line":313,"address":[4902459,4902529],"length":1,"stats":{"Line":0}},{"line":314,"address":[4902634],"length":1,"stats":{"Line":0}},{"line":315,"address":[4902709],"length":1,"stats":{"Line":0}},{"line":316,"address":[4902719],"length":1,"stats":{"Line":0}},{"line":317,"address":[4902741],"length":1,"stats":{"Line":0}},{"line":320,"address":[4903049,4903120,4902965],"length":1,"stats":{"Line":0}},{"line":323,"address":[4903104],"length":1,"stats":{"Line":0}},{"line":325,"address":[4903151],"length":1,"stats":{"Line":0}},{"line":326,"address":[4903196,4903392],"length":1,"stats":{"Line":0}},{"line":329,"address":[4903238],"length":1,"stats":{"Line":0}},{"line":335,"address":[4901372],"length":1,"stats":{"Line":1}},{"line":336,"address":[4903464,4903534],"length":1,"stats":{"Line":2}},{"line":337,"address":[4903639],"length":1,"stats":{"Line":1}},{"line":338,"address":[4903698],"length":1,"stats":{"Line":1}},{"line":342,"address":[4905197,4904250,4903924,4904008],"length":1,"stats":{"Line":4}},{"line":344,"address":[4904271],"length":1,"stats":{"Line":1}},{"line":345,"address":[4904308,4904372],"length":1,"stats":{"Line":2}},{"line":346,"address":[4904462],"length":1,"stats":{"Line":1}},{"line":347,"address":[4904534],"length":1,"stats":{"Line":1}},{"line":348,"address":[4904541],"length":1,"stats":{"Line":1}},{"line":349,"address":[4904560],"length":1,"stats":{"Line":1}},{"line":352,"address":[4904847,4904775],"length":1,"stats":{"Line":4}},{"line":354,"address":[4904931],"length":1,"stats":{"Line":1}},{"line":355,"address":[4904976,4905162],"length":1,"stats":{"Line":2}},{"line":358,"address":[4905007],"length":1,"stats":{"Line":1}},{"line":361,"address":[4904104],"length":1,"stats":{"Line":1}},{"line":367,"address":[4900852],"length":1,"stats":{"Line":1}},{"line":369,"address":[4905243,4905307],"length":1,"stats":{"Line":2}},{"line":372,"address":[4905475,4905400],"length":1,"stats":{"Line":2}},{"line":418,"address":[4905695],"length":1,"stats":{"Line":1}},{"line":423,"address":[4900303],"length":1,"stats":{"Line":1}}],"covered":168,"coverable":199},{"path":["/","home","amaury","Documents","info5","0projet","app","src","tests","filters_tests.rs"],"content":"#[cfg(test)]\nmod tests {\n    use crate::models::data_structure::application_context::ApplicationContext;\n    use crate::models::data_structure::cluster::Cluster;\n    use crate::models::data_structure::cpu::Cpu;\n    use crate::models::data_structure::filters::JobFilters;\n    use crate::models::data_structure::host::Host;\n    use crate::models::data_structure::job::{Job, JobState};\n    use crate::models::data_structure::resource::{Resource, ResourceState};\n    use egui::Color32;\n\n    // Helper function to create a set of test jobs with different properties\n    fn create_test_jobs() -\u003e Vec\u003cJob\u003e {\n        vec![\n            // Job 1: owner=\"user1\", state=Running, resources=[101, 102]\n            Job {\n                id: 1001,\n                owner: \"user1\".to_string(),\n                state: JobState::Running,\n                walltime: 3600,\n                start_time: 1672527600, // 2023-01-01 00:00:00\n                scheduled_start: 1672527600,\n                assigned_resources: vec![101, 102],\n                main_resource_state: ResourceState::Alive,\n                clusters: vec![\"cluster1\".to_string()], // Pre-populate for test simplicity\n                hosts: vec![\"host1\".to_string(), \"host2\".to_string()], // Pre-populate for test simplicity\n                command: \"test_command1\".to_string(),\n                message: Some(\"test_message1\".to_string()),\n                queue: \"default\".to_string(),\n                submission_time: 1672527500,\n                stop_time: 0,\n                exit_code: Some(0),\n                gantt_color: Color32::from_rgb(10, 100, 100),\n            },\n            // Job 2: owner=\"user2\", state=Waiting, resources=[103]\n            Job {\n                id: 1002,\n                owner: \"user2\".to_string(),\n                state: JobState::Waiting,\n                walltime: 7200,\n                start_time: 1672614000, // 2023-01-02 00:00:00\n                scheduled_start: 1672614000,\n                assigned_resources: vec![103],\n                main_resource_state: ResourceState::Alive,\n                clusters: vec![\"cluster2\".to_string()], // Pre-populate for test simplicity\n                hosts: vec![\"host3\".to_string()],       // Pre-populate for test simplicity\n                command: \"test_command2\".to_string(),\n                message: Some(\"test_message2\".to_string()),\n                queue: \"high_priority\".to_string(),\n                submission_time: 1672613900,\n                stop_time: 0,\n                exit_code: None,\n                gantt_color: Color32::from_rgb(10, 100, 100),\n            },\n            // Job 3: owner=\"user1\", state=Terminated, resources=[104]\n            Job {\n                id: 1003,\n                owner: \"user1\".to_string(),\n                state: JobState::Terminated,\n                walltime: 1800,\n                start_time: 1672700400, // 2023-01-03 00:00:00\n                scheduled_start: 1672700400,\n                assigned_resources: vec![104],\n                main_resource_state: ResourceState::Alive,\n                clusters: vec![\"cluster2\".to_string()], // Pre-populate for test simplicity\n                hosts: vec![\"host4\".to_string()],       // Pre-populate for test simplicity\n                command: \"test_command3\".to_string(),\n                message: Some(\"test_message3\".to_string()),\n                queue: \"default\".to_string(),\n                submission_time: 1672700300,\n                stop_time: 1672702200, // 30 minutes after start\n                exit_code: Some(0),\n                gantt_color: Color32::from_rgb(10, 100, 100),\n            },\n        ]\n    }\n\n    // Helper function to create test clusters\n    fn create_test_clusters() -\u003e Vec\u003cCluster\u003e {\n        vec![\n            // Cluster 1 with resources 101, 102\n            Cluster {\n                name: \"cluster1\".to_string(),\n                hosts: vec![\n                    // Host 1 with resource 101\n                    Host {\n                        name: \"host1\".to_string(),\n                        cpus: vec![Cpu {\n                            name: \"cpu1\".to_string(),\n                            resources: vec![Resource {\n                                id: 101,\n                                state: ResourceState::Alive,\n                                thread_count: 4,\n                            }],\n                            core_count: 2,\n                            cpufreq: 2.4,\n                            chassis: \"rack1\".to_string(),\n                            resource_ids: vec![101],\n                        }],\n                        network_address: \"10.0.0.1\".to_string(),\n                        resource_ids: vec![101],\n                        state: ResourceState::Alive,\n                    },\n                    // Host 2 with resource 102\n                    Host {\n                        name: \"host2\".to_string(),\n                        cpus: vec![Cpu {\n                            name: \"cpu2\".to_string(),\n                            resources: vec![Resource {\n                                id: 102,\n                                state: ResourceState::Alive,\n                                thread_count: 8,\n                            }],\n                            core_count: 4,\n                            cpufreq: 3.2,\n                            chassis: \"rack1\".to_string(),\n                            resource_ids: vec![102],\n                        }],\n                        network_address: \"10.0.0.2\".to_string(),\n                        resource_ids: vec![102],\n                        state: ResourceState::Alive,\n                    },\n                ],\n                resource_ids: vec![101, 102],\n                state: ResourceState::Alive,\n            },\n            // Cluster 2 with resources 103, 104\n            Cluster {\n                name: \"cluster2\".to_string(),\n                hosts: vec![\n                    // Host 3 with resource 103\n                    Host {\n                        name: \"host3\".to_string(),\n                        cpus: vec![Cpu {\n                            name: \"cpu3\".to_string(),\n                            resources: vec![Resource {\n                                id: 103,\n                                state: ResourceState::Alive,\n                                thread_count: 4,\n                            }],\n                            core_count: 2,\n                            cpufreq: 2.8,\n                            chassis: \"rack2\".to_string(),\n                            resource_ids: vec![103],\n                        }],\n                        network_address: \"10.0.0.3\".to_string(),\n                        resource_ids: vec![103],\n                        state: ResourceState::Alive,\n                    },\n                    // Host 4 with resource 104\n                    Host {\n                        name: \"host4\".to_string(),\n                        cpus: vec![Cpu {\n                            name: \"cpu4\".to_string(),\n                            resources: vec![Resource {\n                                id: 104,\n                                state: ResourceState::Alive,\n                                thread_count: 4,\n                            }],\n                            core_count: 2,\n                            cpufreq: 2.8,\n                            chassis: \"rack2\".to_string(),\n                            resource_ids: vec![104],\n                        }],\n                        network_address: \"10.0.0.4\".to_string(),\n                        resource_ids: vec![104],\n                        state: ResourceState::Alive,\n                    },\n                ],\n                resource_ids: vec![103, 104],\n                state: ResourceState::Alive,\n            },\n        ]\n    }\n\n    // Helper function to create and populate an ApplicationContext with test data\n    fn setup_test_app_context() -\u003e ApplicationContext {\n        let mut context = ApplicationContext::default();\n\n        // Add test jobs and clusters\n        context.all_jobs = create_test_jobs();\n        context.all_clusters = create_test_clusters();\n\n        // Jobs clusters and hosts are already populated in create_test_jobs\n        // This is normally done by the application when loading jobs\n\n        // Initially, filtered_jobs should contain all jobs\n        context.filtered_jobs = context.all_jobs.clone();\n\n        context\n    }\n\n    #[test]\n    /// Tests filtering jobs by owner\n    fn test_filter_by_owner() {\n        let mut context = setup_test_app_context();\n\n        // Filter by owner \"user1\"\n        context.filters.set_owners(Some(vec![\"user1\".to_string()]));\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            2,\n            \"Should have 2 jobs from user1\"\n        );\n        assert!(\n            context.filtered_jobs.iter().all(|j| j.owner == \"user1\"),\n            \"All filtered jobs should be owned by user1\"\n        );\n\n        // Filter by owner \"user2\"\n        context.filters.set_owners(Some(vec![\"user2\".to_string()]));\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            1,\n            \"Should have 1 job from user2\"\n        );\n        assert_eq!(\n            context.filtered_jobs[0].owner, \"user2\",\n            \"The job should be owned by user2\"\n        );\n\n        // Filter by multiple owners\n        context\n            .filters\n            .set_owners(Some(vec![\"user1\".to_string(), \"user2\".to_string()]));\n        context.filter_jobs();\n\n        assert_eq!(context.filtered_jobs.len(), 3, \"Should have all 3 jobs\");\n\n        // Reset owner filter\n        context.filters.set_owners(None);\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            3,\n            \"Should have all 3 jobs when owner filter is None\"\n        );\n    }\n\n    #[test]\n    /// Tests filtering jobs by state\n    fn test_filter_by_state() {\n        let mut context = setup_test_app_context();\n\n        // Filter by Running state\n        context.filters.set_states(Some(vec![JobState::Running]));\n        context.filter_jobs();\n\n        assert_eq!(context.filtered_jobs.len(), 1, \"Should have 1 Running job\");\n        assert_eq!(\n            context.filtered_jobs[0].state,\n            JobState::Running,\n            \"The job should be in Running state\"\n        );\n\n        // Filter by multiple states\n        context\n            .filters\n            .set_states(Some(vec![JobState::Running, JobState::Waiting]));\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            2,\n            \"Should have 2 jobs with Running or Waiting states\"\n        );\n        assert!(\n            context\n                .filtered_jobs\n                .iter()\n                .all(|j| j.state == JobState::Running || j.state == JobState::Waiting),\n            \"All filtered jobs should be Running or Waiting\"\n        );\n\n        // Reset state filter\n        context.filters.set_states(None);\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            3,\n            \"Should have all 3 jobs when state filter is None\"\n        );\n    }\n\n    #[test]\n    /// Tests filtering jobs by time range\n    fn test_filter_by_time_range() {\n        let mut context = setup_test_app_context();\n\n        // Filter by start time after Jan 1, 2023\n        context.filters.scheduled_start_time = Some(1672527600);\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            3,\n            \"Should have 3 jobs starting after Jan 1\"\n        );\n\n        // Filter by start time after Jan 2, 2023\n        context.filters.scheduled_start_time = Some(1672614000);\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            3,\n            \"Toutes les tâches doivent rester avec le début après Jan 2\"\n        );\n\n        // Filter by end time before Jan 3, 2023 + 1 hour\n        context.filters.wall_time = Some(1672704000); // Jan 3 + 1 hour\n        context.filter_jobs();\n\n        // Correction: only 2 jobs should remain (jobs 2 and 3)\n        assert_eq!(\n            context.filtered_jobs.len(),\n            2,\n            \"Only tasks within the time range should remain\"\n        );\n\n        // Reset time filters\n        context.filters.scheduled_start_time = None;\n        context.filters.wall_time = None;\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            3,\n            \"Should have all 3 jobs when time filters are None\"\n        );\n    }\n\n    #[test]\n    /// Tests filtering jobs by cluster\n    fn test_filter_by_cluster() {\n        let mut context = setup_test_app_context();\n\n        // Créer un objet cluster avec la hiérarchie complète jusqu'aux ressources\n        let cluster1_filter = Cluster {\n            name: \"cluster1\".to_string(),\n            hosts: vec![Host {\n                name: \"host1\".to_string(),\n                cpus: vec![Cpu {\n                    name: \"cpu1\".to_string(),\n                    resources: vec![Resource {\n                        id: 101,\n                        state: ResourceState::Unknown,\n                        thread_count: 0,\n                    }],\n                    core_count: 0,\n                    cpufreq: 0.0,\n                    chassis: String::new(),\n                    resource_ids: vec![101],\n                }],\n                network_address: String::new(),\n                resource_ids: vec![101],\n                state: ResourceState::Unknown,\n            }],\n            resource_ids: vec![101],\n            state: ResourceState::Unknown,\n        };\n\n        // Filtrer par cluster1\n        context.filters.clusters = Some(vec![cluster1_filter]);\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            1,\n            \"Should have 1 job from cluster1\"\n        );\n        assert_eq!(context.filtered_jobs[0].id, 1001, \"Job ID should be 1001\");\n\n        // Reset cluster filter\n        context.filters.clusters = None;\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            3,\n            \"Should have all 3 jobs when cluster filter is None\"\n        );\n    }\n\n    #[test]\n    /// Tests filtering jobs by host\n    fn test_filter_by_host() {\n        let mut context = setup_test_app_context();\n\n        // Créer un objet cluster contenant un hôte avec la hiérarchie complète\n        let cluster1_filter = Cluster {\n            name: \"cluster1\".to_string(),\n            hosts: vec![Host {\n                name: \"host1\".to_string(),\n                cpus: vec![Cpu {\n                    name: \"cpu1\".to_string(),\n                    resources: vec![Resource {\n                        id: 101,\n                        state: ResourceState::Unknown,\n                        thread_count: 0,\n                    }],\n                    core_count: 0,\n                    cpufreq: 0.0,\n                    chassis: String::new(),\n                    resource_ids: vec![101],\n                }],\n                network_address: String::new(),\n                resource_ids: vec![101],\n                state: ResourceState::Unknown,\n            }],\n            resource_ids: vec![],\n            state: ResourceState::Unknown,\n        };\n\n        // Filtrer par host1\n        context.filters.clusters = Some(vec![cluster1_filter]);\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            1,\n            \"Should have 1 job using host1\"\n        );\n        assert_eq!(context.filtered_jobs[0].id, 1001, \"Job ID should be 1001\");\n\n        // Reset host filter\n        context.filters.clusters = None;\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            3,\n            \"Should have all 3 jobs when host filter is None\"\n        );\n    }\n\n    #[test]\n    /// Tests combining multiple filter types\n    fn test_combined_filters() {\n        let mut context = setup_test_app_context();\n\n        // Filter by user1 AND Running state\n        context.filters.set_owners(Some(vec![\"user1\".to_string()]));\n        context.filters.set_states(Some(vec![JobState::Running]));\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            1,\n            \"Should have 1 job from user1 in Running state\"\n        );\n        assert_eq!(context.filtered_jobs[0].id, 1001, \"Job ID should be 1001\");\n\n        // Filter by user1 AND (Running OR Terminated) states\n        context\n            .filters\n            .set_states(Some(vec![JobState::Running, JobState::Terminated]));\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            2,\n            \"Should have 2 jobs from user1 in Running or Terminated states\"\n        );\n\n        // Filter by user1 AND (Running OR Terminated) AND after Jan 2\n        context.filters.scheduled_start_time = Some(1672614000); // Jan 2\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            2,\n            \"Les deux tâches de user1 doivent rester avec le filtre de date\"\n        );\n\n        // Reset all filters\n        context.filters = JobFilters::default();\n        context.filter_jobs();\n\n        assert_eq!(\n            context.filtered_jobs.len(),\n            3,\n            \"Should have all 3 jobs when all filters are None\"\n        );\n    }\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","tests","mod.rs"],"content":"pub mod filters_tests;\npub mod parser_tests;\npub mod resource_state_tests;\npub mod utils_tests;\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","tests","parser_tests.rs"],"content":"#[cfg(test)]\nmod tests {\n    use crate::models::data_structure::job::JobState;\n    use crate::models::utils::parser::{get_jobs_from_json, get_resources_from_json};\n    use std::fs;\n    use std::io::Write;\n\n    // Write JSON to a file with specific format that matches the expected input\n    fn write_test_json_file(content: \u0026str, filename: \u0026str) -\u003e String {\n        let temp_dir = std::env::temp_dir();\n        let file_path = temp_dir.join(filename);\n\n        // Write content to file\n        let mut file = fs::File::create(\u0026file_path).expect(\"Failed to create file\");\n        file.write_all(content.as_bytes())\n            .expect(\"Failed to write to file\");\n\n        // Return the absolute path as a string\n        file_path.to_str().unwrap().to_string()\n    }\n\n    #[test]\n    /// Tests that an empty jobs object returns an empty vector\n    fn test_empty_array() {\n        let json_content = r#\"{\"jobs\":{}}\"#;\n        let file_path = write_test_json_file(json_content, \"empty_jobs.json\");\n\n        let jobs = get_jobs_from_json(\u0026file_path);\n\n        fs::remove_file(file_path).unwrap_or_default();\n        assert_eq!(jobs.len(), 0);\n    }\n\n    #[test]\n    /// Tests basic job parsing with minimal valid job data\n    fn test_basic_job_parsing() {\n        // Format the JSON in the structure expected by the parser\n        let json_content = r#\"{\n            \"jobs\": {\n                \"job1\": {\n                    \"id\": \"1234\",\n                    \"owner\": \"test_user\",\n                    \"state\": \"Running\",\n                    \"walltime\": 3600,\n                    \"resource_id\": [\"101\"],\n                    \"start_time\": 1672527600\n                }\n            }\n        }\"#;\n\n        let file_path = write_test_json_file(json_content, \"basic_job.json\");\n\n        let jobs = get_jobs_from_json(\u0026file_path);\n\n        fs::remove_file(file_path).unwrap_or_default();\n\n        // Just verify that we got some job back\n        assert!(jobs.len() \u003e 0, \"Should parse at least one job\");\n\n        // If successful, add more detailed assertions\n        if jobs.len() \u003e 0 {\n            let job = \u0026jobs[0];\n            assert_eq!(job.id, 1234);\n            assert_eq!(job.owner, \"test_user\");\n            assert_eq!(job.state, JobState::Running);\n        }\n    }\n\n    #[test]\n    /// Tests resource parsing with minimal valid resource data\n    fn test_basic_resource_parsing() {\n        // Note: get_resources_from_json expects an array of resources,\n        // not an object map like job parsing does\n        let json_content = r#\"{\n            \"resources\": [\n                {\n                    \"resource_id\": 101,\n                    \"state\": \"Alive\",\n                    \"cluster\": \"cluster1\",\n                    \"host\": \"host1\"\n                }\n            ]\n        }\"#;\n\n        let file_path = write_test_json_file(json_content, \"basic_resource.json\");\n\n        let resources = get_resources_from_json(\u0026file_path);\n\n        fs::remove_file(file_path).unwrap_or_default();\n\n        // Just verify that we got some resource back\n        assert!(resources.len() \u003e 0, \"Should parse at least one resource\");\n    }\n\n    #[test]\n    /// Debug test to understand the expected JSON format\n    fn test_debug_parser_behavior() {\n        // Format JSON according to the expected structure from parser.rs\n        let json_content = r#\"{\n            \"jobs\": {\n                \"job999\": {\n                    \"id\": \"999\", \n                    \"owner\": \"debug\", \n                    \"state\": \"Running\", \n                    \"walltime\": 3600,\n                    \"resource_id\": [\"101\", \"102\"],\n                    \"start_time\": 1672527600\n                }\n            }\n        }\"#;\n\n        let file_path = write_test_json_file(json_content, \"debug.json\");\n\n        // Debug info\n        println!(\"Debug test: File path = {}\", file_path);\n        println!(\n            \"Debug test: File exists = {}\",\n            fs::metadata(\u0026file_path).is_ok()\n        );\n\n        // Try to read file back to verify content\n        let content =\n            fs::read_to_string(\u0026file_path).unwrap_or_else(|e| format!(\"Error reading: {}\", e));\n        println!(\"Debug test: File content = {}\", content);\n\n        let jobs = get_jobs_from_json(\u0026file_path);\n        println!(\"Debug test: Parsed jobs count = {}\", jobs.len());\n        if jobs.len() \u003e 0 {\n            println!(\"Debug test: First job ID = {}\", jobs[0].id);\n        }\n\n        fs::remove_file(file_path).unwrap_or_default();\n    }\n\n    // Additional tests can be added once the basic structure works\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","tests","utils_tests.rs"],"content":"#[cfg(test)]\nmod tests {\n    use egui::Color32;\n\n    use crate::models::data_structure::cluster::Cluster;\n    use crate::models::data_structure::cpu::Cpu;\n    use crate::models::data_structure::host::Host;\n    use crate::models::data_structure::job::Job;\n    use crate::models::data_structure::resource::{Resource, ResourceState};\n    use crate::models::utils::utils::*;\n    use std::cmp::Ordering;\n\n    // Helper function to create test clusters\n    fn create_test_clusters() -\u003e Vec\u003cCluster\u003e {\n        vec![\n            Cluster {\n                name: \"cluster1\".to_string(),\n                hosts: vec![\n                    Host {\n                        name: \"host1\".to_string(),\n                        cpus: vec![Cpu {\n                            name: \"cpu1\".to_string(),\n                            resources: vec![Resource {\n                                id: 101,\n                                state: ResourceState::Alive,\n                                thread_count: 4,\n                            }],\n                            core_count: 2,\n                            cpufreq: 2.4,\n                            chassis: \"rack1\".to_string(),\n                            resource_ids: vec![101],\n                        }],\n                        network_address: \"10.0.0.1\".to_string(),\n                        resource_ids: vec![101],\n                        state: ResourceState::Alive,\n                    },\n                    Host {\n                        name: \"host2\".to_string(),\n                        cpus: vec![Cpu {\n                            name: \"cpu2\".to_string(),\n                            resources: vec![Resource {\n                                id: 102,\n                                state: ResourceState::Alive,\n                                thread_count: 8,\n                            }],\n                            core_count: 4,\n                            cpufreq: 3.2,\n                            chassis: \"rack1\".to_string(),\n                            resource_ids: vec![102],\n                        }],\n                        network_address: \"10.0.0.2\".to_string(),\n                        resource_ids: vec![102],\n                        state: ResourceState::Alive,\n                    },\n                ],\n                resource_ids: vec![101, 102],\n                state: ResourceState::Alive,\n            },\n            Cluster {\n                name: \"cluster2\".to_string(),\n                hosts: vec![Host {\n                    name: \"host3\".to_string(),\n                    cpus: vec![Cpu {\n                        name: \"cpu3\".to_string(),\n                        resources: vec![Resource {\n                            id: 103,\n                            state: ResourceState::Dead,\n                            thread_count: 4,\n                        }],\n                        core_count: 2,\n                        cpufreq: 2.8,\n                        chassis: \"rack2\".to_string(),\n                        resource_ids: vec![103],\n                    }],\n                    network_address: \"10.0.0.3\".to_string(),\n                    resource_ids: vec![103],\n                    state: ResourceState::Dead,\n                }],\n                resource_ids: vec![103],\n                state: ResourceState::Dead,\n            },\n        ]\n    }\n\n    // Helper function to create a test job\n    fn create_test_job() -\u003e Job {\n        Job {\n            id: 1234,\n            owner: \"test_user\".to_string(),\n            state: crate::models::data_structure::job::JobState::Running,\n            walltime: 3600,\n            start_time: 1672527600,\n            scheduled_start: 1672527600,\n            assigned_resources: vec![101, 102],\n            main_resource_state: ResourceState::Alive,\n            clusters: Vec::new(),\n            hosts: Vec::new(),\n\n            // Champs manquants\n            command: \"test_command\".to_string(),\n            message: Some(\"test_message\".to_string()),\n            queue: \"test_queue\".to_string(),\n            submission_time: 1672527500, // Juste avant start_time\n            stop_time: 0,                // 0 pour un job encore en cours d'exécution\n            exit_code: Some(0),          // Code de sortie 0 (succès)\n            gantt_color: Color32::from_rgb(0, 0, 0), // Replace with a default color\n        }\n    }\n\n    #[test]\n    /// Tests that color conversion produces consistent results\n    fn test_convert_id_to_color() {\n        // Test that same ID always gives same color\n        let color1 = convert_id_to_color(1234);\n        let color2 = convert_id_to_color(1234);\n        assert_eq!(color1, color2, \"Same ID should produce same color\");\n\n        // Test that different IDs produce different colors\n        let color3 = convert_id_to_color(5678);\n        assert_ne!(\n            color1, color3,\n            \"Different IDs should produce different colors\"\n        );\n    }\n\n    #[test]\n    /// Tests extraction of all host names from clusters\n    fn test_get_all_hosts() {\n        let clusters = create_test_clusters();\n        let hosts = get_all_hosts(\u0026clusters);\n\n        assert_eq!(hosts.len(), 3, \"Should find 3 hosts\");\n        assert!(hosts.contains(\u0026\"host1\".to_string()));\n        assert!(hosts.contains(\u0026\"host2\".to_string()));\n        assert!(hosts.contains(\u0026\"host3\".to_string()));\n    }\n\n    #[test]\n    /// Tests checking if a cluster contains a specific host\n    fn test_cluster_contain_host() {\n        let clusters = create_test_clusters();\n        let cluster1 = \u0026clusters[0];\n\n        assert!(\n            cluster_contain_host(cluster1, \"host1\"),\n            \"Cluster1 should contain host1\"\n        );\n        assert!(\n            cluster_contain_host(cluster1, \"host2\"),\n            \"Cluster1 should contain host2\"\n        );\n        assert!(\n            !cluster_contain_host(cluster1, \"host3\"),\n            \"Cluster1 should not contain host3\"\n        );\n    }\n\n    #[test]\n    /// Tests retrieving a cluster by name\n    fn test_get_cluster_from_name() {\n        let clusters = create_test_clusters();\n\n        let result1 = get_cluster_from_name(\u0026clusters, \"cluster1\");\n        assert!(result1.is_some(), \"Should find cluster1\");\n        assert_eq!(result1.unwrap().name, \"cluster1\");\n\n        let result2 = get_cluster_from_name(\u0026clusters, \"nonexistent\");\n        assert!(result2.is_none(), \"Should not find nonexistent cluster\");\n    }\n\n    #[test]\n    /// Tests extraction of all cluster names\n    fn test_get_all_clusters() {\n        let clusters = create_test_clusters();\n        let cluster_names = get_all_clusters(\u0026clusters);\n\n        assert_eq!(cluster_names.len(), 2, \"Should find 2 clusters\");\n        assert!(cluster_names.contains(\u0026\"cluster1\".to_string()));\n        assert!(cluster_names.contains(\u0026\"cluster2\".to_string()));\n    }\n\n    #[test]\n    /// Tests extraction of all resource IDs\n    fn test_get_all_resources() {\n        let clusters = create_test_clusters();\n        let resources = get_all_resources(\u0026clusters);\n\n        assert_eq!(resources.len(), 3, \"Should find 3 resources\");\n        assert!(resources.contains(\u0026101));\n        assert!(resources.contains(\u0026102));\n        assert!(resources.contains(\u0026103));\n    }\n\n    #[test]\n    /// Tests checking if any cluster contains a specific host\n    fn test_contains_host() {\n        let clusters = create_test_clusters();\n\n        assert!(\n            contains_host(\u0026clusters, \"host1\"),\n            \"Clusters should contain host1\"\n        );\n        assert!(\n            contains_host(\u0026clusters, \"host3\"),\n            \"Clusters should contain host3\"\n        );\n        assert!(\n            !contains_host(\u0026clusters, \"host4\"),\n            \"Clusters should not contain host4\"\n        );\n    }\n\n    #[test]\n    /// Tests getting a cluster's state by name\n    fn test_get_cluster_state_from_name() {\n        let clusters = create_test_clusters();\n\n        let state1 = get_cluster_state_from_name(\u0026clusters, \u0026\"cluster1\".to_string());\n        assert_eq!(state1, ResourceState::Alive, \"cluster1 should be Alive\");\n\n        let state2 = get_cluster_state_from_name(\u0026clusters, \u0026\"cluster2\".to_string());\n        assert_eq!(state2, ResourceState::Dead, \"cluster2 should be Dead\");\n\n        let state3 = get_cluster_state_from_name(\u0026clusters, \u0026\"nonexistent\".to_string());\n        assert_eq!(\n            state3,\n            ResourceState::Unknown,\n            \"Nonexistent cluster should return Unknown state\"\n        );\n    }\n\n    #[test]\n    /// Tests getting a host's state by name\n    fn test_get_host_state_from_name() {\n        let clusters = create_test_clusters();\n\n        let state1 = get_host_state_from_name(\u0026clusters, \u0026\"host1\".to_string());\n        assert_eq!(state1, ResourceState::Alive, \"host1 should be Alive\");\n\n        let state2 = get_host_state_from_name(\u0026clusters, \u0026\"host3\".to_string());\n        assert_eq!(state2, ResourceState::Dead, \"host3 should be Dead\");\n\n        let state3 = get_host_state_from_name(\u0026clusters, \u0026\"nonexistent\".to_string());\n        assert_eq!(\n            state3,\n            ResourceState::Unknown,\n            \"Nonexistent host should return Unknown state\"\n        );\n    }\n\n    #[test]\n    /// Tests checking if a cluster with specific name exists\n    fn test_contains_cluster() {\n        let clusters = create_test_clusters();\n\n        assert!(\n            contains_cluster(\u0026clusters, \"cluster1\"),\n            \"Should contain cluster1\"\n        );\n        assert!(\n            contains_cluster(\u0026clusters, \"cluster2\"),\n            \"Should contain cluster2\"\n        );\n        assert!(\n            !contains_cluster(\u0026clusters, \"cluster3\"),\n            \"Should not contain cluster3\"\n        );\n    }\n\n    #[test]\n    /// Tests natural string comparison with embedded numbers\n    fn test_compare_string_with_number() {\n        // Test basic alphabetical comparison\n        assert_eq!(compare_string_with_number(\"abc\", \"def\"), Ordering::Less);\n        assert_eq!(compare_string_with_number(\"def\", \"abc\"), Ordering::Greater);\n        assert_eq!(compare_string_with_number(\"abc\", \"abc\"), Ordering::Equal);\n\n        // Test numeric comparison within strings (natural sort)\n        assert_eq!(compare_string_with_number(\"host1\", \"host2\"), Ordering::Less);\n        assert_eq!(\n            compare_string_with_number(\"host2\", \"host10\"),\n            Ordering::Less,\n            \"Natural sort: host2 should come before host10\"\n        );\n        assert_eq!(\n            compare_string_with_number(\"host10\", \"host2\"),\n            Ordering::Greater,\n            \"Natural sort: host10 should come after host2\"\n        );\n\n        // Test mixed strings\n        assert_eq!(\n            compare_string_with_number(\"abc123\", \"abc45\"),\n            Ordering::Greater,\n            \"123 \u003e 45 in natural sort\"\n        );\n    }\n\n    #[test]\n    /// Tests finding clusters related to a job\n    fn test_get_clusters_for_job() {\n        let clusters = create_test_clusters();\n        let job = create_test_job();\n\n        let job_clusters = get_clusters_for_job(\u0026job, \u0026clusters);\n\n        assert_eq!(job_clusters.len(), 1, \"Job should be related to 1 cluster\");\n        assert_eq!(\n            job_clusters[0], \"cluster1\",\n            \"Job should be related to cluster1\"\n        );\n    }\n\n    #[test]\n    /// Tests finding hosts related to a job\n    fn test_get_hosts_for_job() {\n        let clusters = create_test_clusters();\n        let job = create_test_job();\n\n        let job_hosts = get_hosts_for_job(\u0026job, \u0026clusters);\n\n        assert_eq!(job_hosts.len(), 2, \"Job should be related to 2 hosts\");\n        assert!(\n            job_hosts.contains(\u0026\"host1\".to_string()),\n            \"Job should use host1\"\n        );\n        assert!(\n            job_hosts.contains(\u0026\"host2\".to_string()),\n            \"Job should use host2\"\n        );\n    }\n\n    #[test]\n    /// Tests creating a tree structure for a specific job\n    fn test_get_tree_structure_for_job() {\n        let clusters = create_test_clusters();\n        let job = create_test_job();\n\n        let job_tree = get_tree_structure_for_job(\u0026job, \u0026clusters);\n\n        // Verify structure\n        assert_eq!(job_tree.len(), 1, \"Should return 1 cluster\");\n        assert_eq!(job_tree[0].name, \"cluster1\", \"Should be cluster1\");\n        assert_eq!(job_tree[0].hosts.len(), 2, \"Should have 2 hosts\");\n\n        // Check that only relevant resources are included\n        for cluster in \u0026job_tree {\n            for host in \u0026cluster.hosts {\n                for cpu in \u0026host.cpus {\n                    for resource in \u0026cpu.resources {\n                        assert!(\n                            job.assigned_resources.contains(\u0026resource.id),\n                            \"Resource {} should belong to job\",\n                            resource.id\n                        );\n                    }\n                }\n            }\n        }\n    }\n\n    #[test]\n    fn test_natural_sort() {\n        assert_eq!(\n            compare_string_with_number(\"abc123\", \"abc45\"),\n            Ordering::Greater\n        );\n\n        assert_eq!(\n            compare_string_with_number(\"img10.png\", \"img2.png\"),\n            Ordering::Greater\n        );\n        assert_eq!(\n            compare_string_with_number(\"file99.txt\", \"file100.txt\"),\n            Ordering::Less\n        );\n    }\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","components","dashboard_components","job_table.rs"],"content":"use super::job_table_col_selection::ColumnSelection;\nuse super::job_table_sorting::SortKey;\nuse crate::models::data_structure::application_context::ApplicationContext;\nuse crate::models::utils::date_converter::format_timestamp;\nuse crate::models::utils::utils::get_tree_structure_for_job;\nuse crate::{models::data_structure::job::Job, views::components::job_details::JobDetailsWindow};\nuse eframe::egui;\nuse egui::{RichText, Sense, Ui};\nuse egui_extras::{Column, TableBuilder};\n\n/**\n * Struct for the job table\n */\npub struct JobTable {\n    page: usize, // Current page\n    jobs_per_page: usize, // Number of jobs per page\n    details_window: Vec\u003cJobDetailsWindow\u003e, // Details window for the job\n    start_idx: usize, // Start index for the jobs\n    end_idx: usize, // End index for the jobs\n    displayed_jobs_per_page: Vec\u003cJob\u003e, // Jobs displayed per page\n    sort_key: SortKey, // Sort key for the jobs\n    sort_ascending: bool, // True if the sorting is ascending\n    column_selection: ColumnSelection, // Column selection for the table\n}\n\n/**\n * Default implementation of the job table\n */\nimpl Default for JobTable {\n    fn default() -\u003e Self {\n        JobTable {\n            page: 0, // Default page is 0\n            jobs_per_page: 20, // Default number of jobs per page is 20\n            details_window: Vec::new(), // No details window by default\n            start_idx: 0, // Default start index is 0\n            end_idx: 0, // Default end index is 0\n            displayed_jobs_per_page: Vec::new(), // No jobs displayed by default\n            sort_key: SortKey::Id, // Default sort key is the job id\n            sort_ascending: true, // Default sorting is ascending\n            column_selection: ColumnSelection::default(), // Default column selection\n        }\n    }\n}\n\n/**\n * Implementation of the job table\n */\nimpl JobTable {\n    pub fn ui(\u0026mut self, ui: \u0026mut Ui, app: \u0026mut ApplicationContext) {\n        self.displayed_jobs_per_page = app.filtered_jobs.clone();\n        self.sort_key\n            .sort_jobs(\u0026mut self.displayed_jobs_per_page, self.sort_ascending);\n\n        ui.add_space(10.0);\n        ui.heading(RichText::new(t!(\"app.job_table.title\")).strong().size(20.0));\n        ui.add_space(8.0);\n\n        self.start_idx = self.page * self.jobs_per_page;\n        self.end_idx = (self.start_idx + self.jobs_per_page).min(app.filtered_jobs.len());\n        let total_pages =\n            (app.filtered_jobs.len() as f32 / self.jobs_per_page as f32).ceil() as usize;\n\n        if self.start_idx \u003e= app.filtered_jobs.len() {\n            self.reset_pagination();\n            return;\n        }\n\n        ui.horizontal(|ui| {\n            // Left side with Options\n            ui.with_layout(egui::Layout::left_to_right(egui::Align::Center), |ui| {\n                ui.menu_button(t!(\"app.job_table.settings\"), |ui| {\n                    ui.set_max_height(500.0);\n\n                    // Column selection\n                    self.column_selection.ui(ui);\n                });\n                ui.menu_button(\"❓\", |ui| {\n                    ui.label(t!(\"app.job_table.help\"));\n                });\n            });\n\n            // Right side with Pagination, using remaining space\n            ui.with_layout(egui::Layout::right_to_left(egui::Align::Center), |ui| {\n                let mut pagination_ui = |ui: \u0026mut Ui| {\n                    if ui\n                        .button(RichText::new(t!(\"app.job_table.next\")).size(14.0))\n                        .clicked()\n                        \u0026\u0026 self.page \u003c total_pages - 1\n                    {\n                        self.page += 1;\n                    }\n                    ui.label(\n                        RichText::new(format!(\"Page {} / {}\", self.page + 1, total_pages))\n                            .size(14.0),\n                    );\n                    if ui\n                        .button(RichText::new(t!(\"app.job_table.previous\")).size(14.0))\n                        .clicked()\n                        \u0026\u0026 self.page \u003e 0\n                    {\n                        self.page -= 1;\n                    }\n                };\n                pagination_ui(ui);\n            });\n        });\n\n        ui.separator();\n\n        egui::ScrollArea::horizontal().show(ui, |ui| {\n            // Table with pagination, sorting and selection\n            let available_width = ui.available_width();\n            let mut table = TableBuilder::new(ui)\n                .striped(true)\n                .resizable(true)\n                .sense(Sense::click())\n                .column(Column::auto().at_least(2.0).resizable(true));\n\n            // Add columns based on the selection\n            for value in self.column_selection.values.values() {\n                if value.selected {\n                    table = table.column(\n                        Column::remainder()\n                            .at_least(10.0)\n                            .at_most(available_width)\n                            .resizable(true),\n                    );\n                }\n            }\n\n            // Table header\n            table.header(20.0, |mut header| {\n                    header.col(|ui| {\n                        ui.label(RichText::new(t!(\"app.job_table.table.row\")).strong());\n                    });\n\n                    // Add columns in header based on the selection\n                    for value in self.column_selection.values.values() {\n                        if value.selected {\n                            header.col(|ui| {\n                                let is_current_column = value.sort_key == self.sort_key;\n\n                                let header_btn;\n\n                                // If the current column is selected, add an arrow to indicate the sorting direction\n                                if is_current_column {\n                                    header_btn = egui::Button::new(format!(\n                                        \"{} {}\",\n                                        t!(value.name.clone()),\n                                        if self.sort_ascending { '⬆' } else { '⬇' }\n                                    ))\n                                    .frame(true);\n                                } else { // Otherwise, just add the column name\n                                    header_btn = egui::Button::new(t!(value.name.clone())).frame(false);\n                                }\n\n                                // If the column is clicked, change the sorting key and arrow direction\n                                if ui.add(header_btn).clicked() {\n                                    self.sort_key = value.sort_key;\n                                    self.sort_ascending = !self.sort_ascending;\n                                    self.page = 0;\n                                }\n                            });\n                        }\n                    }\n                })\n\n                // Table bodys\n                .body(|mut body| {\n                    for job in self.displayed_jobs_per_page[self.start_idx..self.end_idx].iter() {\n                        body.row(20.0, |mut row| {\n                            // Row index\n                            let row_index = self.start_idx + row.index() + 1;\n                            row.col(|ui| {\n                                ui.label(row_index.to_string());\n                            });\n\n                            for value in self.column_selection.values.values() {\n                                if value.selected {\n                                    row.col(|ui| match value.sort_key {\n                                        SortKey::Id =\u003e {\n                                            ui.label(job.id.to_string());\n                                        }\n                                        SortKey::Owner =\u003e {\n                                            ui.label(job.owner.to_string());\n                                        }\n                                        SortKey::State =\u003e {\n                                            let state_text = job.state.get_label();\n                                            let (state_color, bg_color) = job.state.get_color();\n                                            ui.label(\n                                                egui::RichText::new(state_text)\n                                                    .color(state_color)\n                                                    .background_color(bg_color)\n                                                    .strong(),\n                                            );\n                                        }\n                                        SortKey::StartTime =\u003e {\n                                            ui.label(format_timestamp(job.start_time));\n                                        }\n                                        SortKey::WallTime =\u003e {\n                                            ui.label(job.walltime.to_string());\n                                        }\n                                        SortKey::Queue =\u003e {\n                                            ui.label(\u0026job.queue);\n                                        }\n                                        SortKey::Command =\u003e {\n                                            ui.label(\u0026job.command);\n                                        }\n                                        SortKey::Message =\u003e {\n                                            ui.label(job.message.as_deref().unwrap_or(\"\"));\n                                        }\n                                        SortKey::SubmissionTime =\u003e {\n                                            ui.label(format_timestamp(job.submission_time));\n                                        }\n                                        SortKey::ScheduledStartTime =\u003e {\n                                            ui.label(format_timestamp(job.scheduled_start));\n                                        }\n                                        SortKey::StopTime =\u003e {\n                                            ui.label(format_timestamp(job.stop_time));\n                                        }\n                                        SortKey::ExitCode =\u003e {\n                                            ui.label(\n                                                job.exit_code.map_or(\"N/A\".to_string(), |code| {\n                                                    code.to_string()\n                                                }),\n                                            );\n                                        }\n                                        SortKey::Clusters =\u003e {\n                                            ui.label(job.clusters.join(\", \"));\n                                        }\n                                    });\n                                }\n                            }\n\n                            // Clickable row\n                            let response = row.response().interact(Sense::click());\n                            if response.clicked() {\n                                for window in self.details_window.iter_mut() {\n                                    if window.job.id == job.id {\n                                        window.open = true;\n                                        return;\n                                    }\n                                }\n                                self.details_window.push(JobDetailsWindow::new(\n                                    job.clone(),\n                                    get_tree_structure_for_job(job, \u0026app.all_clusters),\n                                ));\n                            }\n                        });\n                    }\n                });\n        });\n\n        ui.add_space(10.0);\n\n        for window in self.details_window.iter_mut() {\n            window.ui(ui);\n        }\n    }\n\n    /**\n     * Resets the pagination\n     */\n    pub fn reset_pagination(\u0026mut self) {\n        self.page = 0;\n        self.start_idx = 0;\n        self.end_idx = 0;\n    }\n}\n","traces":[{"line":30,"address":[5639312,5639562],"length":1,"stats":{"Line":0}},{"line":34,"address":[5639331],"length":1,"stats":{"Line":0}},{"line":37,"address":[5639341],"length":1,"stats":{"Line":0}},{"line":40,"address":[5639389],"length":1,"stats":{"Line":0}},{"line":49,"address":[5639584,5641416],"length":1,"stats":{"Line":0}},{"line":50,"address":[5639644],"length":1,"stats":{"Line":0}},{"line":51,"address":[5639781],"length":1,"stats":{"Line":0}},{"line":54,"address":[5639810],"length":1,"stats":{"Line":0}},{"line":55,"address":[5639815,5641380,5640472],"length":1,"stats":{"Line":0}},{"line":56,"address":[5640434],"length":1,"stats":{"Line":0}},{"line":58,"address":[5640501,5640529,5640452],"length":1,"stats":{"Line":0}},{"line":59,"address":[5640893,5640550,5640505],"length":1,"stats":{"Line":0}},{"line":60,"address":[5640601],"length":1,"stats":{"Line":0}},{"line":63,"address":[5640855],"length":1,"stats":{"Line":0}},{"line":64,"address":[5641286],"length":1,"stats":{"Line":0}},{"line":68,"address":[4357712],"length":1,"stats":{"Line":0}},{"line":70,"address":[4357737,4358912,4357849,4358240],"length":1,"stats":{"Line":0}},{"line":71,"address":[4358661,4358944,4358265,4358440],"length":1,"stats":{"Line":0}},{"line":72,"address":[4358976],"length":1,"stats":{"Line":0}},{"line":75,"address":[4358995],"length":1,"stats":{"Line":0}},{"line":77,"address":[4359024,4358810,4359642],"length":1,"stats":{"Line":0}},{"line":78,"address":[4359587,4359044],"length":1,"stats":{"Line":0}},{"line":83,"address":[4358098,4359664,4357986],"length":1,"stats":{"Line":0}},{"line":84,"address":[4362244,4359744,4362199,4359696],"length":1,"stats":{"Line":0}},{"line":85,"address":[4359777,4360455,4360303,4360829],"length":1,"stats":{"Line":0}},{"line":86,"address":[4359972,4360193,4359793],"length":1,"stats":{"Line":0}},{"line":87,"address":[4362257,4360407,4359896,4360731,4360127,4360621,4360461],"length":1,"stats":{"Line":0}},{"line":88,"address":[4360693,4360760],"length":1,"stats":{"Line":0}},{"line":90,"address":[4360791,4360834],"length":1,"stats":{"Line":0}},{"line":92,"address":[4361189],"length":1,"stats":{"Line":0}},{"line":93,"address":[4360592,4360860,4361322,4361118,4360999,4360939],"length":1,"stats":{"Line":0}},{"line":96,"address":[4362178,4361891,4361739],"length":1,"stats":{"Line":0}},{"line":97,"address":[4361629,4361408,4361225],"length":1,"stats":{"Line":0}},{"line":98,"address":[4362208,4362114,4362031,4361338,4361843,4361563,4361897],"length":1,"stats":{"Line":0}},{"line":99,"address":[4362103],"length":1,"stats":{"Line":0}},{"line":101,"address":[4362183,4362138],"length":1,"stats":{"Line":0}},{"line":104,"address":[4359716],"length":1,"stats":{"Line":0}},{"line":108,"address":[5641002],"length":1,"stats":{"Line":0}},{"line":110,"address":[4362304,4363735],"length":1,"stats":{"Line":0}},{"line":112,"address":[4362342],"length":1,"stats":{"Line":0}},{"line":113,"address":[4362597,4362406,4362814],"length":1,"stats":{"Line":0}},{"line":115,"address":[4362482],"length":1,"stats":{"Line":0}},{"line":116,"address":[4362490,4363792,4362679],"length":1,"stats":{"Line":0}},{"line":117,"address":[4362855,4362695,4363773],"length":1,"stats":{"Line":0}},{"line":120,"address":[4362947,4362871,4363227],"length":1,"stats":{"Line":0}},{"line":121,"address":[4363243,4363708],"length":1,"stats":{"Line":0}},{"line":122,"address":[4363382,4363677,4363630],"length":1,"stats":{"Line":0}},{"line":123,"address":[4363482,4363566],"length":1,"stats":{"Line":0}},{"line":132,"address":[4363049,4363824,4363359,4364193],"length":1,"stats":{"Line":0}},{"line":133,"address":[4364896,4364224,4363841],"length":1,"stats":{"Line":0}},{"line":134,"address":[4364841,4364244],"length":1,"stats":{"Line":0}},{"line":138,"address":[4363914,4364062],"length":1,"stats":{"Line":0}},{"line":139,"address":[4364082],"length":1,"stats":{"Line":0}},{"line":140,"address":[4364928,4367836,4366006,4364102],"length":1,"stats":{"Line":0}},{"line":141,"address":[4364956],"length":1,"stats":{"Line":0}},{"line":146,"address":[4365024,4367469],"length":1,"stats":{"Line":0}},{"line":147,"address":[4366940,4367383,4366685,4367727,4367785],"length":1,"stats":{"Line":0}},{"line":149,"address":[4365060,4366663,4366051,4367763],"length":1,"stats":{"Line":0}},{"line":150,"address":[4366797],"length":1,"stats":{"Line":0}},{"line":154,"address":[4365033,4365126,4365984,4366015],"length":1,"stats":{"Line":0}},{"line":158,"address":[4365912,4367725,4367571],"length":1,"stats":{"Line":0}},{"line":159,"address":[4367684],"length":1,"stats":{"Line":0}},{"line":160,"address":[4367696],"length":1,"stats":{"Line":0}},{"line":161,"address":[4367714],"length":1,"stats":{"Line":0}},{"line":169,"address":[4363263,4368210,4367872],"length":1,"stats":{"Line":0}},{"line":170,"address":[4367981,4368126,4367892],"length":1,"stats":{"Line":0}},{"line":171,"address":[4368139,4369520,4369636,4368240],"length":1,"stats":{"Line":0}},{"line":173,"address":[4368367,4368273,4368472],"length":1,"stats":{"Line":0}},{"line":174,"address":[4369664,4368442],"length":1,"stats":{"Line":0}},{"line":175,"address":[4369688],"length":1,"stats":{"Line":0}},{"line":178,"address":[4368667,4368510],"length":1,"stats":{"Line":0}},{"line":179,"address":[4368688],"length":1,"stats":{"Line":0}},{"line":180,"address":[4371134,4369774,4371166,4369744,4369592],"length":1,"stats":{"Line":0}},{"line":182,"address":[4369819],"length":1,"stats":{"Line":0}},{"line":185,"address":[4369884],"length":1,"stats":{"Line":0}},{"line":188,"address":[4370040],"length":1,"stats":{"Line":0}},{"line":189,"address":[4370808,4370073],"length":1,"stats":{"Line":0}},{"line":190,"address":[4371075],"length":1,"stats":{"Line":0}},{"line":191,"address":[4370860],"length":1,"stats":{"Line":0}},{"line":198,"address":[4370332],"length":1,"stats":{"Line":0}},{"line":201,"address":[4370687],"length":1,"stats":{"Line":0}},{"line":204,"address":[4369953],"length":1,"stats":{"Line":0}},{"line":207,"address":[4369999],"length":1,"stats":{"Line":0}},{"line":210,"address":[4370100],"length":1,"stats":{"Line":0}},{"line":213,"address":[4370190],"length":1,"stats":{"Line":0}},{"line":216,"address":[4370261],"length":1,"stats":{"Line":0}},{"line":219,"address":[4370403],"length":1,"stats":{"Line":0}},{"line":222,"address":[4370558],"length":1,"stats":{"Line":0}},{"line":223,"address":[4370474,4371184],"length":1,"stats":{"Line":0}},{"line":224,"address":[4371200],"length":1,"stats":{"Line":0}},{"line":229,"address":[4370599],"length":1,"stats":{"Line":0}},{"line":236,"address":[4368700,4368648],"length":1,"stats":{"Line":0}},{"line":237,"address":[4369050],"length":1,"stats":{"Line":0}},{"line":238,"address":[4369282,4369083],"length":1,"stats":{"Line":0}},{"line":239,"address":[4369302],"length":1,"stats":{"Line":0}},{"line":240,"address":[4369533],"length":1,"stats":{"Line":0}},{"line":244,"address":[4369454,4369250,4369402],"length":1,"stats":{"Line":0}},{"line":245,"address":[4369258,4369334],"length":1,"stats":{"Line":0}},{"line":246,"address":[4369342],"length":1,"stats":{"Line":0}},{"line":254,"address":[5641218],"length":1,"stats":{"Line":0}},{"line":256,"address":[5641357,5641236,5641293],"length":1,"stats":{"Line":0}},{"line":257,"address":[5641373],"length":1,"stats":{"Line":0}},{"line":264,"address":[5641440],"length":1,"stats":{"Line":0}},{"line":265,"address":[5641445],"length":1,"stats":{"Line":0}},{"line":266,"address":[5641453],"length":1,"stats":{"Line":0}},{"line":267,"address":[5641461],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":106},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","components","dashboard_components","job_table_col_selection.rs"],"content":"use super::job_table_sorting::SortKey;\nuse egui::Layout;\nuse std::collections::BTreeMap;\n\n/**\n * Struct for the column information\n */\npub struct ColumnInfo {\n    pub name: String, // Name of the column\n    pub selected: bool, // True if the column is selected\n    pub sort_key: SortKey, // Sort key for the column\n}\n\n/**\n * Struct for the column selection\n */\npub struct ColumnSelection {\n    pub values: BTreeMap\u003cu8, ColumnInfo\u003e, // Map of column index to column info\n}\n\n/**\n * Default implementation of the column selection\n */\nimpl Default for ColumnSelection {\n    fn default() -\u003e Self {\n        let mut instance = Self {\n            values: BTreeMap::new(),\n        };\n        instance.select_default();\n        instance\n    }\n}\n\n/**\n * Implementation of the column selection\n */\nimpl ColumnSelection {\n    pub fn ui(\u0026mut self, ui: \u0026mut egui::Ui) {\n        ui.vertical(|ui| {\n            egui::Grid::new(\"\")\n                .num_columns(2)\n                .striped(false)\n                .show(ui, |ui| {\n                    ui.with_layout(Layout::top_down(egui::Align::Max), |ui| {\n                        ui.set_max_width(100.0);\n                        ui.label(t!(\"app.job_table.table.columns\"));\n                    });\n                    // Column selection grid\n                    egui::Grid::new(\"column_selection_grid\")\n                        .num_columns(3)\n                        .spacing([20.0, 8.0])\n                        .show(ui, |ui| {\n                            let mut count = 0;\n                            for (_column, value) in self.values.iter_mut() {\n                                ui.checkbox(\u0026mut value.selected, t!(value.name.to_string()));\n                                count += 1;\n                                if count % 3 == 0 {\n                                    ui.end_row();\n                                }\n                            }\n                            if count % 3 != 0 {\n                                ui.end_row();\n                            }\n                        });\n                    ui.end_row();\n                    ui.label(\"\");\n                    ui.horizontal(|ui| {\n                        if ui.button(t!(\"app.job_table.select_all\")).clicked() {\n                            self.select_all();\n                        }\n                        if ui.button(t!(\"app.job_table.select_default\")).clicked() {\n                            self.select_default();\n                        }\n                    });\n                });\n        });\n    }\n\n    fn select_default(\u0026mut self) {\n        self.values.insert(\n            0,\n            ColumnInfo {\n                name: \"app.job_table.table.job_id\".to_string(),\n                selected: true,\n                sort_key: SortKey::Id,\n            },\n        );\n        self.values.insert(\n            1,\n            ColumnInfo {\n                name: \"app.job_table.table.owner\".to_string(),\n                selected: true,\n                sort_key: SortKey::Owner,\n            },\n        );\n        self.values.insert(\n            2,\n            ColumnInfo {\n                name: \"app.job_table.table.queue\".to_string(),\n                selected: false,\n                sort_key: SortKey::Queue,\n            },\n        );\n        self.values.insert(\n            3,\n            ColumnInfo {\n                name: \"app.job_table.table.command\".to_string(),\n                selected: false,\n                sort_key: SortKey::Command,\n            },\n        );\n        self.values.insert(\n            4,\n            ColumnInfo {\n                name: \"app.job_table.table.state\".to_string(),\n                selected: true,\n                sort_key: SortKey::State,\n            },\n        );\n        self.values.insert(\n            5,\n            ColumnInfo {\n                name: \"app.job_table.table.message\".to_string(),\n                selected: false,\n                sort_key: SortKey::Message,\n            },\n        );\n        self.values.insert(\n            6,\n            ColumnInfo {\n                name: \"app.job_table.table.submission_time\".to_string(),\n                selected: false,\n                sort_key: SortKey::SubmissionTime,\n            },\n        );\n        self.values.insert(\n            7,\n            ColumnInfo {\n                name: \"app.job_table.table.scheduled_start_time\".to_string(),\n                selected: true,\n                sort_key: SortKey::ScheduledStartTime,\n            },\n        );\n        self.values.insert(\n            8,\n            ColumnInfo {\n                name: \"app.job_table.table.start_time\".to_string(),\n                selected: false,\n                sort_key: SortKey::StartTime,\n            },\n        );\n        self.values.insert(\n            9,\n            ColumnInfo {\n                name: \"app.job_table.table.stop_time\".to_string(),\n                selected: false,\n                sort_key: SortKey::StopTime,\n            },\n        );\n        self.values.insert(\n            10,\n            ColumnInfo {\n                name: \"app.job_table.table.wall_time\".to_string(),\n                selected: true,\n                sort_key: SortKey::WallTime,\n            },\n        );\n        self.values.insert(\n            11,\n            ColumnInfo {\n                name: \"app.job_table.table.exit_code\".to_string(),\n                selected: false,\n                sort_key: SortKey::ExitCode,\n            },\n        );\n        self.values.insert(\n            12,\n            ColumnInfo {\n                name: \"app.job_table.table.clusters\".to_string(),\n                selected: false,\n                sort_key: SortKey::Clusters,\n            },\n        );\n    }\n\n    fn select_all(\u0026mut self) {\n        for value in self.values.values_mut() {\n            value.selected = true;\n        }\n    }\n}\n","traces":[{"line":25,"address":[5644027,5643904],"length":1,"stats":{"Line":0}},{"line":27,"address":[5643922],"length":1,"stats":{"Line":0}},{"line":29,"address":[5643952],"length":1,"stats":{"Line":0}},{"line":30,"address":[5643996],"length":1,"stats":{"Line":0}},{"line":38,"address":[5644048],"length":1,"stats":{"Line":0}},{"line":39,"address":[5644065],"length":1,"stats":{"Line":0}},{"line":40,"address":[5670392,5670471],"length":1,"stats":{"Line":0}},{"line":43,"address":[5670466,5670512],"length":1,"stats":{"Line":0}},{"line":44,"address":[5670536,5671024,5671659,5670642],"length":1,"stats":{"Line":0}},{"line":45,"address":[5671044],"length":1,"stats":{"Line":0}},{"line":46,"address":[5671069,5671604],"length":1,"stats":{"Line":0}},{"line":49,"address":[5670749,5670890,5670835],"length":1,"stats":{"Line":0}},{"line":51,"address":[5670801],"length":1,"stats":{"Line":0}},{"line":52,"address":[5672899,5672944,5670885,5671696],"length":1,"stats":{"Line":0}},{"line":53,"address":[5671721],"length":1,"stats":{"Line":0}},{"line":54,"address":[5671886,5671745],"length":1,"stats":{"Line":0}},{"line":55,"address":[5672908,5672046,5672877,5671918,5672712],"length":1,"stats":{"Line":0}},{"line":56,"address":[5672779,5672807,5672695],"length":1,"stats":{"Line":0}},{"line":57,"address":[5672827,5672783],"length":1,"stats":{"Line":0}},{"line":58,"address":[5672866],"length":1,"stats":{"Line":0}},{"line":61,"address":[5671994,5671862],"length":1,"stats":{"Line":0}},{"line":62,"address":[5672038],"length":1,"stats":{"Line":0}},{"line":65,"address":[5670929],"length":1,"stats":{"Line":0}},{"line":66,"address":[5670939],"length":1,"stats":{"Line":0}},{"line":67,"address":[5672960,5674644,5674689,5670980],"length":1,"stats":{"Line":0}},{"line":68,"address":[5673892,5674702,5673536,5673810,5672985],"length":1,"stats":{"Line":0}},{"line":69,"address":[5673877],"length":1,"stats":{"Line":0}},{"line":71,"address":[5673911,5674653,5673710,5674358,5674546,5674625],"length":1,"stats":{"Line":0}},{"line":72,"address":[5674613],"length":1,"stats":{"Line":0}},{"line":79,"address":[5644096],"length":1,"stats":{"Line":0}},{"line":80,"address":[5644191],"length":1,"stats":{"Line":0}},{"line":82,"address":[5644148],"length":1,"stats":{"Line":0}},{"line":83,"address":[5644116],"length":1,"stats":{"Line":0}},{"line":85,"address":[5644143],"length":1,"stats":{"Line":0}},{"line":88,"address":[5644326],"length":1,"stats":{"Line":0}},{"line":90,"address":[5644256],"length":1,"stats":{"Line":0}},{"line":91,"address":[5644218],"length":1,"stats":{"Line":0}},{"line":93,"address":[5644248],"length":1,"stats":{"Line":0}},{"line":96,"address":[5644467],"length":1,"stats":{"Line":0}},{"line":98,"address":[5644397],"length":1,"stats":{"Line":0}},{"line":99,"address":[5644359],"length":1,"stats":{"Line":0}},{"line":101,"address":[5644389],"length":1,"stats":{"Line":0}},{"line":104,"address":[5644614],"length":1,"stats":{"Line":0}},{"line":106,"address":[5644544],"length":1,"stats":{"Line":0}},{"line":107,"address":[5644506],"length":1,"stats":{"Line":0}},{"line":109,"address":[5644536],"length":1,"stats":{"Line":0}},{"line":112,"address":[5644761],"length":1,"stats":{"Line":0}},{"line":114,"address":[5644691],"length":1,"stats":{"Line":0}},{"line":115,"address":[5644653],"length":1,"stats":{"Line":0}},{"line":117,"address":[5644683],"length":1,"stats":{"Line":0}},{"line":120,"address":[5644908],"length":1,"stats":{"Line":0}},{"line":122,"address":[5644838],"length":1,"stats":{"Line":0}},{"line":123,"address":[5644800],"length":1,"stats":{"Line":0}},{"line":125,"address":[5644830],"length":1,"stats":{"Line":0}},{"line":128,"address":[5645055],"length":1,"stats":{"Line":0}},{"line":130,"address":[5644985],"length":1,"stats":{"Line":0}},{"line":131,"address":[5644947],"length":1,"stats":{"Line":0}},{"line":133,"address":[5644977],"length":1,"stats":{"Line":0}},{"line":136,"address":[5645202],"length":1,"stats":{"Line":0}},{"line":138,"address":[5645132],"length":1,"stats":{"Line":0}},{"line":139,"address":[5645094],"length":1,"stats":{"Line":0}},{"line":141,"address":[5645124],"length":1,"stats":{"Line":0}},{"line":144,"address":[5645349],"length":1,"stats":{"Line":0}},{"line":146,"address":[5645279],"length":1,"stats":{"Line":0}},{"line":147,"address":[5645241],"length":1,"stats":{"Line":0}},{"line":149,"address":[5645271],"length":1,"stats":{"Line":0}},{"line":152,"address":[5645496],"length":1,"stats":{"Line":0}},{"line":154,"address":[5645426],"length":1,"stats":{"Line":0}},{"line":155,"address":[5645388],"length":1,"stats":{"Line":0}},{"line":157,"address":[5645418],"length":1,"stats":{"Line":0}},{"line":160,"address":[5645643],"length":1,"stats":{"Line":0}},{"line":162,"address":[5645573],"length":1,"stats":{"Line":0}},{"line":163,"address":[5645535],"length":1,"stats":{"Line":0}},{"line":165,"address":[5645565],"length":1,"stats":{"Line":0}},{"line":168,"address":[5645790],"length":1,"stats":{"Line":0}},{"line":170,"address":[5645720],"length":1,"stats":{"Line":0}},{"line":171,"address":[5645682],"length":1,"stats":{"Line":0}},{"line":173,"address":[5645712],"length":1,"stats":{"Line":0}},{"line":176,"address":[5645937],"length":1,"stats":{"Line":0}},{"line":178,"address":[5645867],"length":1,"stats":{"Line":0}},{"line":179,"address":[5645829],"length":1,"stats":{"Line":0}},{"line":181,"address":[5645859],"length":1,"stats":{"Line":0}},{"line":186,"address":[5645984],"length":1,"stats":{"Line":0}},{"line":187,"address":[5646128,5646108,5646002],"length":1,"stats":{"Line":0}},{"line":188,"address":[5646124],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":85},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","components","dashboard_components","job_table_sorting.rs"],"content":"use crate::models::data_structure::job::JobState;\n\n/**\n * Enum for sorting keys\n */\n#[derive(PartialEq, Copy, Clone)]\npub(crate) enum SortKey {\n    Id,\n    Owner,\n    Queue,\n    Command,\n    State,\n    Message,\n    SubmissionTime,\n    ScheduledStartTime,\n    StartTime,\n    StopTime,\n    ExitCode,\n    Clusters,\n    WallTime,\n}\n\n/**\n * Implementation of the sorting keys\n */\nimpl SortKey {\n    /**\n     * Sorts the jobs based on the selected key\n     */\n    pub fn sort_jobs\u003cT\u003e(self, jobs: \u0026mut Vec\u003cT\u003e, ascending: bool)\n    where\n        T: JobSortable,\n    {\n        let comparator = |a: \u0026T, b: \u0026T| {\n            let cmp = match self {\n                SortKey::Id =\u003e a.get_id().cmp(\u0026b.get_id()), // Compare the job id\n                SortKey::Owner =\u003e a.get_owner().cmp(\u0026b.get_owner()), // Compare the job owner\n                SortKey::State =\u003e a.get_state().cmp(\u0026b.get_state()), // Compare the job state\n                SortKey::StartTime =\u003e a.get_start_time().cmp(\u0026b.get_start_time()), // Compare the job start time\n                SortKey::WallTime =\u003e a.get_walltime().cmp(\u0026b.get_walltime()), // Compare the job walltime\n                SortKey::Queue =\u003e a.get_queue().cmp(\u0026b.get_queue()), // Compare the job queue\n                SortKey::Command =\u003e a.get_command().cmp(\u0026b.get_command()), // Compare the job command\n                SortKey::Message =\u003e a.get_message().cmp(\u0026b.get_message()), // Compare the job message\n                SortKey::SubmissionTime =\u003e a.get_submission_time().cmp(\u0026b.get_submission_time()), // Compare the job submission time\n                SortKey::ScheduledStartTime =\u003e { // Compare the job scheduled start time\n                    a.get_scheduled_start().cmp(\u0026b.get_scheduled_start())\n                }\n                SortKey::StopTime =\u003e a.get_stop_time().cmp(\u0026b.get_stop_time()), // Compare the job stop time\n                SortKey::ExitCode =\u003e a.get_exit_code().cmp(\u0026b.get_exit_code()), // Compare the job exit code\n                SortKey::Clusters =\u003e a.get_clusters().cmp(\u0026b.get_clusters()), // Compare the job clusters\n            };\n\n            // If the sorting is ascending, return the comparison, otherwise return the reverse comparison\n            if ascending {\n                cmp\n            } else {\n                cmp.reverse()\n            }\n        };\n        \n        // Sort the jobs based on the comparator\n        jobs.sort_by(comparator);\n    }\n}\n\n/**\n * Trait for sortable jobs\n */\npub trait JobSortable {\n    fn get_id(\u0026self) -\u003e \u0026u32;\n    fn get_owner(\u0026self) -\u003e \u0026str;\n    fn get_state(\u0026self) -\u003e \u0026JobState;\n    fn get_start_time(\u0026self) -\u003e u64;\n    fn get_walltime(\u0026self) -\u003e u64;\n    fn get_queue(\u0026self) -\u003e \u0026str;\n    fn get_command(\u0026self) -\u003e \u0026str;\n    fn get_message(\u0026self) -\u003e Option\u003c\u0026str\u003e;\n    fn get_submission_time(\u0026self) -\u003e u64;\n    fn get_scheduled_start(\u0026self) -\u003e u64;\n    fn get_stop_time(\u0026self) -\u003e u64;\n    fn get_exit_code(\u0026self) -\u003e \u0026Option\u003ci32\u003e;\n    fn get_clusters(\u0026self) -\u003e \u0026Vec\u003cString\u003e;\n    fn get_end_date(\u0026self) -\u003e i64;\n}\n","traces":[{"line":30,"address":[4923376],"length":1,"stats":{"Line":0}},{"line":34,"address":[4923472,4923407],"length":1,"stats":{"Line":0}},{"line":35,"address":[4923518],"length":1,"stats":{"Line":0}},{"line":36,"address":[4923557],"length":1,"stats":{"Line":0}},{"line":37,"address":[4923617],"length":1,"stats":{"Line":0}},{"line":38,"address":[4923875],"length":1,"stats":{"Line":0}},{"line":39,"address":[4924150],"length":1,"stats":{"Line":0}},{"line":40,"address":[4924396],"length":1,"stats":{"Line":0}},{"line":41,"address":[4923703],"length":1,"stats":{"Line":0}},{"line":42,"address":[4923789],"length":1,"stats":{"Line":0}},{"line":43,"address":[4923935],"length":1,"stats":{"Line":0}},{"line":44,"address":[4924018],"length":1,"stats":{"Line":0}},{"line":46,"address":[4924084],"length":1,"stats":{"Line":0}},{"line":48,"address":[4924216],"length":1,"stats":{"Line":0}},{"line":49,"address":[4924282],"length":1,"stats":{"Line":0}},{"line":50,"address":[4924339],"length":1,"stats":{"Line":0}},{"line":54,"address":[4924457],"length":1,"stats":{"Line":0}},{"line":55,"address":[4924482],"length":1,"stats":{"Line":0}},{"line":57,"address":[4924466],"length":1,"stats":{"Line":0}},{"line":62,"address":[4923427],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":20},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","components","dashboard_components","metric_box.rs"],"content":"use eframe::egui::{self, Color32, RichText, Vec2, Widget};\nuse egui::Response;\n\n/**\n * Struct for the metric box\n */\n#[derive(Clone)]\npub struct MetricBox {\n    title: String, // Title of the metric box\n    value: String, // Value of the metric box\n    color: Color32, // Color of the metric box\n}\n\n/**\n * Implementation of the metric box\n */\nimpl MetricBox {\n    pub const MIN_WIDTH: f32 = 180.0; // Minimum width of the metric box\n    pub const MIN_HEIGHT: f32 = 90.0; // Minimum height of the metric box\n\n    /**\n     * Creates a new metric box\n     */\n    pub fn new(title: String, value: String, color: Color32) -\u003e Self {\n        MetricBox {\n            title,\n            value,\n            color,\n        }\n    }\n\n    /**\n     * Shows the metric box with a specific size\n     */\n    pub fn ui_sized(self, ui: \u0026mut egui::Ui, size: Vec2) -\u003e Response {\n        egui::Frame::none()\n            .fill(if ui.ctx().style().visuals.dark_mode {\n                egui::Color32::from_gray(28)\n            } else {\n                egui::Color32::from_gray(255)\n            })\n            .rounding(6.0)\n            .stroke(egui::Stroke::new(0.7, self.color))\n            .show(ui, |ui| {\n                ui.set_min_size(size);\n                ui.vertical_centered(|ui| {\n                    let title_size = (13.0 * size.x / Self::MIN_WIDTH).min(16.0);\n                    let value_size = (24.0 * size.x / Self::MIN_WIDTH).min(32.0);\n\n                    ui.add_space(size.y * 0.1);\n                    ui.label(\n                        RichText::new(\u0026self.title)\n                            .color(egui::Color32::from_gray(160))\n                            .size(title_size),\n                    );\n                    ui.add_space(size.y * 0.15);\n                    ui.heading(\n                        RichText::new(\u0026self.value)\n                            .color(self.color.gamma_multiply(0.8))\n                            .size(value_size)\n                            .strong(),\n                    );\n                });\n            })\n            .response\n    }\n}\n\n/**\n * Implementation of the widget for the metric box\n */\nimpl Widget for MetricBox {\n    fn ui(self, ui: \u0026mut egui::Ui) -\u003e Response {\n        self.ui_sized(ui, Vec2::new(Self::MIN_WIDTH, Self::MIN_HEIGHT))\n    }\n}\n","traces":[{"line":24,"address":[5602176],"length":1,"stats":{"Line":0}},{"line":35,"address":[5602957,5602256],"length":1,"stats":{"Line":0}},{"line":36,"address":[5602303,5602907,5602571,5602682,5602778],"length":1,"stats":{"Line":0}},{"line":37,"address":[5602364],"length":1,"stats":{"Line":0}},{"line":38,"address":[5602620],"length":1,"stats":{"Line":0}},{"line":40,"address":[5602535],"length":1,"stats":{"Line":0}},{"line":43,"address":[5602694],"length":1,"stats":{"Line":0}},{"line":44,"address":[5281344],"length":1,"stats":{"Line":0}},{"line":45,"address":[5281382],"length":1,"stats":{"Line":0}},{"line":46,"address":[5282337,5282369,5281520,5281410],"length":1,"stats":{"Line":0}},{"line":47,"address":[5281545],"length":1,"stats":{"Line":0}},{"line":48,"address":[5281640],"length":1,"stats":{"Line":0}},{"line":50,"address":[5281704],"length":1,"stats":{"Line":0}},{"line":51,"address":[5281951],"length":1,"stats":{"Line":0}},{"line":52,"address":[5281734,5281936,5281845],"length":1,"stats":{"Line":0}},{"line":53,"address":[5281768,5281907,5282378],"length":1,"stats":{"Line":0}},{"line":56,"address":[5281994],"length":1,"stats":{"Line":0}},{"line":57,"address":[5282294],"length":1,"stats":{"Line":0}},{"line":58,"address":[5282247,5282024,5282177],"length":1,"stats":{"Line":0}},{"line":59,"address":[5282058,5282350,5282239],"length":1,"stats":{"Line":0}},{"line":73,"address":[5603152,5602992,5603174],"length":1,"stats":{"Line":0}},{"line":74,"address":[5603070,5603167,5603015],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":22},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","components","dashboard_components","metric_chart.rs"],"content":"use egui::{Response, RichText, Vec2, Widget};\nuse egui_plot::AxisHints;\nuse egui_plot::{Bar, BarChart, Plot};\nuse std::collections::HashMap;\n\nuse crate::models::data_structure::job::Job;\n\npub enum ChartType {\n    Bar(BarChart),\n}\n\npub struct MetricChart {\n    pub title: String,\n    pub chart: ChartType,\n    pub color: egui::Color32,\n    pub labels: Vec\u003cString\u003e,\n}\n\nimpl MetricChart {\n    const MIN_WIDTH: f32 = 200.0;\n    const MIN_HEIGHT: f32 = 150.0;\n\n    pub fn new(title: \u0026str, chart: ChartType, labels: Vec\u003cString\u003e) -\u003e Self {\n        MetricChart {\n            title: title.to_string(),\n            chart,\n            color: egui::Color32::from_rgb(128, 128, 128),\n            labels,\n        }\n    }\n\n    pub fn ui_with_chart(self, ui: \u0026mut egui::Ui, size: Vec2) -\u003e Response {\n        egui::Frame::none()\n            .fill(if ui.ctx().style().visuals.dark_mode {\n                egui::Color32::from_gray(28)\n            } else {\n                egui::Color32::from_gray(255)\n            })\n            .rounding(6.0)\n            .stroke(egui::Stroke::new(0.7, self.color))\n            .show(ui, |ui| {\n                ui.set_min_size(size);\n                ui.vertical_centered(|ui| {\n                    let title_size = (13.0 * size.x / Self::MIN_WIDTH).min(16.0);\n\n                    ui.label(\n                        RichText::new(\u0026self.title)\n                            .color(egui::Color32::from_gray(160))\n                            .size(title_size),\n                    );\n                    ui.add_space(size.y * 0.15);\n\n                    let labels = \u0026self.labels;\n                    Plot::new(\"metric_chart\")\n                        .view_aspect(2.0)\n                        .allow_drag(false)\n                        .allow_zoom(false)\n                        .allow_scroll(false)\n                        .show_x(false)\n                        .show_y(false)\n                        .custom_x_axes(vec![AxisHints::new_x().formatter(move |mark, _range| {\n                            let index = mark.value.round() as usize;\n                            if index \u003c labels.len() {\n                                labels[index].to_string()\n                            } else {\n                                // Fallback for out-of-range values\n                                format!(\"{:.1}\", mark.value)\n                            }\n                        })])\n                        .show(ui, |plot_ui| match self.chart {\n                            ChartType::Bar(bar_chart) =\u003e plot_ui.bar_chart(bar_chart),\n                        })\n                        .response // Return the response from the Plot widget\n                });\n            })\n            .response\n    }\n}\n\nimpl Widget for MetricChart {\n    fn ui(self, ui: \u0026mut egui::Ui) -\u003e Response {\n        self.ui_with_chart(ui, Vec2::new(Self::MIN_WIDTH, Self::MIN_HEIGHT))\n    }\n}\n\npub fn create_jobstate_chart(jobs: Vec\u003cJob\u003e) -\u003e MetricChart {\n    let mut job_states = HashMap::new();\n    for job in jobs {\n        let count = job_states.entry(job.state).or_insert(0);\n        *count += 1;\n    }\n\n    // Convert HashMap to Vec and sort by state label\n    let mut state_counts: Vec\u003c_\u003e = job_states.into_iter().collect();\n    state_counts.sort_by_key(|(state, _)| state.get_label());\n\n    // Extract labels for the x-axis\n    let labels: Vec\u003cString\u003e = state_counts\n        .iter()\n        .map(|(state, _)| state.get_label().to_string())\n        .collect();\n\n    let bars: Vec\u003cBar\u003e = state_counts\n        .into_iter()\n        .enumerate()\n        .map(|(index, (state, count))| {\n            Bar::new(index as f64, count as f64)\n                .name(state.get_label())\n                .fill(state.get_color().1)\n        })\n        .collect();\n\n    let plot = BarChart::new(bars).name(\"Job States\");\n    MetricChart::new(\"Job State\", ChartType::Bar(plot), labels)\n}\n","traces":[{"line":23,"address":[5603883,5603921,5603472],"length":1,"stats":{"Line":0}},{"line":25,"address":[5603515],"length":1,"stats":{"Line":0}},{"line":27,"address":[5603649,5603715],"length":1,"stats":{"Line":0}},{"line":32,"address":[5603952,5604851],"length":1,"stats":{"Line":0}},{"line":33,"address":[5604679,5603999,5604398,5604287,5604497],"length":1,"stats":{"Line":0}},{"line":34,"address":[5604080],"length":1,"stats":{"Line":0}},{"line":35,"address":[5604336],"length":1,"stats":{"Line":0}},{"line":37,"address":[5604251],"length":1,"stats":{"Line":0}},{"line":40,"address":[5604410],"length":1,"stats":{"Line":0}},{"line":41,"address":[5238723,5238748,5238432],"length":1,"stats":{"Line":0}},{"line":42,"address":[5238470],"length":1,"stats":{"Line":0}},{"line":43,"address":[5238768,5239918,5239976,5238561],"length":1,"stats":{"Line":0}},{"line":44,"address":[5238815,5238952],"length":1,"stats":{"Line":0}},{"line":46,"address":[5239169],"length":1,"stats":{"Line":0}},{"line":47,"address":[5238961,5239071,5239157],"length":1,"stats":{"Line":0}},{"line":48,"address":[5239954,5239133,5238997],"length":1,"stats":{"Line":0}},{"line":51,"address":[5239219],"length":1,"stats":{"Line":0}},{"line":53,"address":[5239251],"length":1,"stats":{"Line":0}},{"line":54,"address":[5239871,5239723,5239268],"length":1,"stats":{"Line":0}},{"line":60,"address":[5239451],"length":1,"stats":{"Line":0}},{"line":61,"address":[5239469,5239527,5240768,5239927],"length":1,"stats":{"Line":0}},{"line":62,"address":[5240818],"length":1,"stats":{"Line":0}},{"line":63,"address":[5240924],"length":1,"stats":{"Line":0}},{"line":64,"address":[5241449],"length":1,"stats":{"Line":0}},{"line":67,"address":[5241051,5241437,5241315],"length":1,"stats":{"Line":0}},{"line":70,"address":[5239780,5240016],"length":1,"stats":{"Line":0}},{"line":71,"address":[5240036],"length":1,"stats":{"Line":0}},{"line":81,"address":[5604928,5605124,5605149],"length":1,"stats":{"Line":0}},{"line":82,"address":[5605142,5604957,5605024],"length":1,"stats":{"Line":0}},{"line":86,"address":[5606561,5605168,5606382],"length":1,"stats":{"Line":0}},{"line":87,"address":[5605190],"length":1,"stats":{"Line":0}},{"line":88,"address":[5605288,5605515,5605388,5605593],"length":1,"stats":{"Line":0}},{"line":89,"address":[5606459,5605595],"length":1,"stats":{"Line":0}},{"line":90,"address":[5606526,5606484],"length":1,"stats":{"Line":0}},{"line":94,"address":[5605626],"length":1,"stats":{"Line":0}},{"line":95,"address":[5240113,5240080],"length":1,"stats":{"Line":0}},{"line":98,"address":[5605824],"length":1,"stats":{"Line":0}},{"line":100,"address":[5240181,5240144],"length":1,"stats":{"Line":0}},{"line":103,"address":[5606048,5605928],"length":1,"stats":{"Line":0}},{"line":106,"address":[5240329,5240743,5240714,5240304],"length":1,"stats":{"Line":0}},{"line":107,"address":[5240499,5240373,5240652],"length":1,"stats":{"Line":0}},{"line":108,"address":[5240451,5240752,5240532],"length":1,"stats":{"Line":0}},{"line":109,"address":[5240698,5240727,5240553],"length":1,"stats":{"Line":0}},{"line":113,"address":[5606101],"length":1,"stats":{"Line":0}},{"line":114,"address":[5606168],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":45},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","components","dashboard_components","metric_grid.rs"],"content":"use super::{metric_box::MetricBox, metric_chart::MetricChart};\nuse eframe::egui;\n\npub struct MetricGrid {\n    columns: usize,\n    spacing: f32,\n}\n\nimpl Default for MetricGrid {\n    fn default() -\u003e Self {\n        Self {\n            columns: 3,\n            spacing: 10.0,\n        }\n    }\n}\n\nimpl MetricGrid {\n    pub fn show\u003cF\u003e(\u0026self, ui: \u0026mut egui::Ui, add_contents: F)\n    where\n        F: FnOnce(\u0026mut MetricGridBuilder),\n    {\n        let available_width = ui.available_width();\n\n        // First calculate the total minimum width needed\n        let min_total_width = (MetricBox::MIN_WIDTH * self.columns as f32)\n            + (self.spacing * (self.columns - 1) as f32);\n\n        // If available width is less than minimum, use minimum\n        let actual_width = available_width.max(min_total_width);\n\n        // Recalculate column width taking spacing into account\n        let column_width =\n            (actual_width - (self.spacing * (self.columns - 1) as f32)) / self.columns as f32;\n\n        egui::Grid::new(\"metrics_grid\")\n            .spacing([self.spacing, self.spacing])\n            .min_col_width(column_width)\n            .max_col_width(column_width)\n            .show(ui, |ui| {\n                let mut builder = MetricGridBuilder {\n                    ui,\n                    column_width,\n                    current_column: 0,\n                    columns: self.columns,\n                };\n                add_contents(\u0026mut builder);\n\n                if builder.current_column \u003e 0 \u0026\u0026 builder.current_column \u003c builder.columns {\n                    builder.new_row();\n                }\n            });\n    }\n}\n\npub struct MetricGridBuilder\u003c'a\u003e {\n    ui: \u0026'a mut egui::Ui,\n    column_width: f32,\n    current_column: usize,\n    columns: usize,\n}\n\nimpl\u003c'a\u003e MetricGridBuilder\u003c'a\u003e {\n    pub fn add_metric(\u0026mut self, metric: MetricBox) {\n        if self.current_column \u003e= self.columns {\n            self.new_row();\n        }\n\n        self.ui\n            .add_sized([self.column_width, MetricBox::MIN_HEIGHT], metric);\n        self.current_column += 1;\n    }\n\n    pub fn add_chart(\u0026mut self, chart: MetricChart) {\n        if self.current_column \u003e= self.columns {\n            self.new_row();\n        }\n        self.ui\n            .add_sized([self.column_width, MetricBox::MIN_HEIGHT], chart);\n        self.current_column += 1;\n    }\n\n    pub fn new_row(\u0026mut self) {\n        if self.current_column \u003e 0 {\n            self.ui.end_row();\n        }\n        self.current_column = 0;\n    }\n}\n","traces":[{"line":10,"address":[4336880],"length":1,"stats":{"Line":0}},{"line":19,"address":[5438240,5439204],"length":1,"stats":{"Line":0}},{"line":23,"address":[5438397,5438312],"length":1,"stats":{"Line":0}},{"line":26,"address":[5438617,5438406],"length":1,"stats":{"Line":0}},{"line":27,"address":[5438495,5438643],"length":1,"stats":{"Line":0}},{"line":30,"address":[5438674,5438630],"length":1,"stats":{"Line":0}},{"line":33,"address":[5438929,5438683],"length":1,"stats":{"Line":0}},{"line":34,"address":[],"length":0,"stats":{"Line":0}},{"line":36,"address":[5438898,5439173,5438978],"length":1,"stats":{"Line":0}},{"line":37,"address":[5438955],"length":1,"stats":{"Line":0}},{"line":38,"address":[],"length":0,"stats":{"Line":0}},{"line":39,"address":[],"length":0,"stats":{"Line":0}},{"line":40,"address":[5439232,5439107],"length":1,"stats":{"Line":0}},{"line":41,"address":[5439258],"length":1,"stats":{"Line":0}},{"line":42,"address":[],"length":0,"stats":{"Line":0}},{"line":43,"address":[5439244],"length":1,"stats":{"Line":0}},{"line":44,"address":[],"length":0,"stats":{"Line":0}},{"line":45,"address":[5439251],"length":1,"stats":{"Line":0}},{"line":47,"address":[5439282],"length":1,"stats":{"Line":0}},{"line":49,"address":[5439311,5439298],"length":1,"stats":{"Line":0}},{"line":50,"address":[5439323],"length":1,"stats":{"Line":0}},{"line":64,"address":[4336896,4337245,4337220],"length":1,"stats":{"Line":0}},{"line":65,"address":[4336921],"length":1,"stats":{"Line":0}},{"line":66,"address":[4337134,4337093],"length":1,"stats":{"Line":0}},{"line":69,"address":[4336961,4337044],"length":1,"stats":{"Line":0}},{"line":70,"address":[4337139,4336964],"length":1,"stats":{"Line":0}},{"line":71,"address":[4337200,4337160],"length":1,"stats":{"Line":0}},{"line":74,"address":[4337594,4337264,4337569],"length":1,"stats":{"Line":0}},{"line":75,"address":[4337289],"length":1,"stats":{"Line":0}},{"line":76,"address":[4337485,4337444],"length":1,"stats":{"Line":0}},{"line":78,"address":[4337403,4337325],"length":1,"stats":{"Line":0}},{"line":79,"address":[4337333,4337490],"length":1,"stats":{"Line":0}},{"line":80,"address":[4337549,4337511],"length":1,"stats":{"Line":0}},{"line":83,"address":[4337616],"length":1,"stats":{"Line":0}},{"line":84,"address":[4337630],"length":1,"stats":{"Line":0}},{"line":85,"address":[4337660],"length":1,"stats":{"Line":0}},{"line":87,"address":[4337642],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":37},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","components","dashboard_components","mod.rs"],"content":"pub mod job_table;\npub mod metric_box;\npub mod metric_grid;\npub mod metric_chart;\npub mod job_table_col_selection;\npub mod job_table_sorting;","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","components","gantt_aggregate_by.rs"],"content":"#[derive(Clone, Copy, Debug, PartialEq, Eq)]\npub enum AggregateByLevel1Enum {\n    Owner,\n    Cluster,\n    Host,\n}\n\n#[derive(PartialEq, Clone, Copy)]\npub enum AggregateByLevel2Enum {\n    Owner,\n    Host,\n    None,\n}\n\npub struct AggregateBy {\n    pub level_1: AggregateByLevel1Enum,\n    pub level_2: AggregateByLevel2Enum,\n}\n\nimpl Default for AggregateBy {\n    fn default() -\u003e Self {\n        Self {\n            level_1: AggregateByLevel1Enum::Cluster, // Default value for the first level is Cluster\n            level_2: AggregateByLevel2Enum::Host, // Default value for the second level is Host\n        }\n    }\n}\n\n/*\n * To manage the aggregation levels, wich is similar to a vertical zoom in the Gantt chart (the horizontal zoom being the time range)\n * The rule for aggregation is:\n * The first level must be higher than the second level, the order is:\n * Cluster -\u003e Host -\u003e Owner -\u003e None\n */\nimpl AggregateBy {\n    pub fn ui(\u0026mut self, ui: \u0026mut egui::Ui) {\n        egui::Grid::new(\"aggregate_by_grid\")\n            .num_columns(3)\n            .show(ui, |ui| {\n                ui.label(format!(\"{}:\", t!(\"app.gantt.settings.aggregate_by\")));\n                ui.label(format!(\"{} 1:\", t!(\"app.gantt.settings.level\")));\n                let mut on_change_level_1 = false;\n                on_change_level_1 |= ui\n                    .radio_value(\u0026mut self.level_1, AggregateByLevel1Enum::Cluster, \"Cluster\")\n                    .clicked();\n                on_change_level_1 |= ui\n                    .radio_value(\n                        \u0026mut self.level_1,\n                        AggregateByLevel1Enum::Host,\n                        t!(\"app.gantt.settings.host\"),\n                    )\n                    .clicked();\n                on_change_level_1 |= ui\n                    .radio_value(\n                        \u0026mut self.level_1,\n                        AggregateByLevel1Enum::Owner,\n                        t!(\"app.gantt.settings.owner\"),\n                    )\n                    .clicked();\n                ui.end_row();\n\n                if on_change_level_1 {\n                    self.level_2 = match self.level_1 {\n                        AggregateByLevel1Enum::Cluster =\u003e AggregateByLevel2Enum::Host,\n                        AggregateByLevel1Enum::Host =\u003e AggregateByLevel2Enum::Owner,\n                        AggregateByLevel1Enum::Owner =\u003e AggregateByLevel2Enum::None,\n                    }\n                }\n\n                ui.label(\"\");\n                match self.level_1 {\n                    AggregateByLevel1Enum::Cluster =\u003e {\n                        ui.label(format!(\"{} 2:\", t!(\"app.gantt.settings.level\")));\n                        ui.radio_value(\n                            \u0026mut self.level_2,\n                            AggregateByLevel2Enum::Host,\n                            t!(\"app.gantt.settings.host\"),\n                        );\n                        ui.radio_value(\n                            \u0026mut self.level_2,\n                            AggregateByLevel2Enum::Owner,\n                            t!(\"app.gantt.settings.owner\"),\n                        );\n                        ui.radio_value(\n                            \u0026mut self.level_2,\n                            AggregateByLevel2Enum::None,\n                            t!(\"app.gantt.settings.none\"),\n                        );\n                    }\n                    AggregateByLevel1Enum::Owner =\u003e {}\n                    AggregateByLevel1Enum::Host =\u003e {\n                        ui.label(format!(\"{} 2:\", t!(\"app.gantt.settings.level\")));\n                        ui.radio_value(\n                            \u0026mut self.level_2,\n                            AggregateByLevel2Enum::Owner,\n                            t!(\"app.gantt.settings.owner\"),\n                        );\n                        ui.radio_value(\n                            \u0026mut self.level_2,\n                            AggregateByLevel2Enum::None,\n                            t!(\"app.gantt.settings.none\"),\n                        );\n                    }\n                }\n                ui.end_row();\n            });\n    }\n}\n","traces":[{"line":36,"address":[4357264],"length":1,"stats":{"Line":0}},{"line":37,"address":[4357361,4357296],"length":1,"stats":{"Line":0}},{"line":39,"address":[4357354],"length":1,"stats":{"Line":0}},{"line":40,"address":[4910966,4920809,4912050,4911571],"length":1,"stats":{"Line":0}},{"line":41,"address":[4912100,4920737,4913128,4912617],"length":1,"stats":{"Line":0}},{"line":42,"address":[4913172],"length":1,"stats":{"Line":0}},{"line":43,"address":[4913196,4913387],"length":1,"stats":{"Line":0}},{"line":44,"address":[4913180],"length":1,"stats":{"Line":0}},{"line":45,"address":[4913336,4913405],"length":1,"stats":{"Line":0}},{"line":46,"address":[4914081,4913864],"length":1,"stats":{"Line":0}},{"line":48,"address":[4913422],"length":1,"stats":{"Line":0}},{"line":49,"address":[4913438],"length":1,"stats":{"Line":0}},{"line":50,"address":[4913895,4913446,4913625,4913846],"length":1,"stats":{"Line":0}},{"line":52,"address":[4914030,4913549,4913780,4920701,4914099,4914319],"length":1,"stats":{"Line":0}},{"line":53,"address":[4914873,4914656],"length":1,"stats":{"Line":0}},{"line":55,"address":[4914192],"length":1,"stats":{"Line":0}},{"line":56,"address":[4914208],"length":1,"stats":{"Line":0}},{"line":57,"address":[4914687,4914417,4914638,4914216],"length":1,"stats":{"Line":0}},{"line":59,"address":[4914572,4914341,4914891,4915003,4914822,4920665],"length":1,"stats":{"Line":0}},{"line":60,"address":[4914985],"length":1,"stats":{"Line":0}},{"line":62,"address":[4914991,4915217],"length":1,"stats":{"Line":0}},{"line":63,"address":[4915126,4915200],"length":1,"stats":{"Line":0}},{"line":64,"address":[4915182],"length":1,"stats":{"Line":0}},{"line":65,"address":[4915192],"length":1,"stats":{"Line":0}},{"line":66,"address":[4915172],"length":1,"stats":{"Line":0}},{"line":70,"address":[4915030],"length":1,"stats":{"Line":0}},{"line":71,"address":[4915079],"length":1,"stats":{"Line":0}},{"line":72,"address":[4918167],"length":1,"stats":{"Line":0}},{"line":73,"address":[4916349,4915870,4918321,4915456,4915244],"length":1,"stats":{"Line":0}},{"line":74,"address":[4916823],"length":1,"stats":{"Line":0}},{"line":75,"address":[4916393],"length":1,"stats":{"Line":0}},{"line":76,"address":[4916406],"length":1,"stats":{"Line":0}},{"line":77,"address":[4916587,4916808,4916854,4916414],"length":1,"stats":{"Line":0}},{"line":79,"address":[4917422],"length":1,"stats":{"Line":0}},{"line":80,"address":[4916976],"length":1,"stats":{"Line":0}},{"line":81,"address":[4916989],"length":1,"stats":{"Line":0}},{"line":82,"address":[4917407,4916997,4917453,4917186],"length":1,"stats":{"Line":0}},{"line":84,"address":[4918021],"length":1,"stats":{"Line":0}},{"line":85,"address":[4917575],"length":1,"stats":{"Line":0}},{"line":86,"address":[4917588],"length":1,"stats":{"Line":0}},{"line":87,"address":[4917785,4917596,4918006,4918052],"length":1,"stats":{"Line":0}},{"line":91,"address":[4920497],"length":1,"stats":{"Line":0}},{"line":92,"address":[4918807,4918393,4915350,4919286,4920593],"length":1,"stats":{"Line":0}},{"line":93,"address":[4919754],"length":1,"stats":{"Line":0}},{"line":94,"address":[4919330],"length":1,"stats":{"Line":0}},{"line":95,"address":[4919343],"length":1,"stats":{"Line":0}},{"line":96,"address":[4919739,4919518,4919351,4919785],"length":1,"stats":{"Line":0}},{"line":98,"address":[4920351],"length":1,"stats":{"Line":0}},{"line":99,"address":[4919907],"length":1,"stats":{"Line":0}},{"line":100,"address":[4919919],"length":1,"stats":{"Line":0}},{"line":101,"address":[4919927,4920116,4920337,4920382],"length":1,"stats":{"Line":0}},{"line":105,"address":[4915230],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":52},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","components","gantt_job_color.rs"],"content":"#[derive(PartialEq)]\npub enum JobColorEnum {\n    Random,\n    State,\n}\n\npub struct JobColor {\n    pub color: JobColorEnum,\n}\n\nimpl Default for JobColor {\n    fn default() -\u003e Self {\n        Self {\n            color: JobColorEnum::Random, // Default value for the job color is Random\n        }\n    }\n}\n\nimpl JobColor {\n\n    /**\n     * Returns true if the the selected job color is random\n     */\n    pub fn is_random(\u0026self) -\u003e bool {\n        self.color == JobColorEnum::Random\n    }\n\n    pub fn ui(\u0026mut self, ui: \u0026mut egui::Ui) {\n        ui.horizontal(|ui| {\n            ui.label(format!(\"{}:\", t!(\"app.gantt.settings.job_color\")));\n            // The job color can be random or based on the job state\n            ui.horizontal(|ui| {\n                ui.radio_value(\n                    \u0026mut self.color,\n                    JobColorEnum::Random,\n                    t!(\"app.gantt.settings.job_color_random\"),\n                );\n                ui.radio_value(\n                    \u0026mut self.color,\n                    JobColorEnum::State,\n                    t!(\"app.gantt.settings.job_color_state\"),\n                );\n            });\n        });\n    }\n}\n","traces":[{"line":24,"address":[5510128],"length":1,"stats":{"Line":0}},{"line":25,"address":[5510133],"length":1,"stats":{"Line":0}},{"line":28,"address":[5510160],"length":1,"stats":{"Line":0}},{"line":29,"address":[5510177],"length":1,"stats":{"Line":0}},{"line":30,"address":[5665880,5665822,5664728,5665748,5665241],"length":1,"stats":{"Line":0}},{"line":32,"address":[5667181,5665782,5665920],"length":1,"stats":{"Line":0}},{"line":33,"address":[5665945,5666379],"length":1,"stats":{"Line":0}},{"line":34,"address":[5665961],"length":1,"stats":{"Line":0}},{"line":35,"address":[5665971],"length":1,"stats":{"Line":0}},{"line":36,"address":[5665979,5666410,5666367,5666146],"length":1,"stats":{"Line":0}},{"line":38,"address":[5666969],"length":1,"stats":{"Line":0}},{"line":39,"address":[5666529],"length":1,"stats":{"Line":0}},{"line":40,"address":[5666539],"length":1,"stats":{"Line":0}},{"line":41,"address":[5666736,5666957,5666547,5667003],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":14},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","components","job_details.rs"],"content":"use crate::models::data_structure::cluster::Cluster;\nuse crate::models::data_structure::job::Job;\nuse crate::models::utils::date_converter::format_timestamp;\nuse eframe::egui;\n\npub struct JobDetailsWindow {\n    pub open: bool,\n    pub job: Job,\n    pub cluster: Vec\u003cCluster\u003e,\n}\n\nimpl JobDetailsWindow {\n    pub fn new(job: Job, cluster: Vec\u003cCluster\u003e) -\u003e Self {\n        Self {\n            open: true,\n            job: job,\n            cluster: cluster,\n        }\n    }\n\n    pub fn ui(\u0026mut self, ui: \u0026mut egui::Ui) {\n        // If the window is not open, do not render it\n        if !self.open {\n            return;\n        }\n\n        egui::Window::new(format!(\n            \"{}: {}\",\n            t!(\"app.details.general.title\"),\n            self.job.id\n        ))\n        .collapsible(true)\n        .movable(true)\n        .open(\u0026mut self.open)\n        .vscroll(true)\n        .show(ui.ctx(), |ui| {\n            // Base information\n            ui.group(|ui| {\n                ui.heading(t!(\"app.details.basic_info.title\"));\n                ui.horizontal(|ui| {\n                    ui.label(format!(\"{}:\", t!(\"app.details.basic_info.owner\")));\n                    ui.strong(self.job.owner.to_string());\n                });\n                ui.horizontal(|ui| {\n                    ui.label(format!(\"{}:\", t!(\"app.details.basic_info.queue\")));\n                    ui.strong(self.job.queue.to_string());\n                });\n                ui.horizontal(|ui| {\n                    ui.label(format!(\"{}:\", t!(\"app.details.basic_info.command\")));\n                    ui.strong(self.job.command.to_string());\n                });\n            });\n\n            ui.add_space(8.0);\n\n            // Status\n            ui.group(|ui| {\n                ui.heading(t!(\"app.details.status.title\"));\n                ui.horizontal(|ui| {\n                    ui.label(format!(\"{}:\", t!(\"app.details.status.state\")));\n                    let state_text = self.job.state.get_label();\n                    let (state_color, bg_color) = self.job.state.get_color();\n                    ui.label(\n                        egui::RichText::new(state_text)\n                            .color(state_color)\n                            .background_color(bg_color)\n                            .strong(),\n                    );\n                });\n                if let Some(exit_code) = self.job.exit_code {\n                    ui.horizontal(|ui| {\n                        ui.label(\"Exit Code: \");\n                        ui.strong(exit_code.to_string());\n                    });\n                }\n                if let Some(message) = \u0026self.job.message {\n                    ui.horizontal(|ui| {\n                        ui.label(format!(\"{}:\", t!(\"app.details.status.message\")));\n                        ui.label(message);\n                    });\n                }\n            });\n\n            ui.add_space(8.0);\n\n            // Timing information\n            ui.group(|ui| {\n                ui.heading(t!(\"app.details.timing_info.title\"));\n\n                ui.horizontal(|ui| {\n                    ui.label(format!(\n                        \"{}:\",\n                        t!(\"app.details.timing_info.submission_time\")\n                    ));\n                    ui.strong(format_timestamp(self.job.submission_time));\n                });\n                ui.horizontal(|ui| {\n                    ui.label(format!(\n                        \"{}:\",\n                        t!(\"app.details.timing_info.scheduled_start_time\")\n                    ));\n                    ui.strong(format_timestamp(self.job.scheduled_start));\n                });\n                ui.horizontal(|ui| {\n                    ui.label(format!(\n                        \"{}:\",\n                        t!(\"app.details.timing_info.actual_start_time\")\n                    ));\n                    ui.strong(format_timestamp(self.job.start_time));\n                });\n                ui.horizontal(|ui| {\n                    ui.label(format!(\"{}:\", t!(\"app.details.timing_info.stop_time\")));\n                    ui.strong(format_timestamp(self.job.stop_time));\n                });\n                ui.horizontal(|ui| {\n                    ui.label(format!(\"{}:\", t!(\"app.details.timing_info.wall_time\")));\n                    ui.strong(format!(\"{} seconds\", self.job.walltime));\n                });\n            });\n\n            ui.add_space(8.0);\n\n            if !self.cluster.is_empty() {\n                // Ressources\n                ui.group(|ui| {\n                    ui.heading(t!(\"app.details.resources.title\"));\n                    egui::CollapsingHeader::new(t!(\"app.details.resources.cluster\"))\n                        .default_open(false)\n                        .show(ui, |ui| {\n                            for cluster in \u0026self.cluster {\n                                egui::CollapsingHeader::new(format!(\"{}\", cluster.name))\n                                    .default_open(false)\n                                    .show(ui, |ui| {\n                                        for host in \u0026cluster.hosts {\n                                            egui::CollapsingHeader::new(format!(\"{}\", host.name))\n                                                .default_open(false)\n                                                .show(ui, |ui| {\n                                                    ui.horizontal(|ui| {\n                                                        ui.label(\"Network Address: \");\n                                                        ui.strong(format!(\n                                                            \"{}\",\n                                                            host.network_address\n                                                        ));\n                                                    });\n\n                                                    for cpu in \u0026host.cpus {\n                                                        egui::CollapsingHeader::new(format!(\n                                                            \"{}\",\n                                                            cpu.name\n                                                        ))\n                                                        .default_open(false)\n                                                        .show(ui, |ui| {\n                                                            ui.horizontal(|ui| {\n                                                                ui.label(\"Chassis: \");\n                                                                ui.strong(format!(\n                                                                    \"{}\",\n                                                                    cpu.chassis\n                                                                ));\n                                                            });\n\n                                                            ui.horizontal(|ui| {\n                                                                ui.label(\"Core Count: \");\n                                                                ui.strong(format!(\n                                                                    \"{}\",\n                                                                    cpu.core_count\n                                                                ));\n                                                            });\n\n                                                            ui.horizontal(|ui| {\n                                                                ui.label(\"CPU Frequency: \");\n                                                                ui.strong(format!(\n                                                                    \"{}\",\n                                                                    cpu.cpufreq\n                                                                ));\n                                                            });\n\n                                                            for resource in \u0026cpu.resources {\n                                                                egui::CollapsingHeader::new(\n                                                                    format!(\"{}\", resource.id),\n                                                                )\n                                                                .default_open(false)\n                                                                .show(ui, |ui| {\n                                                                    ui.horizontal(|ui| {\n                                                                        ui.label(\"State: \");\n                                                                        ui.strong(format!(\n                                                                            \"{}\",\n                                                                            resource.state\n                                                                        ));\n                                                                    });\n                                                                    ui.horizontal(|ui| {\n                                                                        ui.label(\"Thread Count: \");\n                                                                        ui.strong(format!(\n                                                                            \"{}\",\n                                                                            resource.thread_count\n                                                                        ));\n                                                                    });\n                                                                });\n                                                            }\n                                                        });\n                                                    }\n                                                });\n                                        }\n                                    });\n                            }\n                        });\n                });\n            }\n\n            ui.add_space(8.0);\n        });\n    }\n\n    pub fn is_open(\u0026self) -\u003e bool {\n        self.open\n    }\n}\n","traces":[{"line":13,"address":[5352560],"length":1,"stats":{"Line":0}},{"line":21,"address":[5354299,5352656,5354331],"length":1,"stats":{"Line":0}},{"line":23,"address":[5352696],"length":1,"stats":{"Line":0}},{"line":27,"address":[5353938,5353845,5353273,5354240,5353414,5352833,5354340,5353061],"length":1,"stats":{"Line":0}},{"line":29,"address":[5352736,5352903,5353241,5353127],"length":1,"stats":{"Line":0}},{"line":34,"address":[5353918],"length":1,"stats":{"Line":0}},{"line":36,"address":[4528688],"length":1,"stats":{"Line":0}},{"line":38,"address":[4528713,4529852,4529104],"length":1,"stats":{"Line":0}},{"line":39,"address":[4529794,4529128],"length":1,"stats":{"Line":0}},{"line":40,"address":[4531063,4529676,4529888],"length":1,"stats":{"Line":0}},{"line":41,"address":[4530425,4531085,4531027,4529912,4530932],"length":1,"stats":{"Line":0}},{"line":42,"address":[4530962],"length":1,"stats":{"Line":0}},{"line":44,"address":[4531136,4529715,4532311],"length":1,"stats":{"Line":0}},{"line":45,"address":[4531673,4532275,4532333,4532180,4531160],"length":1,"stats":{"Line":0}},{"line":46,"address":[4532210],"length":1,"stats":{"Line":0}},{"line":48,"address":[4532384,4533559,4529755],"length":1,"stats":{"Line":0}},{"line":49,"address":[4533428,4533523,4532408,4532921,4533581],"length":1,"stats":{"Line":0}},{"line":50,"address":[4533458],"length":1,"stats":{"Line":0}},{"line":54,"address":[4528782],"length":1,"stats":{"Line":0}},{"line":57,"address":[4528805,4534470,4533632],"length":1,"stats":{"Line":0}},{"line":58,"address":[4534251,4534434,4533657],"length":1,"stats":{"Line":0}},{"line":59,"address":[4534496,4535977,4536009,4534202],"length":1,"stats":{"Line":0}},{"line":60,"address":[4535042,4534521,4536018,4535518],"length":1,"stats":{"Line":0}},{"line":61,"address":[4535559],"length":1,"stats":{"Line":0}},{"line":62,"address":[4535585,4535648],"length":1,"stats":{"Line":0}},{"line":63,"address":[4535915],"length":1,"stats":{"Line":0}},{"line":64,"address":[4535700],"length":1,"stats":{"Line":0}},{"line":70,"address":[4534280,4534237],"length":1,"stats":{"Line":0}},{"line":71,"address":[4536096,4534294],"length":1,"stats":{"Line":0}},{"line":72,"address":[4536121],"length":1,"stats":{"Line":0}},{"line":73,"address":[4536155],"length":1,"stats":{"Line":0}},{"line":76,"address":[4534334],"length":1,"stats":{"Line":0}},{"line":77,"address":[4534391,4537381,4536224],"length":1,"stats":{"Line":0}},{"line":78,"address":[4537403,4537345,4536761,4537268,4536248],"length":1,"stats":{"Line":0}},{"line":79,"address":[4537302],"length":1,"stats":{"Line":0}},{"line":84,"address":[4528881],"length":1,"stats":{"Line":0}},{"line":87,"address":[4528904,4538268,4537440],"length":1,"stats":{"Line":0}},{"line":88,"address":[4537464,4538210],"length":1,"stats":{"Line":0}},{"line":90,"address":[4538304,4538012,4539482],"length":1,"stats":{"Line":0}},{"line":91,"address":[4538873,4539348,4539446,4538328,4538661,4538433,4539504],"length":1,"stats":{"Line":0}},{"line":93,"address":[4538336,4538841,4538503,4538727],"length":1,"stats":{"Line":0}},{"line":95,"address":[4539378],"length":1,"stats":{"Line":0}},{"line":97,"address":[4540730,4539552,4538052],"length":1,"stats":{"Line":0}},{"line":98,"address":[4540596,4540121,4540694,4539576,4540752,4539681,4539909],"length":1,"stats":{"Line":0}},{"line":100,"address":[4539751,4539975,4539584,4540089],"length":1,"stats":{"Line":0}},{"line":102,"address":[4540626],"length":1,"stats":{"Line":0}},{"line":104,"address":[4538092,4540800,4541978],"length":1,"stats":{"Line":0}},{"line":105,"address":[4540824,4541942,4542000,4540929,4541844,4541369,4541157],"length":1,"stats":{"Line":0}},{"line":107,"address":[4541223,4540999,4540832,4541337],"length":1,"stats":{"Line":0}},{"line":109,"address":[4541874],"length":1,"stats":{"Line":0}},{"line":111,"address":[4543226,4542048,4538132],"length":1,"stats":{"Line":0}},{"line":112,"address":[4542072,4542585,4543248,4543092,4543190],"length":1,"stats":{"Line":0}},{"line":113,"address":[4543122],"length":1,"stats":{"Line":0}},{"line":115,"address":[4543296,4544674,4538172],"length":1,"stats":{"Line":0}},{"line":116,"address":[4544696,4544340,4543320,4543833,4544638],"length":1,"stats":{"Line":0}},{"line":117,"address":[4544595,4544370,4544461],"length":1,"stats":{"Line":0}},{"line":121,"address":[4529004],"length":1,"stats":{"Line":0}},{"line":123,"address":[4529022],"length":1,"stats":{"Line":0}},{"line":125,"address":[4545976,4544736,4529045],"length":1,"stats":{"Line":0}},{"line":126,"address":[4544761,4545403,4545998],"length":1,"stats":{"Line":0}},{"line":127,"address":[4545494,4545307,4545820,4545715],"length":1,"stats":{"Line":0}},{"line":129,"address":[4545799,4546048],"length":1,"stats":{"Line":0}},{"line":130,"address":[4546073,4546142],"length":1,"stats":{"Line":0}},{"line":131,"address":[4546246,4546376],"length":1,"stats":{"Line":0}},{"line":133,"address":[4546480],"length":1,"stats":{"Line":0}},{"line":134,"address":[4546578,4546505],"length":1,"stats":{"Line":0}},{"line":135,"address":[4546812,4546682],"length":1,"stats":{"Line":0}},{"line":137,"address":[4546912],"length":1,"stats":{"Line":0}},{"line":138,"address":[4546937,4547392],"length":1,"stats":{"Line":0}},{"line":139,"address":[4547417],"length":1,"stats":{"Line":0}},{"line":140,"address":[4547546,4547681,4547451],"length":1,"stats":{"Line":0}},{"line":146,"address":[4546963,4547051],"length":1,"stats":{"Line":0}},{"line":147,"address":[4547287,4547157],"length":1,"stats":{"Line":0}},{"line":152,"address":[4547728],"length":1,"stats":{"Line":0}},{"line":153,"address":[4547753,4548272],"length":1,"stats":{"Line":0}},{"line":154,"address":[4548297],"length":1,"stats":{"Line":0}},{"line":155,"address":[4548426,4548331,4548561],"length":1,"stats":{"Line":0}},{"line":161,"address":[4547784,4548608],"length":1,"stats":{"Line":0}},{"line":162,"address":[4548633],"length":1,"stats":{"Line":0}},{"line":163,"address":[4548667,4548897,4548762],"length":1,"stats":{"Line":0}},{"line":169,"address":[4547821,4548944],"length":1,"stats":{"Line":0}},{"line":170,"address":[4548969],"length":1,"stats":{"Line":0}},{"line":171,"address":[4549098,4549233,4549003],"length":1,"stats":{"Line":0}},{"line":177,"address":[4547941,4547853],"length":1,"stats":{"Line":0}},{"line":178,"address":[4548177],"length":1,"stats":{"Line":0}},{"line":179,"address":[4548047],"length":1,"stats":{"Line":0}},{"line":182,"address":[4549280],"length":1,"stats":{"Line":0}},{"line":183,"address":[4549376,4549304],"length":1,"stats":{"Line":0}},{"line":184,"address":[4549401],"length":1,"stats":{"Line":0}},{"line":185,"address":[4549435,4549530,4549665],"length":1,"stats":{"Line":0}},{"line":190,"address":[4549712,4549334],"length":1,"stats":{"Line":0}},{"line":191,"address":[4549737],"length":1,"stats":{"Line":0}},{"line":192,"address":[4550001,4549771,4549866],"length":1,"stats":{"Line":0}},{"line":209,"address":[4529081],"length":1,"stats":{"Line":0}},{"line":213,"address":[5354416],"length":1,"stats":{"Line":0}},{"line":214,"address":[5354421],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":96},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","components","mod.rs"],"content":"pub mod dashboard_components;\npub mod gantt_aggregate_by;\npub mod gantt_job_color;\npub mod job_details;\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","main_page","anthentification.rs"],"content":"use crate::{models::data_structure::application_context::ApplicationContext, views::view::View};\nuse eframe::egui::{self, RichText};\n\npub struct Authentification {\n    username: String,\n    password: String,\n    error_message: Option\u003cString\u003e,\n}\n\nimpl Default for Authentification {\n    fn default() -\u003e Self {\n        Authentification {\n            username: String::new(),\n            password: String::new(),\n            error_message: None,\n        }\n    }\n}\n\n/*\n * The Authentification view is a simple form with a username and a password field.\n * Currently the form is hardcoded to accept only the username \"admin\" and the password \"admin\".\n * This view is a proof of concept and can be replaced by a more complex authentication system if needed.\n */\nimpl View for Authentification {\n    fn render(\u0026mut self, ui: \u0026mut egui::Ui, app: \u0026mut ApplicationContext) {\n        // Center the form\n        ui.vertical_centered(|ui| {\n            ui.add_space(50.0);\n\n            // Title\n            ui.heading(RichText::new(t!(\"app.authentification.title\")).size(24.0));\n            ui.add_space(20.0);\n\n            // Container of the form\n            egui::Frame::none()\n                .fill(ui.visuals().window_fill())\n                .rounding(8.0)\n                .inner_margin(20.0)\n                .show(ui, |ui| {\n                    ui.set_width(300.0);\n\n                    // username field\n                    ui.label(RichText::new(t!(\"app.authentification.username\")));\n                    ui.add_space(4.0);\n                    ui.text_edit_singleline(\u0026mut self.username);\n                    ui.add_space(12.0);\n\n                    // password field\n                    ui.label(RichText::new(t!(\"app.authentification.password\")));\n                    ui.add_space(4.0);\n                    let password_edit =\n                        ui.add(egui::TextEdit::singleline(\u0026mut self.password).password(true));\n                    ui.add_space(20.0);\n\n                    // Error message\n                    if let Some(error) = \u0026self.error_message {\n                        ui.colored_label(egui::Color32::RED, error);\n                        ui.add_space(8.0);\n                    }\n\n                    // Connect button\n                    if ui.button(t!(\"app.authentification.login\")).clicked()\n                        || password_edit.lost_focus()\n                            \u0026\u0026 ui.input(|i| i.key_pressed(egui::Key::Enter))\n                    {\n                        if self.username == \"admin\" \u0026\u0026 self.password == \"admin\" {\n                            app.login(\u0026self.username.clone());\n                        } else {\n                            self.error_message = Some(\"Identifiants incorrects\".to_string());\n                        }\n\n                        self.password.clear();\n                    }\n                });\n        });\n    }\n}\n","traces":[{"line":11,"address":[5238112,5238291],"length":1,"stats":{"Line":0}},{"line":13,"address":[5238130],"length":1,"stats":{"Line":0}},{"line":14,"address":[5238140],"length":1,"stats":{"Line":0}},{"line":26,"address":[5238320],"length":1,"stats":{"Line":0}},{"line":28,"address":[4387920,4388925],"length":1,"stats":{"Line":0}},{"line":29,"address":[4387958],"length":1,"stats":{"Line":0}},{"line":32,"address":[4387979,4388867],"length":1,"stats":{"Line":0}},{"line":33,"address":[4388573],"length":1,"stats":{"Line":0}},{"line":36,"address":[4388659,4388586,4388816],"length":1,"stats":{"Line":0}},{"line":37,"address":[4388605,4388638],"length":1,"stats":{"Line":0}},{"line":40,"address":[4388769,4392081,4388960,4392126],"length":1,"stats":{"Line":0}},{"line":41,"address":[4389004],"length":1,"stats":{"Line":0}},{"line":44,"address":[4392175,4389045,4389821],"length":1,"stats":{"Line":0}},{"line":45,"address":[4389647],"length":1,"stats":{"Line":0}},{"line":46,"address":[4389668],"length":1,"stats":{"Line":0}},{"line":47,"address":[4389719],"length":1,"stats":{"Line":0}},{"line":50,"address":[4389724,4390463,4389843,4392139],"length":1,"stats":{"Line":0}},{"line":51,"address":[4390336],"length":1,"stats":{"Line":0}},{"line":53,"address":[4390349],"length":1,"stats":{"Line":0}},{"line":54,"address":[4390456],"length":1,"stats":{"Line":0}},{"line":57,"address":[4390537],"length":1,"stats":{"Line":0}},{"line":58,"address":[4390708,4390597],"length":1,"stats":{"Line":0}},{"line":59,"address":[4390743],"length":1,"stats":{"Line":0}},{"line":63,"address":[4391556,4390644,4390762,4391257,4392090],"length":1,"stats":{"Line":0}},{"line":64,"address":[4391443],"length":1,"stats":{"Line":0}},{"line":65,"address":[4392224,4391506,4392233],"length":1,"stats":{"Line":0}},{"line":67,"address":[4391653,4391535,4391694],"length":1,"stats":{"Line":0}},{"line":68,"address":[4391734,4391971],"length":1,"stats":{"Line":0}},{"line":70,"address":[4391776,4391659],"length":1,"stats":{"Line":0}},{"line":73,"address":[4391952,4392076],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":30},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","main_page","dashboard.rs"],"content":"use crate::models::data_structure::job::JobState;\nuse crate::views::components::dashboard_components::job_table::JobTable;\nuse crate::views::components::dashboard_components::metric_box::MetricBox;\nuse crate::views::components::dashboard_components::metric_chart::create_jobstate_chart;\nuse crate::views::components::dashboard_components::metric_grid::MetricGrid;\nuse crate::{models::data_structure::application_context::ApplicationContext, views::view::View};\nuse eframe::egui::{self, RichText};\nuse strum::IntoEnumIterator;\n\npub struct Dashboard {\n    job_table: JobTable,\n    metric_grid: MetricGrid,\n    show_chart: bool,\n}\n\nimpl Default for Dashboard {\n    fn default() -\u003e Self {\n        Dashboard {\n            job_table: JobTable::default(),\n            metric_grid: MetricGrid::default(),\n            show_chart: false,\n        }\n    }\n}\n\nimpl View for Dashboard {\n    fn render(\u0026mut self, ui: \u0026mut egui::Ui, app: \u0026mut ApplicationContext) {\n        egui::CentralPanel::default().show(ui.ctx(), |ui| {\n            ui.heading(RichText::new(t!(\"app.dashboard.title\")).strong().size(20.0));\n\n            // Button to toggle between the job chart and the job state metrics\n            if ui\n                .button(if self.show_chart {\n                    t!(\"app.dashboard.show_metrics\")\n                } else {\n                    t!(\"app.dashboard.show_charts\")\n                })\n                .clicked()\n            {\n                self.show_chart = !self.show_chart;\n            }\n\n            self.metric_grid.show(ui, |grid| {\n                if self.show_chart {\n                    // Add the job state chart\n                    let chart = create_jobstate_chart(app.filtered_jobs.clone());\n                    grid.add_chart(chart);\n                } else {\n                    // Add total jobs metric\n                    grid.add_metric(MetricBox::new(\n                        t!(\"app.dashboard.total_jobs\").to_string(),\n                        app.filtered_jobs.len().to_string(),\n                        egui::Color32::from_rgb(128, 128, 128),\n                    ));\n\n                    // Add the job state metrics\n                    for state in JobState::iter() {\n                        let count = app\n                            .filtered_jobs\n                            .iter()\n                            .filter(|j| j.state == state)\n                            .count();\n\n                        if count \u003e 0 {\n                            let translation_key =\n                                format!(\"app.job_state.{}\", state.to_string().to_lowercase());\n                            grid.add_metric(MetricBox::new(\n                                t!(\u0026translation_key).to_string(),\n                                count.to_string(),\n                                state.get_color().1,\n                            ));\n                        }\n                    }\n                    let start_time = app.get_start_date();\n                    let end_time = app.get_end_date();\n\n                    // Add time range metrics\n                    grid.add_metric(MetricBox::new(\n                        t!(\"app.dashboard.start_time\").to_string(),\n                        start_time.format(\"%Y-%m-%d %H:%M\").to_string(),\n                        egui::Color32::from_rgb(70, 130, 180),\n                    ));\n\n                    grid.add_metric(MetricBox::new(\n                        t!(\"app.dashboard.end_time\").to_string(),\n                        end_time.format(\"%Y-%m-%d %H:%M\").to_string(),\n                        egui::Color32::from_rgb(70, 130, 180),\n                    ));\n                }\n            });\n\n            ui.add_space(10.0);\n            ui.separator();\n\n            // Draw the job table\n            self.job_table.ui(ui, app);\n        });\n    }\n}\n","traces":[{"line":17,"address":[4910512,4910368],"length":1,"stats":{"Line":0}},{"line":19,"address":[4910390],"length":1,"stats":{"Line":0}},{"line":20,"address":[4910395],"length":1,"stats":{"Line":0}},{"line":27,"address":[4910544],"length":1,"stats":{"Line":0}},{"line":28,"address":[4910590],"length":1,"stats":{"Line":0}},{"line":29,"address":[5217318,5215841,5215193],"length":1,"stats":{"Line":0}},{"line":32,"address":[5217116,5216477],"length":1,"stats":{"Line":0}},{"line":33,"address":[5217044,5216451,5215830],"length":1,"stats":{"Line":0}},{"line":34,"address":[5215960,5216983,5216723,5216944],"length":1,"stats":{"Line":0}},{"line":36,"address":[5215860,5216351,5216130,5216390],"length":1,"stats":{"Line":0}},{"line":38,"address":[5217122,5217068],"length":1,"stats":{"Line":0}},{"line":40,"address":[5217157],"length":1,"stats":{"Line":0}},{"line":43,"address":[5220843,5220776,5217360,5217185],"length":1,"stats":{"Line":0}},{"line":44,"address":[5217399,5220725],"length":1,"stats":{"Line":0}},{"line":46,"address":[5217611],"length":1,"stats":{"Line":0}},{"line":47,"address":[5217675],"length":1,"stats":{"Line":0}},{"line":50,"address":[5218292,5218392],"length":1,"stats":{"Line":0}},{"line":51,"address":[5217769,5217508,5218088,5217990],"length":1,"stats":{"Line":0}},{"line":52,"address":[5218096,5218166],"length":1,"stats":{"Line":0}},{"line":53,"address":[5218214,5218271],"length":1,"stats":{"Line":0}},{"line":57,"address":[5218485,5218538,5218729],"length":1,"stats":{"Line":0}},{"line":58,"address":[5218743],"length":1,"stats":{"Line":0}},{"line":61,"address":[5222592,5222609],"length":1,"stats":{"Line":0}},{"line":64,"address":[5218819],"length":1,"stats":{"Line":0}},{"line":66,"address":[5220957,5221169],"length":1,"stats":{"Line":0}},{"line":67,"address":[5222283,5222183],"length":1,"stats":{"Line":0}},{"line":68,"address":[5222003,5221481,5221905,5221580,5221692],"length":1,"stats":{"Line":0}},{"line":69,"address":[5222011,5222076],"length":1,"stats":{"Line":0}},{"line":70,"address":[5222145,5222092],"length":1,"stats":{"Line":0}},{"line":74,"address":[5218587],"length":1,"stats":{"Line":0}},{"line":75,"address":[5218608],"length":1,"stats":{"Line":0}},{"line":78,"address":[5219573,5219473],"length":1,"stats":{"Line":0}},{"line":79,"address":[5218629,5219228,5219130,5218909],"length":1,"stats":{"Line":0}},{"line":80,"address":[5219236,5219376,5219328],"length":1,"stats":{"Line":0}},{"line":81,"address":[5219399,5219452],"length":1,"stats":{"Line":0}},{"line":84,"address":[5220577,5220477],"length":1,"stats":{"Line":0}},{"line":85,"address":[5219724,5219913,5220232,5220134],"length":1,"stats":{"Line":0}},{"line":86,"address":[5220380,5220332,5220240],"length":1,"stats":{"Line":0}},{"line":87,"address":[5220456,5220403],"length":1,"stats":{"Line":0}},{"line":92,"address":[5217207],"length":1,"stats":{"Line":0}},{"line":93,"address":[5217225],"length":1,"stats":{"Line":0}},{"line":96,"address":[5217262],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":42},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","main_page","gantt.rs"],"content":"use crate::models::data_structure::cluster::Cluster;\nuse crate::models::data_structure::resource::ResourceState;\nuse crate::models::utils::date_converter::format_timestamp;\nuse crate::models::utils::utils::cluster_contain_host;\nuse crate::models::utils::utils::compare_string_with_number;\nuse crate::models::utils::utils::contains_cluster;\nuse crate::models::utils::utils::contains_host;\nuse crate::models::utils::utils::get_all_clusters;\nuse crate::models::utils::utils::get_all_hosts;\nuse crate::models::utils::utils::get_all_resources;\nuse crate::models::utils::utils::get_cluster_from_name;\nuse crate::models::utils::utils::get_cluster_state_from_name;\nuse crate::models::utils::utils::get_host_state_from_name;\nuse crate::models::utils::utils::get_tree_structure_for_job;\nuse crate::views::view::View;\nuse crate::{\n    models::data_structure::{\n        application_context::ApplicationContext,\n        job::{Job, JobState},\n    },\n    views::components::{\n        gantt_aggregate_by::{AggregateBy, AggregateByLevel1Enum, AggregateByLevel2Enum},\n        gantt_job_color::JobColor,\n        job_details::JobDetailsWindow,\n    },\n};\nuse chrono::{DateTime, Local, TimeZone};\nuse eframe::egui;\nuse egui::{\n    lerp, pos2, remap_clamp, Align2, Color32, FontId, Frame, PointerButton, Pos2, Rect, Response,\n    Rgba, RichText, ScrollArea, Sense, Shape, Stroke, TextStyle,\n};\nuse std::collections::BTreeMap;\n\n/**\n * GanttChart struct\n */\npub struct GanttChart {\n    options: Options,                           // options for the GanttChart\n    job_details_windows: Vec\u003cJobDetailsWindow\u003e, // job details windows\n\n    // Tracks which top-level categories (e.g., owners, hosts, or clusters) are collapsed in the Gantt view\n    // Key: The category name (e.g., \"user1\" for owner, \"host1\" for host)\n    // Value: true if collapsed (hidden), false if expanded (visible)\n    collapsed_jobs_level_1: BTreeMap\u003cString, bool\u003e,\n\n    // Tracks which second-level subcategories are collapsed within their parent categories\n    // Key: Tuple of (parent_category, subcategory) - e.g., (\"cluster1\", \"host1\")\n    // Value: true if collapsed (hidden), false if expanded (visible)\n    collapsed_jobs_level_2: BTreeMap\u003c(String, String), bool\u003e,\n\n    initial_start_s: Option\u003ci64\u003e, // Initial start timestamp\n    initial_end_s: Option\u003ci64\u003e, // Initial end timestamp\n}\n\n/**\n * Default implementation for the GanttChart\n */\nimpl Default for GanttChart {\n    fn default() -\u003e Self {\n        GanttChart {\n            options: Default::default(),\n            job_details_windows: Vec::new(),\n            collapsed_jobs_level_1: BTreeMap::new(),\n            collapsed_jobs_level_2: BTreeMap::new(),\n            initial_start_s: None,\n            initial_end_s: None,\n        }\n    }\n}\n\n/**\n * Implementation of the View trait for the GanttChart\n */\nimpl View for GanttChart {\n    fn render(\u0026mut self, ui: \u0026mut egui::Ui, app: \u0026mut ApplicationContext) {\n        ui.heading(RichText::new(t!(\"app.gantt.title\")).strong());\n\n        let reset_view = false;\n\n        // Initialize initial timestamps if not already done\n        if self.initial_start_s.is_none() {\n            self.initial_start_s = Some(app.get_start_date().timestamp());\n            self.initial_end_s = Some(app.get_end_date().timestamp());\n        }\n\n        // Settings menu\n        ui.horizontal(|ui| {\n            ui.menu_button(t!(\"app.gantt.settings.title\"), |ui| {\n                ui.set_max_height(500.0);\n\n                // Aggregate by component (levels)\n                self.options.aggregate_by.ui(ui);\n                ui.separator();\n\n                // If last aggregation level is set to cluster or host\n                if (self.options.aggregate_by.level_1 != AggregateByLevel1Enum::Owner\n                    \u0026\u0026 self.options.aggregate_by.level_2 == AggregateByLevel2Enum::None)\n                    || (self.options.aggregate_by.level_1 == AggregateByLevel1Enum::Cluster\n                        \u0026\u0026 self.options.aggregate_by.level_2 == AggregateByLevel2Enum::Host)\n                {\n                    if ui\n                        .checkbox(\n                            \u0026mut self.options.see_all_res,\n                            t!(\"app.gantt.settings.show_resources\"),\n                        )\n                        .clicked()\n                    {\n                        if self.options.see_all_res {\n                            app.all_jobs.push(Job {\n                                id: 0,\n                                owner: \"all_resources\".to_string(),\n                                state: JobState::Unknown,\n                                scheduled_start: 0,\n                                walltime: 0,\n                                hosts: get_all_hosts(\u0026app.all_clusters),\n                                clusters: get_all_clusters(\u0026app.all_clusters),\n                                command: String::new(),\n                                message: None,\n                                queue: String::new(),\n                                assigned_resources: get_all_resources(\u0026app.all_clusters),\n                                submission_time: 0,\n                                start_time: 0,\n                                stop_time: 0,\n                                exit_code: None,\n                                gantt_color: Color32::TRANSPARENT,\n                                main_resource_state: ResourceState::Unknown,\n                            });\n                        } else {\n                            app.all_jobs.retain(|job| job.id != 0);\n                        }\n                    }\n                    ui.separator();\n                } else {\n                    if self.options.see_all_res {\n                        app.all_jobs.retain(|job| job.id != 0);\n                    }\n                    self.options.see_all_res = false;\n                }\n\n                ui.checkbox(\n                    \u0026mut self.options.squash_resources,\n                    t!(\"app.gantt.settings.squash_resources\"),\n                );\n                ui.separator();\n\n                // Job color component (random, state)\n                self.options.job_color.ui(ui);\n            });\n\n            // Help button\n            ui.menu_button(\"❓\", |ui| {\n                ui.label(t!(\"app.gantt.help\"));\n            });\n\n            // Reset to now button\n            ui.with_layout(egui::Layout::right_to_left(egui::Align::Center), |ui| {\n                if ui.button(t!(\"app.gantt.now\")).clicked() {\n                    self.options.zoom_to_relative_s_range = Some((\n                        ui.ctx().input(|i| i.time),\n                        (\n                            0.,\n                            (self.initial_end_s.unwrap() - self.initial_start_s.unwrap()) as f64,\n                        ),\n                    ));\n                }\n            });\n        });\n\n        // Canvas\n        Frame::canvas(ui.style()).show(ui, |ui| {\n            ui.visuals_mut().clip_rect_margin = 0.0;\n\n            // Calculate the y-coordinate of the fixed timeline\n            let fixed_timeline_y = ui.min_rect().top();\n\n            let available_height = ui.max_rect().bottom() - ui.min_rect().bottom();\n            ScrollArea::vertical().show(ui, |ui| {\n                let mut canvas = ui.available_rect_before_wrap();\n                canvas.max.y = f32::INFINITY;\n                let response = ui.interact(canvas, ui.id().with(\"canvas\"), Sense::click_and_drag());\n\n                let min_s = self.initial_start_s.unwrap();\n                let max_s = self.initial_end_s.unwrap();\n\n                // Initialize canvas info\n                let info = Info {\n                    ctx: ui.ctx().clone(),\n                    canvas,\n                    response,\n                    painter: ui.painter_at(canvas),\n                    text_height: app.font_size as f32,\n                    start_s: min_s,\n                    stop_s: max_s,\n                    font_id: TextStyle::Body.resolve(ui.style()),\n                };\n\n                // When we reset the view, we want to zoom to the full range\n                if reset_view {\n                    self.options.zoom_to_relative_s_range = Some((\n                        info.ctx.input(|i| i.time),\n                        (0., (info.stop_s - info.start_s) as f64),\n                    ));\n                }\n\n                // Interact with the canvas\n                interact_with_canvas(\u0026mut self.options, \u0026info.response, \u0026info);\n\n                // Put the timeline\n                let where_to_put_timeline = info.painter.add(Shape::Noop);\n\n                // Paint the canvas\n                let max_y = ui_canvas(\n                    \u0026mut self.options,\n                    app,\n                    \u0026info,\n                    fixed_timeline_y,\n                    (min_s, max_s),\n                    \u0026mut self.job_details_windows,\n                    \u0026mut self.collapsed_jobs_level_1,\n                    \u0026mut self.collapsed_jobs_level_2,\n                    \u0026app.all_clusters,\n                );\n\n                let mut used_rect = canvas;\n                used_rect.max.y = max_y;\n\n                // Fill out space that we don't use so that the `ScrollArea` doesn't collapse in height:\n                used_rect.max.y = used_rect.max.y.max(used_rect.min.y + available_height);\n\n                let timeline = paint_timeline(\u0026info, used_rect, \u0026self.options, min_s);\n                info.painter\n                    .set(where_to_put_timeline, Shape::Vec(timeline));\n\n                // Adding a line to show the current time AFTER all other elements\n                let current_time_line = paint_current_time_line(\u0026info, \u0026self.options, used_rect);\n                info.painter.add(current_time_line);\n\n                ui.allocate_rect(used_rect, Sense::hover());\n\n                {\n                    // Calculate the visible time range from the canvas parameters\n                    let visible_start_s = info.start_s\n                        + ((-self.options.sideways_pan_in_points / info.canvas.width())\n                            * self.options.canvas_width_s) as i64;\n                    let visible_end_s = visible_start_s + self.options.canvas_width_s as i64;\n\n                    let start = Local.timestamp_opt(visible_start_s, 0).unwrap();\n                    let end = Local.timestamp_opt(visible_end_s, 0).unwrap();\n\n                    app.set_localdate(start, end);\n                }\n            });\n        });\n\n        // Part to display the details of a job when clicked\n        self.job_details_windows.retain(|w| w.is_open());\n\n        // Display job detail windows\n        for window in self.job_details_windows.iter_mut() {\n            window.ui(ui);\n        }\n    }\n}\n\n/****************************************************************************************************************************/\n// CANVAS INFO\n/****************************************************************************************************************************/\n\nstruct Info {\n    ctx: egui::Context,     // context\n    canvas: Rect,           // canvas to paint\n    response: Response,     // response from the canvas\n    painter: egui::Painter, // painter for the canvas\n    text_height: f32,       // height of a line of text\n    start_s: i64,           // start time in seconds\n    stop_s: i64,            // stop time in seconds\n    font_id: FontId,        // font id\n}\n\nimpl Info {\n    /**\n     * Returns the x-coordinate (in points from the canvas) to the given timestamp\n     */\n    fn point_from_s(\u0026self, options: \u0026Options, ns: i64) -\u003e f32 {\n        self.canvas.min.x\n            + options.sideways_pan_in_points\n            + self.canvas.width() * ((ns - self.start_s) as f32) / options.canvas_width_s\n    }\n}\n\n/****************************************************************************************************************************/\n// OPTIONS\n/****************************************************************************************************************************/\n\n/**\n * Options struct\n */\npub struct Options {\n    pub canvas_width_s: f32,                                   // Canvas width\n    pub sideways_pan_in_points: f32,                           // Sideways pan in points\n    pub cull_width: f32,                                       // Culling width\n    pub min_width: f32,                                        // Minimum width of a job\n    pub rect_height: f32,                                      // Height of a job\n    pub spacing: f32,                                          // Vertical spacing between jobs\n    pub rounding: f32,                                         // Rounded corners\n    pub aggregate_by: AggregateBy,                             // Aggregate by\n    pub job_color: JobColor,                                   // Job color\n    pub see_all_res: bool,                                     // See all resources\n    pub current_hovered_job: Option\u003cJob\u003e,                      // Current hovered job\n    pub previous_hovered_job: Option\u003cJob\u003e,                     // Previous hovered job\n    pub current_hovered_resource_state: Option\u003cResourceState\u003e, // Current hovered resource state\n    pub squash_resources: bool,                                // Squash resources\n    #[cfg_attr(feature = \"serde\", serde(skip))]\n    zoom_to_relative_s_range: Option\u003c(f64, (f64, f64))\u003e, // Zoom to relative s range\n}\n\n/**\n * Default implementation for the Options struct\n */\nimpl Default for Options {\n    fn default() -\u003e Self {\n        Self {\n            canvas_width_s: 0.0,              // no zoom\n            sideways_pan_in_points: 0.0,      // no pan\n            cull_width: 0.0,                  // no culling\n            min_width: 1.0,                   // minimum width of a job\n            rect_height: 16.0,                // height of a job\n            spacing: 5.0,                     // vertical spacing between jobs\n            rounding: 4.0,                    // rounded corners\n            aggregate_by: Default::default(), // aggregate by component\n            job_color: Default::default(),    // job color component\n            zoom_to_relative_s_range: None,   // no zooming by default\n            current_hovered_job: None,        // no hovered job by default\n            previous_hovered_job: None,       // no previous hovered job by default\n            squash_resources: false,          // don't squash resources by default\n            see_all_res: false,\n            current_hovered_resource_state: None, // no hovered resource stae by default\n        }\n    }\n}\n\n/****************************************************************************************************************************/\n// CANVAS PAINTING\n/****************************************************************************************************************************/\n\n/**\n * Paints the UI canvas\n */\nfn ui_canvas(\n    options: \u0026mut Options,\n    app: \u0026ApplicationContext,\n    info: \u0026Info,\n    fixed_timeline_y: f32,\n    (min_ns, max_ns): (i64, i64),\n    details_window: \u0026mut Vec\u003cJobDetailsWindow\u003e,\n    collapsed_jobs_level_1: \u0026mut BTreeMap\u003cString, bool\u003e,\n    collapsed_jobs_level_2: \u0026mut BTreeMap\u003c(String, String), bool\u003e,\n    all_cluster: \u0026Vec\u003cCluster\u003e,\n) -\u003e f32 {\n    if options.canvas_width_s \u003c= 0.0 {\n        options.canvas_width_s = (max_ns - min_ns) as f32;\n        options.zoom_to_relative_s_range = None;\n    }\n\n    let mut cursor_y = info.canvas.top();\n    cursor_y += info.text_height;\n\n    // Get filtered jobs to display\n    let jobs = app.filtered_jobs.clone();\n\n    match options.aggregate_by.level_1 {\n\n        // Aggregate by owner as level 1 only\n        AggregateByLevel1Enum::Owner =\u003e {\n            let mut jobs_by_owner: BTreeMap\u003cString, Vec\u003cJob\u003e\u003e = BTreeMap::new();\n            // for each job, we add it to the corresponding owner\n            for job in jobs {\n                jobs_by_owner\n                    .entry(job.owner.clone())\n                    .or_insert_with(Vec::new)\n                    .push(job.clone());\n            }\n            // Paint the aggregated jobs with owner as level 1\n            cursor_y = paint_aggregated_jobs_level_1(\n                info,\n                options,\n                jobs_by_owner,\n                cursor_y,\n                details_window,\n                collapsed_jobs_level_1,\n                app.font_size,\n                all_cluster,\n                AggregateByLevel1Enum::Owner,\n            );\n        }\n\n        // Aggregate by host as level 1\n        AggregateByLevel1Enum::Host =\u003e {\n            match options.aggregate_by.level_2 {\n\n                // Aggregate by owner as level 2\n                AggregateByLevel2Enum::Owner =\u003e {\n                    let mut jobs_by_host_by_owner: BTreeMap\u003cString, BTreeMap\u003cString, Vec\u003cJob\u003e\u003e\u003e =\n                        BTreeMap::new();\n                    let filtered_clusters = app.filters.clusters.clone().unwrap_or_default();\n                    // for each job, we add it to the corresponding host and owner\n                    for job in jobs {\n                        for host in job.hosts.iter() {\n                            if filtered_clusters.len() != 0\n                                \u0026\u0026 !contains_host(\u0026filtered_clusters, host)\n                            {\n                                continue;\n                            }\n                            jobs_by_host_by_owner\n                                .entry(host.clone())\n                                .or_insert_with(BTreeMap::new)\n                                .entry(job.owner.clone())\n                                .or_insert_with(Vec::new)\n                                .push(job.clone());\n                        }\n                    }\n\n                    // Paint the aggregated jobs with host as level 1 and owner as level 2\n                    cursor_y = paint_aggregated_jobs_level_2(\n                        info,\n                        options,\n                        jobs_by_host_by_owner,\n                        cursor_y,\n                        details_window,\n                        collapsed_jobs_level_1,\n                        collapsed_jobs_level_2,\n                        app.font_size,\n                        all_cluster,\n                        AggregateByLevel1Enum::Host,\n                        AggregateByLevel2Enum::Owner,\n                    );\n                }\n\n                // No aggregation as level 2 so we only aggregate by host as level 1\n                AggregateByLevel2Enum::None =\u003e {\n                    let mut jobs_by_host: BTreeMap\u003cString, Vec\u003cJob\u003e\u003e = BTreeMap::new();\n                    let filtered_clusters = app.filters.clusters.clone().unwrap_or_default();\n\n                    // for each job, we add it to the corresponding host\n                    for job in jobs {\n                        for host in job.hosts.iter() {\n                            if filtered_clusters.len() != 0\n                                \u0026\u0026 !contains_host(\u0026filtered_clusters, host)\n                            {\n                                continue;\n                            }\n                            jobs_by_host\n                                .entry(host.clone())\n                                .or_insert_with(Vec::new)\n                                .push(job.clone());\n                        }\n                    }\n\n                    // Paint the aggregated jobs with host as level 1\n                    cursor_y = paint_aggregated_jobs_level_1(\n                        info,\n                        options,\n                        jobs_by_host,\n                        cursor_y,\n                        details_window,\n                        collapsed_jobs_level_1,\n                        app.font_size,\n                        all_cluster,\n                        AggregateByLevel1Enum::Host,\n                    );\n                }\n                AggregateByLevel2Enum::Host =\u003e {\n                    // nothing to do here\n                }\n            }\n        }\n\n        // Aggregate by cluster as level 1\n        AggregateByLevel1Enum::Cluster =\u003e match options.aggregate_by.level_2 {\n\n            // Aggregate by owner as level 2\n            AggregateByLevel2Enum::Owner =\u003e {\n                let mut jobs_by_cluster_by_owner: BTreeMap\u003cString, BTreeMap\u003cString, Vec\u003cJob\u003e\u003e\u003e =\n                    BTreeMap::new();\n                let filtered_clusters = app.filters.clusters.clone().unwrap_or_default();\n\n                // for each job, we add it to the corresponding cluster and owner\n                for job in jobs {\n                    for cluster in job.clusters.iter() {\n                        if filtered_clusters.len() != 0\n                            \u0026\u0026 contains_cluster(\u0026filtered_clusters, cluster)\n                        {\n                            continue;\n                        }\n                        jobs_by_cluster_by_owner\n                            .entry(cluster.clone())\n                            .or_insert_with(BTreeMap::new)\n                            .entry(job.owner.clone())\n                            .or_insert_with(Vec::new)\n                            .push(job.clone());\n                    }\n                }\n\n                // Paint the aggregated jobs with cluster as level 1 and owner as level 2\n                cursor_y = paint_aggregated_jobs_level_2(\n                    info,\n                    options,\n                    jobs_by_cluster_by_owner,\n                    cursor_y,\n                    details_window,\n                    collapsed_jobs_level_1,\n                    collapsed_jobs_level_2,\n                    app.font_size,\n                    all_cluster,\n                    AggregateByLevel1Enum::Cluster,\n                    AggregateByLevel2Enum::Owner,\n                );\n            }\n\n            // No aggregation as level 2 so we only aggregate by cluster as level 1\n            AggregateByLevel2Enum::None =\u003e {\n                let mut jobs_by_cluster: BTreeMap\u003cString, Vec\u003cJob\u003e\u003e = BTreeMap::new();\n                let filtered_clusters = app.filters.clusters.clone().unwrap_or_default();\n\n                // for each job, we add it to the corresponding cluster\n                for job in jobs {\n                    for cluster in job.clusters.iter() {\n                        if filtered_clusters.len() != 0\n                            \u0026\u0026 contains_cluster(\u0026filtered_clusters, cluster)\n                        {\n                            continue;\n                        }\n                        jobs_by_cluster\n                            .entry(cluster.clone())\n                            .or_insert_with(Vec::new)\n                            .push(job.clone());\n                    }\n                }\n\n                // Paint the aggregated jobs with cluster as level 1\n                cursor_y = paint_aggregated_jobs_level_1(\n                    info,\n                    options,\n                    jobs_by_cluster,\n                    cursor_y,\n                    details_window,\n                    collapsed_jobs_level_1,\n                    app.font_size,\n                    all_cluster,\n                    AggregateByLevel1Enum::Cluster,\n                );\n            }\n\n            // Aggregate by host as level 2\n            AggregateByLevel2Enum::Host =\u003e {\n                let mut jobs_by_cluster_by_host: BTreeMap\u003cString, BTreeMap\u003cString, Vec\u003cJob\u003e\u003e\u003e =\n                    BTreeMap::new();\n                let filtered_clusters = app.filters.clusters.clone().unwrap_or_default();\n\n                // for each job, we add it to the corresponding cluster and host\n                for job in jobs {\n                    for cluster in job.clusters.iter() {\n                        for host in job.hosts.iter() {\n                            if filtered_clusters.len() != 0\n                                \u0026\u0026 !contains_host(\u0026filtered_clusters, host)\n                            {\n                                continue;\n                            }\n                            // We don't add the host to the cluster if this host doesn't belong to the cluster\n                            let curr_cluster =\n                                get_cluster_from_name(\u0026app.all_clusters, \u0026cluster).unwrap();\n\n                            if cluster_contain_host(\u0026curr_cluster, \u0026host) {\n                                jobs_by_cluster_by_host\n                                    .entry(cluster.clone())\n                                    .or_insert_with(BTreeMap::new)\n                                    .entry(host.clone())\n                                    .or_insert_with(Vec::new)\n                                    .push(job.clone());\n                            }\n                        }\n                    }\n                }\n\n                // Paint the aggregated jobs with cluster as level 1 and host as level 2\n                cursor_y = paint_aggregated_jobs_level_2(\n                    info,\n                    options,\n                    jobs_by_cluster_by_host,\n                    cursor_y,\n                    details_window,\n                    collapsed_jobs_level_1,\n                    collapsed_jobs_level_2,\n                    app.font_size,\n                    all_cluster,\n                    AggregateByLevel1Enum::Cluster,\n                    AggregateByLevel2Enum::Host,\n                );\n            }\n        },\n    }\n\n    // Paint tooltip for hovered job/resource state\n    paint_tooltip(info, options);\n\n    // Update previous hovered job for next frame\n    options.previous_hovered_job = options.current_hovered_job.clone();\n    options.current_hovered_job = None; // Reset for next frame, but keep previous_hovered_job\n\n    // Paint the timeline text on top of everything\n    paint_timeline_text_on_top(info, options, fixed_timeline_y);\n\n    cursor_y\n}\n\n/**\n * Interacts with the canvas\n */\nfn interact_with_canvas(options: \u0026mut Options, response: \u0026Response, info: \u0026Info) {\n    if response.drag_delta().x != 0.0 {\n        options.sideways_pan_in_points += response.drag_delta().x;\n        options.zoom_to_relative_s_range = None;\n    }\n\n    if response.hovered() {\n        // Sideways pan with e.g. a touch pad:\n        if info.ctx.input(|i| i.smooth_scroll_delta.x != 0.0) {\n            options.sideways_pan_in_points += info.ctx.input(|i| i.smooth_scroll_delta.x);\n            options.zoom_to_relative_s_range = None;\n        }\n\n        let mut zoom_factor = info.ctx.input(|i| i.zoom_delta_2d().x);\n\n        if response.dragged_by(PointerButton::Secondary) {\n            zoom_factor *= (response.drag_delta().y * 0.01).exp();\n        }\n\n        if zoom_factor != 1.0 {\n            let new_width = options.canvas_width_s / zoom_factor;\n\n            // Apply a limit to the zoom\n            let max_canvas_width = 2 * 24 * 60 * 60; // 2 days in seconds\n            if new_width \u003c= max_canvas_width as f32 {\n                options.canvas_width_s = new_width;\n\n                if let Some(mouse_pos) = response.hover_pos() {\n                    let zoom_center = mouse_pos.x - info.canvas.min.x;\n                    options.sideways_pan_in_points =\n                        (options.sideways_pan_in_points - zoom_center) * zoom_factor + zoom_center;\n                }\n            }\n            options.zoom_to_relative_s_range = None;\n        }\n    }\n\n    if response.double_clicked() {\n        // Reset view\n        options.zoom_to_relative_s_range = Some((\n            info.ctx.input(|i| i.time),\n            (0., (info.stop_s - info.start_s) as f64),\n        ));\n    }\n\n    if let Some((start_time, (start_s, end_s))) = options.zoom_to_relative_s_range {\n        const ZOOM_DURATION: f32 = 0.75;\n        let t = (info.ctx.input(|i| i.time - start_time) as f32 / ZOOM_DURATION).min(1.0);\n\n        let canvas_width = response.rect.width();\n\n        let target_canvas_width_s = (end_s - start_s) as f32;\n        let target_pan_in_points = -canvas_width * start_s as f32 / target_canvas_width_s;\n\n        options.canvas_width_s = lerp(\n            options.canvas_width_s.recip()..=target_canvas_width_s.recip(),\n            t,\n        )\n        .recip();\n        options.sideways_pan_in_points =\n            lerp(options.sideways_pan_in_points..=target_pan_in_points, t);\n\n        if t \u003e= 1.0 {\n            options.zoom_to_relative_s_range = None;\n        }\n\n        info.ctx.request_repaint();\n    }\n}\n\n/**\n * ThemeColors struct\n */\nstruct ThemeColors {\n    text: Color32,\n    text_dim: Color32,\n    line: Color32,\n    aggregated_line_level_1: Rgba,\n    aggregated_line_level_2: Rgba,\n    background: Color32,\n    background_timeline: Color32,\n    hatch: Color32,\n}\n\n/**\n * Returns the theme colors for the Gantt chart\n */\nfn get_theme_colors(style: \u0026egui::Style) -\u003e ThemeColors {\n\n    if style.visuals.dark_mode { // Dark mode\n        ThemeColors {\n            text: Color32::WHITE,\n            text_dim: Color32::from_white_alpha(229),\n            line: Color32::WHITE,\n            aggregated_line_level_1: Rgba::from_white_alpha(0.4),\n            aggregated_line_level_2: Rgba::from_white_alpha(0.5),\n            background: Color32::from_black_alpha(100),\n            background_timeline: Color32::from_black_alpha(150),\n            hatch: Color32::from_rgba_premultiplied(0, 150, 150, 150),\n        }\n    } else { // Light mode\n        ThemeColors {\n            text: Color32::BLACK,\n            text_dim: Color32::from_black_alpha(229),\n            line: Color32::BLACK,\n            aggregated_line_level_1: Rgba::from_black_alpha(0.5),\n            aggregated_line_level_2: Rgba::from_black_alpha(0.7),\n            background: Color32::from_black_alpha(50),\n            background_timeline: Color32::from_black_alpha(20),\n            hatch: Color32::from_rgba_premultiplied(0, 0, 139, 150),\n        }\n    }\n}\n\n/****************************************************************************************************************************/\n// JOB PAINTING\n/****************************************************************************************************************************/\n\n/**\n * Paints a tooltip for a job and/or resource state\n */\nfn paint_tooltip(info: \u0026Info, options: \u0026mut Options) {\n    let mut tooltip_text = String::new();\n\n    // Add job info if there's a hovered job\n    if let Some(job) = \u0026options.current_hovered_job {\n        tooltip_text.push_str(\u0026format!(\n            \"{}: {}\\n{}: {:?}\\n{}: {}\\n{}: {}\\n{}: {} seconds\",\n            t!(\"app.details.tooltip.job_id\"),\n            job.id,\n            t!(\"app.details.tooltip.owner\"),\n            job.owner,\n            t!(\"app.details.tooltip.state\"),\n            job.state.get_label(),\n            t!(\"app.details.tooltip.start_time\"),\n            format_timestamp(job.scheduled_start),\n            t!(\"app.details.tooltip.walltime\"),\n            job.walltime\n        ));\n    }\n\n    // Add resource state info if there's a hovered resource state\n    if let Some(resource_state) = \u0026options.current_hovered_resource_state {\n        if !tooltip_text.is_empty() {\n            tooltip_text.push_str(\"\\n\");\n        }\n        tooltip_text.push_str(\u0026format!(\n            \"{} State: {:?}\",\n            if (options.aggregate_by.level_2 == AggregateByLevel2Enum::None\n                \u0026\u0026 options.aggregate_by.level_1 == AggregateByLevel1Enum::Host)\n                || options.aggregate_by.level_2 == AggregateByLevel2Enum::Host\n            {\n                \"Host\"\n            } else if options.aggregate_by.level_2 == AggregateByLevel2Enum::None\n                \u0026\u0026 options.aggregate_by.level_1 == AggregateByLevel1Enum::Cluster\n            {\n                \"Cluster\"\n            } else {\n                \"Resource\"\n            },\n            resource_state\n        ));\n        options.current_hovered_resource_state = None; // Reset for next frame\n    }\n\n    // Show tooltip if we have any text to display\n    if !tooltip_text.is_empty() {\n        if let Some(_pointer_pos) = info.response.hover_pos() {\n            egui::show_tooltip_at_pointer(\n                \u0026info.ctx,\n                info.response.layer_id,\n                egui::Id::new(\"tooltip\"),\n                |ui| {\n                    ui.set_max_width(800.0);\n                    ui.label(tooltip_text);\n                },\n            );\n        }\n    }\n}\n\n/**\n * Paints jobs with 1 level of aggregation\n */\nfn paint_aggregated_jobs_level_1(\n    info: \u0026Info,\n    options: \u0026mut Options,\n    jobs: BTreeMap\u003cString, Vec\u003cJob\u003e\u003e,\n    mut cursor_y: f32,\n    details_window: \u0026mut Vec\u003cJobDetailsWindow\u003e,\n    collapsed_jobs: \u0026mut BTreeMap\u003cString, bool\u003e,\n    font_size: i32,\n    all_cluster: \u0026Vec\u003cCluster\u003e,\n    aggregate_by: AggregateByLevel1Enum,\n) -\u003e f32 {\n    let theme_colors = get_theme_colors(\u0026info.ctx.style());\n\n    let spacing_between_level_1 = 5.0 + font_size as f32; // Spacing between level 1 key\n    let spacing_between_jobs = 5.0; // Spacing between jobs\n    let offset_level_1 = 10.0; // Offset for level 1 key\n\n    cursor_y += spacing_between_level_1;\n\n    // Sort the level 1 keys\n    let mut sorted_level_1: Vec\u003cString\u003e = jobs.keys().cloned().collect();\n    sorted_level_1.sort_by(|a, b| compare_string_with_number(\u0026a, \u0026b));\n\n    let aggregation_height = font_size as f32 + 5.0 + offset_level_1;\n\n    // Store header positions and data to draw them last if squashing is enabled\n    let mut header_data = Vec::new();\n\n    // Display jobs\n    for level_1 in sorted_level_1 {\n        let job_list = jobs.get(\u0026level_1).unwrap();\n        // Draw a line to separate\n        info.painter.line_segment(\n            [\n                pos2(info.canvas.min.x, cursor_y),\n                pos2(info.canvas.max.x, cursor_y),\n            ],\n            Stroke::new(1.5, theme_colors.aggregated_line_level_1), // More marked line\n        );\n\n        cursor_y += offset_level_1;\n\n        let text_pos = pos2(info.canvas.min.x, cursor_y);\n\n        // Check if the section is collapsed\n        let is_collapsed = collapsed_jobs.entry(level_1.clone()).or_insert(false);\n\n        // Store header info for later if squashing\n        if options.squash_resources {\n            header_data.push((level_1.clone(), text_pos, *is_collapsed));\n        } else {\n            // Paint the job info immediately if not squashing\n            paint_job_info(info, \u0026level_1, text_pos, is_collapsed, 1);\n        }\n\n        cursor_y += spacing_between_level_1; // Spacing after the owner\n\n        let state;\n\n        // Get the state of the resource\n        if aggregate_by == AggregateByLevel1Enum::Owner {\n            state = ResourceState::Alive;\n        } else if aggregate_by == AggregateByLevel1Enum::Host {\n            state = get_host_state_from_name(all_cluster, \u0026level_1);\n        } else {\n            state = get_cluster_state_from_name(all_cluster, \u0026level_1);\n        }\n\n        // Only show jobs if section is not collapsed\n        if !*is_collapsed {\n            // Save the initial cursor position for squashed rendering\n            let initial_job_y = cursor_y;\n\n            for job in job_list {\n                // When squashing, use the initial Y position for all jobs in this level\n                let job_start_y = if options.squash_resources {\n                    initial_job_y\n                } else {\n                    cursor_y\n                };\n\n                // Draw the job\n                paint_job(\n                    info,\n                    options,\n                    \u0026job,\n                    job_start_y,\n                    details_window,\n                    all_cluster,\n                    state,\n                    aggregation_height,\n                );\n\n                // Only increment cursor if not squashing\n                if !options.squash_resources {\n                    cursor_y += info.text_height + spacing_between_jobs + options.spacing;\n                }\n            }\n\n            // If we're squashing, just add one line of spacing after all jobs\n            if options.squash_resources \u0026\u0026 !job_list.is_empty() {\n                cursor_y += info.text_height + spacing_between_jobs + options.spacing;\n            }\n            if !options.squash_resources {\n                cursor_y += spacing_between_level_1;\n            }\n        }\n        if !options.squash_resources {\n            cursor_y += spacing_between_level_1;\n        }\n    }\n\n    // Now draw all headers on top if squashing is enabled\n    if options.squash_resources {\n        for (name, pos, is_collapsed) in header_data {\n            // Create a background to make the text more readable\n            let galley = info.ctx.fonts(|f| {\n                let collapsed_symbol = if is_collapsed { \"⏵\" } else { \"⏷\" };\n                let label = format!(\"{} {}\", collapsed_symbol, name);\n                f.layout_no_wrap(label, info.font_id.clone(), theme_colors.text_dim)\n            });\n            let rect = Rect::from_min_size(pos, galley.size());\n            info.painter\n                .rect_filled(rect.expand(4.0), 4.0, theme_colors.background_timeline);\n\n            // Then paint the job info\n            let mut is_collapsed_copy = is_collapsed;\n            paint_job_info(info, \u0026name, pos, \u0026mut is_collapsed_copy, 1);\n            // Update the real collapsed state if changed\n            if is_collapsed_copy != is_collapsed {\n                *collapsed_jobs.get_mut(\u0026name).unwrap() = is_collapsed_copy;\n            }\n        }\n    }\n\n    cursor_y\n}\n\n/**\n * Paints jobs with 2 levels of aggregation\n */\nfn paint_aggregated_jobs_level_2(\n    info: \u0026Info,\n    options: \u0026mut Options,\n    jobs: BTreeMap\u003cString, BTreeMap\u003cString, Vec\u003cJob\u003e\u003e\u003e,\n    mut cursor_y: f32,\n    details_window: \u0026mut Vec\u003cJobDetailsWindow\u003e,\n    collapsed_jobs_level_1: \u0026mut BTreeMap\u003cString, bool\u003e,\n    collapsed_jobs_level_2: \u0026mut BTreeMap\u003c(String, String), bool\u003e,\n    font_size: i32,\n    all_cluster: \u0026Vec\u003cCluster\u003e,\n    aggregate_by_level_1: AggregateByLevel1Enum,\n    aggregate_by_level_2: AggregateByLevel2Enum,\n) -\u003e f32 {\n    let theme_colors = get_theme_colors(\u0026info.ctx.style());\n\n    let spacing_between_level_1 = font_size as f32; // Spacing between level 1 key\n    let spacing_between_level_2 = font_size as f32 + 5.0; // Spacing between level 2 key\n    let spacing_between_jobs = 5.0; // Spacing between jobs\n    let offset_level_1 = 10.0; // Offset for level 1 key\n\n    cursor_y += spacing_between_level_1;\n\n    // Sort the level 1 keys\n    let mut sorted_level_1: Vec\u003cString\u003e = jobs.keys().cloned().collect();\n    sorted_level_1.sort_by(|a, b| compare_string_with_number(\u0026a, \u0026b));\n\n    // Store header positions and data to draw them last if squashing is enabled\n    let mut header_data_level_1 = Vec::new();\n    let mut header_data_level_2 = Vec::new();\n\n    for level_1 in sorted_level_1 {\n        let level_2_map = jobs.get(\u0026level_1).unwrap();\n        let level_1_key = level_1.clone();\n\n        // Draw a line to separate\n        info.painter.line_segment(\n            [\n                pos2(info.canvas.min.x, cursor_y),\n                pos2(info.canvas.max.x, cursor_y),\n            ],\n            Stroke::new(1.5, theme_colors.aggregated_line_level_1), // More marked line\n        );\n\n        cursor_y += offset_level_1;\n\n        let text_pos = pos2(info.canvas.min.x, cursor_y);\n\n        // Check if the level 1 is collapsed\n        let is_collapsed_level_1 = collapsed_jobs_level_1\n            .entry(level_1.clone())\n            .or_insert(false);\n\n        // Either store header info for later or paint immediately\n        if options.squash_resources {\n            header_data_level_1.push((level_1.clone(), text_pos, *is_collapsed_level_1));\n        } else {\n            // Paint the job info immediately if not squashing\n            paint_job_info(info, \u0026level_1, text_pos, is_collapsed_level_1, 1);\n        }\n\n        cursor_y += spacing_between_level_1;\n\n        // Only show jobs if section is not collapsed\n        if !*is_collapsed_level_1 {\n            // Sort the level 2 keys\n            let mut sorted_level_2: Vec\u003c_\u003e = level_2_map.keys().collect();\n            sorted_level_2.sort_by(|a, b| compare_string_with_number(\u0026a, \u0026b));\n\n            // Display level 2\n            for level_2 in sorted_level_2 {\n                if let Some(job_list) = level_2_map.get(level_2) {\n                    // Draw a line to separate\n                    info.painter.line_segment(\n                        [\n                            pos2(info.canvas.min.x, cursor_y),\n                            pos2(info.canvas.max.x, cursor_y),\n                        ],\n                        Stroke::new(0.5, theme_colors.aggregated_line_level_2), // Line more discreet\n                    );\n\n                    cursor_y += spacing_between_level_2;\n\n                    let text_pos = pos2(info.canvas.min.x + 20.0, cursor_y);\n\n                    // Check if the level 2 is collapsed\n                    let is_collapsed_level_2 = collapsed_jobs_level_2\n                        .entry((level_1_key.to_string(), level_2.to_string()))\n                        .or_insert(false);\n\n                    // Either store header info for later or paint immediately\n                    if options.squash_resources {\n                        header_data_level_2.push((\n                            level_1_key.clone(),\n                            level_2.to_string(),\n                            text_pos,\n                            *is_collapsed_level_2,\n                        ));\n                    } else {\n                        // Paint the job info immediately if not squashing\n                        paint_job_info(\n                            info,\n                            \u0026level_2.to_string(),\n                            text_pos,\n                            is_collapsed_level_2,\n                            2,\n                        );\n                    }\n\n                    cursor_y += spacing_between_level_2;\n\n                    let state;\n\n                    // Get the state of the resource\n                    if aggregate_by_level_2 == AggregateByLevel2Enum::Host {\n                        state = get_host_state_from_name(all_cluster, \u0026level_2);\n                    } else if aggregate_by_level_2 == AggregateByLevel2Enum::None {\n                        if aggregate_by_level_1 == AggregateByLevel1Enum::Host {\n                            state = get_host_state_from_name(all_cluster, \u0026level_1);\n                        } else if aggregate_by_level_1 == AggregateByLevel1Enum::Cluster {\n                            state = get_cluster_state_from_name(all_cluster, \u0026level_1);\n                        } else {\n                            state = ResourceState::Alive;\n                        }\n                    } else {\n                        state = ResourceState::Alive;\n                    }\n\n                    // Only show jobs if section is not collapsed\n                    if !*is_collapsed_level_2 {\n                        // Save the initial cursor position for squashed rendering\n                        let initial_job_y = cursor_y;\n\n                        // Display jobs\n                        for job in job_list.iter() {\n                            // When squashing, use the initial Y position for all jobs in this level\n                            let job_start_y = if options.squash_resources {\n                                initial_job_y\n                            } else {\n                                cursor_y\n                            };\n\n                            // Adjust aggregation height for the first job of the second level\n                            let adjusted_aggregation_height = spacing_between_level_2 * 2.0;\n\n                            // Draw the job\n                            paint_job(\n                                info,\n                                options,\n                                job,\n                                job_start_y,\n                                details_window,\n                                all_cluster,\n                                state,\n                                adjusted_aggregation_height,\n                            );\n\n                            // Only increment cursor if not squashing\n                            if !options.squash_resources \u0026\u0026 !job_list.is_empty() {\n                                cursor_y +=\n                                    info.text_height + spacing_between_jobs + options.spacing;\n                            }\n                        }\n\n                        // If we're squashing, just add one line of spacing after all jobs\n                        if options.squash_resources {\n                            cursor_y += info.text_height + spacing_between_jobs + options.spacing;\n                        }\n                    }\n                    if !options.squash_resources {\n                        cursor_y += spacing_between_level_2;\n                    }\n                }\n            }\n        }\n        if !options.squash_resources {\n            cursor_y += spacing_between_level_1;\n        }\n    }\n\n    // Now draw all headers on top if squashing is enabled\n    if options.squash_resources {\n        // First, draw level 1 headers\n        for (name, pos, is_collapsed) in header_data_level_1 {\n            // Create a background to make the text more readable\n            let galley = info.ctx.fonts(|f| {\n                let collapsed_symbol = if is_collapsed { \"⏵\" } else { \"⏷\" };\n                let label = format!(\"{} {}\", collapsed_symbol, name);\n                f.layout_no_wrap(label, info.font_id.clone(), theme_colors.text_dim)\n            });\n            let rect = Rect::from_min_size(pos, galley.size());\n            info.painter\n                .rect_filled(rect.expand(4.0), 4.0, theme_colors.background_timeline);\n\n            // Then paint the job info\n            let mut is_collapsed_copy = is_collapsed;\n            paint_job_info(info, \u0026name, pos, \u0026mut is_collapsed_copy, 1);\n            // Update the real collapsed state if changed\n            if is_collapsed_copy != is_collapsed {\n                *collapsed_jobs_level_1.get_mut(\u0026name).unwrap() = is_collapsed_copy;\n            }\n        }\n\n        // Then draw level 2 headers on top of everything\n        for (level_1_key, level_2_key, pos, is_collapsed) in header_data_level_2 {\n            // Then paint the job info\n            let mut is_collapsed_copy = is_collapsed;\n            paint_job_info(info, \u0026level_2_key, pos, \u0026mut is_collapsed_copy, 2);\n            // Update the real collapsed state if changed\n            if is_collapsed_copy != is_collapsed {\n                *collapsed_jobs_level_2\n                    .get_mut(\u0026(level_1_key, level_2_key))\n                    .unwrap() = is_collapsed_copy;\n            }\n        }\n    }\n\n    cursor_y\n}\n\n#[derive(PartialEq)]\nenum PaintResult {\n    Culled,\n    Painted,\n    Hovered,\n}\n\n/**\n * Paints a job\n */\nfn paint_job(\n    info: \u0026Info,\n    options: \u0026mut Options,\n    job: \u0026Job,\n    top_y: f32,\n    details_window: \u0026mut Vec\u003cJobDetailsWindow\u003e,\n    all_cluster: \u0026Vec\u003cCluster\u003e,\n    state: ResourceState,\n    aggregation_height: f32,\n) -\u003e PaintResult {\n    let theme_colors = get_theme_colors(\u0026info.ctx.style());\n    let start_x = info.point_from_s(options, job.scheduled_start); // Start time\n    // If the job is not finished, we use the scheduled start time + walltime otherwise we use the stop time\n    let stop_time = if job.stop_time \u003e 0 {\n        job.stop_time\n    } else {\n        job.scheduled_start + job.walltime\n    };\n    let end_x = info.point_from_s(options, stop_time);\n    let width = end_x - start_x; // Width of the job\n\n    if width \u003c options.cull_width {\n        return PaintResult::Culled;\n    }\n\n    // Calculate the total line height including all spacing components\n    let spacing_between_jobs = 5.0;\n    let total_line_height = info.text_height + spacing_between_jobs + options.spacing;\n\n    // When squashing, use the full line height to completely eliminate gaps\n    let height = if options.squash_resources {\n        total_line_height + aggregation_height\n    } else {\n        options.rect_height\n    };\n\n    // Use no rounding when squashing\n    let rounding = if options.squash_resources {\n        0.0\n    } else {\n        options.rounding\n    };\n\n    // Create the rectangle for the job\n    let rect = Rect::from_min_size(\n        pos2(\n            start_x,\n            if options.squash_resources {\n                top_y - aggregation_height\n            } else {\n                top_y\n            },\n        ),\n        egui::vec2(width.max(options.min_width), height),\n    );\n\n    let is_job_trully_hovered = if let Some(mouse_pos) = info.response.hover_pos() {\n        rect.contains(mouse_pos)\n    } else {\n        false\n    };\n\n    // Update how we determine if a job is hovered\n    let is_job_hovered = (if let Some(mouse_pos) = info.response.hover_pos() {\n        rect.contains(mouse_pos)\n    } else {\n        false\n    }) || options\n        .current_hovered_job\n        .as_ref()\n        .map_or(false, |j| j.id == job.id)\n        || options\n            .previous_hovered_job\n            .as_ref()\n            .map_or(false, |j| j.id == job.id);\n\n    // If this job is being directly hovered, update the tooltip and hovered ID\n    if is_job_trully_hovered \u0026\u0026 options.current_hovered_job.is_none() {\n        options.current_hovered_job = Some(job.clone());\n    }\n\n    // Add click detection for the job\n    if is_job_hovered \u0026\u0026 info.response.secondary_clicked() {\n        let window =\n            JobDetailsWindow::new(job.clone(), get_tree_structure_for_job(job, all_cluster));\n        // Check if a window for this job already exists, if so, don't open a new one\n        if !details_window.iter().any(|w| w.job.id == job.id) {\n            details_window.push(window);\n        }\n    }\n\n    // Zoom to job if clicked\n    if is_job_hovered \u0026\u0026 info.response.clicked() {\n        // Zoom to job\n        let job_duration_s = job.walltime as f64;\n        let job_start_s = job.scheduled_start as f64;\n        let job_end_s = if job.stop_time \u003e 0 {\n            job.stop_time as f64\n        } else {\n            job_start_s + job_duration_s\n        };\n        options.zoom_to_relative_s_range = Some((\n            info.ctx.input(|i| i.time),\n            (\n                job_start_s - info.start_s as f64,\n                job_end_s - info.start_s as f64,\n            ),\n        ));\n    }\n\n    // Caculate the color of the job depending the selected job color int gantt component\n    let (hovered_color, normal_color) = if options.job_color.is_random() {\n        job.get_gantt_color()\n    } else {\n        job.state.get_color()\n    };\n\n    // If the job is hovered, we make it brighter\n    let fill_color = if is_job_hovered {\n        hovered_color\n    } else {\n        normal_color\n    };\n\n    // Paint the job rectangle\n    info.painter.rect_filled(rect, rounding, fill_color);\n\n    // Paint ressource hatch\n    if state == ResourceState::Dead || state == ResourceState::Absent {\n\n        // Define the color of the hachure depending the state of the resource\n        let hachure_color = match state {\n            ResourceState::Dead =\u003e Color32::from_rgba_premultiplied(255, 0, 0, 150),\n            ResourceState::Absent =\u003e theme_colors.hatch,\n            _ =\u003e Color32::TRANSPARENT,\n        };\n\n        let hachure_spacing = 10.0; // Spacing between hachure lines\n        let mut shapes = Vec::new();\n        let mut x = info.canvas.min.x;\n        let current_time_x = info.point_from_s(options, chrono::Utc::now().timestamp());\n\n        // Use the same y-position adjustment as the job rectangle\n        let hatch_y = if options.squash_resources {\n            top_y - aggregation_height\n        } else {\n            top_y\n        };\n\n        // Define the rectangle where the hachure will be drawn\n        let hover_rect = match state {\n            ResourceState::Dead =\u003e Rect::from_min_max(\n                pos2(info.canvas.min.x, hatch_y),\n                pos2(info.canvas.max.x, hatch_y + height), // draw hachure until the canvas max visible x\n            ),\n            ResourceState::Absent =\u003e Rect::from_min_max(\n                pos2(info.canvas.min.x, hatch_y),\n                pos2(current_time_x, hatch_y + height), // only draw hachure until current time\n            ),\n            _ =\u003e Rect::from_min_max(pos2(0.0, 0.0), pos2(0.0, 0.0)), // draw nothing\n        };\n\n        // We check if the mouse is hovering the hachure\n        let is_hachure_hovered = if let Some(mouse_pos) = info.response.hover_pos() {\n            hover_rect.contains(mouse_pos)\n        } else {\n            false\n        };\n\n        // Final color of the hachure\n        let final_hachure_color = if is_hachure_hovered {\n            hachure_color.gamma_multiply(1.5) // More visible when hovered\n        } else {\n            hachure_color\n        };\n\n        while x \u003c info.canvas.max.x {\n            if state == ResourceState::Absent \u0026\u0026 x \u003e= current_time_x {\n                break;\n            }\n            shapes.push(Shape::line_segment(\n                [\n                    pos2(x, hatch_y),\n                    pos2(x + hachure_spacing, hatch_y + height),\n                ],\n                Stroke::new(2.0, final_hachure_color),\n            ));\n            x += hachure_spacing;\n        }\n\n        info.painter.extend(shapes);\n\n        // Display tooltip if hovered\n        if is_hachure_hovered {\n            options.current_hovered_resource_state = Some(state.clone());\n        }\n    }\n\n    if width \u003e 20.0 {\n        let text = format!(\"{} ({})\", job.owner, job.id);\n        info.painter.text(\n            rect.center(),\n            Align2::CENTER_CENTER,\n            text,\n            info.font_id.clone(),\n            if is_job_hovered {\n                theme_colors.text\n            } else {\n                theme_colors.text_dim\n            },\n        );\n    }\n\n    if is_job_hovered {\n        PaintResult::Hovered\n    } else {\n        PaintResult::Painted\n    }\n}\n\n/**\n * Paints a job info appearing on the left side of the canvas\n */\nfn paint_job_info(info: \u0026Info, info_label: \u0026str, pos: Pos2, collapsed: \u0026mut bool, level: u8) {\n    let theme_colors = get_theme_colors(\u0026info.ctx.style());\n    let collapsed_symbol = if *collapsed { \"⏵\" } else { \"⏷\" }; // Symbol to show if the section is collapsed or not\n    let label = format!(\"{} {}\", collapsed_symbol, info_label); // Add the symbol and the name of the section\n\n    let galley = info\n        .ctx\n        .fonts(|f| f.layout_no_wrap(label, info.font_id.clone(), theme_colors.text_dim));\n\n    let offset_x = if level == 1 { 0.0 } else { 50.0 };\n    let rect = Rect::from_min_size(pos2(pos.x + offset_x, pos.y), galley.size());\n\n    // Check if the section is hovered\n    let is_hovered = if let Some(mouse_pos) = info.response.hover_pos() {\n        rect.contains(mouse_pos)\n    } else {\n        false\n    };\n\n    // If the section is hovered, depending on the theme, we change the text color\n    let text_color = if is_hovered {\n        theme_colors.text\n    } else {\n        theme_colors.text_dim\n    };\n\n    // Paint the background and the text\n    info.painter.rect_filled(rect.expand(2.0), 0.0, theme_colors.background);\n\n    // Paint the text\n    info.painter.galley(rect.min, galley, text_color);\n\n    // If the section is hovered and clicked, we change the collapsed state (open/close)\n    if is_hovered \u0026\u0026 info.response.clicked() {\n        *collapsed = !(*collapsed);\n    }\n}\n\n/****************************************************************************************************************************/\n// TIMELINE\n/****************************************************************************************************************************/\n\n/**\n * Paints the timeline text labels\n */\nfn paint_timeline_text(\n    info: \u0026Info,\n    canvas: Rect,\n    options: \u0026Options,\n    grid_spacing_minutes: i64,\n    fixed_timeline_y: f32,\n    alpha_multiplier: f32,\n    zoom_factor: f32,\n) -\u003e Vec\u003cegui::Shape\u003e {\n    let mut shapes = vec![];\n    let big_alpha = remap_clamp(zoom_factor, 0.0..=1.0, 0.5..=1.0);\n    let medium_alpha = remap_clamp(zoom_factor, 0.0..=1.0, 0.1..=0.5);\n    let mut grid_s = 0;\n\n    // Paint the timeline text labels\n    loop {\n\n        // Calculate the x position of the line\n        let line_x = info.point_from_s(options, grid_s);\n\n        // If the line is out of the canvas, we stop\n        if line_x \u003e canvas.max.x {\n            break;\n        }\n\n        // If the line is inside the canvas, we paint it\n        if canvas.min.x \u003c= line_x {\n            let big_line = grid_s % (grid_spacing_minutes * 20) == 0;\n            let medium_line = grid_s % (grid_spacing_minutes * 10) == 0;\n\n            // Determine the alpha of the text\n            let text_alpha = if big_line {\n                big_alpha\n            } else if medium_line {\n                medium_alpha\n            } else {\n                0.0\n            };\n\n            // If the text is visible, we paint it\n            if text_alpha \u003e 0.0 {\n                let text = grid_text(grid_s);\n                let text_x = line_x + 4.0;\n                let text_color = if info.ctx.style().visuals.dark_mode {\n                    Color32::from(Rgba::from_white_alpha(\n                        (text_alpha * alpha_multiplier * 2.0).min(1.0),\n                    ))\n                } else {\n                    Color32::from(Rgba::from_black_alpha(\n                        (text_alpha * alpha_multiplier * 2.0).min(1.0),\n                    ))\n                };\n\n                // Paint the text\n                info.painter.fonts(|f| {\n                    shapes.push(egui::Shape::text(\n                        f,\n                        pos2(text_x, fixed_timeline_y),\n                        Align2::LEFT_TOP,\n                        \u0026text,\n                        info.font_id.clone(),\n                        text_color,\n                    ));\n                });\n            }\n        }\n\n        grid_s += grid_spacing_minutes;\n    }\n\n    shapes\n}\n\nfn paint_timeline_text_on_top(info: \u0026Info, options: \u0026Options, fixed_timeline_y: f32) {\n    let max_lines = info.canvas.width() / 4.0;\n    let mut grid_spacing_minutes = 180;\n    while options.canvas_width_s / (grid_spacing_minutes as f32) \u003e max_lines {\n        grid_spacing_minutes *= 10;\n    }\n\n    let theme_colors = get_theme_colors(\u0026info.ctx.style());\n\n    // Determine the alpha multiplier of the lines depending on the theme\n    let alpha_multiplier = if info.ctx.style().visuals.dark_mode {\n        0.3\n    } else {\n        0.8\n    };\n\n    let num_tiny_lines = options.canvas_width_s / (grid_spacing_minutes as f32);\n    let zoom_factor = remap_clamp(num_tiny_lines, (0.1 * max_lines)..=max_lines, 1.0..=0.0);\n\n    // Paint background rect first\n    let bg_rect = Rect::from_min_size(\n        pos2(info.canvas.min.x, fixed_timeline_y),\n        egui::vec2(info.canvas.width(), info.text_height + 5.0),\n    );\n    info.painter\n        .rect_filled(bg_rect, 0.0, theme_colors.background_timeline);\n\n    // Paint timeline text on top of background\n    let timeline_text = paint_timeline_text(\n        info,\n        info.canvas,\n        options,\n        grid_spacing_minutes,\n        fixed_timeline_y,\n        alpha_multiplier,\n        zoom_factor,\n    );\n\n    // Add the shapes to the painter\n    for shape in timeline_text {\n        info.painter.add(shape);\n    }\n\n}\n\n/**\n * Paints the timeline\n */\nfn paint_timeline(info: \u0026Info, canvas: Rect, options: \u0026Options, _start_s: i64) -\u003e Vec\u003cegui::Shape\u003e {\n    let mut shapes = vec![];\n    let theme_colors = get_theme_colors(\u0026info.ctx.style());\n\n    // Determine the alpha multiplier of the lines depending on the theme\n    let alpha_multiplier = if info.ctx.style().visuals.dark_mode {\n        0.3\n    } else {\n        0.8\n    };\n\n    let max_lines = canvas.width() / 4.0; // Maximum number of lines that can be displayed\n    let mut grid_spacing_minutes = 180; // 180 seconds = 3 minutes repesenting the grid spacing\n\n    while options.canvas_width_s / (grid_spacing_minutes as f32) \u003e max_lines {\n        grid_spacing_minutes *= 10;\n    }\n\n    let num_tiny_lines = options.canvas_width_s / (grid_spacing_minutes as f32);\n    let zoom_factor = remap_clamp(num_tiny_lines, (0.1 * max_lines)..=max_lines, 1.0..=0.0);\n    let zoom_factor = zoom_factor * zoom_factor;\n    let big_alpha = remap_clamp(zoom_factor, 0.0..=1.0, 0.5..=1.0);\n    let medium_alpha = remap_clamp(zoom_factor, 0.0..=1.0, 0.1..=0.5);\n    let tiny_alpha = remap_clamp(zoom_factor, 0.0..=1.0, 0.0..=0.1);\n\n    let mut grid_s = 0;\n\n    // Paint the timeline lines\n    loop {\n\n        // Calculate the x position of the line\n        let line_x = info.point_from_s(options, grid_s);\n\n        // If the line is out of the canvas, we stop\n        if line_x \u003e canvas.max.x {\n            break;\n        }\n\n        // If the line is inside the canvas, we paint it\n        if canvas.min.x \u003c= line_x {\n            let big_line = grid_s % (grid_spacing_minutes * 20) == 0;\n            let medium_line = grid_s % (grid_spacing_minutes * 10) == 0;\n\n            // Determine the alpha of the line\n            let line_alpha = if big_line {\n                big_alpha\n            } else if medium_line {\n                medium_alpha\n            } else {\n                tiny_alpha\n            };\n\n            // Paint the line\n            shapes.push(egui::Shape::line_segment(\n                [pos2(line_x, canvas.min.y), pos2(line_x, canvas.max.y)],\n                Stroke::new(\n                    1.0,\n                    theme_colors\n                        .line\n                        .linear_multiply(line_alpha * alpha_multiplier),\n                ),\n            ));\n        }\n\n        grid_s += grid_spacing_minutes;\n    }\n\n    shapes\n}\n\n/**\n * Paints the current red time line on the canvas\n */\nfn paint_current_time_line(info: \u0026Info, options: \u0026Options, canvas: Rect) -\u003e egui::Shape {\n    let current_time = chrono::Utc::now().timestamp(); // Current time in seconds\n    let line_x = info.point_from_s(options, current_time); // Current time in pixels\n\n    // Paint the current time line\n    egui::Shape::line_segment(\n        [pos2(line_x, canvas.min.y), pos2(line_x, canvas.max.y)],\n        Stroke::new(2.0, Color32::RED), // Keep red for both themes for better visibility\n    )\n}\n\n/**\n * Converts a timestamp to a string\n */\nfn grid_text(ts: i64) -\u003e String {\n    if ts == 0 {\n        \"N/A\".to_string()\n    } else {\n        if let Some(dt) = DateTime::from_timestamp(ts, 0) {\n            dt.with_timezone(\u0026Local)\n                .format(\"%Y-%m-%d %H:%M:%S\")\n                .to_string()\n        } else {\n            \"Invalid timestamp\".to_string()\n        }\n    }\n}\n","traces":[{"line":60,"address":[4402368,4402808],"length":1,"stats":{"Line":0}},{"line":62,"address":[4402390],"length":1,"stats":{"Line":0}},{"line":63,"address":[4402403],"length":1,"stats":{"Line":0}},{"line":64,"address":[4402455],"length":1,"stats":{"Line":0}},{"line":65,"address":[4402507],"length":1,"stats":{"Line":0}},{"line":76,"address":[4402832,4404315],"length":1,"stats":{"Line":0}},{"line":77,"address":[4404279,4402879,4403499],"length":1,"stats":{"Line":0}},{"line":79,"address":[4403469],"length":1,"stats":{"Line":0}},{"line":82,"address":[4404187,4403477],"length":1,"stats":{"Line":0}},{"line":83,"address":[4404014],"length":1,"stats":{"Line":0}},{"line":84,"address":[4404103],"length":1,"stats":{"Line":0}},{"line":88,"address":[5607685,5606624],"length":1,"stats":{"Line":0}},{"line":89,"address":[5610465,5607712,5606649,5606824,5607048],"length":1,"stats":{"Line":0}},{"line":90,"address":[5607750],"length":1,"stats":{"Line":0}},{"line":93,"address":[5607790],"length":1,"stats":{"Line":0}},{"line":94,"address":[5607803],"length":1,"stats":{"Line":0}},{"line":97,"address":[5607829,5608087],"length":1,"stats":{"Line":0}},{"line":98,"address":[5607886],"length":1,"stats":{"Line":0}},{"line":99,"address":[5607853],"length":1,"stats":{"Line":0}},{"line":100,"address":[5608046],"length":1,"stats":{"Line":0}},{"line":102,"address":[5608719,5608830,5608538],"length":1,"stats":{"Line":0}},{"line":104,"address":[5607916],"length":1,"stats":{"Line":0}},{"line":105,"address":[5608510,5608289,5608545,5607925],"length":1,"stats":{"Line":0}},{"line":107,"address":[5608888,5608219,5608971,5610509,5608671,5608725,5608444,5608832],"length":1,"stats":{"Line":0}},{"line":109,"address":[5608960],"length":1,"stats":{"Line":0}},{"line":110,"address":[5609409,5609014],"length":1,"stats":{"Line":0}},{"line":112,"address":[5609022],"length":1,"stats":{"Line":0}},{"line":113,"address":[5609052],"length":1,"stats":{"Line":0}},{"line":116,"address":[5609060],"length":1,"stats":{"Line":0}},{"line":117,"address":[5609128],"length":1,"stats":{"Line":0}},{"line":118,"address":[5609196],"length":1,"stats":{"Line":0}},{"line":119,"address":[5609254],"length":1,"stats":{"Line":0}},{"line":120,"address":[5609270],"length":1,"stats":{"Line":0}},{"line":121,"address":[5609326],"length":1,"stats":{"Line":0}},{"line":125,"address":[5609390],"length":1,"stats":{"Line":0}},{"line":127,"address":[5609401],"length":1,"stats":{"Line":0}},{"line":130,"address":[5610560,5608995,5610570],"length":1,"stats":{"Line":0}},{"line":133,"address":[5608856],"length":1,"stats":{"Line":0}},{"line":135,"address":[5608030],"length":1,"stats":{"Line":0}},{"line":136,"address":[5608094,5610592,5610602],"length":1,"stats":{"Line":0}},{"line":138,"address":[5608080],"length":1,"stats":{"Line":0}},{"line":141,"address":[5610229],"length":1,"stats":{"Line":0}},{"line":142,"address":[5608110],"length":1,"stats":{"Line":0}},{"line":143,"address":[5610201,5610236,5609980,5608119],"length":1,"stats":{"Line":0}},{"line":145,"address":[5610356],"length":1,"stats":{"Line":0}},{"line":148,"address":[5610393],"length":1,"stats":{"Line":0}},{"line":152,"address":[5607286,5611242,5610624],"length":1,"stats":{"Line":0}},{"line":153,"address":[5610644,5611187],"length":1,"stats":{"Line":0}},{"line":157,"address":[5612532,5611264,5607450,5612487,5607338],"length":1,"stats":{"Line":0}},{"line":158,"address":[5612284,5612011,5611289,5611832,5612496,5612466],"length":1,"stats":{"Line":0}},{"line":159,"address":[5612326],"length":1,"stats":{"Line":0}},{"line":160,"address":[5612565,5612560,5612087],"length":1,"stats":{"Line":0}},{"line":163,"address":[5612471,5612321,5612111,5612266,5612191],"length":1,"stats":{"Line":0}},{"line":171,"address":[4403721],"length":1,"stats":{"Line":0}},{"line":172,"address":[5612614],"length":1,"stats":{"Line":0}},{"line":175,"address":[5612671,5612636],"length":1,"stats":{"Line":0}},{"line":177,"address":[5612718,5612677],"length":1,"stats":{"Line":0}},{"line":178,"address":[5612944,5615779,5615707,5612760],"length":1,"stats":{"Line":0}},{"line":179,"address":[5612975],"length":1,"stats":{"Line":0}},{"line":180,"address":[5613008],"length":1,"stats":{"Line":0}},{"line":181,"address":[5613019],"length":1,"stats":{"Line":0}},{"line":183,"address":[5613379,5613238],"length":1,"stats":{"Line":0}},{"line":184,"address":[5613387,5613485],"length":1,"stats":{"Line":0}},{"line":187,"address":[5613920],"length":1,"stats":{"Line":0}},{"line":188,"address":[5613493],"length":1,"stats":{"Line":0}},{"line":189,"address":[5613555],"length":1,"stats":{"Line":0}},{"line":190,"address":[5613571],"length":1,"stats":{"Line":0}},{"line":191,"address":[5613691],"length":1,"stats":{"Line":0}},{"line":192,"address":[5613794],"length":1,"stats":{"Line":0}},{"line":195,"address":[5613873,5613812],"length":1,"stats":{"Line":0}},{"line":199,"address":[5614150,5614451],"length":1,"stats":{"Line":0}},{"line":200,"address":[5614311],"length":1,"stats":{"Line":0}},{"line":201,"address":[5615824,5615829,5614196],"length":1,"stats":{"Line":0}},{"line":202,"address":[5614456,5614257],"length":1,"stats":{"Line":0}},{"line":207,"address":[5614167],"length":1,"stats":{"Line":0}},{"line":210,"address":[5614476],"length":1,"stats":{"Line":0}},{"line":213,"address":[5614594],"length":1,"stats":{"Line":0}},{"line":214,"address":[5614569],"length":1,"stats":{"Line":0}},{"line":215,"address":[5614557],"length":1,"stats":{"Line":0}},{"line":217,"address":[5614561],"length":1,"stats":{"Line":0}},{"line":219,"address":[5614572],"length":1,"stats":{"Line":0}},{"line":220,"address":[5614576],"length":1,"stats":{"Line":0}},{"line":221,"address":[5614580],"length":1,"stats":{"Line":0}},{"line":222,"address":[5614584],"length":1,"stats":{"Line":0}},{"line":225,"address":[5614652],"length":1,"stats":{"Line":0}},{"line":226,"address":[5614668],"length":1,"stats":{"Line":0}},{"line":229,"address":[5614677],"length":1,"stats":{"Line":0}},{"line":231,"address":[5614751],"length":1,"stats":{"Line":0}},{"line":232,"address":[5614858,5614806],"length":1,"stats":{"Line":0}},{"line":233,"address":[5614814],"length":1,"stats":{"Line":0}},{"line":236,"address":[5614885],"length":1,"stats":{"Line":0}},{"line":237,"address":[5614935],"length":1,"stats":{"Line":0}},{"line":239,"address":[5614962],"length":1,"stats":{"Line":0}},{"line":243,"address":[5615157,5615325,5615424],"length":1,"stats":{"Line":0}},{"line":244,"address":[5615170,5615271,5615278],"length":1,"stats":{"Line":0}},{"line":245,"address":[5615275],"length":1,"stats":{"Line":0}},{"line":246,"address":[5615489,5615455,5615359],"length":1,"stats":{"Line":0}},{"line":248,"address":[5615463,5615510],"length":1,"stats":{"Line":0}},{"line":249,"address":[5615549],"length":1,"stats":{"Line":0}},{"line":251,"address":[5615617],"length":1,"stats":{"Line":0}},{"line":257,"address":[5615840,5615865],"length":1,"stats":{"Line":0}},{"line":260,"address":[4404192,4403954,4404256],"length":1,"stats":{"Line":0}},{"line":261,"address":[4404272],"length":1,"stats":{"Line":0}},{"line":285,"address":[4404352],"length":1,"stats":{"Line":0}},{"line":286,"address":[4404488,4404375],"length":1,"stats":{"Line":0}},{"line":288,"address":[4404497,4404397,4404433],"length":1,"stats":{"Line":0}},{"line":322,"address":[4404528],"length":1,"stats":{"Line":0}},{"line":331,"address":[4404545],"length":1,"stats":{"Line":0}},{"line":332,"address":[4404558],"length":1,"stats":{"Line":0}},{"line":350,"address":[4413664,4404880,4406374],"length":1,"stats":{"Line":0}},{"line":361,"address":[4405137,4405448],"length":1,"stats":{"Line":0}},{"line":362,"address":[4405344,4405453],"length":1,"stats":{"Line":0}},{"line":363,"address":[4405389],"length":1,"stats":{"Line":0}},{"line":366,"address":[4405169,4405195],"length":1,"stats":{"Line":0}},{"line":367,"address":[4405204],"length":1,"stats":{"Line":0}},{"line":370,"address":[4405234],"length":1,"stats":{"Line":0}},{"line":372,"address":[4405277],"length":1,"stats":{"Line":0}},{"line":376,"address":[4405479],"length":1,"stats":{"Line":0}},{"line":378,"address":[4405648,4405757,4405884,4405970],"length":1,"stats":{"Line":0}},{"line":379,"address":[4406334,4406273],"length":1,"stats":{"Line":0}},{"line":380,"address":[4405980],"length":1,"stats":{"Line":0}},{"line":382,"address":[4406319],"length":1,"stats":{"Line":0}},{"line":385,"address":[4406114],"length":1,"stats":{"Line":0}},{"line":388,"address":[4406050],"length":1,"stats":{"Line":0}},{"line":389,"address":[4406090],"length":1,"stats":{"Line":0}},{"line":392,"address":[4406099],"length":1,"stats":{"Line":0}},{"line":394,"address":[4406106],"length":1,"stats":{"Line":0}},{"line":400,"address":[4405556],"length":1,"stats":{"Line":0}},{"line":404,"address":[4410825],"length":1,"stats":{"Line":0}},{"line":406,"address":[4410942,4410858],"length":1,"stats":{"Line":0}},{"line":408,"address":[4411257,4410949,4411052,4411179],"length":1,"stats":{"Line":0}},{"line":409,"address":[4411259,4411583,4411775],"length":1,"stats":{"Line":0}},{"line":410,"address":[4411807],"length":1,"stats":{"Line":0}},{"line":411,"address":[4411871],"length":1,"stats":{"Line":0}},{"line":415,"address":[4412114,4412053,4411972],"length":1,"stats":{"Line":0}},{"line":416,"address":[4411844],"length":1,"stats":{"Line":0}},{"line":418,"address":[4412002],"length":1,"stats":{"Line":0}},{"line":420,"address":[4412099],"length":1,"stats":{"Line":0}},{"line":425,"address":[4411424],"length":1,"stats":{"Line":0}},{"line":428,"address":[4411353],"length":1,"stats":{"Line":0}},{"line":429,"address":[4411393],"length":1,"stats":{"Line":0}},{"line":433,"address":[4411402],"length":1,"stats":{"Line":0}},{"line":435,"address":[4411408],"length":1,"stats":{"Line":0}},{"line":436,"address":[4411416],"length":1,"stats":{"Line":0}},{"line":442,"address":[4410840],"length":1,"stats":{"Line":0}},{"line":443,"address":[4412251,4412167],"length":1,"stats":{"Line":0}},{"line":446,"address":[4412258,4412566,4412361,4412488],"length":1,"stats":{"Line":0}},{"line":447,"address":[4413238,4412568,4413400],"length":1,"stats":{"Line":0}},{"line":448,"address":[4413429],"length":1,"stats":{"Line":0}},{"line":449,"address":[4413481],"length":1,"stats":{"Line":0}},{"line":453,"address":[4413564,4413619],"length":1,"stats":{"Line":0}},{"line":454,"address":[4413457],"length":1,"stats":{"Line":0}},{"line":456,"address":[4413607],"length":1,"stats":{"Line":0}},{"line":461,"address":[4412718],"length":1,"stats":{"Line":0}},{"line":464,"address":[4412654],"length":1,"stats":{"Line":0}},{"line":465,"address":[4412694],"length":1,"stats":{"Line":0}},{"line":468,"address":[4412703],"length":1,"stats":{"Line":0}},{"line":470,"address":[4412710],"length":1,"stats":{"Line":0}},{"line":480,"address":[4405497],"length":1,"stats":{"Line":0}},{"line":484,"address":[4406409],"length":1,"stats":{"Line":0}},{"line":486,"address":[4406544,4406460],"length":1,"stats":{"Line":0}},{"line":489,"address":[4406781,4406654,4406859,4406551],"length":1,"stats":{"Line":0}},{"line":490,"address":[4407377,4406861,4407185],"length":1,"stats":{"Line":0}},{"line":491,"address":[4407409],"length":1,"stats":{"Line":0}},{"line":492,"address":[4407473],"length":1,"stats":{"Line":0}},{"line":496,"address":[4407656,4407575,4407717],"length":1,"stats":{"Line":0}},{"line":497,"address":[4407446],"length":1,"stats":{"Line":0}},{"line":499,"address":[4407605],"length":1,"stats":{"Line":0}},{"line":501,"address":[4407702],"length":1,"stats":{"Line":0}},{"line":506,"address":[4407026],"length":1,"stats":{"Line":0}},{"line":509,"address":[4406955],"length":1,"stats":{"Line":0}},{"line":510,"address":[4406995],"length":1,"stats":{"Line":0}},{"line":514,"address":[4407004],"length":1,"stats":{"Line":0}},{"line":516,"address":[4407010],"length":1,"stats":{"Line":0}},{"line":517,"address":[4407018],"length":1,"stats":{"Line":0}},{"line":523,"address":[4406442],"length":1,"stats":{"Line":0}},{"line":524,"address":[4409625,4409709],"length":1,"stats":{"Line":0}},{"line":527,"address":[4409819,4409946,4409716,4410024],"length":1,"stats":{"Line":0}},{"line":528,"address":[4410026,4410321,4410513],"length":1,"stats":{"Line":0}},{"line":529,"address":[4410545],"length":1,"stats":{"Line":0}},{"line":530,"address":[4410609],"length":1,"stats":{"Line":0}},{"line":534,"address":[4410772,4410711],"length":1,"stats":{"Line":0}},{"line":535,"address":[4410582],"length":1,"stats":{"Line":0}},{"line":537,"address":[4410757],"length":1,"stats":{"Line":0}},{"line":542,"address":[4410176],"length":1,"stats":{"Line":0}},{"line":545,"address":[4410112],"length":1,"stats":{"Line":0}},{"line":546,"address":[4410152],"length":1,"stats":{"Line":0}},{"line":549,"address":[4410161],"length":1,"stats":{"Line":0}},{"line":551,"address":[4410168],"length":1,"stats":{"Line":0}},{"line":557,"address":[4406424],"length":1,"stats":{"Line":0}},{"line":559,"address":[4407770,4407854],"length":1,"stats":{"Line":0}},{"line":562,"address":[4408091,4408169,4407964,4407861],"length":1,"stats":{"Line":0}},{"line":563,"address":[4408495,4408171,4408687],"length":1,"stats":{"Line":0}},{"line":564,"address":[4408703],"length":1,"stats":{"Line":0}},{"line":565,"address":[4408956],"length":1,"stats":{"Line":0}},{"line":566,"address":[4409038],"length":1,"stats":{"Line":0}},{"line":571,"address":[4409159,4408993],"length":1,"stats":{"Line":0}},{"line":574,"address":[4409334,4409239],"length":1,"stats":{"Line":0}},{"line":575,"address":[4409572,4409430,4409511],"length":1,"stats":{"Line":0}},{"line":576,"address":[4409379],"length":1,"stats":{"Line":0}},{"line":578,"address":[4409460],"length":1,"stats":{"Line":0}},{"line":580,"address":[4409557],"length":1,"stats":{"Line":0}},{"line":587,"address":[4408336],"length":1,"stats":{"Line":0}},{"line":590,"address":[4408265],"length":1,"stats":{"Line":0}},{"line":591,"address":[4408305],"length":1,"stats":{"Line":0}},{"line":595,"address":[4408314],"length":1,"stats":{"Line":0}},{"line":597,"address":[4408320],"length":1,"stats":{"Line":0}},{"line":598,"address":[4408328],"length":1,"stats":{"Line":0}},{"line":605,"address":[4406199],"length":1,"stats":{"Line":0}},{"line":608,"address":[4412815],"length":1,"stats":{"Line":0}},{"line":609,"address":[4412971],"length":1,"stats":{"Line":0}},{"line":612,"address":[4413106],"length":1,"stats":{"Line":0}},{"line":614,"address":[4413113],"length":1,"stats":{"Line":0}},{"line":620,"address":[4413696],"length":1,"stats":{"Line":0}},{"line":621,"address":[4413755,4413875],"length":1,"stats":{"Line":0}},{"line":622,"address":[4413796],"length":1,"stats":{"Line":0}},{"line":623,"address":[4413822],"length":1,"stats":{"Line":0}},{"line":626,"address":[4413783],"length":1,"stats":{"Line":0}},{"line":628,"address":[5615893,5615888],"length":1,"stats":{"Line":0}},{"line":629,"address":[4413988],"length":1,"stats":{"Line":0}},{"line":630,"address":[4414021],"length":1,"stats":{"Line":0}},{"line":633,"address":[4413926],"length":1,"stats":{"Line":0}},{"line":635,"address":[4413952,4414162],"length":1,"stats":{"Line":0}},{"line":636,"address":[4414119],"length":1,"stats":{"Line":0}},{"line":639,"address":[4414409,4414085],"length":1,"stats":{"Line":0}},{"line":640,"address":[4414169],"length":1,"stats":{"Line":0}},{"line":643,"address":[4414329,4414201],"length":1,"stats":{"Line":0}},{"line":644,"address":[4414318],"length":1,"stats":{"Line":0}},{"line":645,"address":[4414430],"length":1,"stats":{"Line":0}},{"line":647,"address":[4414438,4414560],"length":1,"stats":{"Line":0}},{"line":648,"address":[4414510],"length":1,"stats":{"Line":0}},{"line":649,"address":[4414548],"length":1,"stats":{"Line":0}},{"line":650,"address":[4414527],"length":1,"stats":{"Line":0}},{"line":653,"address":[4414350],"length":1,"stats":{"Line":0}},{"line":657,"address":[4414799,4413882],"length":1,"stats":{"Line":0}},{"line":659,"address":[4414662],"length":1,"stats":{"Line":0}},{"line":660,"address":[4414590],"length":1,"stats":{"Line":0}},{"line":661,"address":[4414804,4414613],"length":1,"stats":{"Line":0}},{"line":665,"address":[4414570,4414830],"length":1,"stats":{"Line":0}},{"line":667,"address":[4414884],"length":1,"stats":{"Line":0}},{"line":669,"address":[4414987],"length":1,"stats":{"Line":0}},{"line":671,"address":[4414996],"length":1,"stats":{"Line":0}},{"line":672,"address":[4415019],"length":1,"stats":{"Line":0}},{"line":674,"address":[4415291],"length":1,"stats":{"Line":0}},{"line":675,"address":[4415060],"length":1,"stats":{"Line":0}},{"line":679,"address":[4415526],"length":1,"stats":{"Line":0}},{"line":680,"address":[4415315],"length":1,"stats":{"Line":0}},{"line":682,"address":[4415534,4415648],"length":1,"stats":{"Line":0}},{"line":683,"address":[4415589],"length":1,"stats":{"Line":0}},{"line":686,"address":[4415562],"length":1,"stats":{"Line":0}},{"line":707,"address":[4415664],"length":1,"stats":{"Line":0}},{"line":709,"address":[4415685,4415930],"length":1,"stats":{"Line":0}},{"line":712,"address":[4415935],"length":1,"stats":{"Line":0}},{"line":714,"address":[4415963],"length":1,"stats":{"Line":0}},{"line":715,"address":[4415981],"length":1,"stats":{"Line":0}},{"line":716,"address":[4415999],"length":1,"stats":{"Line":0}},{"line":717,"address":[4416027],"length":1,"stats":{"Line":0}},{"line":718,"address":[4416055],"length":1,"stats":{"Line":0}},{"line":723,"address":[4415698],"length":1,"stats":{"Line":0}},{"line":725,"address":[4415720],"length":1,"stats":{"Line":0}},{"line":726,"address":[4415738],"length":1,"stats":{"Line":0}},{"line":727,"address":[4415756],"length":1,"stats":{"Line":0}},{"line":728,"address":[4415778],"length":1,"stats":{"Line":0}},{"line":729,"address":[4415806],"length":1,"stats":{"Line":0}},{"line":741,"address":[4416192,4422054,4423644],"length":1,"stats":{"Line":0}},{"line":742,"address":[4416231],"length":1,"stats":{"Line":0}},{"line":745,"address":[4416308],"length":1,"stats":{"Line":0}},{"line":746,"address":[4416606,4418683,4419875,4420231,4419086,4416837,4417330,4420087,4419484,4417564,4417776,4422063,4418051,4418497,4418285,4421946,4419298,4417049,4418858,4422025,4419647],"length":1,"stats":{"Line":0}},{"line":748,"address":[4417017,4416903,4416555,4416679,4416370],"length":1,"stats":{"Line":0}},{"line":750,"address":[4417630,4417193,4417744,4417406],"length":1,"stats":{"Line":0}},{"line":752,"address":[4418465,4417914,4418351,4418127],"length":1,"stats":{"Line":0}},{"line":753,"address":[4418549],"length":1,"stats":{"Line":0}},{"line":754,"address":[4419266,4419152,4418928,4418727],"length":1,"stats":{"Line":0}},{"line":755,"address":[4419350],"length":1,"stats":{"Line":0}},{"line":756,"address":[4419528,4420055,4419717,4419941],"length":1,"stats":{"Line":0}},{"line":762,"address":[4423353,4422431,4416448],"length":1,"stats":{"Line":0}},{"line":763,"address":[4422447,4422484],"length":1,"stats":{"Line":0}},{"line":764,"address":[4422550,4422490],"length":1,"stats":{"Line":0}},{"line":766,"address":[4423298,4423074,4423219],"length":1,"stats":{"Line":0}},{"line":768,"address":[4422556,4422525,4422665],"length":1,"stats":{"Line":0}},{"line":769,"address":[4422603],"length":1,"stats":{"Line":0}},{"line":770,"address":[4422674,4422570],"length":1,"stats":{"Line":0}},{"line":772,"address":[4422638],"length":1,"stats":{"Line":0}},{"line":773,"address":[4422688,4422822,4422750],"length":1,"stats":{"Line":0}},{"line":774,"address":[4422760],"length":1,"stats":{"Line":0}},{"line":776,"address":[4422795],"length":1,"stats":{"Line":0}},{"line":778,"address":[4422723],"length":1,"stats":{"Line":0}},{"line":782,"address":[4423332],"length":1,"stats":{"Line":0}},{"line":786,"address":[4422466,4423362],"length":1,"stats":{"Line":0}},{"line":787,"address":[4423414,4423376],"length":1,"stats":{"Line":0}},{"line":789,"address":[4423471],"length":1,"stats":{"Line":0}},{"line":790,"address":[4423486],"length":1,"stats":{"Line":0}},{"line":791,"address":[4423502],"length":1,"stats":{"Line":0}},{"line":792,"address":[4423549],"length":1,"stats":{"Line":0}},{"line":793,"address":[5616084],"length":1,"stats":{"Line":0}},{"line":794,"address":[5616163],"length":1,"stats":{"Line":0}},{"line":804,"address":[4426112,4423680,4427917],"length":1,"stats":{"Line":0}},{"line":815,"address":[4423897,4423807],"length":1,"stats":{"Line":0}},{"line":817,"address":[4424030],"length":1,"stats":{"Line":0}},{"line":818,"address":[4424064],"length":1,"stats":{"Line":0}},{"line":819,"address":[4424075],"length":1,"stats":{"Line":0}},{"line":821,"address":[4424086],"length":1,"stats":{"Line":0}},{"line":824,"address":[4424116],"length":1,"stats":{"Line":0}},{"line":825,"address":[4424177,4424269],"length":1,"stats":{"Line":0}},{"line":827,"address":[4424283],"length":1,"stats":{"Line":0}},{"line":830,"address":[4424337],"length":1,"stats":{"Line":0}},{"line":833,"address":[4424460,4424657,4424344,4424595],"length":1,"stats":{"Line":0}},{"line":834,"address":[4424697,4426262],"length":1,"stats":{"Line":0}},{"line":836,"address":[4426270,4426549],"length":1,"stats":{"Line":0}},{"line":838,"address":[4426285],"length":1,"stats":{"Line":0}},{"line":839,"address":[4426364],"length":1,"stats":{"Line":0}},{"line":841,"address":[4426471],"length":1,"stats":{"Line":0}},{"line":844,"address":[4426600],"length":1,"stats":{"Line":0}},{"line":846,"address":[4426630],"length":1,"stats":{"Line":0}},{"line":849,"address":[4426725],"length":1,"stats":{"Line":0}},{"line":852,"address":[4426826],"length":1,"stats":{"Line":0}},{"line":853,"address":[4426860,4427011],"length":1,"stats":{"Line":0}},{"line":856,"address":[4426843,4426928],"length":1,"stats":{"Line":0}},{"line":859,"address":[4426946],"length":1,"stats":{"Line":0}},{"line":864,"address":[4426968,4427111,4427165],"length":1,"stats":{"Line":0}},{"line":865,"address":[4427143],"length":1,"stats":{"Line":0}},{"line":866,"address":[4427265,4427117,4427171],"length":1,"stats":{"Line":0}},{"line":867,"address":[4427258,4427220],"length":1,"stats":{"Line":0}},{"line":869,"address":[4427193,4427235],"length":1,"stats":{"Line":0}},{"line":873,"address":[4427247],"length":1,"stats":{"Line":0}},{"line":875,"address":[4427275],"length":1,"stats":{"Line":0}},{"line":877,"address":[4427352,4427457,4427299],"length":1,"stats":{"Line":0}},{"line":879,"address":[4427653,4427473],"length":1,"stats":{"Line":0}},{"line":880,"address":[4427661],"length":1,"stats":{"Line":0}},{"line":882,"address":[4427635],"length":1,"stats":{"Line":0}},{"line":889,"address":[4427711],"length":1,"stats":{"Line":0}},{"line":890,"address":[4427719],"length":1,"stats":{"Line":0}},{"line":898,"address":[4427752,4427823],"length":1,"stats":{"Line":0}},{"line":899,"address":[4427781],"length":1,"stats":{"Line":0}},{"line":904,"address":[4427601,4427522,4427438],"length":1,"stats":{"Line":0}},{"line":905,"address":[4427559],"length":1,"stats":{"Line":0}},{"line":907,"address":[4427630,4427499],"length":1,"stats":{"Line":0}},{"line":908,"address":[4427612],"length":1,"stats":{"Line":0}},{"line":911,"address":[4427324],"length":1,"stats":{"Line":0}},{"line":912,"address":[4427837],"length":1,"stats":{"Line":0}},{"line":917,"address":[4424723],"length":1,"stats":{"Line":0}},{"line":918,"address":[4424959,4425020,4424769],"length":1,"stats":{"Line":0}},{"line":920,"address":[5616384,5616941,5616909],"length":1,"stats":{"Line":0}},{"line":921,"address":[5616409],"length":1,"stats":{"Line":0}},{"line":922,"address":[5616542,5616609],"length":1,"stats":{"Line":0}},{"line":923,"address":[5616715,5616922],"length":1,"stats":{"Line":0}},{"line":925,"address":[4425332,4425408],"length":1,"stats":{"Line":0}},{"line":926,"address":[4425647,4425734],"length":1,"stats":{"Line":0}},{"line":927,"address":[4425661],"length":1,"stats":{"Line":0}},{"line":930,"address":[4425782],"length":1,"stats":{"Line":0}},{"line":931,"address":[4425806],"length":1,"stats":{"Line":0}},{"line":933,"address":[4426085,4425892],"length":1,"stats":{"Line":0}},{"line":934,"address":[4426080,4425947],"length":1,"stats":{"Line":0}},{"line":939,"address":[4424732],"length":1,"stats":{"Line":0}},{"line":945,"address":[4427936,4430701,4435592],"length":1,"stats":{"Line":0}},{"line":958,"address":[4428217,4428095],"length":1,"stats":{"Line":0}},{"line":960,"address":[4428350],"length":1,"stats":{"Line":0}},{"line":961,"address":[4428380],"length":1,"stats":{"Line":0}},{"line":962,"address":[4428405],"length":1,"stats":{"Line":0}},{"line":963,"address":[4428084],"length":1,"stats":{"Line":0}},{"line":965,"address":[4428416],"length":1,"stats":{"Line":0}},{"line":968,"address":[4428446],"length":1,"stats":{"Line":0}},{"line":969,"address":[4428599,4428507],"length":1,"stats":{"Line":0}},{"line":972,"address":[4428614],"length":1,"stats":{"Line":0}},{"line":973,"address":[4428621],"length":1,"stats":{"Line":0}},{"line":975,"address":[4428933,4428995,4428798,4428682],"length":1,"stats":{"Line":0}},{"line":976,"address":[4431724,4429035],"length":1,"stats":{"Line":0}},{"line":977,"address":[4431732],"length":1,"stats":{"Line":0}},{"line":980,"address":[4432140,4431767],"length":1,"stats":{"Line":0}},{"line":982,"address":[4431785],"length":1,"stats":{"Line":0}},{"line":983,"address":[4431928],"length":1,"stats":{"Line":0}},{"line":985,"address":[4432053],"length":1,"stats":{"Line":0}},{"line":988,"address":[4432191],"length":1,"stats":{"Line":0}},{"line":990,"address":[4432221],"length":1,"stats":{"Line":0}},{"line":993,"address":[4432385],"length":1,"stats":{"Line":0}},{"line":994,"address":[4432334],"length":1,"stats":{"Line":0}},{"line":998,"address":[4432441],"length":1,"stats":{"Line":0}},{"line":999,"address":[4432645,4432481],"length":1,"stats":{"Line":0}},{"line":1002,"address":[4432564,4432458],"length":1,"stats":{"Line":0}},{"line":1005,"address":[4432590],"length":1,"stats":{"Line":0}},{"line":1008,"address":[4432608,4433221],"length":1,"stats":{"Line":0}},{"line":1010,"address":[4432806,4432757],"length":1,"stats":{"Line":0}},{"line":1011,"address":[4432829,4432909],"length":1,"stats":{"Line":0}},{"line":1014,"address":[4433114,4433174,4432916],"length":1,"stats":{"Line":0}},{"line":1015,"address":[4433190,4433234],"length":1,"stats":{"Line":0}},{"line":1017,"address":[4433634,4433307],"length":1,"stats":{"Line":0}},{"line":1019,"address":[4433325],"length":1,"stats":{"Line":0}},{"line":1020,"address":[4433422],"length":1,"stats":{"Line":0}},{"line":1022,"address":[4433547],"length":1,"stats":{"Line":0}},{"line":1025,"address":[4433694],"length":1,"stats":{"Line":0}},{"line":1027,"address":[4433716],"length":1,"stats":{"Line":0}},{"line":1030,"address":[4434001],"length":1,"stats":{"Line":0}},{"line":1031,"address":[4433839],"length":1,"stats":{"Line":0}},{"line":1035,"address":[4434051],"length":1,"stats":{"Line":0}},{"line":1036,"address":[4434395],"length":1,"stats":{"Line":0}},{"line":1037,"address":[4434083],"length":1,"stats":{"Line":0}},{"line":1038,"address":[4434309],"length":1,"stats":{"Line":0}},{"line":1040,"address":[4434393],"length":1,"stats":{"Line":0}},{"line":1046,"address":[4434121,4434060],"length":1,"stats":{"Line":0}},{"line":1053,"address":[4434258],"length":1,"stats":{"Line":0}},{"line":1058,"address":[4434280,4434833,4434525],"length":1,"stats":{"Line":0}},{"line":1059,"address":[4434565,4434826],"length":1,"stats":{"Line":0}},{"line":1060,"address":[4434531,4434619,4434591],"length":1,"stats":{"Line":0}},{"line":1061,"address":[4434817,4434621,4434670],"length":1,"stats":{"Line":0}},{"line":1062,"address":[4434718,4434810],"length":1,"stats":{"Line":0}},{"line":1063,"address":[4434801,4434733,4434676,4434761],"length":1,"stats":{"Line":0}},{"line":1064,"address":[4434779],"length":1,"stats":{"Line":0}},{"line":1066,"address":[4434739],"length":1,"stats":{"Line":0}},{"line":1069,"address":[4434597],"length":1,"stats":{"Line":0}},{"line":1073,"address":[4434652],"length":1,"stats":{"Line":0}},{"line":1075,"address":[4434846],"length":1,"stats":{"Line":0}},{"line":1078,"address":[4434923,4435085,4434870],"length":1,"stats":{"Line":0}},{"line":1080,"address":[4435198,4435106],"length":1,"stats":{"Line":0}},{"line":1081,"address":[4435206],"length":1,"stats":{"Line":0}},{"line":1083,"address":[4435180],"length":1,"stats":{"Line":0}},{"line":1087,"address":[4435261],"length":1,"stats":{"Line":0}},{"line":1094,"address":[4435274],"length":1,"stats":{"Line":0}},{"line":1102,"address":[4435411,4435307],"length":1,"stats":{"Line":0}},{"line":1103,"address":[4435393],"length":1,"stats":{"Line":0}},{"line":1104,"address":[4435369],"length":1,"stats":{"Line":0}},{"line":1109,"address":[4435063,4435175],"length":1,"stats":{"Line":0}},{"line":1110,"address":[4435133],"length":1,"stats":{"Line":0}},{"line":1113,"address":[4434895,4435443],"length":1,"stats":{"Line":0}},{"line":1114,"address":[4435425],"length":1,"stats":{"Line":0}},{"line":1119,"address":[4432772],"length":1,"stats":{"Line":0}},{"line":1120,"address":[4435475],"length":1,"stats":{"Line":0}},{"line":1125,"address":[4429061],"length":1,"stats":{"Line":0}},{"line":1127,"address":[4429297,4429107,4429358],"length":1,"stats":{"Line":0}},{"line":1129,"address":[4430803,4429460],"length":1,"stats":{"Line":0}},{"line":1130,"address":[5617177],"length":1,"stats":{"Line":0}},{"line":1131,"address":[5617310,5617377],"length":1,"stats":{"Line":0}},{"line":1132,"address":[5617690,5617483],"length":1,"stats":{"Line":0}},{"line":1134,"address":[4430887,4430811],"length":1,"stats":{"Line":0}},{"line":1135,"address":[4431126,4431213],"length":1,"stats":{"Line":0}},{"line":1136,"address":[4431140],"length":1,"stats":{"Line":0}},{"line":1139,"address":[4431261],"length":1,"stats":{"Line":0}},{"line":1140,"address":[4431285],"length":1,"stats":{"Line":0}},{"line":1142,"address":[4431371,4431564],"length":1,"stats":{"Line":0}},{"line":1143,"address":[4431559,4431426],"length":1,"stats":{"Line":0}},{"line":1148,"address":[4429742,4429795,4430677,4429552],"length":1,"stats":{"Line":0}},{"line":1150,"address":[4429952],"length":1,"stats":{"Line":0}},{"line":1151,"address":[4430186,4429967],"length":1,"stats":{"Line":0}},{"line":1153,"address":[4430200],"length":1,"stats":{"Line":0}},{"line":1154,"address":[4430411,4430566],"length":1,"stats":{"Line":0}},{"line":1155,"address":[4430259],"length":1,"stats":{"Line":0}},{"line":1156,"address":[4430426,4430571,4430245],"length":1,"stats":{"Line":0}},{"line":1161,"address":[4429070],"length":1,"stats":{"Line":0}},{"line":1174,"address":[4435616,4441802],"length":1,"stats":{"Line":0}},{"line":1184,"address":[4435760],"length":1,"stats":{"Line":0}},{"line":1185,"address":[4435956],"length":1,"stats":{"Line":0}},{"line":1187,"address":[4435994,4436064,4436082],"length":1,"stats":{"Line":0}},{"line":1188,"address":[4436049],"length":1,"stats":{"Line":0}},{"line":1190,"address":[4436074,4436012,4436084],"length":1,"stats":{"Line":0}},{"line":1192,"address":[4436116],"length":1,"stats":{"Line":0}},{"line":1193,"address":[4436158],"length":1,"stats":{"Line":0}},{"line":1195,"address":[4436180],"length":1,"stats":{"Line":0}},{"line":1196,"address":[4436262],"length":1,"stats":{"Line":0}},{"line":1200,"address":[4435749],"length":1,"stats":{"Line":0}},{"line":1201,"address":[4436209],"length":1,"stats":{"Line":0}},{"line":1204,"address":[4436251,4436300],"length":1,"stats":{"Line":0}},{"line":1205,"address":[4436320],"length":1,"stats":{"Line":0}},{"line":1207,"address":[4436283],"length":1,"stats":{"Line":0}},{"line":1211,"address":[4436375,4436341],"length":1,"stats":{"Line":0}},{"line":1212,"address":[4436377],"length":1,"stats":{"Line":0}},{"line":1214,"address":[4436358],"length":1,"stats":{"Line":0}},{"line":1219,"address":[4436483],"length":1,"stats":{"Line":0}},{"line":1221,"address":[4436397,4436424],"length":1,"stats":{"Line":0}},{"line":1222,"address":[4436444],"length":1,"stats":{"Line":0}},{"line":1224,"address":[4436415],"length":1,"stats":{"Line":0}},{"line":1227,"address":[4436528],"length":1,"stats":{"Line":0}},{"line":1230,"address":[4436722],"length":1,"stats":{"Line":0}},{"line":1231,"address":[4436946],"length":1,"stats":{"Line":0}},{"line":1233,"address":[4436957],"length":1,"stats":{"Line":0}},{"line":1237,"address":[4437267,4436973,4437216],"length":1,"stats":{"Line":0}},{"line":1238,"address":[4437197],"length":1,"stats":{"Line":0}},{"line":1240,"address":[4437208],"length":1,"stats":{"Line":0}},{"line":1241,"address":[4437234],"length":1,"stats":{"Line":0}},{"line":1244,"address":[5617738,5617728],"length":1,"stats":{"Line":0}},{"line":1245,"address":[4437285],"length":1,"stats":{"Line":0}},{"line":1248,"address":[5617786,5617776],"length":1,"stats":{"Line":0}},{"line":1251,"address":[4437541,4437324,4437361],"length":1,"stats":{"Line":0}},{"line":1252,"address":[4437400],"length":1,"stats":{"Line":0}},{"line":1256,"address":[4437573,4438028,4437334],"length":1,"stats":{"Line":0}},{"line":1257,"address":[4441885,4437596],"length":1,"stats":{"Line":0}},{"line":1260,"address":[4437832,4437752],"length":1,"stats":{"Line":0}},{"line":1261,"address":[4438018,4437930],"length":1,"stats":{"Line":0}},{"line":1266,"address":[4437546,4438169,4438089,4438531],"length":1,"stats":{"Line":0}},{"line":1268,"address":[4438191],"length":1,"stats":{"Line":0}},{"line":1269,"address":[4438218],"length":1,"stats":{"Line":0}},{"line":1270,"address":[4438286,4438245],"length":1,"stats":{"Line":0}},{"line":1271,"address":[4438296],"length":1,"stats":{"Line":0}},{"line":1273,"address":[4438273],"length":1,"stats":{"Line":0}},{"line":1275,"address":[4438397],"length":1,"stats":{"Line":0}},{"line":1276,"address":[4438322],"length":1,"stats":{"Line":0}},{"line":1278,"address":[4438362],"length":1,"stats":{"Line":0}},{"line":1279,"address":[4438375],"length":1,"stats":{"Line":0}},{"line":1285,"address":[4438619,4438056],"length":1,"stats":{"Line":0}},{"line":1286,"address":[4438590],"length":1,"stats":{"Line":0}},{"line":1288,"address":[4438544],"length":1,"stats":{"Line":0}},{"line":1292,"address":[4438647,4438671],"length":1,"stats":{"Line":0}},{"line":1293,"address":[4438673],"length":1,"stats":{"Line":0}},{"line":1295,"address":[4438657],"length":1,"stats":{"Line":0}},{"line":1299,"address":[4438695],"length":1,"stats":{"Line":0}},{"line":1302,"address":[4440961,4438792],"length":1,"stats":{"Line":0}},{"line":1305,"address":[4438842],"length":1,"stats":{"Line":0}},{"line":1306,"address":[4438927],"length":1,"stats":{"Line":0}},{"line":1307,"address":[4438969],"length":1,"stats":{"Line":0}},{"line":1308,"address":[4438912],"length":1,"stats":{"Line":0}},{"line":1311,"address":[4438983],"length":1,"stats":{"Line":0}},{"line":1312,"address":[4438994],"length":1,"stats":{"Line":0}},{"line":1313,"address":[4439027],"length":1,"stats":{"Line":0}},{"line":1314,"address":[4439044,4439104],"length":1,"stats":{"Line":0}},{"line":1317,"address":[4439197,4439224],"length":1,"stats":{"Line":0}},{"line":1318,"address":[4439244],"length":1,"stats":{"Line":0}},{"line":1320,"address":[4439215],"length":1,"stats":{"Line":0}},{"line":1324,"address":[4439257],"length":1,"stats":{"Line":0}},{"line":1326,"address":[4439333],"length":1,"stats":{"Line":0}},{"line":1327,"address":[4439498],"length":1,"stats":{"Line":0}},{"line":1330,"address":[4439396],"length":1,"stats":{"Line":0}},{"line":1331,"address":[4439743],"length":1,"stats":{"Line":0}},{"line":1333,"address":[4440025,4439950],"length":1,"stats":{"Line":0}},{"line":1337,"address":[4440030,4440236,4439682],"length":1,"stats":{"Line":0}},{"line":1338,"address":[4440242],"length":1,"stats":{"Line":0}},{"line":1340,"address":[4440228],"length":1,"stats":{"Line":0}},{"line":1344,"address":[4440275,4440251],"length":1,"stats":{"Line":0}},{"line":1345,"address":[4440367,4440277],"length":1,"stats":{"Line":0}},{"line":1347,"address":[4440261],"length":1,"stats":{"Line":0}},{"line":1350,"address":[4440938,4440339],"length":1,"stats":{"Line":0}},{"line":1351,"address":[4440467,4440562],"length":1,"stats":{"Line":0}},{"line":1354,"address":[4440827],"length":1,"stats":{"Line":0}},{"line":1356,"address":[4440503],"length":1,"stats":{"Line":0}},{"line":1357,"address":[4440606],"length":1,"stats":{"Line":0}},{"line":1359,"address":[4440739],"length":1,"stats":{"Line":0}},{"line":1361,"address":[4440912],"length":1,"stats":{"Line":0}},{"line":1364,"address":[4440398],"length":1,"stats":{"Line":0}},{"line":1367,"address":[4441017,4440943],"length":1,"stats":{"Line":0}},{"line":1368,"address":[4440974],"length":1,"stats":{"Line":0}},{"line":1372,"address":[4438890,4441742],"length":1,"stats":{"Line":0}},{"line":1373,"address":[4441306,4441179,4441109],"length":1,"stats":{"Line":0}},{"line":1374,"address":[4441314,4441627],"length":1,"stats":{"Line":0}},{"line":1377,"address":[4441466],"length":1,"stats":{"Line":0}},{"line":1378,"address":[4441522],"length":1,"stats":{"Line":0}},{"line":1379,"address":[4441594,4441570],"length":1,"stats":{"Line":0}},{"line":1380,"address":[4441596],"length":1,"stats":{"Line":0}},{"line":1382,"address":[4441580],"length":1,"stats":{"Line":0}},{"line":1387,"address":[4441755,4441019],"length":1,"stats":{"Line":0}},{"line":1388,"address":[4441757],"length":1,"stats":{"Line":0}},{"line":1390,"address":[4441747],"length":1,"stats":{"Line":0}},{"line":1397,"address":[4443745,4441904,4443777],"length":1,"stats":{"Line":0}},{"line":1398,"address":[4441997],"length":1,"stats":{"Line":0}},{"line":1399,"address":[4442136],"length":1,"stats":{"Line":0}},{"line":1400,"address":[4442417],"length":1,"stats":{"Line":0}},{"line":1402,"address":[4442584,4442670],"length":1,"stats":{"Line":0}},{"line":1404,"address":[4442594,4442698],"length":1,"stats":{"Line":0}},{"line":1406,"address":[4442706],"length":1,"stats":{"Line":0}},{"line":1407,"address":[4442753,4442863],"length":1,"stats":{"Line":0}},{"line":1410,"address":[4443317,4443092],"length":1,"stats":{"Line":0}},{"line":1411,"address":[4443323],"length":1,"stats":{"Line":0}},{"line":1413,"address":[4443309],"length":1,"stats":{"Line":0}},{"line":1417,"address":[4443332,4443356],"length":1,"stats":{"Line":0}},{"line":1418,"address":[4443358],"length":1,"stats":{"Line":0}},{"line":1420,"address":[4443342],"length":1,"stats":{"Line":0}},{"line":1424,"address":[4443377],"length":1,"stats":{"Line":0}},{"line":1427,"address":[4443506],"length":1,"stats":{"Line":0}},{"line":1430,"address":[4443740,4443589,4443620,4443719],"length":1,"stats":{"Line":0}},{"line":1431,"address":[4443730],"length":1,"stats":{"Line":0}},{"line":1442,"address":[4443792,4445515],"length":1,"stats":{"Line":0}},{"line":1451,"address":[4443901],"length":1,"stats":{"Line":0}},{"line":1452,"address":[4443992,4443918],"length":1,"stats":{"Line":0}},{"line":1453,"address":[4444081],"length":1,"stats":{"Line":0}},{"line":1454,"address":[4444200],"length":1,"stats":{"Line":0}},{"line":1457,"address":[4445489],"length":1,"stats":{"Line":0}},{"line":1460,"address":[4444225],"length":1,"stats":{"Line":0}},{"line":1463,"address":[4444266],"length":1,"stats":{"Line":0}},{"line":1468,"address":[4444283],"length":1,"stats":{"Line":0}},{"line":1469,"address":[4444386,4444585],"length":1,"stats":{"Line":0}},{"line":1470,"address":[4444611,4444551,4444748],"length":1,"stats":{"Line":0}},{"line":1473,"address":[4444794,4444742],"length":1,"stats":{"Line":0}},{"line":1474,"address":[4444785],"length":1,"stats":{"Line":0}},{"line":1475,"address":[4444773,4444808],"length":1,"stats":{"Line":0}},{"line":1476,"address":[4444816],"length":1,"stats":{"Line":0}},{"line":1478,"address":[4444796],"length":1,"stats":{"Line":0}},{"line":1482,"address":[4444825],"length":1,"stats":{"Line":0}},{"line":1483,"address":[4444846],"length":1,"stats":{"Line":0}},{"line":1484,"address":[4444891],"length":1,"stats":{"Line":0}},{"line":1485,"address":[4444976,4444904],"length":1,"stats":{"Line":0}},{"line":1486,"address":[4445396],"length":1,"stats":{"Line":0}},{"line":1487,"address":[4445344],"length":1,"stats":{"Line":0}},{"line":1490,"address":[4445162],"length":1,"stats":{"Line":0}},{"line":1491,"address":[4445110],"length":1,"stats":{"Line":0}},{"line":1496,"address":[4445225],"length":1,"stats":{"Line":0}},{"line":1497,"address":[5618120,5618236],"length":1,"stats":{"Line":0}},{"line":1499,"address":[5618128],"length":1,"stats":{"Line":0}},{"line":1501,"address":[5618174],"length":1,"stats":{"Line":0}},{"line":1502,"address":[5618183],"length":1,"stats":{"Line":0}},{"line":1503,"address":[5618223],"length":1,"stats":{"Line":0}},{"line":1509,"address":[4445494,4444354,4445481],"length":1,"stats":{"Line":0}},{"line":1512,"address":[4444306],"length":1,"stats":{"Line":0}},{"line":1515,"address":[4445552,4446937],"length":1,"stats":{"Line":0}},{"line":1516,"address":[4445600,4445633],"length":1,"stats":{"Line":0}},{"line":1517,"address":[4445660],"length":1,"stats":{"Line":0}},{"line":1518,"address":[4445680,4446969],"length":1,"stats":{"Line":0}},{"line":1519,"address":[4446964,4446974,4445757],"length":1,"stats":{"Line":0}},{"line":1522,"address":[4445787,4445709],"length":1,"stats":{"Line":0}},{"line":1525,"address":[4446007,4445870],"length":1,"stats":{"Line":0}},{"line":1526,"address":[4446023],"length":1,"stats":{"Line":0}},{"line":1528,"address":[4445990],"length":1,"stats":{"Line":0}},{"line":1531,"address":[4446051],"length":1,"stats":{"Line":0}},{"line":1532,"address":[4446093],"length":1,"stats":{"Line":0}},{"line":1536,"address":[4446215],"length":1,"stats":{"Line":0}},{"line":1537,"address":[4446281],"length":1,"stats":{"Line":0}},{"line":1539,"address":[4446459,4446438],"length":1,"stats":{"Line":0}},{"line":1540,"address":[4446445],"length":1,"stats":{"Line":0}},{"line":1545,"address":[4446551],"length":1,"stats":{"Line":0}},{"line":1547,"address":[4446581],"length":1,"stats":{"Line":0}},{"line":1549,"address":[4446586],"length":1,"stats":{"Line":0}},{"line":1554,"address":[4446616,4446826,4446773],"length":1,"stats":{"Line":0}},{"line":1555,"address":[4446906],"length":1,"stats":{"Line":0}},{"line":1563,"address":[4449342,4446992],"length":1,"stats":{"Line":0}},{"line":1564,"address":[4447063],"length":1,"stats":{"Line":0}},{"line":1565,"address":[4447088,4447166],"length":1,"stats":{"Line":0}},{"line":1568,"address":[4447527,4447292],"length":1,"stats":{"Line":0}},{"line":1569,"address":[4447510],"length":1,"stats":{"Line":0}},{"line":1571,"address":[4447460],"length":1,"stats":{"Line":0}},{"line":1574,"address":[4447535],"length":1,"stats":{"Line":0}},{"line":1575,"address":[4447562],"length":1,"stats":{"Line":0}},{"line":1577,"address":[4449316,4447588],"length":1,"stats":{"Line":0}},{"line":1578,"address":[4447700,4449321,4449308],"length":1,"stats":{"Line":0}},{"line":1581,"address":[4447629],"length":1,"stats":{"Line":0}},{"line":1582,"address":[4447674,4447733],"length":1,"stats":{"Line":0}},{"line":1583,"address":[4447817],"length":1,"stats":{"Line":0}},{"line":1584,"address":[4447836],"length":1,"stats":{"Line":0}},{"line":1585,"address":[4447955],"length":1,"stats":{"Line":0}},{"line":1586,"address":[4448074],"length":1,"stats":{"Line":0}},{"line":1588,"address":[4448188],"length":1,"stats":{"Line":0}},{"line":1591,"address":[4449277],"length":1,"stats":{"Line":0}},{"line":1594,"address":[4448216],"length":1,"stats":{"Line":0}},{"line":1597,"address":[4448260],"length":1,"stats":{"Line":0}},{"line":1602,"address":[4448280],"length":1,"stats":{"Line":0}},{"line":1603,"address":[4448381,4448584],"length":1,"stats":{"Line":0}},{"line":1604,"address":[4448747,4448610,4448545],"length":1,"stats":{"Line":0}},{"line":1607,"address":[4448741,4448793],"length":1,"stats":{"Line":0}},{"line":1608,"address":[4448784],"length":1,"stats":{"Line":0}},{"line":1609,"address":[4448772,4448810],"length":1,"stats":{"Line":0}},{"line":1610,"address":[4448818],"length":1,"stats":{"Line":0}},{"line":1612,"address":[4448801],"length":1,"stats":{"Line":0}},{"line":1616,"address":[4449174],"length":1,"stats":{"Line":0}},{"line":1617,"address":[4448841],"length":1,"stats":{"Line":0}},{"line":1618,"address":[4449102],"length":1,"stats":{"Line":0}},{"line":1620,"address":[4449045,4449009],"length":1,"stats":{"Line":0}},{"line":1622,"address":[4449023],"length":1,"stats":{"Line":0}},{"line":1627,"address":[4449282,4449269,4448346],"length":1,"stats":{"Line":0}},{"line":1630,"address":[4448303],"length":1,"stats":{"Line":0}},{"line":1636,"address":[4449376],"length":1,"stats":{"Line":0}},{"line":1637,"address":[4449418],"length":1,"stats":{"Line":0}},{"line":1638,"address":[4449469],"length":1,"stats":{"Line":0}},{"line":1642,"address":[4449488],"length":1,"stats":{"Line":0}},{"line":1643,"address":[4449561],"length":1,"stats":{"Line":0}},{"line":1650,"address":[4449680,4449969],"length":1,"stats":{"Line":0}},{"line":1651,"address":[4449710],"length":1,"stats":{"Line":0}},{"line":1652,"address":[4449721],"length":1,"stats":{"Line":0}},{"line":1654,"address":[4449794,4449745],"length":1,"stats":{"Line":0}},{"line":1655,"address":[4449812],"length":1,"stats":{"Line":0}},{"line":1659,"address":[4449898],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":664},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","main_page","mod.rs"],"content":"pub mod dashboard;\npub mod gantt;\npub mod anthentification;","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","menu","filtering.rs"],"content":"use crate::models::utils::utils::compare_string_with_number;\n\nuse crate::models::data_structure::{\n    application_context::ApplicationContext, cluster::Cluster, filters::JobFilters, job::JobState,\n};\nuse eframe::egui::{self, Grid};\nuse egui::ScrollArea;\nuse strum::IntoEnumIterator;\n\n/* `Filtering` manages the job filtering UI and functionality.\n * It provides a modal window where users can select various criteria\n * to filter jobs, including by owner, state, and resource (clusters/hosts).\n *\n * The component maintains temporary filter state until the user applies\n * the selected filters, at which point they are transferred to the main application.\n */\npub struct Filtering {\n    open: bool,\n    temp_filters: JobFilters,\n}\n\nimpl Default for Filtering {\n    fn default() -\u003e Self {\n        Filtering {\n            open: false,\n            temp_filters: JobFilters::default(),\n        }\n    }\n}\n\nimpl Filtering {\n    pub fn open(\u0026mut self) {\n        self.open = true;\n    }\n\n    /* Renders the filtering window and handles user interaction\n     *\n     * This window provides multiple filter categories (owners, states, clusters, hosts)\n     * that users can select to narrow down the jobs displayed in the application.\n     * Changes are only applied when the user clicks the Apply button.\n     */\n    pub fn ui(\u0026mut self, ui: \u0026mut egui::Ui, app: \u0026mut ApplicationContext) {\n        let mut open = self.open;\n        // If the window is open, render the filters\n        if self.open {\n            egui::Window::new(t!(\"app.filter.page_title\"))\n                .collapsible(true)\n                .movable(true)\n                .open(\u0026mut open)\n                .default_size([600.0, 500.0])\n                .show(ui.ctx(), |ui| {\n                    ui.heading(t!(\"app.filter.title\"));\n\n                    ui.separator(); // Add a separator\n\n                    egui::CollapsingHeader::new(t!(\"app.filter.owner\"))\n                        .default_open(false)\n                        .show(ui, |ui| {\n                            self.render_owners_selector(ui, app);\n                        });\n                    ui.add_space(10.0);\n\n                    egui::CollapsingHeader::new(t!(\"app.filter.state\"))\n                        .default_open(false)\n                        .show(ui, |ui| {\n                            self.render_states_selector(ui);\n                        });\n                    ui.add_space(10.0);\n\n                    ui.menu_button(\"Clusters\", |ui| {\n                        self.render_cluster_menu(ui, app);\n                    });\n\n                    ui.add_space(20.0);\n\n                    ui.horizontal(|ui| {\n                        if ui.button(t!(\"app.filters.apply\")).clicked() {\n                            app.filters = JobFilters::copy(\u0026self.temp_filters); // add the temporary filters to the app filters\n                            app.filter_jobs(); // Filter the jobs\n                            self.open = false; // Close the window\n                        }\n                        if ui.button(t!(\"app.filters.reset\")).clicked() {\n                            self.reset_filters(); // Reset the filters\n                            app.filters = JobFilters::default();\n                        }\n                    });\n                });\n        }\n        self.open = open;\n    }\n\n    pub fn reset_filters(\u0026mut self) {\n        self.temp_filters = JobFilters::default();\n    }\n\n    /* Renders the job owner selection grid\n     *\n     * This selector displays a grid of checkboxes for all unique job owners,\n     * allowing the user to filter jobs by one or more owners.\n     */\n    fn render_owners_selector(\u0026mut self, ui: \u0026mut egui::Ui, app: \u0026mut ApplicationContext) {\n        let unique_owners = app.get_unique_owners();\n        let mut selected_owners = self.temp_filters.owners.clone().unwrap_or_default();\n\n        Grid::new(\"owners_grid\")\n            .num_columns(2)\n            .spacing([10.0, 5.0])\n            .show(ui, |ui| {\n                for (i, owner) in unique_owners.iter().enumerate() {\n                    let mut is_selected = selected_owners.contains(owner);\n                    if ui.checkbox(\u0026mut is_selected, owner).changed() {\n                        if is_selected {\n                            selected_owners.push(owner.clone());\n                        } else {\n                            selected_owners.retain(|o| o != owner);\n                        }\n                        self.temp_filters.set_owners(if selected_owners.is_empty() {\n                            None\n                        } else {\n                            Some(selected_owners.clone())\n                        });\n                    }\n                    if i % 2 == 1 {\n                        ui.end_row();\n                    }\n                }\n            });\n    }\n\n    /*\n     * Render the states selector\n     * This selector is used to select the states of the jobs on which the jobs will be filtered\n     */\n    fn render_states_selector(\u0026mut self, ui: \u0026mut egui::Ui) {\n        let mut selected_states = self.temp_filters.states.clone().unwrap_or_default();\n\n        Grid::new(\"states_grid\")\n            .num_columns(2)\n            .spacing([10.0, 5.0])\n            .show(ui, |ui| {\n                for (i, state) in JobState::iter().enumerate() {\n                    let mut is_selected = selected_states.contains(\u0026state);\n                    if ui.checkbox(\u0026mut is_selected, state.get_label()).changed() {\n                        if is_selected {\n                            selected_states.push(state);\n                        } else {\n                            selected_states.retain(|s| s != \u0026state);\n                        }\n                        self.temp_filters.set_states(if selected_states.is_empty() {\n                            None\n                        } else {\n                            Some(selected_states.clone())\n                        });\n                    }\n                    if i % 2 == 1 {\n                        ui.end_row();\n                    }\n                }\n            });\n    }\n\n    /*\n     * Render the cluster menu\n     * This menu is used to select the clusters on which the jobs will be filtered\n     */\n    fn render_cluster_menu(\u0026mut self, ui: \u0026mut egui::Ui, app: \u0026mut ApplicationContext) {\n        ui.set_max_width(124.0);\n\n        for cluster in \u0026app.all_clusters {\n            ui.horizontal(|ui| {\n                let mut is_selected = self\n                    .temp_filters\n                    .clusters\n                    .as_ref()\n                    .map_or(false, |clusters| {\n                        clusters.iter().any(|c| c.name == cluster.name)\n                    });\n\n                if ui.checkbox(\u0026mut is_selected, \"\").changed() {\n                    if is_selected {\n                        if let Some(clusters) = \u0026mut self.temp_filters.clusters {\n                            clusters.push(cluster.clone());\n                        } else {\n                            self.temp_filters.clusters = Some(vec![cluster.clone()]);\n                        }\n                    } else {\n                        if let Some(clusters) = \u0026mut self.temp_filters.clusters {\n                            clusters.retain(|c| c.name != cluster.name);\n                        }\n                    }\n                }\n\n                ui.label(\u0026cluster.name);\n\n                ui.with_layout(egui::Layout::right_to_left(egui::Align::Center), |ui| {\n                    ui.menu_button(\" \", |ui| {\n                        self.render_host_menu(ui, cluster);\n                    });\n                });\n            });\n        }\n    }\n\n    /*\n     * Render the host menu\n     * This menu is used to select the hosts of a cluster on which the jobs will be filtered\n     */\n    fn render_host_menu(\u0026mut self, ui: \u0026mut egui::Ui, cluster: \u0026Cluster) {\n        ui.set_max_width(300.0);\n\n        let mut hosts = cluster.hosts.clone();\n        hosts.sort_by(|a, b| compare_string_with_number(\u0026a.name, \u0026b.name));\n\n        let mut selected_cluster = self\n            .temp_filters\n            .clusters\n            .as_mut()\n            .and_then(|clusters| clusters.iter_mut().find(|c| c.name == cluster.name));\n\n        if let Some(cluster) = selected_cluster.as_mut() {\n            if ui.button(\"Deselect All\").clicked() {\n                cluster.hosts.clear();\n            }\n        }\n\n        ScrollArea::vertical()\n            .min_scrolled_height(50.0)\n            .max_height(250.0)\n            .show(ui, |ui| {\n                for host in hosts {\n                    let mut is_selected = selected_cluster\n                        .as_ref()\n                        .map_or(false, |c| c.hosts.iter().any(|h| h.name == host.name));\n\n                    if ui.checkbox(\u0026mut is_selected, \u0026host.name).changed() {\n                        if let Some(cluster) = selected_cluster.as_mut() {\n                            if is_selected {\n                                cluster.hosts.push(host.clone());\n                            } else {\n                                cluster.hosts.retain(|h| h.name != host.name);\n                            }\n                        }\n                    }\n                }\n            });\n    }\n}\n","traces":[{"line":23,"address":[5031632],"length":1,"stats":{"Line":0}},{"line":26,"address":[5031645],"length":1,"stats":{"Line":0}},{"line":32,"address":[5031696],"length":1,"stats":{"Line":0}},{"line":33,"address":[5031701],"length":1,"stats":{"Line":0}},{"line":42,"address":[5031712,5032692,5032647],"length":1,"stats":{"Line":0}},{"line":43,"address":[5031758],"length":1,"stats":{"Line":0}},{"line":45,"address":[5032601,5031783],"length":1,"stats":{"Line":0}},{"line":46,"address":[5032486,5032200,5032360,5031812,5031979],"length":1,"stats":{"Line":0}},{"line":50,"address":[5032412,5032338],"length":1,"stats":{"Line":0}},{"line":51,"address":[5032420],"length":1,"stats":{"Line":0}},{"line":52,"address":[4735297,4733198,4733890],"length":1,"stats":{"Line":0}},{"line":54,"address":[4733774],"length":1,"stats":{"Line":0}},{"line":56,"address":[4733982,4734313,4733793,4734203],"length":1,"stats":{"Line":0}},{"line":58,"address":[4735344,4734287],"length":1,"stats":{"Line":0}},{"line":59,"address":[4735376],"length":1,"stats":{"Line":0}},{"line":61,"address":[4734426],"length":1,"stats":{"Line":0}},{"line":63,"address":[4734944,4734839,4734618,4734431],"length":1,"stats":{"Line":0}},{"line":65,"address":[4734923,4735408],"length":1,"stats":{"Line":0}},{"line":66,"address":[4735422],"length":1,"stats":{"Line":0}},{"line":68,"address":[4735046],"length":1,"stats":{"Line":0}},{"line":70,"address":[4735440,4735064],"length":1,"stats":{"Line":0}},{"line":71,"address":[4735472],"length":1,"stats":{"Line":0}},{"line":74,"address":[4735118],"length":1,"stats":{"Line":0}},{"line":76,"address":[4737409,4735136,4735504],"length":1,"stats":{"Line":0}},{"line":77,"address":[4736085,4735534,4737467,4736459,4736570,4736359],"length":1,"stats":{"Line":0}},{"line":78,"address":[4736429,4736478],"length":1,"stats":{"Line":0}},{"line":79,"address":[4736551],"length":1,"stats":{"Line":0}},{"line":80,"address":[4736561],"length":1,"stats":{"Line":0}},{"line":82,"address":[4737315,4737022,4736259,4737210,4737431,4736575,4737404],"length":1,"stats":{"Line":0}},{"line":83,"address":[4737280],"length":1,"stats":{"Line":0}},{"line":84,"address":[4737334,4737298],"length":1,"stats":{"Line":0}},{"line":89,"address":[5031794],"length":1,"stats":{"Line":0}},{"line":92,"address":[5032720,5032823],"length":1,"stats":{"Line":0}},{"line":93,"address":[5032741,5032856],"length":1,"stats":{"Line":0}},{"line":101,"address":[5032880,5033316],"length":1,"stats":{"Line":0}},{"line":102,"address":[5032939],"length":1,"stats":{"Line":0}},{"line":103,"address":[5032949,5033016],"length":1,"stats":{"Line":0}},{"line":105,"address":[5033258,5033023,5033113,5033142],"length":1,"stats":{"Line":0}},{"line":107,"address":[5033120],"length":1,"stats":{"Line":0}},{"line":108,"address":[4737504],"length":1,"stats":{"Line":0}},{"line":109,"address":[4737529,4737679],"length":1,"stats":{"Line":0}},{"line":110,"address":[4737716],"length":1,"stats":{"Line":0}},{"line":111,"address":[4737759,4737819],"length":1,"stats":{"Line":0}},{"line":112,"address":[4737855],"length":1,"stats":{"Line":0}},{"line":113,"address":[4737920],"length":1,"stats":{"Line":0}},{"line":115,"address":[4738158,4737896,4738144],"length":1,"stats":{"Line":0}},{"line":117,"address":[4737982,4738083,4738108],"length":1,"stats":{"Line":0}},{"line":118,"address":[4738085],"length":1,"stats":{"Line":0}},{"line":120,"address":[4738010],"length":1,"stats":{"Line":0}},{"line":123,"address":[4737872],"length":1,"stats":{"Line":0}},{"line":124,"address":[4738131],"length":1,"stats":{"Line":0}},{"line":134,"address":[5033344,5033653],"length":1,"stats":{"Line":0}},{"line":135,"address":[5033382],"length":1,"stats":{"Line":0}},{"line":137,"address":[5033534,5033416,5033505],"length":1,"stats":{"Line":0}},{"line":139,"address":[5033512],"length":1,"stats":{"Line":0}},{"line":140,"address":[4738192],"length":1,"stats":{"Line":0}},{"line":141,"address":[4738222,4738340],"length":1,"stats":{"Line":0}},{"line":142,"address":[4738372],"length":1,"stats":{"Line":0}},{"line":143,"address":[4738496,4738410],"length":1,"stats":{"Line":0}},{"line":144,"address":[4738532],"length":1,"stats":{"Line":0}},{"line":145,"address":[4738588],"length":1,"stats":{"Line":0}},{"line":147,"address":[4738568,4738781,4738768],"length":1,"stats":{"Line":0}},{"line":149,"address":[4738733,4738613,4738709],"length":1,"stats":{"Line":0}},{"line":150,"address":[4738711],"length":1,"stats":{"Line":0}},{"line":152,"address":[4738636],"length":1,"stats":{"Line":0}},{"line":155,"address":[4738549],"length":1,"stats":{"Line":0}},{"line":156,"address":[4738756],"length":1,"stats":{"Line":0}},{"line":166,"address":[5033680],"length":1,"stats":{"Line":0}},{"line":167,"address":[5033739],"length":1,"stats":{"Line":0}},{"line":169,"address":[5033839,5033758],"length":1,"stats":{"Line":0}},{"line":170,"address":[5033852],"length":1,"stats":{"Line":0}},{"line":171,"address":[4738846,4738868],"length":1,"stats":{"Line":0}},{"line":175,"address":[4739888,4738863],"length":1,"stats":{"Line":0}},{"line":176,"address":[4739968,4739993,4739913],"length":1,"stats":{"Line":0}},{"line":179,"address":[4738886,4738940],"length":1,"stats":{"Line":0}},{"line":180,"address":[4738970],"length":1,"stats":{"Line":0}},{"line":181,"address":[4739855,4739339,4739422],"length":1,"stats":{"Line":0}},{"line":182,"address":[4739430],"length":1,"stats":{"Line":0}},{"line":184,"address":[4739488,4739882],"length":1,"stats":{"Line":0}},{"line":187,"address":[4739286,4739394],"length":1,"stats":{"Line":0}},{"line":188,"address":[4740041,4739402,4740016],"length":1,"stats":{"Line":0}},{"line":193,"address":[4738991],"length":1,"stats":{"Line":0}},{"line":195,"address":[4740064,4739033,4739145],"length":1,"stats":{"Line":0}},{"line":196,"address":[4740102,4740160],"length":1,"stats":{"Line":0}},{"line":197,"address":[4740192],"length":1,"stats":{"Line":0}},{"line":208,"address":[5033888,5034500,5034673],"length":1,"stats":{"Line":0}},{"line":209,"address":[5033947],"length":1,"stats":{"Line":0}},{"line":211,"address":[5033977],"length":1,"stats":{"Line":0}},{"line":212,"address":[4740261,4740224],"length":1,"stats":{"Line":0}},{"line":214,"address":[5034096],"length":1,"stats":{"Line":0}},{"line":218,"address":[4740417,4740400,4740320,4740345],"length":1,"stats":{"Line":0}},{"line":220,"address":[5034155],"length":1,"stats":{"Line":0}},{"line":221,"address":[5034235,5034381],"length":1,"stats":{"Line":0}},{"line":222,"address":[5034481],"length":1,"stats":{"Line":0}},{"line":226,"address":[5034533,5034650,5034274],"length":1,"stats":{"Line":0}},{"line":229,"address":[4741212,4740448],"length":1,"stats":{"Line":0}},{"line":230,"address":[4740473,4740678,4740620],"length":1,"stats":{"Line":0}},{"line":231,"address":[4740790,4740861],"length":1,"stats":{"Line":0}},{"line":233,"address":[4741353,4741328,4741262,4741248],"length":1,"stats":{"Line":0}},{"line":235,"address":[4740914,4740952],"length":1,"stats":{"Line":0}},{"line":236,"address":[4741019],"length":1,"stats":{"Line":0}},{"line":237,"address":[4741098],"length":1,"stats":{"Line":0}},{"line":238,"address":[4741140,4741185],"length":1,"stats":{"Line":0}},{"line":240,"address":[4741175,4741376,4741113,4741401],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":104},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","menu","menu.rs"],"content":"use crate::{\n    models::data_structure::{\n        application_context::ApplicationContext, application_options::ApplicationOptions,\n    },\n    views::view::View,\n};\nuse eframe::egui;\n\nuse super::options::Options;\n\npub struct Menu {\n    options_pane: Options,\n}\n\nimpl Default for Menu {\n    fn default() -\u003e Self {\n        let application_options = ApplicationOptions::default();\n\n        // Load saved options from file if it exists\n        let options_pane = if std::path::Path::new(\"options.json\").exists() {\n            Options::load_from_file(\"options.json\")\n        } else {\n            Options::new(application_options.clone())\n        };\n\n        Menu { options_pane }\n    }\n}\n\nimpl View for Menu {\n    fn render(\u0026mut self, ui: \u0026mut egui::Ui, app: \u0026mut ApplicationContext) {\n        self.options_pane\n            .apply_options(ui.ctx(), \u0026mut app.font_size);\n\n        ui.horizontal(|ui| {\n            // Menu File\n            ui.menu_button(t!(\"app.menu.file\"), |ui| {\n                ui.set_max_width(200.0);\n                ui.vertical(|ui| {\n                    if app.user_connected.is_some() {\n                        ui.label(t!(\n                            \"app.menu.connected_as\",\n                            user = app.user_connected.as_ref().unwrap()\n                        ));\n                        ui.separator();\n                        if ui.button(t!(\"app.menu.logout\")).clicked() {\n                            app.logout();\n                        }\n                    } else {\n                        if ui.button(t!(\"app.menu.login\")).clicked() {\n                            app.view_type = crate::views::view::ViewType::Authentification;\n                        }\n                    }\n\n                    if ui.button(t!(\"app.menu.quit\")).clicked() {\n                        std::process::exit(0);\n                    }\n                });\n            });\n\n            // Menu Options\n            if ui.button(t!(\"app.menu.options\")).clicked() {\n                self.options_pane.open();\n            }\n\n            // Show External Window\n            self.options_pane.ui(ui, \u0026mut app.font_size);\n        });\n    }\n}\n","traces":[{"line":16,"address":[5439392],"length":1,"stats":{"Line":0}},{"line":17,"address":[5439408],"length":1,"stats":{"Line":0}},{"line":20,"address":[5439434],"length":1,"stats":{"Line":0}},{"line":21,"address":[5439531],"length":1,"stats":{"Line":0}},{"line":23,"address":[5439467],"length":1,"stats":{"Line":0}},{"line":31,"address":[5439616],"length":1,"stats":{"Line":0}},{"line":32,"address":[5439700],"length":1,"stats":{"Line":0}},{"line":33,"address":[5439675],"length":1,"stats":{"Line":0}},{"line":35,"address":[5439720],"length":1,"stats":{"Line":0}},{"line":37,"address":[5596405,5596626,5597760,5596222],"length":1,"stats":{"Line":0}},{"line":38,"address":[5597796],"length":1,"stats":{"Line":0}},{"line":39,"address":[5599314,5597856,5599359,5597815],"length":1,"stats":{"Line":0}},{"line":40,"address":[5597887],"length":1,"stats":{"Line":0}},{"line":41,"address":[5602107,5599372,5598277,5600259,5598380,5598085],"length":1,"stats":{"Line":0}},{"line":42,"address":[5598058],"length":1,"stats":{"Line":0}},{"line":43,"address":[5598198,5598116],"length":1,"stats":{"Line":0}},{"line":45,"address":[5600380],"length":1,"stats":{"Line":0}},{"line":46,"address":[5600399,5601280,5601012,5600562,5602071],"length":1,"stats":{"Line":0}},{"line":47,"address":[5601262],"length":1,"stats":{"Line":0}},{"line":50,"address":[5598911,5599323,5598455,5597952,5599194,5599290],"length":1,"stats":{"Line":0}},{"line":51,"address":[5599261],"length":1,"stats":{"Line":0}},{"line":55,"address":[5599094,5601916,5602016,5601749,5601299],"length":1,"stats":{"Line":0}},{"line":56,"address":[5602005],"length":1,"stats":{"Line":0}},{"line":62,"address":[5596892,5597339,5596773,5597554,5597661,5597633],"length":1,"stats":{"Line":0}},{"line":63,"address":[5597621],"length":1,"stats":{"Line":0}},{"line":67,"address":[5597524],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":26},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","menu","mod.rs"],"content":"// Modules : menu\n\npub mod filtering;\npub mod menu;\npub mod options;\npub mod tools;","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","menu","options.rs"],"content":"use crate::models::data_structure::application_options::{\n    ApplicationOptions, LanguageOption, ThemeOption,\n};\nuse eframe::egui::{self};\nuse std::time::{Duration, Instant};\n\nuse eframe::egui::Grid;\n\npub struct Options {\n    open: bool,\n    application_options: ApplicationOptions,\n    save_status: Option\u003c(String, Instant)\u003e,\n}\n\nimpl Options {\n    pub fn open(\u0026mut self) {\n        self.open = true;\n    }\n\n    pub fn new(application_options: ApplicationOptions) -\u003e Self {\n        Options {\n            application_options,\n            save_status: None,\n            open: false,\n        }\n    }\n\n    // Save the current options to a file for persistence\n    pub fn save_to_file(\u0026mut self, file_path: \u0026str) {\n        match serde_json::to_string(\u0026self.application_options)\n            .and_then(|json| std::fs::write(file_path, json).map_err(serde_json::Error::io))\n        {\n            Ok(_) =\u003e {\n                self.save_status =\n                    Some((t!(\"app.options.save.success\").to_string(), Instant::now()));\n            }\n            Err(_) =\u003e {\n                self.save_status = Some((t!(\"app.options.save.error\").to_string(), Instant::now()));\n            }\n        }\n    }\n\n    // Load the options from a file, or fallback to default if file read fails\n    pub fn load_from_file(file_path: \u0026str) -\u003e Self {\n        let application_options = match std::fs::read_to_string(file_path) {\n            Ok(json) =\u003e {\n                serde_json::from_str(\u0026json).unwrap_or_else(|_| ApplicationOptions::default())\n            }\n            Err(_) =\u003e ApplicationOptions::default(), // Fallback to default if file read fails\n        };\n\n        Options {\n            application_options,\n            open: false,\n            save_status: None, // No status message on initial load\n        }\n    }\n\n    pub fn apply_options(\u0026self, ctx: \u0026egui::Context, app_font_size: \u0026mut i32) {\n        self.apply_theme(ctx);\n        self.apply_language();\n        self.apply_font_size(ctx, app_font_size);\n    }\n\n    fn apply_theme(\u0026self, ctx: \u0026egui::Context) {\n        let new_visuals = match self.application_options.selected_theme {\n            ThemeOption::Dark =\u003e egui::Visuals::dark(),\n            ThemeOption::Light =\u003e egui::Visuals::light(),\n        };\n\n        if ctx.style().visuals.dark_mode != new_visuals.dark_mode {\n            ctx.set_visuals(new_visuals);\n        }\n    }\n\n    fn apply_language(\u0026self) {\n        rust_i18n::set_locale(match self.application_options.selected_language {\n            LanguageOption::English =\u003e \"en\",\n            LanguageOption::Français =\u003e \"fr\",\n        });\n    }\n\n    fn apply_font_size(\u0026self, ctx: \u0026egui::Context, app_font_size: \u0026mut i32) {\n        let mut style = (*ctx.style()).clone();\n        let font_size = self.application_options.font_size;\n\n        for text_style in [\n            egui::TextStyle::Body,\n            egui::TextStyle::Button,\n            egui::TextStyle::Heading,\n            egui::TextStyle::Monospace,\n            egui::TextStyle::Small,\n        ] {\n            style.text_styles.insert(\n                text_style,\n                egui::FontId::new(font_size as f32, egui::FontFamily::Proportional),\n            );\n        }\n\n        ctx.set_style(style);\n        *app_font_size = font_size;\n    }\n}\n\nimpl Options {\n    pub fn ui(\u0026mut self, ui: \u0026mut egui::Ui, app_font_size: \u0026mut i32) {\n        let mut open = self.open; // Local copy to avoid borrowing issues\n\n        egui::Window::new(t!(\"app.options.title\"))\n            .collapsible(true)\n            .movable(true)\n            .open(\u0026mut open)\n            .default_size([400.0, 500.0])\n            .show(ui.ctx(), |ui| {\n                Grid::new(\"options_grid\")\n                    .num_columns(2)\n                    .spacing([10.0, 8.0])\n                    .striped(true)\n                    .show(ui, |ui| {\n                        self.render_theme_selector(ui);\n                        self.render_language_selector(ui);\n                        self.render_font_size_selector(ui, app_font_size);\n                    });\n\n                ui.add_space(10.0);\n\n                if ui.button(t!(\"app.options.save.title\")).clicked() {\n                    self.save_to_file(\"options.json\");\n                }\n\n                // Show the save status message for a few seconds\n                if let Some((message, timestamp)) = \u0026self.save_status {\n                    if timestamp.elapsed() \u003c Duration::new(3, 0) {\n                        ui.label(message);\n                    } else {\n                        self.save_status = None; // Clear the message after timeout\n                    }\n                }\n            });\n        self.open = open;\n    }\n\n    fn render_language_selector(\u0026mut self, ui: \u0026mut egui::Ui) {\n        ui.label(t!(\"app.options.language.title\"));\n        egui::ComboBox::from_label(t!(\"app.options.language.choose\"))\n            .selected_text(format!(\"{:?}\", self.application_options.selected_language))\n            .show_ui(ui, |ui| {\n                for (lang, label) in [\n                    (LanguageOption::English, t!(\"app.options.language.en\")),\n                    (LanguageOption::Français, t!(\"app.options.language.fr\")),\n                ] {\n                    if ui\n                        .selectable_value(\n                            \u0026mut self.application_options.selected_language,\n                            lang,\n                            label,\n                        )\n                        .clicked()\n                    {\n                        self.apply_language();\n                    }\n                }\n            });\n        ui.end_row();\n    }\n\n    fn render_font_size_selector(\u0026mut self, ui: \u0026mut egui::Ui, app_font_size: \u0026mut i32) {\n        ui.label(t!(\"app.options.font_size.title\"));\n        egui::ComboBox::from_label(t!(\"app.options.font_size.choose\"))\n            .selected_text(format!(\"{}\", self.application_options.font_size))\n            .show_ui(ui, |ui| {\n                for size in 10..=30 {\n                    if ui\n                        .selectable_value(\n                            \u0026mut self.application_options.font_size,\n                            size,\n                            size.to_string(),\n                        )\n                        .clicked()\n                    {\n                        self.apply_font_size(ui.ctx(), app_font_size);\n                    }\n                }\n            });\n        ui.end_row();\n    }\n\n    fn render_theme_selector(\u0026mut self, ui: \u0026mut egui::Ui) {\n        ui.label(t!(\"app.options.theme.title\"));\n        egui::ComboBox::from_label(t!(\"app.options.theme.choose\"))\n            .selected_text(format!(\"{:?}\", self.application_options.selected_theme))\n            .show_ui(ui, |ui| {\n                for (theme, label) in [\n                    (ThemeOption::Dark, t!(\"app.options.theme.dark\")),\n                    (ThemeOption::Light, t!(\"app.options.theme.light\")),\n                ] {\n                    if ui\n                        .selectable_value(\n                            \u0026mut self.application_options.selected_theme,\n                            theme,\n                            label,\n                        )\n                        .clicked()\n                    {\n                        self.apply_theme(ui.ctx());\n                    }\n                }\n            });\n        ui.end_row();\n    }\n}\n","traces":[{"line":16,"address":[4759008],"length":1,"stats":{"Line":0}},{"line":17,"address":[4759013],"length":1,"stats":{"Line":0}},{"line":20,"address":[4759024],"length":1,"stats":{"Line":0}},{"line":29,"address":[4759104,4761145,4760238],"length":1,"stats":{"Line":0}},{"line":30,"address":[4759140],"length":1,"stats":{"Line":0}},{"line":31,"address":[4712744,4712736],"length":1,"stats":{"Line":0}},{"line":34,"address":[4760010],"length":1,"stats":{"Line":0}},{"line":35,"address":[4759228,4760107,4759409,4760247],"length":1,"stats":{"Line":0}},{"line":37,"address":[4761104],"length":1,"stats":{"Line":0}},{"line":38,"address":[4759292,4761109,4760293],"length":1,"stats":{"Line":0}},{"line":44,"address":[4761649,4761168,4761522],"length":1,"stats":{"Line":0}},{"line":45,"address":[4761201],"length":1,"stats":{"Line":0}},{"line":46,"address":[4761244],"length":1,"stats":{"Line":0}},{"line":47,"address":[4712784,4712793],"length":1,"stats":{"Line":0}},{"line":49,"address":[4761286,4761536],"length":1,"stats":{"Line":0}},{"line":59,"address":[4761680],"length":1,"stats":{"Line":0}},{"line":60,"address":[4761714],"length":1,"stats":{"Line":0}},{"line":61,"address":[4761724],"length":1,"stats":{"Line":0}},{"line":62,"address":[4761744],"length":1,"stats":{"Line":0}},{"line":65,"address":[4762023,4761760],"length":1,"stats":{"Line":0}},{"line":66,"address":[4761788],"length":1,"stats":{"Line":0}},{"line":67,"address":[4761815],"length":1,"stats":{"Line":0}},{"line":68,"address":[4761802],"length":1,"stats":{"Line":0}},{"line":71,"address":[4761831],"length":1,"stats":{"Line":0}},{"line":72,"address":[4761973],"length":1,"stats":{"Line":0}},{"line":76,"address":[4762048],"length":1,"stats":{"Line":0}},{"line":77,"address":[4762057,4762113],"length":1,"stats":{"Line":0}},{"line":78,"address":[4762071],"length":1,"stats":{"Line":0}},{"line":79,"address":[4762093],"length":1,"stats":{"Line":0}},{"line":83,"address":[4763129,4762144],"length":1,"stats":{"Line":0}},{"line":84,"address":[4762203],"length":1,"stats":{"Line":0}},{"line":85,"address":[4762394],"length":1,"stats":{"Line":0}},{"line":87,"address":[4762740,4762788,4762468],"length":1,"stats":{"Line":0}},{"line":88,"address":[4762408],"length":1,"stats":{"Line":0}},{"line":89,"address":[4762420],"length":1,"stats":{"Line":0}},{"line":90,"address":[4762432],"length":1,"stats":{"Line":0}},{"line":91,"address":[4762444],"length":1,"stats":{"Line":0}},{"line":92,"address":[4762456],"length":1,"stats":{"Line":0}},{"line":94,"address":[4762820,4763038],"length":1,"stats":{"Line":0}},{"line":95,"address":[4762833],"length":1,"stats":{"Line":0}},{"line":96,"address":[4762873],"length":1,"stats":{"Line":0}},{"line":100,"address":[4762912],"length":1,"stats":{"Line":0}},{"line":101,"address":[4762978],"length":1,"stats":{"Line":0}},{"line":106,"address":[4764137,4764092,4763168],"length":1,"stats":{"Line":0}},{"line":107,"address":[4763214],"length":1,"stats":{"Line":0}},{"line":109,"address":[4763787,4763627,4763406,4763913,4763239],"length":1,"stats":{"Line":0}},{"line":113,"address":[4763765,4763839],"length":1,"stats":{"Line":0}},{"line":114,"address":[4712896,4714303],"length":1,"stats":{"Line":0}},{"line":115,"address":[4713023,4713131,4712926],"length":1,"stats":{"Line":0}},{"line":117,"address":[4713001],"length":1,"stats":{"Line":0}},{"line":119,"address":[4713111,4714368],"length":1,"stats":{"Line":0}},{"line":120,"address":[4714403],"length":1,"stats":{"Line":0}},{"line":121,"address":[4714418],"length":1,"stats":{"Line":0}},{"line":122,"address":[4714433],"length":1,"stats":{"Line":0}},{"line":125,"address":[4713163],"length":1,"stats":{"Line":0}},{"line":127,"address":[4713168,4714325,4713712,4714033,4713939],"length":1,"stats":{"Line":0}},{"line":128,"address":[4714006],"length":1,"stats":{"Line":0}},{"line":132,"address":[4714056,4713895],"length":1,"stats":{"Line":0}},{"line":133,"address":[4714298,4714076],"length":1,"stats":{"Line":0}},{"line":134,"address":[4714199],"length":1,"stats":{"Line":0}},{"line":136,"address":[4714170,4714228],"length":1,"stats":{"Line":0}},{"line":140,"address":[4764033],"length":1,"stats":{"Line":0}},{"line":143,"address":[4764160,4765710,4765755],"length":1,"stats":{"Line":0}},{"line":144,"address":[4764843,4764193,4765768],"length":1,"stats":{"Line":0}},{"line":145,"address":[4765557,4765155,4764934,4765480,4764747],"length":1,"stats":{"Line":0}},{"line":146,"address":[4765318,4765688,4765533,4765222],"length":1,"stats":{"Line":0}},{"line":147,"address":[4716314,4716395,4714464],"length":1,"stats":{"Line":0}},{"line":148,"address":[4715467,4715795,4715649,4714489,4715732],"length":1,"stats":{"Line":0}},{"line":149,"address":[4714904,4715026,4714680,4714505],"length":1,"stats":{"Line":0}},{"line":150,"address":[4715417,4715551,4715219,4714954,4715108],"length":1,"stats":{"Line":0}},{"line":152,"address":[4715847,4715787,4716250],"length":1,"stats":{"Line":0}},{"line":154,"address":[4715838],"length":1,"stats":{"Line":0}},{"line":158,"address":[4716256,4716202],"length":1,"stats":{"Line":0}},{"line":160,"address":[4716297],"length":1,"stats":{"Line":0}},{"line":164,"address":[4765655],"length":1,"stats":{"Line":0}},{"line":167,"address":[4767419,4765808,4767374],"length":1,"stats":{"Line":0}},{"line":168,"address":[4765854,4766505,4767432],"length":1,"stats":{"Line":0}},{"line":169,"address":[4766597,4766818,4767139,4767221,4766408],"length":1,"stats":{"Line":0}},{"line":170,"address":[4767352,4766977,4766885,4767197],"length":1,"stats":{"Line":0}},{"line":171,"address":[4716817,4716416],"length":1,"stats":{"Line":0}},{"line":172,"address":[4716446,4716538],"length":1,"stats":{"Line":0}},{"line":173,"address":[4716743,4716588],"length":1,"stats":{"Line":0}},{"line":175,"address":[4716546],"length":1,"stats":{"Line":0}},{"line":177,"address":[4716560],"length":1,"stats":{"Line":0}},{"line":179,"address":[4716749,4716701],"length":1,"stats":{"Line":0}},{"line":181,"address":[4716781],"length":1,"stats":{"Line":0}},{"line":185,"address":[4767319],"length":1,"stats":{"Line":0}},{"line":188,"address":[4769067,4769022,4767472],"length":1,"stats":{"Line":0}},{"line":189,"address":[4769080,4767505,4768155],"length":1,"stats":{"Line":0}},{"line":190,"address":[4768869,4768467,4768246,4768059,4768792],"length":1,"stats":{"Line":0}},{"line":191,"address":[4768630,4768845,4768534,4769000],"length":1,"stats":{"Line":0}},{"line":192,"address":[4718811,4716848,4718730],"length":1,"stats":{"Line":0}},{"line":193,"address":[4716873,4718033,4717851,4718179,4718116],"length":1,"stats":{"Line":0}},{"line":194,"address":[4717288,4717064,4716889,4717410],"length":1,"stats":{"Line":0}},{"line":195,"address":[4717492,4717801,4717935,4717338,4717603],"length":1,"stats":{"Line":0}},{"line":197,"address":[4718634,4718231,4718171],"length":1,"stats":{"Line":0}},{"line":199,"address":[4718222],"length":1,"stats":{"Line":0}},{"line":203,"address":[4718640,4718586],"length":1,"stats":{"Line":0}},{"line":205,"address":[4718686],"length":1,"stats":{"Line":0}},{"line":209,"address":[4768967],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":100},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","menu","tools.rs"],"content":"use crate::models::data_structure::job::Job;\nuse crate::models::data_structure::job::JobState;\nuse crate::models::data_structure::resource::ResourceState;\nuse crate::models::utils::utils::get_all_clusters;\nuse crate::models::utils::utils::get_all_hosts;\nuse crate::models::utils::utils::get_all_resources;\nuse crate::views::menu::tools::egui::Color32;\nuse crate::{\n    models::data_structure::application_context::ApplicationContext,\n    views::view::{View, ViewType},\n};\nuse eframe::egui;\n\nuse super::filtering::Filtering;\n\npub struct Tools {\n    filtering_pane: Filtering,\n}\n\nimpl Default for Tools {\n    fn default() -\u003e Self {\n        Tools {\n            filtering_pane: Filtering::default(),\n        }\n    }\n}\n\n/*\n * The Tools struct is a view that contains the common buttons between the Dashboard and Gantt views.\n */\nimpl View for Tools {\n    fn render(\u0026mut self, ui: \u0026mut egui::Ui, app: \u0026mut ApplicationContext) {\n        ui.horizontal(|ui| {\n            ui.set_height(25.0);\n\n            ui.label(t!(\"app.mode\"));\n\n            // Dashboard Button\n            let is_dashboard_selected = matches!(app.view_type, ViewType::Dashboard);\n\n            let dashboard_btn = egui::Button::new(\"📊 Dashboard\").frame(is_dashboard_selected);\n            if ui.add(dashboard_btn).clicked() {\n                app.view_type = ViewType::Dashboard;\n                ui.close_menu();\n                if app.all_jobs.iter().any(|job| job.id == 0) {\n                    app.see_all_jobs = true;\n                }\n\n                app.all_jobs.retain(|job| job.id != 0);\n            }\n\n            // Gantt Button\n            let gantt_btn = egui::Button::new(\"📅 Gantt\").frame(!is_dashboard_selected);\n            if ui.add(gantt_btn).clicked() {\n                app.view_type = ViewType::Gantt;\n                ui.close_menu();\n\n                if app.see_all_jobs {\n                    app.see_all_jobs = false;\n                    app.all_jobs.push(Job {\n                        id: 0,\n                        owner: \"all_resources\".to_string(),\n                        state: JobState::Unknown,\n                        scheduled_start: 0,\n                        walltime: 0,\n                        hosts: get_all_hosts(\u0026app.all_clusters),\n                        clusters: get_all_clusters(\u0026app.all_clusters),\n                        command: String::new(),\n                        message: None,\n                        queue: String::new(),\n                        assigned_resources: get_all_resources(\u0026app.all_clusters),\n                        submission_time: 0,\n                        start_time: 0,\n                        stop_time: 0,\n                        exit_code: None,\n                        gantt_color: Color32::TRANSPARENT,\n                        main_resource_state: ResourceState::Unknown,\n                    });\n                }\n            }\n\n            // On the right side\n            ui.with_layout(egui::Layout::right_to_left(egui::Align::Center), |ui| {\n                let refresh_btn = egui::Button::new(\"⟳\");\n                let refresh_btn_response = if *app.is_refreshing.lock().unwrap() {\n                    ui.add_enabled(false, refresh_btn)\n                } else {\n                    ui.add(refresh_btn)\n                };\n                if refresh_btn_response.clicked() {\n                    app.instant_update();\n                }\n\n                // Menu Refresh Rate\n                ui.menu_button(\n                    \"🕓 \".to_string() + \u0026t!(\"app.menu.refresh_rate.button\"),\n                    |ui| {\n                        ui.set_min_width(70.0); // Set the minimum width to 150.0\n\n                        let refresh_rates = vec![\n                            (30, t!(\"app.menu.refresh_rate.refresh_30\")),\n                            (60, t!(\"app.menu.refresh_rate.refresh_60\")),\n                            (300, t!(\"app.menu.refresh_rate.refresh_300\")),\n                        ];\n\n                        for (rate, label) in refresh_rates {\n                            let selected = *app.refresh_rate.lock().unwrap() == rate;\n                            let display_label = if selected {\n                                format!(\"{} ✔\", label)\n                            } else {\n                                label.to_string()\n                            };\n                            if ui.selectable_label(selected, display_label).clicked() {\n                                app.update_refresh_rate(rate);\n                                ui.close_menu();\n                            }\n                        }\n                    },\n                );\n\n                // Menu Filters\n                let filters_btn =\n                    egui::Button::new(\"🔎 \".to_string() + \u0026t!(\"app.menu.filters\")).frame(true);\n                if ui.add(filters_btn).clicked() {\n                    self.filtering_pane.open();\n                }\n            });\n\n            // Show External Window\n            self.filtering_pane.ui(ui, app);\n        });\n    }\n}\n","traces":[{"line":21,"address":[4712608],"length":1,"stats":{"Line":0}},{"line":23,"address":[4712625],"length":1,"stats":{"Line":0}},{"line":32,"address":[4712672],"length":1,"stats":{"Line":0}},{"line":33,"address":[4712700],"length":1,"stats":{"Line":0}},{"line":34,"address":[5361083],"length":1,"stats":{"Line":0}},{"line":36,"address":[5361108,5363669,5361852],"length":1,"stats":{"Line":0}},{"line":39,"address":[5361639],"length":1,"stats":{"Line":0}},{"line":41,"address":[5361671],"length":1,"stats":{"Line":0}},{"line":42,"address":[5361733,5361874],"length":1,"stats":{"Line":0}},{"line":43,"address":[5361963],"length":1,"stats":{"Line":0}},{"line":44,"address":[5361989],"length":1,"stats":{"Line":0}},{"line":45,"address":[5362282,5363722,5363712,5361995],"length":1,"stats":{"Line":0}},{"line":46,"address":[5362270],"length":1,"stats":{"Line":0}},{"line":49,"address":[5362248,5363744,5363754],"length":1,"stats":{"Line":0}},{"line":53,"address":[5362065],"length":1,"stats":{"Line":0}},{"line":54,"address":[5362284,5362129],"length":1,"stats":{"Line":0}},{"line":55,"address":[5362373],"length":1,"stats":{"Line":0}},{"line":56,"address":[5362399],"length":1,"stats":{"Line":0}},{"line":58,"address":[5362405],"length":1,"stats":{"Line":0}},{"line":59,"address":[5362701],"length":1,"stats":{"Line":0}},{"line":60,"address":[5362713,5363124],"length":1,"stats":{"Line":0}},{"line":62,"address":[5362728],"length":1,"stats":{"Line":0}},{"line":63,"address":[5362753],"length":1,"stats":{"Line":0}},{"line":66,"address":[5362761],"length":1,"stats":{"Line":0}},{"line":67,"address":[5362832],"length":1,"stats":{"Line":0}},{"line":68,"address":[5362908],"length":1,"stats":{"Line":0}},{"line":69,"address":[5362966],"length":1,"stats":{"Line":0}},{"line":70,"address":[5362982],"length":1,"stats":{"Line":0}},{"line":71,"address":[5363033],"length":1,"stats":{"Line":0}},{"line":75,"address":[5363105],"length":1,"stats":{"Line":0}},{"line":77,"address":[5363116],"length":1,"stats":{"Line":0}},{"line":83,"address":[5367207,5362540,5363776,5362428,5366974],"length":1,"stats":{"Line":0}},{"line":84,"address":[5363815],"length":1,"stats":{"Line":0}},{"line":85,"address":[5364011,5363900,5364269],"length":1,"stats":{"Line":0}},{"line":86,"address":[5364591],"length":1,"stats":{"Line":0}},{"line":88,"address":[5364411],"length":1,"stats":{"Line":0}},{"line":90,"address":[5364721],"length":1,"stats":{"Line":0}},{"line":91,"address":[5364754],"length":1,"stats":{"Line":0}},{"line":95,"address":[5365390],"length":1,"stats":{"Line":0}},{"line":96,"address":[5367149,5364727,5364771],"length":1,"stats":{"Line":0}},{"line":97,"address":[5367248,5365366,5369281,5371163],"length":1,"stats":{"Line":0}},{"line":98,"address":[5367298],"length":1,"stats":{"Line":0}},{"line":100,"address":[5371282,5371462,5368575,5367555,5367973,5371416,5368074,5368298,5369146,5368480,5368893,5371515,5367785,5367357,5368955,5368799,5371351,5367448,5371199],"length":1,"stats":{"Line":0}},{"line":101,"address":[5367370,5367817,5367496,5367933,5367619],"length":1,"stats":{"Line":0}},{"line":102,"address":[5367863,5368330,5368021,5368132,5368440],"length":1,"stats":{"Line":0}},{"line":103,"address":[5368376,5368921,5368522,5368633,5368831],"length":1,"stats":{"Line":0}},{"line":106,"address":[5369969,5369729,5369919],"length":1,"stats":{"Line":0}},{"line":107,"address":[5370022,5370142,5370366],"length":1,"stats":{"Line":0}},{"line":108,"address":[5370493],"length":1,"stats":{"Line":0}},{"line":109,"address":[5370834,5370713],"length":1,"stats":{"Line":0}},{"line":111,"address":[5370634,5370515],"length":1,"stats":{"Line":0}},{"line":113,"address":[5370936,5370648],"length":1,"stats":{"Line":0}},{"line":114,"address":[5371055],"length":1,"stats":{"Line":0}},{"line":115,"address":[5371078],"length":1,"stats":{"Line":0}},{"line":123,"address":[5366983,5366642,5365674,5367041],"length":1,"stats":{"Line":0}},{"line":124,"address":[5366650,5366822],"length":1,"stats":{"Line":0}},{"line":125,"address":[5366941],"length":1,"stats":{"Line":0}},{"line":130,"address":[5362678],"length":1,"stats":{"Line":0}}],"covered":0,"coverable":58},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","mod.rs"],"content":"// Module: views\npub mod components;\npub mod main_page;\npub mod menu;\npub mod view;\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","amaury","Documents","info5","0projet","app","src","views","view.rs"],"content":"use eframe::egui;\n\nuse crate::models::data_structure::application_context::ApplicationContext;\n\npub trait View {\n    fn render(\u0026mut self, ui: \u0026mut egui::Ui, app: \u0026mut ApplicationContext);\n}\n\npub enum ViewType {\n    Dashboard,\n    Gantt,\n    Authentification,\n}\n","traces":[],"covered":0,"coverable":0}]};
    </script>
    <script crossorigin>/** @license React v16.13.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
'use strict';(function(d,r){"object"===typeof exports&&"undefined"!==typeof module?r(exports):"function"===typeof define&&define.amd?define(["exports"],r):(d=d||self,r(d.React={}))})(this,function(d){function r(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}
function w(a,b,c){this.props=a;this.context=b;this.refs=ba;this.updater=c||ca}function da(){}function L(a,b,c){this.props=a;this.context=b;this.refs=ba;this.updater=c||ca}function ea(a,b,c){var g,e={},fa=null,d=null;if(null!=b)for(g in void 0!==b.ref&&(d=b.ref),void 0!==b.key&&(fa=""+b.key),b)ha.call(b,g)&&!ia.hasOwnProperty(g)&&(e[g]=b[g]);var h=arguments.length-2;if(1===h)e.children=c;else if(1<h){for(var k=Array(h),f=0;f<h;f++)k[f]=arguments[f+2];e.children=k}if(a&&a.defaultProps)for(g in h=a.defaultProps,
h)void 0===e[g]&&(e[g]=h[g]);return{$$typeof:x,type:a,key:fa,ref:d,props:e,_owner:M.current}}function va(a,b){return{$$typeof:x,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function N(a){return"object"===typeof a&&null!==a&&a.$$typeof===x}function wa(a){var b={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,function(a){return b[a]})}function ja(a,b,c,g){if(C.length){var e=C.pop();e.result=a;e.keyPrefix=b;e.func=c;e.context=g;e.count=0;return e}return{result:a,keyPrefix:b,func:c,
context:g,count:0}}function ka(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>C.length&&C.push(a)}function O(a,b,c,g){var e=typeof a;if("undefined"===e||"boolean"===e)a=null;var d=!1;if(null===a)d=!0;else switch(e){case "string":case "number":d=!0;break;case "object":switch(a.$$typeof){case x:case xa:d=!0}}if(d)return c(g,a,""===b?"."+P(a,0):b),1;d=0;b=""===b?".":b+":";if(Array.isArray(a))for(var f=0;f<a.length;f++){e=a[f];var h=b+P(e,f);d+=O(e,h,c,g)}else if(null===a||
"object"!==typeof a?h=null:(h=la&&a[la]||a["@@iterator"],h="function"===typeof h?h:null),"function"===typeof h)for(a=h.call(a),f=0;!(e=a.next()).done;)e=e.value,h=b+P(e,f++),d+=O(e,h,c,g);else if("object"===e)throw c=""+a,Error(r(31,"[object Object]"===c?"object with keys {"+Object.keys(a).join(", ")+"}":c,""));return d}function Q(a,b,c){return null==a?0:O(a,"",b,c)}function P(a,b){return"object"===typeof a&&null!==a&&null!=a.key?wa(a.key):b.toString(36)}function ya(a,b,c){a.func.call(a.context,b,
a.count++)}function za(a,b,c){var g=a.result,e=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?R(a,g,c,function(a){return a}):null!=a&&(N(a)&&(a=va(a,e+(!a.key||b&&b.key===a.key?"":(""+a.key).replace(ma,"$&/")+"/")+c)),g.push(a))}function R(a,b,c,g,e){var d="";null!=c&&(d=(""+c).replace(ma,"$&/")+"/");b=ja(b,d,g,e);Q(a,za,b);ka(b)}function t(){var a=na.current;if(null===a)throw Error(r(321));return a}function S(a,b){var c=a.length;a.push(b);a:for(;;){var g=c-1>>>1,e=a[g];if(void 0!==
e&&0<D(e,b))a[g]=b,a[c]=e,c=g;else break a}}function n(a){a=a[0];return void 0===a?null:a}function E(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var g=0,e=a.length;g<e;){var d=2*(g+1)-1,f=a[d],h=d+1,k=a[h];if(void 0!==f&&0>D(f,c))void 0!==k&&0>D(k,f)?(a[g]=k,a[h]=c,g=h):(a[g]=f,a[d]=c,g=d);else if(void 0!==k&&0>D(k,c))a[g]=k,a[h]=c,g=h;else break a}}return b}return null}function D(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}function F(a){for(var b=n(u);null!==
b;){if(null===b.callback)E(u);else if(b.startTime<=a)E(u),b.sortIndex=b.expirationTime,S(p,b);else break;b=n(u)}}function T(a){y=!1;F(a);if(!v)if(null!==n(p))v=!0,z(U);else{var b=n(u);null!==b&&G(T,b.startTime-a)}}function U(a,b){v=!1;y&&(y=!1,V());H=!0;var c=m;try{F(b);for(l=n(p);null!==l&&(!(l.expirationTime>b)||a&&!W());){var g=l.callback;if(null!==g){l.callback=null;m=l.priorityLevel;var e=g(l.expirationTime<=b);b=q();"function"===typeof e?l.callback=e:l===n(p)&&E(p);F(b)}else E(p);l=n(p)}if(null!==
l)var d=!0;else{var f=n(u);null!==f&&G(T,f.startTime-b);d=!1}return d}finally{l=null,m=c,H=!1}}function oa(a){switch(a){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1E4;default:return 5E3}}var f="function"===typeof Symbol&&Symbol.for,x=f?Symbol.for("react.element"):60103,xa=f?Symbol.for("react.portal"):60106,Aa=f?Symbol.for("react.fragment"):60107,Ba=f?Symbol.for("react.strict_mode"):60108,Ca=f?Symbol.for("react.profiler"):60114,Da=f?Symbol.for("react.provider"):60109,
Ea=f?Symbol.for("react.context"):60110,Fa=f?Symbol.for("react.forward_ref"):60112,Ga=f?Symbol.for("react.suspense"):60113,Ha=f?Symbol.for("react.memo"):60115,Ia=f?Symbol.for("react.lazy"):60116,la="function"===typeof Symbol&&Symbol.iterator,pa=Object.getOwnPropertySymbols,Ja=Object.prototype.hasOwnProperty,Ka=Object.prototype.propertyIsEnumerable,I=function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var b={};for(a=0;10>a;a++)b["_"+
String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var c={};"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},c)).join("")?!1:!0}catch(g){return!1}}()?Object.assign:function(a,b){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");var c=Object(a);for(var g,e=1;e<arguments.length;e++){var d=Object(arguments[e]);
for(var f in d)Ja.call(d,f)&&(c[f]=d[f]);if(pa){g=pa(d);for(var h=0;h<g.length;h++)Ka.call(d,g[h])&&(c[g[h]]=d[g[h]])}}return c},ca={isMounted:function(a){return!1},enqueueForceUpdate:function(a,b,c){},enqueueReplaceState:function(a,b,c,d){},enqueueSetState:function(a,b,c,d){}},ba={};w.prototype.isReactComponent={};w.prototype.setState=function(a,b){if("object"!==typeof a&&"function"!==typeof a&&null!=a)throw Error(r(85));this.updater.enqueueSetState(this,a,b,"setState")};w.prototype.forceUpdate=
function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};da.prototype=w.prototype;f=L.prototype=new da;f.constructor=L;I(f,w.prototype);f.isPureReactComponent=!0;var M={current:null},ha=Object.prototype.hasOwnProperty,ia={key:!0,ref:!0,__self:!0,__source:!0},ma=/\/+/g,C=[],na={current:null},X;if("undefined"===typeof window||"function"!==typeof MessageChannel){var A=null,qa=null,ra=function(){if(null!==A)try{var a=q();A(!0,a);A=null}catch(b){throw setTimeout(ra,0),b;}},La=Date.now();var q=
function(){return Date.now()-La};var z=function(a){null!==A?setTimeout(z,0,a):(A=a,setTimeout(ra,0))};var G=function(a,b){qa=setTimeout(a,b)};var V=function(){clearTimeout(qa)};var W=function(){return!1};f=X=function(){}}else{var Y=window.performance,sa=window.Date,Ma=window.setTimeout,Na=window.clearTimeout;"undefined"!==typeof console&&(f=window.cancelAnimationFrame,"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),
"function"!==typeof f&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));if("object"===typeof Y&&"function"===typeof Y.now)q=function(){return Y.now()};else{var Oa=sa.now();q=function(){return sa.now()-Oa}}var J=!1,K=null,Z=-1,ta=5,ua=0;W=function(){return q()>=ua};f=function(){};X=function(a){0>a||125<a?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):
ta=0<a?Math.floor(1E3/a):5};var B=new MessageChannel,aa=B.port2;B.port1.onmessage=function(){if(null!==K){var a=q();ua=a+ta;try{K(!0,a)?aa.postMessage(null):(J=!1,K=null)}catch(b){throw aa.postMessage(null),b;}}else J=!1};z=function(a){K=a;J||(J=!0,aa.postMessage(null))};G=function(a,b){Z=Ma(function(){a(q())},b)};V=function(){Na(Z);Z=-1}}var p=[],u=[],Pa=1,l=null,m=3,H=!1,v=!1,y=!1,Qa=0;B={ReactCurrentDispatcher:na,ReactCurrentOwner:M,IsSomeRendererActing:{current:!1},assign:I};I(B,{Scheduler:{__proto__:null,
unstable_ImmediatePriority:1,unstable_UserBlockingPriority:2,unstable_NormalPriority:3,unstable_IdlePriority:5,unstable_LowPriority:4,unstable_runWithPriority:function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=m;m=a;try{return b()}finally{m=c}},unstable_next:function(a){switch(m){case 1:case 2:case 3:var b=3;break;default:b=m}var c=m;m=b;try{return a()}finally{m=c}},unstable_scheduleCallback:function(a,b,c){var d=q();if("object"===typeof c&&null!==c){var e=c.delay;
e="number"===typeof e&&0<e?d+e:d;c="number"===typeof c.timeout?c.timeout:oa(a)}else c=oa(a),e=d;c=e+c;a={id:Pa++,callback:b,priorityLevel:a,startTime:e,expirationTime:c,sortIndex:-1};e>d?(a.sortIndex=e,S(u,a),null===n(p)&&a===n(u)&&(y?V():y=!0,G(T,e-d))):(a.sortIndex=c,S(p,a),v||H||(v=!0,z(U)));return a},unstable_cancelCallback:function(a){a.callback=null},unstable_wrapCallback:function(a){var b=m;return function(){var c=m;m=b;try{return a.apply(this,arguments)}finally{m=c}}},unstable_getCurrentPriorityLevel:function(){return m},
unstable_shouldYield:function(){var a=q();F(a);var b=n(p);return b!==l&&null!==l&&null!==b&&null!==b.callback&&b.startTime<=a&&b.expirationTime<l.expirationTime||W()},unstable_requestPaint:f,unstable_continueExecution:function(){v||H||(v=!0,z(U))},unstable_pauseExecution:function(){},unstable_getFirstCallbackNode:function(){return n(p)},get unstable_now(){return q},get unstable_forceFrameRate(){return X},unstable_Profiling:null},SchedulerTracing:{__proto__:null,__interactionsRef:null,__subscriberRef:null,
unstable_clear:function(a){return a()},unstable_getCurrent:function(){return null},unstable_getThreadID:function(){return++Qa},unstable_trace:function(a,b,c){return c()},unstable_wrap:function(a){return a},unstable_subscribe:function(a){},unstable_unsubscribe:function(a){}}});d.Children={map:function(a,b,c){if(null==a)return a;var d=[];R(a,d,null,b,c);return d},forEach:function(a,b,c){if(null==a)return a;b=ja(null,null,b,c);Q(a,ya,b);ka(b)},count:function(a){return Q(a,function(){return null},null)},
toArray:function(a){var b=[];R(a,b,null,function(a){return a});return b},only:function(a){if(!N(a))throw Error(r(143));return a}};d.Component=w;d.Fragment=Aa;d.Profiler=Ca;d.PureComponent=L;d.StrictMode=Ba;d.Suspense=Ga;d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B;d.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(r(267,a));var d=I({},a.props),e=a.key,f=a.ref,m=a._owner;if(null!=b){void 0!==b.ref&&(f=b.ref,m=M.current);void 0!==b.key&&(e=""+b.key);if(a.type&&a.type.defaultProps)var h=
a.type.defaultProps;for(k in b)ha.call(b,k)&&!ia.hasOwnProperty(k)&&(d[k]=void 0===b[k]&&void 0!==h?h[k]:b[k])}var k=arguments.length-2;if(1===k)d.children=c;else if(1<k){h=Array(k);for(var l=0;l<k;l++)h[l]=arguments[l+2];d.children=h}return{$$typeof:x,type:a.type,key:e,ref:f,props:d,_owner:m}};d.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:Ea,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:Da,_context:a};return a.Consumer=
a};d.createElement=ea;d.createFactory=function(a){var b=ea.bind(null,a);b.type=a;return b};d.createRef=function(){return{current:null}};d.forwardRef=function(a){return{$$typeof:Fa,render:a}};d.isValidElement=N;d.lazy=function(a){return{$$typeof:Ia,_ctor:a,_status:-1,_result:null}};d.memo=function(a,b){return{$$typeof:Ha,type:a,compare:void 0===b?null:b}};d.useCallback=function(a,b){return t().useCallback(a,b)};d.useContext=function(a,b){return t().useContext(a,b)};d.useDebugValue=function(a,b){};
d.useEffect=function(a,b){return t().useEffect(a,b)};d.useImperativeHandle=function(a,b,c){return t().useImperativeHandle(a,b,c)};d.useLayoutEffect=function(a,b){return t().useLayoutEffect(a,b)};d.useMemo=function(a,b){return t().useMemo(a,b)};d.useReducer=function(a,b,c){return t().useReducer(a,b,c)};d.useRef=function(a){return t().useRef(a)};d.useState=function(a){return t().useState(a)};d.version="16.13.1"});
</script>
    <script crossorigin>/** @license React v16.13.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/*
 Modernizr 3.0.0pre (Custom Build) | MIT
*/
'use strict';(function(I,ea){"object"===typeof exports&&"undefined"!==typeof module?ea(exports,require("react")):"function"===typeof define&&define.amd?define(["exports","react"],ea):(I=I||self,ea(I.ReactDOM={},I.React))})(this,function(I,ea){function k(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}
function ji(a,b,c,d,e,f,g,h,m){yb=!1;gc=null;ki.apply(li,arguments)}function mi(a,b,c,d,e,f,g,h,m){ji.apply(this,arguments);if(yb){if(yb){var n=gc;yb=!1;gc=null}else throw Error(k(198));hc||(hc=!0,pd=n)}}function lf(a,b,c){var d=a.type||"unknown-event";a.currentTarget=mf(c);mi(d,b,void 0,a);a.currentTarget=null}function nf(){if(ic)for(var a in cb){var b=cb[a],c=ic.indexOf(a);if(!(-1<c))throw Error(k(96,a));if(!jc[c]){if(!b.extractEvents)throw Error(k(97,a));jc[c]=b;c=b.eventTypes;for(var d in c){var e=
void 0;var f=c[d],g=b,h=d;if(qd.hasOwnProperty(h))throw Error(k(99,h));qd[h]=f;var m=f.phasedRegistrationNames;if(m){for(e in m)m.hasOwnProperty(e)&&of(m[e],g,h);e=!0}else f.registrationName?(of(f.registrationName,g,h),e=!0):e=!1;if(!e)throw Error(k(98,d,a));}}}}function of(a,b,c){if(db[a])throw Error(k(100,a));db[a]=b;rd[a]=b.eventTypes[c].dependencies}function pf(a){var b=!1,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!cb.hasOwnProperty(c)||cb[c]!==d){if(cb[c])throw Error(k(102,c));cb[c]=
d;b=!0}}b&&nf()}function qf(a){if(a=rf(a)){if("function"!==typeof sd)throw Error(k(280));var b=a.stateNode;b&&(b=td(b),sd(a.stateNode,a.type,b))}}function sf(a){eb?fb?fb.push(a):fb=[a]:eb=a}function tf(){if(eb){var a=eb,b=fb;fb=eb=null;qf(a);if(b)for(a=0;a<b.length;a++)qf(b[a])}}function ud(){if(null!==eb||null!==fb)vd(),tf()}function uf(a,b,c){if(wd)return a(b,c);wd=!0;try{return vf(a,b,c)}finally{wd=!1,ud()}}function ni(a){if(wf.call(xf,a))return!0;if(wf.call(yf,a))return!1;if(oi.test(a))return xf[a]=
!0;yf[a]=!0;return!1}function pi(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case "function":case "symbol":return!0;case "boolean":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return"data-"!==a&&"aria-"!==a;default:return!1}}function qi(a,b,c,d){if(null===b||"undefined"===typeof b||pi(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function L(a,
b,c,d,e,f){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f}function xd(a,b,c,d){var e=E.hasOwnProperty(b)?E[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||"o"!==b[0]&&"O"!==b[0]||"n"!==b[1]&&"N"!==b[1]?!1:!0;f||(qi(b,c,e,d)&&(c=null),d||null===e?ni(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,""+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:"":c:(b=e.attributeName,
d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?"":""+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}function zb(a){if(null===a||"object"!==typeof a)return null;a=zf&&a[zf]||a["@@iterator"];return"function"===typeof a?a:null}function ri(a){if(-1===a._status){a._status=0;var b=a._ctor;b=b();a._result=b;b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}}function na(a){if(null==a)return null;
if("function"===typeof a)return a.displayName||a.name||null;if("string"===typeof a)return a;switch(a){case Ma:return"Fragment";case gb:return"Portal";case kc:return"Profiler";case Af:return"StrictMode";case lc:return"Suspense";case yd:return"SuspenseList"}if("object"===typeof a)switch(a.$$typeof){case Bf:return"Context.Consumer";case Cf:return"Context.Provider";case zd:var b=a.render;b=b.displayName||b.name||"";return a.displayName||(""!==b?"ForwardRef("+b+")":"ForwardRef");case Ad:return na(a.type);
case Df:return na(a.render);case Ef:if(a=1===a._status?a._result:null)return na(a)}return null}function Bd(a){var b="";do{a:switch(a.tag){case 3:case 4:case 6:case 7:case 10:case 9:var c="";break a;default:var d=a._debugOwner,e=a._debugSource,f=na(a.type);c=null;d&&(c=na(d.type));d=f;f="";e?f=" (at "+e.fileName.replace(si,"")+":"+e.lineNumber+")":c&&(f=" (created by "+c+")");c="\n    in "+(d||"Unknown")+f}b+=c;a=a.return}while(a);return b}function va(a){switch(typeof a){case "boolean":case "number":case "object":case "string":case "undefined":return a;
default:return""}}function Ff(a){var b=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===b||"radio"===b)}function ti(a){var b=Ff(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=""+a[b];if(!a.hasOwnProperty(b)&&"undefined"!==typeof c&&"function"===typeof c.get&&"function"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=""+a;f.call(this,a)}});Object.defineProperty(a,
b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){a._valueTracker=null;delete a[b]}}}}function mc(a){a._valueTracker||(a._valueTracker=ti(a))}function Gf(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d="";a&&(d=Ff(a)?a.checked?"true":"false":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Cd(a,b){var c=b.checked;return M({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=
c?c:a._wrapperState.initialChecked})}function Hf(a,b){var c=null==b.defaultValue?"":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=va(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===b.type||"radio"===b.type?null!=b.checked:null!=b.value}}function If(a,b){b=b.checked;null!=b&&xd(a,"checked",b,!1)}function Dd(a,b){If(a,b);var c=va(b.value),d=b.type;if(null!=c)if("number"===d){if(0===c&&""===a.value||a.value!=c)a.value=""+c}else a.value!==
""+c&&(a.value=""+c);else if("submit"===d||"reset"===d){a.removeAttribute("value");return}b.hasOwnProperty("value")?Ed(a,b.type,c):b.hasOwnProperty("defaultValue")&&Ed(a,b.type,va(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}function Jf(a,b,c){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var d=b.type;if(!("submit"!==d&&"reset"!==d||void 0!==b.value&&null!==b.value))return;b=""+a._wrapperState.initialValue;c||b===a.value||(a.value=
b);a.defaultValue=b}c=a.name;""!==c&&(a.name="");a.defaultChecked=!!a._wrapperState.initialChecked;""!==c&&(a.name=c)}function Ed(a,b,c){if("number"!==b||a.ownerDocument.activeElement!==a)null==c?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c)}function ui(a){var b="";ea.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}function Fd(a,b){a=M({children:void 0},b);if(b=ui(b.children))a.children=b;return a}function hb(a,b,c,d){a=a.options;if(b){b={};
for(var e=0;e<c.length;e++)b["$"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty("$"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=""+va(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}function Gd(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(k(91));return M({},b,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}
function Kf(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(k(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(k(93));c=c[0]}b=c}null==b&&(b="");c=b}a._wrapperState={initialValue:va(c)}}function Lf(a,b){var c=va(b.value),d=va(b.defaultValue);null!=c&&(c=""+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=""+d)}function Mf(a,b){b=a.textContent;b===a._wrapperState.initialValue&&""!==
b&&null!==b&&(a.value=b)}function Nf(a){switch(a){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hd(a,b){return null==a||"http://www.w3.org/1999/xhtml"===a?Nf(b):"http://www.w3.org/2000/svg"===a&&"foreignObject"===b?"http://www.w3.org/1999/xhtml":a}function nc(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c["Webkit"+a]="webkit"+b;c["Moz"+a]="moz"+b;return c}function oc(a){if(Id[a])return Id[a];
if(!ib[a])return a;var b=ib[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Of)return Id[a]=b[c];return a}function Jd(a){var b=Pf.get(a);void 0===b&&(b=new Map,Pf.set(a,b));return b}function Na(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.effectTag&1026)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function Qf(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function Rf(a){if(Na(a)!==
a)throw Error(k(188));}function vi(a){var b=a.alternate;if(!b){b=Na(a);if(null===b)throw Error(k(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return Rf(e),a;if(f===d)return Rf(e),b;f=f.sibling}throw Error(k(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=
f.child;h;){if(h===c){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(k(189));}}if(c.alternate!==d)throw Error(k(190));}if(3!==c.tag)throw Error(k(188));return c.stateNode.current===c?a:b}function Sf(a){a=vi(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}function jb(a,b){if(null==
b)throw Error(k(30));if(null==a)return b;if(Array.isArray(a)){if(Array.isArray(b))return a.push.apply(a,b),a;a.push(b);return a}return Array.isArray(b)?[a].concat(b):[a,b]}function Kd(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}function pc(a){null!==a&&(Ab=jb(Ab,a));a=Ab;Ab=null;if(a){Kd(a,wi);if(Ab)throw Error(k(95));if(hc)throw a=pd,hc=!1,pd=null,a;}}function Ld(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:
a}function Tf(a){if(!wa)return!1;a="on"+a;var b=a in document;b||(b=document.createElement("div"),b.setAttribute(a,"return;"),b="function"===typeof b[a]);return b}function Uf(a){a.topLevelType=null;a.nativeEvent=null;a.targetInst=null;a.ancestors.length=0;10>qc.length&&qc.push(a)}function Vf(a,b,c,d){if(qc.length){var e=qc.pop();e.topLevelType=a;e.eventSystemFlags=d;e.nativeEvent=b;e.targetInst=c;return e}return{topLevelType:a,eventSystemFlags:d,nativeEvent:b,targetInst:c,ancestors:[]}}function Wf(a){var b=
a.targetInst,c=b;do{if(!c){a.ancestors.push(c);break}var d=c;if(3===d.tag)d=d.stateNode.containerInfo;else{for(;d.return;)d=d.return;d=3!==d.tag?null:d.stateNode.containerInfo}if(!d)break;b=c.tag;5!==b&&6!==b||a.ancestors.push(c);c=Bb(d)}while(c);for(c=0;c<a.ancestors.length;c++){b=a.ancestors[c];var e=Ld(a.nativeEvent);d=a.topLevelType;var f=a.nativeEvent,g=a.eventSystemFlags;0===c&&(g|=64);for(var h=null,m=0;m<jc.length;m++){var n=jc[m];n&&(n=n.extractEvents(d,b,f,e,g))&&(h=jb(h,n))}pc(h)}}function Md(a,
b,c){if(!c.has(a)){switch(a){case "scroll":Cb(b,"scroll",!0);break;case "focus":case "blur":Cb(b,"focus",!0);Cb(b,"blur",!0);c.set("blur",null);c.set("focus",null);break;case "cancel":case "close":Tf(a)&&Cb(b,a,!0);break;case "invalid":case "submit":case "reset":break;default:-1===Db.indexOf(a)&&w(a,b)}c.set(a,null)}}function xi(a,b){var c=Jd(b);Nd.forEach(function(a){Md(a,b,c)});yi.forEach(function(a){Md(a,b,c)})}function Od(a,b,c,d,e){return{blockedOn:a,topLevelType:b,eventSystemFlags:c|32,nativeEvent:e,
container:d}}function Xf(a,b){switch(a){case "focus":case "blur":xa=null;break;case "dragenter":case "dragleave":ya=null;break;case "mouseover":case "mouseout":za=null;break;case "pointerover":case "pointerout":Eb.delete(b.pointerId);break;case "gotpointercapture":case "lostpointercapture":Fb.delete(b.pointerId)}}function Gb(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a=Od(b,c,d,e,f),null!==b&&(b=Hb(b),null!==b&&Yf(b)),a;a.eventSystemFlags|=d;return a}function zi(a,b,c,d,e){switch(b){case "focus":return xa=
Gb(xa,a,b,c,d,e),!0;case "dragenter":return ya=Gb(ya,a,b,c,d,e),!0;case "mouseover":return za=Gb(za,a,b,c,d,e),!0;case "pointerover":var f=e.pointerId;Eb.set(f,Gb(Eb.get(f)||null,a,b,c,d,e));return!0;case "gotpointercapture":return f=e.pointerId,Fb.set(f,Gb(Fb.get(f)||null,a,b,c,d,e)),!0}return!1}function Ai(a){var b=Bb(a.target);if(null!==b){var c=Na(b);if(null!==c)if(b=c.tag,13===b){if(b=Qf(c),null!==b){a.blockedOn=b;Pd(a.priority,function(){Bi(c)});return}}else if(3===b&&c.stateNode.hydrate){a.blockedOn=
3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}function rc(a){if(null!==a.blockedOn)return!1;var b=Qd(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);if(null!==b){var c=Hb(b);null!==c&&Yf(c);a.blockedOn=b;return!1}return!0}function Zf(a,b,c){rc(a)&&c.delete(b)}function Ci(){for(Rd=!1;0<fa.length;){var a=fa[0];if(null!==a.blockedOn){a=Hb(a.blockedOn);null!==a&&Di(a);break}var b=Qd(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);null!==b?a.blockedOn=b:fa.shift()}null!==
xa&&rc(xa)&&(xa=null);null!==ya&&rc(ya)&&(ya=null);null!==za&&rc(za)&&(za=null);Eb.forEach(Zf);Fb.forEach(Zf)}function Ib(a,b){a.blockedOn===b&&(a.blockedOn=null,Rd||(Rd=!0,$f(ag,Ci)))}function bg(a){if(0<fa.length){Ib(fa[0],a);for(var b=1;b<fa.length;b++){var c=fa[b];c.blockedOn===a&&(c.blockedOn=null)}}null!==xa&&Ib(xa,a);null!==ya&&Ib(ya,a);null!==za&&Ib(za,a);b=function(b){return Ib(b,a)};Eb.forEach(b);Fb.forEach(b);for(b=0;b<Jb.length;b++)c=Jb[b],c.blockedOn===a&&(c.blockedOn=null);for(;0<Jb.length&&
(b=Jb[0],null===b.blockedOn);)Ai(b),null===b.blockedOn&&Jb.shift()}function Sd(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1],f="on"+(e[0].toUpperCase()+e.slice(1));f={phasedRegistrationNames:{bubbled:f,captured:f+"Capture"},dependencies:[d],eventPriority:b};Td.set(d,b);cg.set(d,f);dg[e]=f}}function w(a,b){Cb(b,a,!1)}function Cb(a,b,c){var d=Td.get(b);switch(void 0===d?2:d){case 0:d=Ei.bind(null,b,1,a);break;case 1:d=Fi.bind(null,b,1,a);break;default:d=sc.bind(null,b,1,a)}c?a.addEventListener(b,
d,!0):a.addEventListener(b,d,!1)}function Ei(a,b,c,d){Oa||vd();var e=sc,f=Oa;Oa=!0;try{eg(e,a,b,c,d)}finally{(Oa=f)||ud()}}function Fi(a,b,c,d){Gi(Hi,sc.bind(null,a,b,c,d))}function sc(a,b,c,d){if(tc)if(0<fa.length&&-1<Nd.indexOf(a))a=Od(null,a,b,c,d),fa.push(a);else{var e=Qd(a,b,c,d);if(null===e)Xf(a,d);else if(-1<Nd.indexOf(a))a=Od(e,a,b,c,d),fa.push(a);else if(!zi(e,a,b,c,d)){Xf(a,d);a=Vf(a,d,null,b);try{uf(Wf,a)}finally{Uf(a)}}}}function Qd(a,b,c,d){c=Ld(d);c=Bb(c);if(null!==c){var e=Na(c);if(null===
e)c=null;else{var f=e.tag;if(13===f){c=Qf(e);if(null!==c)return c;c=null}else if(3===f){if(e.stateNode.hydrate)return 3===e.tag?e.stateNode.containerInfo:null;c=null}else e!==c&&(c=null)}}a=Vf(a,d,c,b);try{uf(Wf,a)}finally{Uf(a)}return null}function fg(a,b,c){return null==b||"boolean"===typeof b||""===b?"":c||"number"!==typeof b||0===b||Kb.hasOwnProperty(a)&&Kb[a]?(""+b).trim():b+"px"}function gg(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf("--"),e=fg(c,b[c],d);"float"===
c&&(c="cssFloat");d?a.setProperty(c,e):a[c]=e}}function Ud(a,b){if(b){if(Ii[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(k(137,a,""));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(k(60));if(!("object"===typeof b.dangerouslySetInnerHTML&&"__html"in b.dangerouslySetInnerHTML))throw Error(k(61));}if(null!=b.style&&"object"!==typeof b.style)throw Error(k(62,""));}}function Vd(a,b){if(-1===a.indexOf("-"))return"string"===typeof b.is;switch(a){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":return!1;
default:return!0}}function oa(a,b){a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument;var c=Jd(a);b=rd[b];for(var d=0;d<b.length;d++)Md(b[d],a,c)}function uc(){}function Wd(a){a=a||("undefined"!==typeof document?document:void 0);if("undefined"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}function hg(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function ig(a,b){var c=hg(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,
offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=hg(c)}}function jg(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?jg(a,b.parentNode):"contains"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}function kg(){for(var a=window,b=Wd();b instanceof a.HTMLIFrameElement;){try{var c="string"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Wd(a.document)}return b}
function Xd(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&("input"===b&&("text"===a.type||"search"===a.type||"tel"===a.type||"url"===a.type||"password"===a.type)||"textarea"===b||"true"===a.contentEditable)}function lg(a,b){switch(a){case "button":case "input":case "select":case "textarea":return!!b.autoFocus}return!1}function Yd(a,b){return"textarea"===a||"option"===a||"noscript"===a||"string"===typeof b.children||"number"===typeof b.children||"object"===typeof b.dangerouslySetInnerHTML&&
null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}function kb(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function mg(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(c===ng||c===Zd||c===$d){if(0===b)return a;b--}else c===og&&b++}a=a.previousSibling}return null}function Bb(a){var b=a[Aa];if(b)return b;for(var c=a.parentNode;c;){if(b=c[Lb]||c[Aa]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=mg(a);null!==
a;){if(c=a[Aa])return c;a=mg(a)}return b}a=c;c=a.parentNode}return null}function Hb(a){a=a[Aa]||a[Lb];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function Pa(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(k(33));}function ae(a){return a[vc]||null}function pa(a){do a=a.return;while(a&&5!==a.tag);return a?a:null}function pg(a,b){var c=a.stateNode;if(!c)return null;var d=td(c);if(!d)return null;c=d[b];a:switch(b){case "onClick":case "onClickCapture":case "onDoubleClick":case "onDoubleClickCapture":case "onMouseDown":case "onMouseDownCapture":case "onMouseMove":case "onMouseMoveCapture":case "onMouseUp":case "onMouseUpCapture":case "onMouseEnter":(d=
!d.disabled)||(a=a.type,d=!("button"===a||"input"===a||"select"===a||"textarea"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&"function"!==typeof c)throw Error(k(231,b,typeof c));return c}function qg(a,b,c){if(b=pg(a,c.dispatchConfig.phasedRegistrationNames[b]))c._dispatchListeners=jb(c._dispatchListeners,b),c._dispatchInstances=jb(c._dispatchInstances,a)}function Ji(a){if(a&&a.dispatchConfig.phasedRegistrationNames){for(var b=a._targetInst,c=[];b;)c.push(b),b=pa(b);for(b=c.length;0<b--;)qg(c[b],
"captured",a);for(b=0;b<c.length;b++)qg(c[b],"bubbled",a)}}function be(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=pg(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=jb(c._dispatchListeners,b),c._dispatchInstances=jb(c._dispatchInstances,a))}function Ki(a){a&&a.dispatchConfig.registrationName&&be(a._targetInst,null,a)}function lb(a){Kd(a,Ji)}function rg(){if(wc)return wc;var a,b=ce,c=b.length,d,e="value"in Ba?Ba.value:Ba.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=
c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return wc=e.slice(a,1<d?1-d:void 0)}function xc(){return!0}function yc(){return!1}function R(a,b,c,d){this.dispatchConfig=a;this._targetInst=b;this.nativeEvent=c;a=this.constructor.Interface;for(var e in a)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):"target"===e?this.target=d:this[e]=c[e]);this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?xc:yc;this.isPropagationStopped=yc;return this}function Li(a,b,c,d){if(this.eventPool.length){var e=
this.eventPool.pop();this.call(e,a,b,c,d);return e}return new this(a,b,c,d)}function Mi(a){if(!(a instanceof this))throw Error(k(279));a.destructor();10>this.eventPool.length&&this.eventPool.push(a)}function sg(a){a.eventPool=[];a.getPooled=Li;a.release=Mi}function tg(a,b){switch(a){case "keyup":return-1!==Ni.indexOf(b.keyCode);case "keydown":return 229!==b.keyCode;case "keypress":case "mousedown":case "blur":return!0;default:return!1}}function ug(a){a=a.detail;return"object"===typeof a&&"data"in
a?a.data:null}function Oi(a,b){switch(a){case "compositionend":return ug(b);case "keypress":if(32!==b.which)return null;vg=!0;return wg;case "textInput":return a=b.data,a===wg&&vg?null:a;default:return null}}function Pi(a,b){if(mb)return"compositionend"===a||!de&&tg(a,b)?(a=rg(),wc=ce=Ba=null,mb=!1,a):null;switch(a){case "paste":return null;case "keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;
case "compositionend":return xg&&"ko"!==b.locale?null:b.data;default:return null}}function yg(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===b?!!Qi[a.type]:"textarea"===b?!0:!1}function zg(a,b,c){a=R.getPooled(Ag.change,a,b,c);a.type="change";sf(c);lb(a);return a}function Ri(a){pc(a)}function zc(a){var b=Pa(a);if(Gf(b))return a}function Si(a,b){if("change"===a)return b}function Bg(){Mb&&(Mb.detachEvent("onpropertychange",Cg),Nb=Mb=null)}function Cg(a){if("value"===a.propertyName&&
zc(Nb))if(a=zg(Nb,a,Ld(a)),Oa)pc(a);else{Oa=!0;try{ee(Ri,a)}finally{Oa=!1,ud()}}}function Ti(a,b,c){"focus"===a?(Bg(),Mb=b,Nb=c,Mb.attachEvent("onpropertychange",Cg)):"blur"===a&&Bg()}function Ui(a,b){if("selectionchange"===a||"keyup"===a||"keydown"===a)return zc(Nb)}function Vi(a,b){if("click"===a)return zc(b)}function Wi(a,b){if("input"===a||"change"===a)return zc(b)}function Xi(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Yi[a])?!!b[a]:!1}function fe(a){return Xi}
function Zi(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}function Ob(a,b){if(Qa(a,b))return!0;if("object"!==typeof a||null===a||"object"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!$i.call(b,c[d])||!Qa(a[c[d]],b[c[d]]))return!1;return!0}function Dg(a,b){var c=b.window===b?b.document:9===b.nodeType?b:b.ownerDocument;if(ge||null==nb||nb!==Wd(c))return null;c=nb;"selectionStart"in c&&Xd(c)?c={start:c.selectionStart,
end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset});return Pb&&Ob(Pb,c)?null:(Pb=c,a=R.getPooled(Eg.select,he,a,b),a.type="select",a.target=nb,lb(a),a)}function Ac(a){var b=a.keyCode;"charCode"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function q(a,b){0>ob||(a.current=ie[ob],ie[ob]=null,ob--)}function y(a,b,c){ob++;
ie[ob]=a.current;a.current=b}function pb(a,b){var c=a.type.contextTypes;if(!c)return Ca;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function N(a){a=a.childContextTypes;return null!==a&&void 0!==a}function Fg(a,b,c){if(B.current!==Ca)throw Error(k(168));y(B,b);y(G,c)}
function Gg(a,b,c){var d=a.stateNode;a=b.childContextTypes;if("function"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in a))throw Error(k(108,na(b)||"Unknown",e));return M({},c,{},d)}function Bc(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ca;Ra=B.current;y(B,a);y(G,G.current);return!0}function Hg(a,b,c){var d=a.stateNode;if(!d)throw Error(k(169));c?(a=Gg(a,b,Ra),d.__reactInternalMemoizedMergedChildContext=a,q(G),q(B),y(B,a)):q(G);y(G,c)}function Cc(){switch(aj()){case Dc:return 99;
case Ig:return 98;case Jg:return 97;case Kg:return 96;case Lg:return 95;default:throw Error(k(332));}}function Mg(a){switch(a){case 99:return Dc;case 98:return Ig;case 97:return Jg;case 96:return Kg;case 95:return Lg;default:throw Error(k(332));}}function Da(a,b){a=Mg(a);return bj(a,b)}function Ng(a,b,c){a=Mg(a);return je(a,b,c)}function Og(a){null===qa?(qa=[a],Ec=je(Dc,Pg)):qa.push(a);return Qg}function ha(){if(null!==Ec){var a=Ec;Ec=null;Rg(a)}Pg()}function Pg(){if(!ke&&null!==qa){ke=!0;var a=0;
try{var b=qa;Da(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}});qa=null}catch(c){throw null!==qa&&(qa=qa.slice(a+1)),je(Dc,ha),c;}finally{ke=!1}}}function Fc(a,b,c){c/=10;return 1073741821-(((1073741821-a+b/10)/c|0)+1)*c}function aa(a,b){if(a&&a.defaultProps){b=M({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c])}return b}function le(){Gc=qb=Hc=null}function me(a){var b=Ic.current;q(Ic);a.type._context._currentValue=b}function Sg(a,b){for(;null!==a;){var c=
a.alternate;if(a.childExpirationTime<b)a.childExpirationTime=b,null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);else if(null!==c&&c.childExpirationTime<b)c.childExpirationTime=b;else break;a=a.return}}function rb(a,b){Hc=a;Gc=qb=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(a.expirationTime>=b&&(ia=!0),a.firstContext=null)}function W(a,b){if(Gc!==a&&!1!==b&&0!==b){if("number"!==typeof b||1073741823===b)Gc=a,b=1073741823;b={context:a,observedBits:b,next:null};if(null===qb){if(null===
Hc)throw Error(k(308));qb=b;Hc.dependencies={expirationTime:0,firstContext:b,responders:null}}else qb=qb.next=b}return a._currentValue}function ne(a){a.updateQueue={baseState:a.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function oe(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,baseQueue:a.baseQueue,shared:a.shared,effects:a.effects})}function Ea(a,b){a={expirationTime:a,suspenseConfig:b,tag:Tg,payload:null,callback:null,next:null};return a.next=
a}function Fa(a,b){a=a.updateQueue;if(null!==a){a=a.shared;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}}function Ug(a,b){var c=a.alternate;null!==c&&oe(c,a);a=a.updateQueue;c=a.baseQueue;null===c?(a.baseQueue=b.next=b,b.next=b):(b.next=c.next,c.next=b)}function Qb(a,b,c,d){var e=a.updateQueue;Ga=!1;var f=e.baseQueue,g=e.shared.pending;if(null!==g){if(null!==f){var h=f.next;f.next=g.next;g.next=h}f=g;e.shared.pending=null;h=a.alternate;null!==h&&(h=h.updateQueue,null!==h&&
(h.baseQueue=g))}if(null!==f){h=f.next;var m=e.baseState,n=0,k=null,ba=null,l=null;if(null!==h){var p=h;do{g=p.expirationTime;if(g<d){var t={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===l?(ba=l=t,k=m):l=l.next=t;g>n&&(n=g)}else{null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null});Vg(g,p.suspenseConfig);a:{var q=a,r=p;g=b;t=c;switch(r.tag){case 1:q=
r.payload;if("function"===typeof q){m=q.call(t,m,g);break a}m=q;break a;case 3:q.effectTag=q.effectTag&-4097|64;case Tg:q=r.payload;g="function"===typeof q?q.call(t,m,g):q;if(null===g||void 0===g)break a;m=M({},m,g);break a;case Jc:Ga=!0}}null!==p.callback&&(a.effectTag|=32,g=e.effects,null===g?e.effects=[p]:g.push(p))}p=p.next;if(null===p||p===h)if(g=e.shared.pending,null===g)break;else p=f.next=g.next,g.next=h,e.baseQueue=f=g,e.shared.pending=null}while(1)}null===l?k=m:l.next=ba;e.baseState=k;e.baseQueue=
l;Kc(n);a.expirationTime=n;a.memoizedState=m}}function Wg(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=e;e=c;if("function"!==typeof d)throw Error(k(191,d));d.call(e)}}}function Lc(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:M({},b,c);a.memoizedState=c;0===a.expirationTime&&(a.updateQueue.baseState=c)}function Xg(a,b,c,d,e,f,g){a=a.stateNode;return"function"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,
f,g):b.prototype&&b.prototype.isPureReactComponent?!Ob(c,d)||!Ob(e,f):!0}function Yg(a,b,c){var d=!1,e=Ca;var f=b.contextType;"object"===typeof f&&null!==f?f=W(f):(e=N(b)?Ra:B.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?pb(a,e):Ca);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Mc;a.stateNode=b;b._reactInternalFiber=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}function Zg(a,
b,c,d){a=b.state;"function"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);"function"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Mc.enqueueReplaceState(b,b.state,null)}function pe(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=$g;ne(a);var f=b.contextType;"object"===typeof f&&null!==f?e.context=W(f):(f=N(b)?Ra:B.current,e.context=pb(a,f));Qb(a,c,e,d);e.state=a.memoizedState;f=b.getDerivedStateFromProps;
"function"===typeof f&&(Lc(a,b,f,c),e.state=a.memoizedState);"function"===typeof b.getDerivedStateFromProps||"function"===typeof e.getSnapshotBeforeUpdate||"function"!==typeof e.UNSAFE_componentWillMount&&"function"!==typeof e.componentWillMount||(b=e.state,"function"===typeof e.componentWillMount&&e.componentWillMount(),"function"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Mc.enqueueReplaceState(e,e.state,null),Qb(a,c,e,d),e.state=a.memoizedState);"function"===
typeof e.componentDidMount&&(a.effectTag|=4)}function Rb(a,b,c){a=c.ref;if(null!==a&&"function"!==typeof a&&"object"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(k(309));var d=c.stateNode}if(!d)throw Error(k(147,a));var e=""+a;if(null!==b&&null!==b.ref&&"function"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===$g&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}if("string"!==typeof a)throw Error(k(284));if(!c._owner)throw Error(k(290,
a));}return a}function Nc(a,b){if("textarea"!==a.type)throw Error(k(31,"[object Object]"===Object.prototype.toString.call(b)?"object with keys {"+Object.keys(b).join(", ")+"}":b,""));}function ah(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,
b),b=b.sibling;return a}function e(a,b){a=Sa(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.effectTag=2,c):d;b.effectTag=2;return c}function g(b){a&&null===b.alternate&&(b.effectTag=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=qe(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function m(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props),d.ref=Rb(a,b,c),d.return=a,d;d=Oc(c.type,
c.key,c.props,null,a.mode,d);d.ref=Rb(a,b,c);d.return=a;return d}function n(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=re(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function l(a,b,c,d,f){if(null===b||7!==b.tag)return b=Ha(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function ba(a,b,c){if("string"===typeof b||"number"===typeof b)return b=qe(""+b,a.mode,c),b.return=a,b;if("object"===
typeof b&&null!==b){switch(b.$$typeof){case Pc:return c=Oc(b.type,b.key,b.props,null,a.mode,c),c.ref=Rb(a,null,b),c.return=a,c;case gb:return b=re(b,a.mode,c),b.return=a,b}if(Qc(b)||zb(b))return b=Ha(b,a.mode,c,null),b.return=a,b;Nc(a,b)}return null}function p(a,b,c,d){var e=null!==b?b.key:null;if("string"===typeof c||"number"===typeof c)return null!==e?null:h(a,b,""+c,d);if("object"===typeof c&&null!==c){switch(c.$$typeof){case Pc:return c.key===e?c.type===Ma?l(a,b,c.props.children,d,e):m(a,b,c,
d):null;case gb:return c.key===e?n(a,b,c,d):null}if(Qc(c)||zb(c))return null!==e?null:l(a,b,c,d,null);Nc(a,c)}return null}function t(a,b,c,d,e){if("string"===typeof d||"number"===typeof d)return a=a.get(c)||null,h(b,a,""+d,e);if("object"===typeof d&&null!==d){switch(d.$$typeof){case Pc:return a=a.get(null===d.key?c:d.key)||null,d.type===Ma?l(b,a,d.props.children,e,d.key):m(b,a,d,e);case gb:return a=a.get(null===d.key?c:d.key)||null,n(b,a,d,e)}if(Qc(d)||zb(d))return a=a.get(c)||null,l(b,a,d,e,null);
Nc(b,d)}return null}function q(e,g,h,m){for(var n=null,k=null,l=g,r=g=0,C=null;null!==l&&r<h.length;r++){l.index>r?(C=l,l=null):C=l.sibling;var O=p(e,l,h[r],m);if(null===O){null===l&&(l=C);break}a&&l&&null===O.alternate&&b(e,l);g=f(O,g,r);null===k?n=O:k.sibling=O;k=O;l=C}if(r===h.length)return c(e,l),n;if(null===l){for(;r<h.length;r++)l=ba(e,h[r],m),null!==l&&(g=f(l,g,r),null===k?n=l:k.sibling=l,k=l);return n}for(l=d(e,l);r<h.length;r++)C=t(l,e,r,h[r],m),null!==C&&(a&&null!==C.alternate&&l.delete(null===
C.key?r:C.key),g=f(C,g,r),null===k?n=C:k.sibling=C,k=C);a&&l.forEach(function(a){return b(e,a)});return n}function w(e,g,h,n){var m=zb(h);if("function"!==typeof m)throw Error(k(150));h=m.call(h);if(null==h)throw Error(k(151));for(var l=m=null,r=g,C=g=0,O=null,v=h.next();null!==r&&!v.done;C++,v=h.next()){r.index>C?(O=r,r=null):O=r.sibling;var q=p(e,r,v.value,n);if(null===q){null===r&&(r=O);break}a&&r&&null===q.alternate&&b(e,r);g=f(q,g,C);null===l?m=q:l.sibling=q;l=q;r=O}if(v.done)return c(e,r),m;
if(null===r){for(;!v.done;C++,v=h.next())v=ba(e,v.value,n),null!==v&&(g=f(v,g,C),null===l?m=v:l.sibling=v,l=v);return m}for(r=d(e,r);!v.done;C++,v=h.next())v=t(r,e,C,v.value,n),null!==v&&(a&&null!==v.alternate&&r.delete(null===v.key?C:v.key),g=f(v,g,C),null===l?m=v:l.sibling=v,l=v);a&&r.forEach(function(a){return b(e,a)});return m}return function(a,d,f,h){var m="object"===typeof f&&null!==f&&f.type===Ma&&null===f.key;m&&(f=f.props.children);var n="object"===typeof f&&null!==f;if(n)switch(f.$$typeof){case Pc:a:{n=
f.key;for(m=d;null!==m;){if(m.key===n){switch(m.tag){case 7:if(f.type===Ma){c(a,m.sibling);d=e(m,f.props.children);d.return=a;a=d;break a}break;default:if(m.elementType===f.type){c(a,m.sibling);d=e(m,f.props);d.ref=Rb(a,m,f);d.return=a;a=d;break a}}c(a,m);break}else b(a,m);m=m.sibling}f.type===Ma?(d=Ha(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Oc(f.type,f.key,f.props,null,a.mode,h),h.ref=Rb(a,d,f),h.return=a,a=h)}return g(a);case gb:a:{for(m=f.key;null!==d;){if(d.key===m)if(4===d.tag&&d.stateNode.containerInfo===
f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=re(f,a.mode,h);d.return=a;a=d}return g(a)}if("string"===typeof f||"number"===typeof f)return f=""+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):(c(a,d),d=qe(f,a.mode,h),d.return=a,a=d),g(a);if(Qc(f))return q(a,d,f,h);if(zb(f))return w(a,d,f,h);n&&Nc(a,f);if("undefined"===typeof f&&!m)switch(a.tag){case 1:case 0:throw a=
a.type,Error(k(152,a.displayName||a.name||"Component"));}return c(a,d)}}function Ta(a){if(a===Sb)throw Error(k(174));return a}function se(a,b){y(Tb,b);y(Ub,a);y(ja,Sb);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:Hd(null,"");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=Hd(b,a)}q(ja);y(ja,b)}function tb(a){q(ja);q(Ub);q(Tb)}function bh(a){Ta(Tb.current);var b=Ta(ja.current);var c=Hd(b,a.type);b!==c&&(y(Ub,a),y(ja,c))}function te(a){Ub.current===
a&&(q(ja),q(Ub))}function Rc(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||c.data===$d||c.data===Zd))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.effectTag&64))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}function ue(a,b){return{responder:a,props:b}}
function S(){throw Error(k(321));}function ve(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!Qa(a[c],b[c]))return!1;return!0}function we(a,b,c,d,e,f){Ia=f;z=b;b.memoizedState=null;b.updateQueue=null;b.expirationTime=0;Sc.current=null===a||null===a.memoizedState?dj:ej;a=c(d,e);if(b.expirationTime===Ia){f=0;do{b.expirationTime=0;if(!(25>f))throw Error(k(301));f+=1;J=K=null;b.updateQueue=null;Sc.current=fj;a=c(d,e)}while(b.expirationTime===Ia)}Sc.current=Tc;b=null!==K&&null!==K.next;
Ia=0;J=K=z=null;Uc=!1;if(b)throw Error(k(300));return a}function ub(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===J?z.memoizedState=J=a:J=J.next=a;return J}function vb(){if(null===K){var a=z.alternate;a=null!==a?a.memoizedState:null}else a=K.next;var b=null===J?z.memoizedState:J.next;if(null!==b)J=b,K=a;else{if(null===a)throw Error(k(310));K=a;a={memoizedState:K.memoizedState,baseState:K.baseState,baseQueue:K.baseQueue,queue:K.queue,next:null};null===J?z.memoizedState=
J=a:J=J.next=a}return J}function Ua(a,b){return"function"===typeof b?b(a):b}function Vc(a,b,c){b=vb();c=b.queue;if(null===c)throw Error(k(311));c.lastRenderedReducer=a;var d=K,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){e=e.next;d=d.baseState;var h=g=f=null,m=e;do{var n=m.expirationTime;if(n<Ia){var l={expirationTime:m.expirationTime,suspenseConfig:m.suspenseConfig,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,
next:null};null===h?(g=h=l,f=d):h=h.next=l;n>z.expirationTime&&(z.expirationTime=n,Kc(n))}else null!==h&&(h=h.next={expirationTime:1073741823,suspenseConfig:m.suspenseConfig,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,next:null}),Vg(n,m.suspenseConfig),d=m.eagerReducer===a?m.eagerState:a(d,m.action);m=m.next}while(null!==m&&m!==e);null===h?f=d:h.next=g;Qa(d,b.memoizedState)||(ia=!0);b.memoizedState=d;b.baseState=f;b.baseQueue=h;c.lastRenderedState=d}return[b.memoizedState,
c.dispatch]}function Wc(a,b,c){b=vb();c=b.queue;if(null===c)throw Error(k(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);Qa(f,b.memoizedState)||(ia=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}function xe(a){var b=ub();"function"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue={pending:null,dispatch:null,lastRenderedReducer:Ua,
lastRenderedState:a};a=a.dispatch=ch.bind(null,z,a);return[b.memoizedState,a]}function ye(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=z.updateQueue;null===b?(b={lastEffect:null},z.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function dh(a){return vb().memoizedState}function ze(a,b,c,d){var e=ub();z.effectTag|=a;e.memoizedState=ye(1|b,c,void 0,void 0===d?null:d)}function Ae(a,b,c,d){var e=vb();
d=void 0===d?null:d;var f=void 0;if(null!==K){var g=K.memoizedState;f=g.destroy;if(null!==d&&ve(d,g.deps)){ye(b,c,f,d);return}}z.effectTag|=a;e.memoizedState=ye(1|b,c,f,d)}function eh(a,b){return ze(516,4,a,b)}function Xc(a,b){return Ae(516,4,a,b)}function fh(a,b){return Ae(4,2,a,b)}function gh(a,b){if("function"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function hh(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;
return Ae(4,2,gh.bind(null,b,a),c)}function Be(a,b){}function ih(a,b){ub().memoizedState=[a,void 0===b?null:b];return a}function Yc(a,b){var c=vb();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ve(b,d[1]))return d[0];c.memoizedState=[a,b];return a}function jh(a,b){var c=vb();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ve(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}function Ce(a,b,c){var d=Cc();Da(98>d?98:d,function(){a(!0)});Da(97<d?97:d,function(){var d=
X.suspense;X.suspense=void 0===b?null:b;try{a(!1),c()}finally{X.suspense=d}})}function ch(a,b,c){var d=ka(),e=Vb.suspense;d=Va(d,a,e);e={expirationTime:d,suspenseConfig:e,action:c,eagerReducer:null,eagerState:null,next:null};var f=b.pending;null===f?e.next=e:(e.next=f.next,f.next=e);b.pending=e;f=a.alternate;if(a===z||null!==f&&f===z)Uc=!0,e.expirationTime=Ia,z.expirationTime=Ia;else{if(0===a.expirationTime&&(null===f||0===f.expirationTime)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,
h=f(g,c);e.eagerReducer=f;e.eagerState=h;if(Qa(h,g))return}catch(m){}finally{}Ja(a,d)}}function kh(a,b){var c=la(5,null,null,0);c.elementType="DELETED";c.type="DELETED";c.stateNode=b;c.return=a;c.effectTag=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function lh(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=""===a.pendingProps||3!==b.nodeType?
null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}function De(a){if(Wa){var b=Ka;if(b){var c=b;if(!lh(a,b)){b=kb(c.nextSibling);if(!b||!lh(a,b)){a.effectTag=a.effectTag&-1025|2;Wa=!1;ra=a;return}kh(ra,c)}ra=a;Ka=kb(b.firstChild)}else a.effectTag=a.effectTag&-1025|2,Wa=!1,ra=a}}function mh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;ra=a}function Zc(a){if(a!==ra)return!1;if(!Wa)return mh(a),Wa=!0,!1;var b=a.type;if(5!==a.tag||"head"!==b&&"body"!==
b&&!Yd(b,a.memoizedProps))for(b=Ka;b;)kh(a,b),b=kb(b.nextSibling);mh(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(k(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(c===og){if(0===b){Ka=kb(a.nextSibling);break a}b--}else c!==ng&&c!==Zd&&c!==$d||b++}a=a.nextSibling}Ka=null}}else Ka=ra?kb(a.stateNode.nextSibling):null;return!0}function Ee(){Ka=ra=null;Wa=!1}function T(a,b,c,d){b.child=null===a?Fe(b,null,c,d):wb(b,a.child,c,d)}function nh(a,
b,c,d,e){c=c.render;var f=b.ref;rb(b,e);d=we(a,b,c,d,f,e);if(null!==a&&!ia)return b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),sa(a,b,e);b.effectTag|=1;T(a,b,d,e);return b.child}function oh(a,b,c,d,e,f){if(null===a){var g=c.type;if("function"===typeof g&&!Ge(g)&&void 0===g.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=g,ph(a,b,g,d,e,f);a=Oc(c.type,null,d,null,b.mode,f);a.ref=b.ref;a.return=b;return b.child=a}g=a.child;if(e<
f&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:Ob,c(e,d)&&a.ref===b.ref))return sa(a,b,f);b.effectTag|=1;a=Sa(g,d);a.ref=b.ref;a.return=b;return b.child=a}function ph(a,b,c,d,e,f){return null!==a&&Ob(a.memoizedProps,d)&&a.ref===b.ref&&(ia=!1,e<f)?(b.expirationTime=a.expirationTime,sa(a,b,f)):He(a,b,c,d,f)}function qh(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.effectTag|=128}function He(a,b,c,d,e){var f=N(c)?Ra:B.current;f=pb(b,f);rb(b,e);c=we(a,b,c,d,f,e);if(null!==a&&!ia)return b.updateQueue=
a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),sa(a,b,e);b.effectTag|=1;T(a,b,c,e);return b.child}function rh(a,b,c,d,e){if(N(c)){var f=!0;Bc(b)}else f=!1;rb(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),Yg(b,c,d),pe(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var m=g.context,n=c.contextType;"object"===typeof n&&null!==n?n=W(n):(n=N(c)?Ra:B.current,n=pb(b,n));var l=c.getDerivedStateFromProps,k="function"===
typeof l||"function"===typeof g.getSnapshotBeforeUpdate;k||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||m!==n)&&Zg(b,g,d,n);Ga=!1;var p=b.memoizedState;g.state=p;Qb(b,d,g,e);m=b.memoizedState;h!==d||p!==m||G.current||Ga?("function"===typeof l&&(Lc(b,c,l,d),m=b.memoizedState),(h=Ga||Xg(b,c,h,d,p,m,n))?(k||"function"!==typeof g.UNSAFE_componentWillMount&&"function"!==typeof g.componentWillMount||("function"===typeof g.componentWillMount&&
g.componentWillMount(),"function"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),"function"===typeof g.componentDidMount&&(b.effectTag|=4)):("function"===typeof g.componentDidMount&&(b.effectTag|=4),b.memoizedProps=d,b.memoizedState=m),g.props=d,g.state=m,g.context=n,d=h):("function"===typeof g.componentDidMount&&(b.effectTag|=4),d=!1)}else g=b.stateNode,oe(a,b),h=b.memoizedProps,g.props=b.type===b.elementType?h:aa(b.type,h),m=g.context,n=c.contextType,"object"===typeof n&&null!==
n?n=W(n):(n=N(c)?Ra:B.current,n=pb(b,n)),l=c.getDerivedStateFromProps,(k="function"===typeof l||"function"===typeof g.getSnapshotBeforeUpdate)||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||m!==n)&&Zg(b,g,d,n),Ga=!1,m=b.memoizedState,g.state=m,Qb(b,d,g,e),p=b.memoizedState,h!==d||m!==p||G.current||Ga?("function"===typeof l&&(Lc(b,c,l,d),p=b.memoizedState),(l=Ga||Xg(b,c,h,d,m,p,n))?(k||"function"!==typeof g.UNSAFE_componentWillUpdate&&
"function"!==typeof g.componentWillUpdate||("function"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,p,n),"function"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,p,n)),"function"===typeof g.componentDidUpdate&&(b.effectTag|=4),"function"===typeof g.getSnapshotBeforeUpdate&&(b.effectTag|=256)):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&m===
a.memoizedState||(b.effectTag|=256),b.memoizedProps=d,b.memoizedState=p),g.props=d,g.state=p,g.context=n,d=l):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=256),d=!1);return Ie(a,b,c,d,f,e)}function Ie(a,b,c,d,e,f){qh(a,b);var g=0!==(b.effectTag&64);if(!d&&!g)return e&&Hg(b,c,!1),sa(a,b,f);d=b.stateNode;gj.current=b;var h=g&&"function"!==typeof c.getDerivedStateFromError?
null:d.render();b.effectTag|=1;null!==a&&g?(b.child=wb(b,a.child,null,f),b.child=wb(b,null,h,f)):T(a,b,h,f);b.memoizedState=d.state;e&&Hg(b,c,!0);return b.child}function sh(a){var b=a.stateNode;b.pendingContext?Fg(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Fg(a,b.context,!1);se(a,b.containerInfo)}function th(a,b,c){var d=b.mode,e=b.pendingProps,f=D.current,g=!1,h;(h=0!==(b.effectTag&64))||(h=0!==(f&2)&&(null===a||null!==a.memoizedState));h?(g=!0,b.effectTag&=-65):null!==a&&null===
a.memoizedState||void 0===e.fallback||!0===e.unstable_avoidThisFallback||(f|=1);y(D,f&1);if(null===a){void 0!==e.fallback&&De(b);if(g){g=e.fallback;e=Ha(null,d,0,null);e.return=b;if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==a;)a.return=e,a=a.sibling;c=Ha(g,d,c,null);c.return=b;e.sibling=c;b.memoizedState=Je;b.child=e;return c}d=e.children;b.memoizedState=null;return b.child=Fe(b,null,d,c)}if(null!==a.memoizedState){a=a.child;d=a.sibling;if(g){e=e.fallback;
c=Sa(a,a.pendingProps);c.return=b;if(0===(b.mode&2)&&(g=null!==b.memoizedState?b.child.child:b.child,g!==a.child))for(c.child=g;null!==g;)g.return=c,g=g.sibling;d=Sa(d,e);d.return=b;c.sibling=d;c.childExpirationTime=0;b.memoizedState=Je;b.child=c;return d}c=wb(b,a.child,e.children,c);b.memoizedState=null;return b.child=c}a=a.child;if(g){g=e.fallback;e=Ha(null,d,0,null);e.return=b;e.child=a;null!==a&&(a.return=e);if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==
a;)a.return=e,a=a.sibling;c=Ha(g,d,c,null);c.return=b;e.sibling=c;c.effectTag|=2;e.childExpirationTime=0;b.memoizedState=Je;b.child=e;return c}b.memoizedState=null;return b.child=wb(b,a,e.children,c)}function uh(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);Sg(a.return,b)}function Ke(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailExpiration:0,tailMode:e,
lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailExpiration=0,g.tailMode=e,g.lastEffect=f)}function vh(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;T(a,b,d.children,c);d=D.current;if(0!==(d&2))d=d&1|2,b.effectTag|=64;else{if(null!==a&&0!==(a.effectTag&64))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&uh(a,c);else if(19===a.tag)uh(a,c);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===
a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}y(D,d);if(0===(b.mode&2))b.memoizedState=null;else switch(e){case "forwards":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===Rc(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);Ke(b,!1,e,c,f,b.lastEffect);break;case "backwards":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===Rc(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}Ke(b,
!0,c,null,f,b.lastEffect);break;case "together":Ke(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}function sa(a,b,c){null!==a&&(b.dependencies=a.dependencies);var d=b.expirationTime;0!==d&&Kc(d);if(b.childExpirationTime<c)return null;if(null!==a&&b.child!==a.child)throw Error(k(153));if(null!==b.child){a=b.child;c=Sa(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Sa(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}
function $c(a,b){switch(a.tailMode){case "hidden":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case "collapsed":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}function hj(a,b,c){var d=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return N(b.type)&&(q(G),q(B)),
null;case 3:return tb(),q(G),q(B),c=b.stateNode,c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),null!==a&&null!==a.child||!Zc(b)||(b.effectTag|=4),wh(b),null;case 5:te(b);c=Ta(Tb.current);var e=b.type;if(null!==a&&null!=b.stateNode)ij(a,b,e,d,c),a.ref!==b.ref&&(b.effectTag|=128);else{if(!d){if(null===b.stateNode)throw Error(k(166));return null}a=Ta(ja.current);if(Zc(b)){d=b.stateNode;e=b.type;var f=b.memoizedProps;d[Aa]=b;d[vc]=f;switch(e){case "iframe":case "object":case "embed":w("load",
d);break;case "video":case "audio":for(a=0;a<Db.length;a++)w(Db[a],d);break;case "source":w("error",d);break;case "img":case "image":case "link":w("error",d);w("load",d);break;case "form":w("reset",d);w("submit",d);break;case "details":w("toggle",d);break;case "input":Hf(d,f);w("invalid",d);oa(c,"onChange");break;case "select":d._wrapperState={wasMultiple:!!f.multiple};w("invalid",d);oa(c,"onChange");break;case "textarea":Kf(d,f),w("invalid",d),oa(c,"onChange")}Ud(e,f);a=null;for(var g in f)if(f.hasOwnProperty(g)){var h=
f[g];"children"===g?"string"===typeof h?d.textContent!==h&&(a=["children",h]):"number"===typeof h&&d.textContent!==""+h&&(a=["children",""+h]):db.hasOwnProperty(g)&&null!=h&&oa(c,g)}switch(e){case "input":mc(d);Jf(d,f,!0);break;case "textarea":mc(d);Mf(d);break;case "select":case "option":break;default:"function"===typeof f.onClick&&(d.onclick=uc)}c=a;b.updateQueue=c;null!==c&&(b.effectTag|=4)}else{g=9===c.nodeType?c:c.ownerDocument;"http://www.w3.org/1999/xhtml"===a&&(a=Nf(e));"http://www.w3.org/1999/xhtml"===
a?"script"===e?(a=g.createElement("div"),a.innerHTML="<script>\x3c/script>",a=a.removeChild(a.firstChild)):"string"===typeof d.is?a=g.createElement(e,{is:d.is}):(a=g.createElement(e),"select"===e&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,e);a[Aa]=b;a[vc]=d;jj(a,b,!1,!1);b.stateNode=a;g=Vd(e,d);switch(e){case "iframe":case "object":case "embed":w("load",a);h=d;break;case "video":case "audio":for(h=0;h<Db.length;h++)w(Db[h],a);h=d;break;case "source":w("error",a);
h=d;break;case "img":case "image":case "link":w("error",a);w("load",a);h=d;break;case "form":w("reset",a);w("submit",a);h=d;break;case "details":w("toggle",a);h=d;break;case "input":Hf(a,d);h=Cd(a,d);w("invalid",a);oa(c,"onChange");break;case "option":h=Fd(a,d);break;case "select":a._wrapperState={wasMultiple:!!d.multiple};h=M({},d,{value:void 0});w("invalid",a);oa(c,"onChange");break;case "textarea":Kf(a,d);h=Gd(a,d);w("invalid",a);oa(c,"onChange");break;default:h=d}Ud(e,h);var m=h;for(f in m)if(m.hasOwnProperty(f)){var n=
m[f];"style"===f?gg(a,n):"dangerouslySetInnerHTML"===f?(n=n?n.__html:void 0,null!=n&&xh(a,n)):"children"===f?"string"===typeof n?("textarea"!==e||""!==n)&&Wb(a,n):"number"===typeof n&&Wb(a,""+n):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(db.hasOwnProperty(f)?null!=n&&oa(c,f):null!=n&&xd(a,f,n,g))}switch(e){case "input":mc(a);Jf(a,d,!1);break;case "textarea":mc(a);Mf(a);break;case "option":null!=d.value&&a.setAttribute("value",""+va(d.value));break;case "select":a.multiple=
!!d.multiple;c=d.value;null!=c?hb(a,!!d.multiple,c,!1):null!=d.defaultValue&&hb(a,!!d.multiple,d.defaultValue,!0);break;default:"function"===typeof h.onClick&&(a.onclick=uc)}lg(e,d)&&(b.effectTag|=4)}null!==b.ref&&(b.effectTag|=128)}return null;case 6:if(a&&null!=b.stateNode)kj(a,b,a.memoizedProps,d);else{if("string"!==typeof d&&null===b.stateNode)throw Error(k(166));c=Ta(Tb.current);Ta(ja.current);Zc(b)?(c=b.stateNode,d=b.memoizedProps,c[Aa]=b,c.nodeValue!==d&&(b.effectTag|=4)):(c=(9===c.nodeType?
c:c.ownerDocument).createTextNode(d),c[Aa]=b,b.stateNode=c)}return null;case 13:q(D);d=b.memoizedState;if(0!==(b.effectTag&64))return b.expirationTime=c,b;c=null!==d;d=!1;null===a?void 0!==b.memoizedProps.fallback&&Zc(b):(e=a.memoizedState,d=null!==e,c||null===e||(e=a.child.sibling,null!==e&&(f=b.firstEffect,null!==f?(b.firstEffect=e,e.nextEffect=f):(b.firstEffect=b.lastEffect=e,e.nextEffect=null),e.effectTag=8)));if(c&&!d&&0!==(b.mode&2))if(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||
0!==(D.current&1))F===Xa&&(F=ad);else{if(F===Xa||F===ad)F=bd;0!==Xb&&null!==U&&(Ya(U,P),yh(U,Xb))}if(c||d)b.effectTag|=4;return null;case 4:return tb(),wh(b),null;case 10:return me(b),null;case 17:return N(b.type)&&(q(G),q(B)),null;case 19:q(D);d=b.memoizedState;if(null===d)return null;e=0!==(b.effectTag&64);f=d.rendering;if(null===f)if(e)$c(d,!1);else{if(F!==Xa||null!==a&&0!==(a.effectTag&64))for(f=b.child;null!==f;){a=Rc(f);if(null!==a){b.effectTag|=64;$c(d,!1);e=a.updateQueue;null!==e&&(b.updateQueue=
e,b.effectTag|=4);null===d.lastEffect&&(b.firstEffect=null);b.lastEffect=d.lastEffect;for(d=b.child;null!==d;)e=d,f=c,e.effectTag&=2,e.nextEffect=null,e.firstEffect=null,e.lastEffect=null,a=e.alternate,null===a?(e.childExpirationTime=0,e.expirationTime=f,e.child=null,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null):(e.childExpirationTime=a.childExpirationTime,e.expirationTime=a.expirationTime,e.child=a.child,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,
e.updateQueue=a.updateQueue,f=a.dependencies,e.dependencies=null===f?null:{expirationTime:f.expirationTime,firstContext:f.firstContext,responders:f.responders}),d=d.sibling;y(D,D.current&1|2);return b.child}f=f.sibling}}else{if(!e)if(a=Rc(f),null!==a){if(b.effectTag|=64,e=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.effectTag|=4),$c(d,!0),null===d.tail&&"hidden"===d.tailMode&&!f.alternate)return b=b.lastEffect=d.lastEffect,null!==b&&(b.nextEffect=null),null}else 2*Y()-d.renderingStartTime>d.tailExpiration&&
1<c&&(b.effectTag|=64,e=!0,$c(d,!1),b.expirationTime=b.childExpirationTime=c-1);d.isBackwards?(f.sibling=b.child,b.child=f):(c=d.last,null!==c?c.sibling=f:b.child=f,d.last=f)}return null!==d.tail?(0===d.tailExpiration&&(d.tailExpiration=Y()+500),c=d.tail,d.rendering=c,d.tail=c.sibling,d.lastEffect=b.lastEffect,d.renderingStartTime=Y(),c.sibling=null,b=D.current,y(D,e?b&1|2:b&1),c):null}throw Error(k(156,b.tag));}function lj(a,b){switch(a.tag){case 1:return N(a.type)&&(q(G),q(B)),b=a.effectTag,b&4096?
(a.effectTag=b&-4097|64,a):null;case 3:tb();q(G);q(B);b=a.effectTag;if(0!==(b&64))throw Error(k(285));a.effectTag=b&-4097|64;return a;case 5:return te(a),null;case 13:return q(D),b=a.effectTag,b&4096?(a.effectTag=b&-4097|64,a):null;case 19:return q(D),null;case 4:return tb(),null;case 10:return me(a),null;default:return null}}function Le(a,b){return{value:a,source:b,stack:Bd(b)}}function Me(a,b){var c=b.source,d=b.stack;null===d&&null!==c&&(d=Bd(c));null!==c&&na(c.type);b=b.value;null!==a&&1===a.tag&&
na(a.type);try{console.error(b)}catch(e){setTimeout(function(){throw e;})}}function mj(a,b){try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(c){Za(a,c)}}function zh(a){var b=a.ref;if(null!==b)if("function"===typeof b)try{b(null)}catch(c){Za(a,c)}else b.current=null}function nj(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(b.effectTag&256&&null!==a){var c=a.memoizedProps,d=a.memoizedState;a=b.stateNode;b=a.getSnapshotBeforeUpdate(b.elementType===
b.type?c:aa(b.type,c),d);a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(k(163));}function Ah(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.destroy;c.destroy=void 0;void 0!==d&&d()}c=c.next}while(c!==b)}}function Bh(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}function oj(a,b,c,d){switch(c.tag){case 0:case 11:case 15:case 22:Bh(3,
c);return;case 1:a=c.stateNode;c.effectTag&4&&(null===b?a.componentDidMount():(d=c.elementType===c.type?b.memoizedProps:aa(c.type,b.memoizedProps),a.componentDidUpdate(d,b.memoizedState,a.__reactInternalSnapshotBeforeUpdate)));b=c.updateQueue;null!==b&&Wg(c,b,a);return;case 3:b=c.updateQueue;if(null!==b){a=null;if(null!==c.child)switch(c.child.tag){case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}Wg(c,b,a)}return;case 5:a=c.stateNode;null===b&&c.effectTag&4&&lg(c.type,c.memoizedProps)&&
a.focus();return;case 6:return;case 4:return;case 12:return;case 13:null===c.memoizedState&&(c=c.alternate,null!==c&&(c=c.memoizedState,null!==c&&(c=c.dehydrated,null!==c&&bg(c))));return;case 19:case 17:case 20:case 21:return}throw Error(k(163));}function Ch(a,b,c){"function"===typeof Ne&&Ne(b);switch(b.tag){case 0:case 11:case 14:case 15:case 22:a=b.updateQueue;if(null!==a&&(a=a.lastEffect,null!==a)){var d=a.next;Da(97<c?97:c,function(){var a=d;do{var c=a.destroy;if(void 0!==c){var g=b;try{c()}catch(h){Za(g,
h)}}a=a.next}while(a!==d)})}break;case 1:zh(b);c=b.stateNode;"function"===typeof c.componentWillUnmount&&mj(b,c);break;case 5:zh(b);break;case 4:Dh(a,b,c)}}function Eh(a){var b=a.alternate;a.return=null;a.child=null;a.memoizedState=null;a.updateQueue=null;a.dependencies=null;a.alternate=null;a.firstEffect=null;a.lastEffect=null;a.pendingProps=null;a.memoizedProps=null;a.stateNode=null;null!==b&&Eh(b)}function Fh(a){return 5===a.tag||3===a.tag||4===a.tag}function Gh(a){a:{for(var b=a.return;null!==
b;){if(Fh(b)){var c=b;break a}b=b.return}throw Error(k(160));}b=c.stateNode;switch(c.tag){case 5:var d=!1;break;case 3:b=b.containerInfo;d=!0;break;case 4:b=b.containerInfo;d=!0;break;default:throw Error(k(161));}c.effectTag&16&&(Wb(b,""),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||Fh(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.effectTag&2)continue b;if(null===c.child||4===c.tag)continue b;
else c.child.return=c,c=c.child}if(!(c.effectTag&2)){c=c.stateNode;break a}}d?Oe(a,c,b):Pe(a,c,b)}function Oe(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=uc));else if(4!==d&&(a=a.child,null!==a))for(Oe(a,b,c),a=a.sibling;null!==a;)Oe(a,b,c),a=a.sibling}
function Pe(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(Pe(a,b,c),a=a.sibling;null!==a;)Pe(a,b,c),a=a.sibling}function Dh(a,b,c){for(var d=b,e=!1,f,g;;){if(!e){e=d.return;a:for(;;){if(null===e)throw Error(k(160));f=e.stateNode;switch(e.tag){case 5:g=!1;break a;case 3:f=f.containerInfo;g=!0;break a;case 4:f=f.containerInfo;g=!0;break a}e=e.return}e=!0}if(5===d.tag||6===d.tag){a:for(var h=
a,m=d,n=c,l=m;;)if(Ch(h,l,n),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===m)break a;for(;null===l.sibling;){if(null===l.return||l.return===m)break a;l=l.return}l.sibling.return=l.return;l=l.sibling}g?(h=f,m=d.stateNode,8===h.nodeType?h.parentNode.removeChild(m):h.removeChild(m)):f.removeChild(d.stateNode)}else if(4===d.tag){if(null!==d.child){f=d.stateNode.containerInfo;g=!0;d.child.return=d;d=d.child;continue}}else if(Ch(a,d,c),null!==d.child){d.child.return=d;d=d.child;continue}if(d===
b)break;for(;null===d.sibling;){if(null===d.return||d.return===b)return;d=d.return;4===d.tag&&(e=!1)}d.sibling.return=d.return;d=d.sibling}}function Qe(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:Ah(3,b);return;case 1:return;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps,e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;b.updateQueue=null;if(null!==f){c[vc]=d;"input"===a&&"radio"===d.type&&null!=d.name&&If(c,d);Vd(a,e);b=Vd(a,d);for(e=0;e<f.length;e+=2){var g=f[e],
h=f[e+1];"style"===g?gg(c,h):"dangerouslySetInnerHTML"===g?xh(c,h):"children"===g?Wb(c,h):xd(c,g,h,b)}switch(a){case "input":Dd(c,d);break;case "textarea":Lf(c,d);break;case "select":b=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,a=d.value,null!=a?hb(c,!!d.multiple,a,!1):b!==!!d.multiple&&(null!=d.defaultValue?hb(c,!!d.multiple,d.defaultValue,!0):hb(c,!!d.multiple,d.multiple?[]:"",!1))}}}return;case 6:if(null===b.stateNode)throw Error(k(162));b.stateNode.nodeValue=b.memoizedProps;
return;case 3:b=b.stateNode;b.hydrate&&(b.hydrate=!1,bg(b.containerInfo));return;case 12:return;case 13:c=b;null===b.memoizedState?d=!1:(d=!0,c=b.child,Re=Y());if(null!==c)a:for(a=c;;){if(5===a.tag)f=a.stateNode,d?(f=f.style,"function"===typeof f.setProperty?f.setProperty("display","none","important"):f.display="none"):(f=a.stateNode,e=a.memoizedProps.style,e=void 0!==e&&null!==e&&e.hasOwnProperty("display")?e.display:null,f.style.display=fg("display",e));else if(6===a.tag)a.stateNode.nodeValue=d?
"":a.memoizedProps;else if(13===a.tag&&null!==a.memoizedState&&null===a.memoizedState.dehydrated){f=a.child.sibling;f.return=a;a=f;continue}else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===c)break;for(;null===a.sibling;){if(null===a.return||a.return===c)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}Hh(b);return;case 19:Hh(b);return;case 17:return}throw Error(k(163));}function Hh(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=
new pj);b.forEach(function(b){var d=qj.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}function Ih(a,b,c){c=Ea(c,null);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){cd||(cd=!0,Se=d);Me(a,b)};return c}function Jh(a,b,c){c=Ea(c,null);c.tag=3;var d=a.type.getDerivedStateFromError;if("function"===typeof d){var e=b.value;c.payload=function(){Me(a,b);return d(e)}}var f=a.stateNode;null!==f&&"function"===typeof f.componentDidCatch&&(c.callback=function(){"function"!==typeof d&&
(null===La?La=new Set([this]):La.add(this),Me(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:""})});return c}function ka(){return(p&(ca|ma))!==H?1073741821-(Y()/10|0):0!==dd?dd:dd=1073741821-(Y()/10|0)}function Va(a,b,c){b=b.mode;if(0===(b&2))return 1073741823;var d=Cc();if(0===(b&4))return 99===d?1073741823:1073741822;if((p&ca)!==H)return P;if(null!==c)a=Fc(a,c.timeoutMs|0||5E3,250);else switch(d){case 99:a=1073741823;break;case 98:a=Fc(a,150,100);break;case 97:case 96:a=
Fc(a,5E3,250);break;case 95:a=2;break;default:throw Error(k(326));}null!==U&&a===P&&--a;return a}function ed(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);var d=a.return,e=null;if(null===d&&3===a.tag)e=a.stateNode;else for(;null!==d;){c=d.alternate;d.childExpirationTime<b&&(d.childExpirationTime=b);null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);if(null===d.return&&3===d.tag){e=d.stateNode;break}d=d.return}null!==e&&
(U===e&&(Kc(b),F===bd&&Ya(e,P)),yh(e,b));return e}function fd(a){var b=a.lastExpiredTime;if(0!==b)return b;b=a.firstPendingTime;if(!Kh(a,b))return b;var c=a.lastPingedTime;a=a.nextKnownPendingLevel;a=c>a?c:a;return 2>=a&&b!==a?0:a}function V(a){if(0!==a.lastExpiredTime)a.callbackExpirationTime=1073741823,a.callbackPriority=99,a.callbackNode=Og(Te.bind(null,a));else{var b=fd(a),c=a.callbackNode;if(0===b)null!==c&&(a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90);else{var d=ka();
1073741823===b?d=99:1===b||2===b?d=95:(d=10*(1073741821-b)-10*(1073741821-d),d=0>=d?99:250>=d?98:5250>=d?97:95);if(null!==c){var e=a.callbackPriority;if(a.callbackExpirationTime===b&&e>=d)return;c!==Qg&&Rg(c)}a.callbackExpirationTime=b;a.callbackPriority=d;b=1073741823===b?Og(Te.bind(null,a)):Ng(d,Lh.bind(null,a),{timeout:10*(1073741821-b)-Y()});a.callbackNode=b}}}function Lh(a,b){dd=0;if(b)return b=ka(),Ue(a,b),V(a),null;var c=fd(a);if(0!==c){b=a.callbackNode;if((p&(ca|ma))!==H)throw Error(k(327));
xb();a===U&&c===P||$a(a,c);if(null!==t){var d=p;p|=ca;var e=Mh();do try{rj();break}catch(h){Nh(a,h)}while(1);le();p=d;gd.current=e;if(F===hd)throw b=id,$a(a,c),Ya(a,c),V(a),b;if(null===t)switch(e=a.finishedWork=a.current.alternate,a.finishedExpirationTime=c,d=F,U=null,d){case Xa:case hd:throw Error(k(345));case Oh:Ue(a,2<c?2:c);break;case ad:Ya(a,c);d=a.lastSuspendedTime;c===d&&(a.nextKnownPendingLevel=Ve(e));if(1073741823===ta&&(e=Re+Ph-Y(),10<e)){if(jd){var f=a.lastPingedTime;if(0===f||f>=c){a.lastPingedTime=
c;$a(a,c);break}}f=fd(a);if(0!==f&&f!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}a.timeoutHandle=We(ab.bind(null,a),e);break}ab(a);break;case bd:Ya(a,c);d=a.lastSuspendedTime;c===d&&(a.nextKnownPendingLevel=Ve(e));if(jd&&(e=a.lastPingedTime,0===e||e>=c)){a.lastPingedTime=c;$a(a,c);break}e=fd(a);if(0!==e&&e!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}1073741823!==Yb?d=10*(1073741821-Yb)-Y():1073741823===ta?d=0:(d=10*(1073741821-ta)-5E3,e=Y(),c=10*(1073741821-c)-e,d=e-d,0>d&&(d=0),d=
(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*sj(d/1960))-d,c<d&&(d=c));if(10<d){a.timeoutHandle=We(ab.bind(null,a),d);break}ab(a);break;case Xe:if(1073741823!==ta&&null!==kd){f=ta;var g=kd;d=g.busyMinDurationMs|0;0>=d?d=0:(e=g.busyDelayMs|0,f=Y()-(10*(1073741821-f)-(g.timeoutMs|0||5E3)),d=f<=e?0:e+d-f);if(10<d){Ya(a,c);a.timeoutHandle=We(ab.bind(null,a),d);break}}ab(a);break;default:throw Error(k(329));}V(a);if(a.callbackNode===b)return Lh.bind(null,a)}}return null}function Te(a){var b=
a.lastExpiredTime;b=0!==b?b:1073741823;if((p&(ca|ma))!==H)throw Error(k(327));xb();a===U&&b===P||$a(a,b);if(null!==t){var c=p;p|=ca;var d=Mh();do try{tj();break}catch(e){Nh(a,e)}while(1);le();p=c;gd.current=d;if(F===hd)throw c=id,$a(a,b),Ya(a,b),V(a),c;if(null!==t)throw Error(k(261));a.finishedWork=a.current.alternate;a.finishedExpirationTime=b;U=null;ab(a);V(a)}return null}function uj(){if(null!==bb){var a=bb;bb=null;a.forEach(function(a,c){Ue(c,a);V(c)});ha()}}function Qh(a,b){var c=p;p|=1;try{return a(b)}finally{p=
c,p===H&&ha()}}function Rh(a,b){var c=p;p&=-2;p|=Ye;try{return a(b)}finally{p=c,p===H&&ha()}}function $a(a,b){a.finishedWork=null;a.finishedExpirationTime=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,vj(c));if(null!==t)for(c=t.return;null!==c;){var d=c;switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&(q(G),q(B));break;case 3:tb();q(G);q(B);break;case 5:te(d);break;case 4:tb();break;case 13:q(D);break;case 19:q(D);break;case 10:me(d)}c=c.return}U=a;t=Sa(a.current,null);
P=b;F=Xa;id=null;Yb=ta=1073741823;kd=null;Xb=0;jd=!1}function Nh(a,b){do{try{le();Sc.current=Tc;if(Uc)for(var c=z.memoizedState;null!==c;){var d=c.queue;null!==d&&(d.pending=null);c=c.next}Ia=0;J=K=z=null;Uc=!1;if(null===t||null===t.return)return F=hd,id=b,t=null;a:{var e=a,f=t.return,g=t,h=b;b=P;g.effectTag|=2048;g.firstEffect=g.lastEffect=null;if(null!==h&&"object"===typeof h&&"function"===typeof h.then){var m=h;if(0===(g.mode&2)){var n=g.alternate;n?(g.updateQueue=n.updateQueue,g.memoizedState=
n.memoizedState,g.expirationTime=n.expirationTime):(g.updateQueue=null,g.memoizedState=null)}var l=0!==(D.current&1),k=f;do{var p;if(p=13===k.tag){var q=k.memoizedState;if(null!==q)p=null!==q.dehydrated?!0:!1;else{var w=k.memoizedProps;p=void 0===w.fallback?!1:!0!==w.unstable_avoidThisFallback?!0:l?!1:!0}}if(p){var y=k.updateQueue;if(null===y){var r=new Set;r.add(m);k.updateQueue=r}else y.add(m);if(0===(k.mode&2)){k.effectTag|=64;g.effectTag&=-2981;if(1===g.tag)if(null===g.alternate)g.tag=17;else{var O=
Ea(1073741823,null);O.tag=Jc;Fa(g,O)}g.expirationTime=1073741823;break a}h=void 0;g=b;var v=e.pingCache;null===v?(v=e.pingCache=new wj,h=new Set,v.set(m,h)):(h=v.get(m),void 0===h&&(h=new Set,v.set(m,h)));if(!h.has(g)){h.add(g);var x=xj.bind(null,e,m,g);m.then(x,x)}k.effectTag|=4096;k.expirationTime=b;break a}k=k.return}while(null!==k);h=Error((na(g.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+
Bd(g))}F!==Xe&&(F=Oh);h=Le(h,g);k=f;do{switch(k.tag){case 3:m=h;k.effectTag|=4096;k.expirationTime=b;var A=Ih(k,m,b);Ug(k,A);break a;case 1:m=h;var u=k.type,B=k.stateNode;if(0===(k.effectTag&64)&&("function"===typeof u.getDerivedStateFromError||null!==B&&"function"===typeof B.componentDidCatch&&(null===La||!La.has(B)))){k.effectTag|=4096;k.expirationTime=b;var H=Jh(k,m,b);Ug(k,H);break a}}k=k.return}while(null!==k)}t=Sh(t)}catch(cj){b=cj;continue}break}while(1)}function Mh(a){a=gd.current;gd.current=
Tc;return null===a?Tc:a}function Vg(a,b){a<ta&&2<a&&(ta=a);null!==b&&a<Yb&&2<a&&(Yb=a,kd=b)}function Kc(a){a>Xb&&(Xb=a)}function tj(){for(;null!==t;)t=Th(t)}function rj(){for(;null!==t&&!yj();)t=Th(t)}function Th(a){var b=zj(a.alternate,a,P);a.memoizedProps=a.pendingProps;null===b&&(b=Sh(a));Uh.current=null;return b}function Sh(a){t=a;do{var b=t.alternate;a=t.return;if(0===(t.effectTag&2048)){b=hj(b,t,P);if(1===P||1!==t.childExpirationTime){for(var c=0,d=t.child;null!==d;){var e=d.expirationTime,
f=d.childExpirationTime;e>c&&(c=e);f>c&&(c=f);d=d.sibling}t.childExpirationTime=c}if(null!==b)return b;null!==a&&0===(a.effectTag&2048)&&(null===a.firstEffect&&(a.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=t.firstEffect),a.lastEffect=t.lastEffect),1<t.effectTag&&(null!==a.lastEffect?a.lastEffect.nextEffect=t:a.firstEffect=t,a.lastEffect=t))}else{b=lj(t);if(null!==b)return b.effectTag&=2047,b;null!==a&&(a.firstEffect=a.lastEffect=null,a.effectTag|=
2048)}b=t.sibling;if(null!==b)return b;t=a}while(null!==t);F===Xa&&(F=Xe);return null}function Ve(a){var b=a.expirationTime;a=a.childExpirationTime;return b>a?b:a}function ab(a){var b=Cc();Da(99,Aj.bind(null,a,b));return null}function Aj(a,b){do xb();while(null!==Zb);if((p&(ca|ma))!==H)throw Error(k(327));var c=a.finishedWork,d=a.finishedExpirationTime;if(null===c)return null;a.finishedWork=null;a.finishedExpirationTime=0;if(c===a.current)throw Error(k(177));a.callbackNode=null;a.callbackExpirationTime=
0;a.callbackPriority=90;a.nextKnownPendingLevel=0;var e=Ve(c);a.firstPendingTime=e;d<=a.lastSuspendedTime?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:d<=a.firstSuspendedTime&&(a.firstSuspendedTime=d-1);d<=a.lastPingedTime&&(a.lastPingedTime=0);d<=a.lastExpiredTime&&(a.lastExpiredTime=0);a===U&&(t=U=null,P=0);1<c.effectTag?null!==c.lastEffect?(c.lastEffect.nextEffect=c,e=c.firstEffect):e=c:e=c.firstEffect;if(null!==e){var f=p;p|=ma;Uh.current=null;Ze=tc;var g=kg();if(Xd(g)){if("selectionStart"in
g)var h={start:g.selectionStart,end:g.selectionEnd};else a:{h=(h=g.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&0!==m.rangeCount){h=m.anchorNode;var n=m.anchorOffset,q=m.focusNode;m=m.focusOffset;try{h.nodeType,q.nodeType}catch(sb){h=null;break a}var ba=0,w=-1,y=-1,B=0,D=0,r=g,z=null;b:for(;;){for(var v;;){r!==h||0!==n&&3!==r.nodeType||(w=ba+n);r!==q||0!==m&&3!==r.nodeType||(y=ba+m);3===r.nodeType&&(ba+=r.nodeValue.length);if(null===(v=r.firstChild))break;z=r;
r=v}for(;;){if(r===g)break b;z===h&&++B===n&&(w=ba);z===q&&++D===m&&(y=ba);if(null!==(v=r.nextSibling))break;r=z;z=r.parentNode}r=v}h=-1===w||-1===y?null:{start:w,end:y}}else h=null}h=h||{start:0,end:0}}else h=null;$e={activeElementDetached:null,focusedElem:g,selectionRange:h};tc=!1;l=e;do try{Bj()}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);l=e;do try{for(g=a,h=b;null!==l;){var x=l.effectTag;x&16&&Wb(l.stateNode,"");if(x&128){var A=l.alternate;if(null!==A){var u=
A.ref;null!==u&&("function"===typeof u?u(null):u.current=null)}}switch(x&1038){case 2:Gh(l);l.effectTag&=-3;break;case 6:Gh(l);l.effectTag&=-3;Qe(l.alternate,l);break;case 1024:l.effectTag&=-1025;break;case 1028:l.effectTag&=-1025;Qe(l.alternate,l);break;case 4:Qe(l.alternate,l);break;case 8:n=l,Dh(g,n,h),Eh(n)}l=l.nextEffect}}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);u=$e;A=kg();x=u.focusedElem;h=u.selectionRange;if(A!==x&&x&&x.ownerDocument&&jg(x.ownerDocument.documentElement,
x)){null!==h&&Xd(x)&&(A=h.start,u=h.end,void 0===u&&(u=A),"selectionStart"in x?(x.selectionStart=A,x.selectionEnd=Math.min(u,x.value.length)):(u=(A=x.ownerDocument||document)&&A.defaultView||window,u.getSelection&&(u=u.getSelection(),n=x.textContent.length,g=Math.min(h.start,n),h=void 0===h.end?g:Math.min(h.end,n),!u.extend&&g>h&&(n=h,h=g,g=n),n=ig(x,g),q=ig(x,h),n&&q&&(1!==u.rangeCount||u.anchorNode!==n.node||u.anchorOffset!==n.offset||u.focusNode!==q.node||u.focusOffset!==q.offset)&&(A=A.createRange(),
A.setStart(n.node,n.offset),u.removeAllRanges(),g>h?(u.addRange(A),u.extend(q.node,q.offset)):(A.setEnd(q.node,q.offset),u.addRange(A))))));A=[];for(u=x;u=u.parentNode;)1===u.nodeType&&A.push({element:u,left:u.scrollLeft,top:u.scrollTop});"function"===typeof x.focus&&x.focus();for(x=0;x<A.length;x++)u=A[x],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}tc=!!Ze;$e=Ze=null;a.current=c;l=e;do try{for(x=a;null!==l;){var F=l.effectTag;F&36&&oj(x,l.alternate,l);if(F&128){A=void 0;var E=l.ref;if(null!==
E){var G=l.stateNode;switch(l.tag){case 5:A=G;break;default:A=G}"function"===typeof E?E(A):E.current=A}}l=l.nextEffect}}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);l=null;Cj();p=f}else a.current=c;if(ld)ld=!1,Zb=a,$b=b;else for(l=e;null!==l;)b=l.nextEffect,l.nextEffect=null,l=b;b=a.firstPendingTime;0===b&&(La=null);1073741823===b?a===af?ac++:(ac=0,af=a):ac=0;"function"===typeof bf&&bf(c.stateNode,d);V(a);if(cd)throw cd=!1,a=Se,Se=null,a;if((p&Ye)!==H)return null;
ha();return null}function Bj(){for(;null!==l;){var a=l.effectTag;0!==(a&256)&&nj(l.alternate,l);0===(a&512)||ld||(ld=!0,Ng(97,function(){xb();return null}));l=l.nextEffect}}function xb(){if(90!==$b){var a=97<$b?97:$b;$b=90;return Da(a,Dj)}}function Dj(){if(null===Zb)return!1;var a=Zb;Zb=null;if((p&(ca|ma))!==H)throw Error(k(331));var b=p;p|=ma;for(a=a.current.firstEffect;null!==a;){try{var c=a;if(0!==(c.effectTag&512))switch(c.tag){case 0:case 11:case 15:case 22:Ah(5,c),Bh(5,c)}}catch(d){if(null===
a)throw Error(k(330));Za(a,d)}c=a.nextEffect;a.nextEffect=null;a=c}p=b;ha();return!0}function Vh(a,b,c){b=Le(c,b);b=Ih(a,b,1073741823);Fa(a,b);a=ed(a,1073741823);null!==a&&V(a)}function Za(a,b){if(3===a.tag)Vh(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){Vh(c,a,b);break}else if(1===c.tag){var d=c.stateNode;if("function"===typeof c.type.getDerivedStateFromError||"function"===typeof d.componentDidCatch&&(null===La||!La.has(d))){a=Le(b,a);a=Jh(c,a,1073741823);Fa(c,a);c=ed(c,1073741823);null!==
c&&V(c);break}}c=c.return}}function xj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);U===a&&P===c?F===bd||F===ad&&1073741823===ta&&Y()-Re<Ph?$a(a,P):jd=!0:Kh(a,c)&&(b=a.lastPingedTime,0!==b&&b<c||(a.lastPingedTime=c,V(a)))}function qj(a,b){var c=a.stateNode;null!==c&&c.delete(b);b=0;0===b&&(b=ka(),b=Va(b,a,null));a=ed(a,b);null!==a&&V(a)}function Ej(a){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=
b.inject(a);bf=function(a,e){try{b.onCommitFiberRoot(c,a,void 0,64===(a.current.effectTag&64))}catch(f){}};Ne=function(a){try{b.onCommitFiberUnmount(c,a)}catch(e){}}}catch(d){}return!0}function Fj(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.effectTag=0;this.lastEffect=this.firstEffect=this.nextEffect=
null;this.childExpirationTime=this.expirationTime=0;this.alternate=null}function Ge(a){a=a.prototype;return!(!a||!a.isReactComponent)}function Gj(a){if("function"===typeof a)return Ge(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===zd)return 11;if(a===Ad)return 14}return 2}function Sa(a,b){var c=a.alternate;null===c?(c=la(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.effectTag=0,c.nextEffect=null,c.firstEffect=
null,c.lastEffect=null);c.childExpirationTime=a.childExpirationTime;c.expirationTime=a.expirationTime;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{expirationTime:b.expirationTime,firstContext:b.firstContext,responders:b.responders};c.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}function Oc(a,b,c,d,e,f){var g=2;d=a;if("function"===typeof a)Ge(a)&&(g=1);else if("string"===typeof a)g=
5;else a:switch(a){case Ma:return Ha(c.children,e,f,b);case Hj:g=8;e|=7;break;case Af:g=8;e|=1;break;case kc:return a=la(12,c,b,e|8),a.elementType=kc,a.type=kc,a.expirationTime=f,a;case lc:return a=la(13,c,b,e),a.type=lc,a.elementType=lc,a.expirationTime=f,a;case yd:return a=la(19,c,b,e),a.elementType=yd,a.expirationTime=f,a;default:if("object"===typeof a&&null!==a)switch(a.$$typeof){case Cf:g=10;break a;case Bf:g=9;break a;case zd:g=11;break a;case Ad:g=14;break a;case Ef:g=16;d=null;break a;case Df:g=
22;break a}throw Error(k(130,null==a?a:typeof a,""));}b=la(g,c,b,e);b.elementType=a;b.type=d;b.expirationTime=f;return b}function Ha(a,b,c,d){a=la(7,a,d,b);a.expirationTime=c;return a}function qe(a,b,c){a=la(6,a,null,b);a.expirationTime=c;return a}function re(a,b,c){b=la(4,null!==a.children?a.children:[],a.key,b);b.expirationTime=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}function Ij(a,b,c){this.tag=b;this.current=null;this.containerInfo=
a;this.pingCache=this.pendingChildren=null;this.finishedExpirationTime=0;this.finishedWork=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=null;this.callbackPriority=90;this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Kh(a,b){var c=a.firstSuspendedTime;a=a.lastSuspendedTime;return 0!==c&&c>=b&&a<=b}function Ya(a,b){var c=a.firstSuspendedTime,d=a.lastSuspendedTime;
c<b&&(a.firstSuspendedTime=b);if(d>b||0===c)a.lastSuspendedTime=b;b<=a.lastPingedTime&&(a.lastPingedTime=0);b<=a.lastExpiredTime&&(a.lastExpiredTime=0)}function yh(a,b){b>a.firstPendingTime&&(a.firstPendingTime=b);var c=a.firstSuspendedTime;0!==c&&(b>=c?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:b>=a.lastSuspendedTime&&(a.lastSuspendedTime=b+1),b>a.nextKnownPendingLevel&&(a.nextKnownPendingLevel=b))}function Ue(a,b){var c=a.lastExpiredTime;if(0===c||c>b)a.lastExpiredTime=b}
function md(a,b,c,d){var e=b.current,f=ka(),g=Vb.suspense;f=Va(f,e,g);a:if(c){c=c._reactInternalFiber;b:{if(Na(c)!==c||1!==c.tag)throw Error(k(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(N(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(k(171));}if(1===c.tag){var m=c.type;if(N(m)){c=Gg(c,m,h);break a}}c=h}else c=Ca;null===b.context?b.context=c:b.pendingContext=c;b=Ea(f,g);b.payload={element:a};d=void 0===
d?null:d;null!==d&&(b.callback=d);Fa(e,b);Ja(e,f);return f}function cf(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Wh(a,b){a=a.memoizedState;null!==a&&null!==a.dehydrated&&a.retryTime<b&&(a.retryTime=b)}function df(a,b){Wh(a,b);(a=a.alternate)&&Wh(a,b)}function ef(a,b,c){c=null!=c&&!0===c.hydrate;var d=new Ij(a,b,c),e=la(3,null,null,2===b?7:1===b?3:0);d.current=e;e.stateNode=d;ne(e);a[Lb]=d.current;c&&0!==b&&
xi(a,9===a.nodeType?a:a.ownerDocument);this._internalRoot=d}function bc(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||" react-mount-point-unstable "!==a.nodeValue))}function Jj(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute("data-reactroot")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new ef(a,0,b?{hydrate:!0}:void 0)}function nd(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;
if("function"===typeof e){var h=e;e=function(){var a=cf(g);h.call(a)}}md(b,g,a,e)}else{f=c._reactRootContainer=Jj(c,d);g=f._internalRoot;if("function"===typeof e){var m=e;e=function(){var a=cf(g);m.call(a)}}Rh(function(){md(b,g,a,e)})}return cf(g)}function Kj(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:gb,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}}function Xh(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;
if(!bc(b))throw Error(k(200));return Kj(a,b,null,c)}if(!ea)throw Error(k(227));var ki=function(a,b,c,d,e,f,g,h,m){var n=Array.prototype.slice.call(arguments,3);try{b.apply(c,n)}catch(C){this.onError(C)}},yb=!1,gc=null,hc=!1,pd=null,li={onError:function(a){yb=!0;gc=a}},td=null,rf=null,mf=null,ic=null,cb={},jc=[],qd={},db={},rd={},wa=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),M=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.assign,
sd=null,eb=null,fb=null,ee=function(a,b){return a(b)},eg=function(a,b,c,d,e){return a(b,c,d,e)},vd=function(){},vf=ee,Oa=!1,wd=!1,Z=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Scheduler,Lj=Z.unstable_cancelCallback,ff=Z.unstable_now,$f=Z.unstable_scheduleCallback,Mj=Z.unstable_shouldYield,Yh=Z.unstable_requestPaint,Pd=Z.unstable_runWithPriority,Nj=Z.unstable_getCurrentPriorityLevel,Oj=Z.unstable_ImmediatePriority,Zh=Z.unstable_UserBlockingPriority,ag=Z.unstable_NormalPriority,Pj=Z.unstable_LowPriority,
Qj=Z.unstable_IdlePriority,oi=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wf=Object.prototype.hasOwnProperty,yf={},xf={},E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){E[a]=
new L(a,0,!1,a,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var b=a[0];E[b]=new L(b,1,!1,a[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){E[a]=new L(a,2,!1,a.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){E[a]=new L(a,2,!1,a,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){E[a]=
new L(a,3,!1,a.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(a){E[a]=new L(a,3,!0,a,null,!1)});["capture","download"].forEach(function(a){E[a]=new L(a,4,!1,a,null,!1)});["cols","rows","size","span"].forEach(function(a){E[a]=new L(a,6,!1,a,null,!1)});["rowSpan","start"].forEach(function(a){E[a]=new L(a,5,!1,a.toLowerCase(),null,!1)});var gf=/[\-:]([a-z])/g,hf=function(a){return a[1].toUpperCase()};"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var b=
a.replace(gf,hf);E[b]=new L(b,1,!1,a,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var b=a.replace(gf,hf);E[b]=new L(b,1,!1,a,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var b=a.replace(gf,hf);E[b]=new L(b,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(a){E[a]=new L(a,1,!1,a.toLowerCase(),null,!1)});E.xlinkHref=new L("xlinkHref",1,
!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(a){E[a]=new L(a,1,!1,a.toLowerCase(),null,!0)});var da=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;da.hasOwnProperty("ReactCurrentDispatcher")||(da.ReactCurrentDispatcher={current:null});da.hasOwnProperty("ReactCurrentBatchConfig")||(da.ReactCurrentBatchConfig={suspense:null});var si=/^(.*)[\\\/]/,Q="function"===typeof Symbol&&Symbol.for,Pc=Q?Symbol.for("react.element"):60103,gb=Q?Symbol.for("react.portal"):
60106,Ma=Q?Symbol.for("react.fragment"):60107,Af=Q?Symbol.for("react.strict_mode"):60108,kc=Q?Symbol.for("react.profiler"):60114,Cf=Q?Symbol.for("react.provider"):60109,Bf=Q?Symbol.for("react.context"):60110,Hj=Q?Symbol.for("react.concurrent_mode"):60111,zd=Q?Symbol.for("react.forward_ref"):60112,lc=Q?Symbol.for("react.suspense"):60113,yd=Q?Symbol.for("react.suspense_list"):60120,Ad=Q?Symbol.for("react.memo"):60115,Ef=Q?Symbol.for("react.lazy"):60116,Df=Q?Symbol.for("react.block"):60121,zf="function"===
typeof Symbol&&Symbol.iterator,od,xh=function(a){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if("http://www.w3.org/2000/svg"!==a.namespaceURI||"innerHTML"in a)a.innerHTML=b;else{od=od||document.createElement("div");od.innerHTML="<svg>"+b.valueOf().toString()+"</svg>";for(b=od.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}}),Wb=function(a,
b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b},ib={animationend:nc("Animation","AnimationEnd"),animationiteration:nc("Animation","AnimationIteration"),animationstart:nc("Animation","AnimationStart"),transitionend:nc("Transition","TransitionEnd")},Id={},Of={};wa&&(Of=document.createElement("div").style,"AnimationEvent"in window||(delete ib.animationend.animation,delete ib.animationiteration.animation,delete ib.animationstart.animation),"TransitionEvent"in
window||delete ib.transitionend.transition);var $h=oc("animationend"),ai=oc("animationiteration"),bi=oc("animationstart"),ci=oc("transitionend"),Db="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pf=new ("function"===typeof WeakMap?WeakMap:Map),Ab=null,wi=function(a){if(a){var b=a._dispatchListeners,c=a._dispatchInstances;
if(Array.isArray(b))for(var d=0;d<b.length&&!a.isPropagationStopped();d++)lf(a,b[d],c[d]);else b&&lf(a,b,c);a._dispatchListeners=null;a._dispatchInstances=null;a.isPersistent()||a.constructor.release(a)}},qc=[],Rd=!1,fa=[],xa=null,ya=null,za=null,Eb=new Map,Fb=new Map,Jb=[],Nd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),
yi="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" "),dg={},cg=new Map,Td=new Map,Rj=["abort","abort",$h,"animationEnd",ai,"animationIteration",bi,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata",
"loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",ci,"transitionEnd","waiting","waiting"];Sd("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),
0);Sd("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Sd(Rj,2);(function(a,b){for(var c=0;c<a.length;c++)Td.set(a[c],b)})("change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),0);var Hi=Zh,Gi=Pd,tc=!0,Kb={animationIterationCount:!0,
borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,
strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sj=["Webkit","ms","Moz","O"];Object.keys(Kb).forEach(function(a){Sj.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);Kb[b]=Kb[a]})});var Ii=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ng="$",og="/$",$d="$?",Zd="$!",Ze=null,$e=null,We="function"===typeof setTimeout?setTimeout:void 0,vj="function"===
typeof clearTimeout?clearTimeout:void 0,jf=Math.random().toString(36).slice(2),Aa="__reactInternalInstance$"+jf,vc="__reactEventHandlers$"+jf,Lb="__reactContainere$"+jf,Ba=null,ce=null,wc=null;M(R.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!==typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=xc)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!==
typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=xc)},persist:function(){this.isPersistent=xc},isPersistent:yc,destructor:function(){var a=this.constructor.Interface,b;for(b in a)this[b]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null;this.isPropagationStopped=this.isDefaultPrevented=yc;this._dispatchInstances=this._dispatchListeners=null}});R.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||
Date.now()},defaultPrevented:null,isTrusted:null};R.extend=function(a){function b(){return c.apply(this,arguments)}var c=this,d=function(){};d.prototype=c.prototype;d=new d;M(d,b.prototype);b.prototype=d;b.prototype.constructor=b;b.Interface=M({},c.Interface,a);b.extend=c.extend;sg(b);return b};sg(R);var Tj=R.extend({data:null}),Uj=R.extend({data:null}),Ni=[9,13,27,32],de=wa&&"CompositionEvent"in window,cc=null;wa&&"documentMode"in document&&(cc=document.documentMode);var Vj=wa&&"TextEvent"in window&&
!cc,xg=wa&&(!de||cc&&8<cc&&11>=cc),wg=String.fromCharCode(32),ua={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},
dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},vg=!1,mb=!1,Wj={eventTypes:ua,extractEvents:function(a,b,c,d,e){var f;if(de)b:{switch(a){case "compositionstart":var g=ua.compositionStart;break b;case "compositionend":g=ua.compositionEnd;break b;case "compositionupdate":g=
ua.compositionUpdate;break b}g=void 0}else mb?tg(a,c)&&(g=ua.compositionEnd):"keydown"===a&&229===c.keyCode&&(g=ua.compositionStart);g?(xg&&"ko"!==c.locale&&(mb||g!==ua.compositionStart?g===ua.compositionEnd&&mb&&(f=rg()):(Ba=d,ce="value"in Ba?Ba.value:Ba.textContent,mb=!0)),e=Tj.getPooled(g,b,c,d),f?e.data=f:(f=ug(c),null!==f&&(e.data=f)),lb(e),f=e):f=null;(a=Vj?Oi(a,c):Pi(a,c))?(b=Uj.getPooled(ua.beforeInput,b,c,d),b.data=a,lb(b)):b=null;return null===f?b:null===b?f:[f,b]}},Qi={color:!0,date:!0,
datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Ag={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},Mb=null,Nb=null,kf=!1;wa&&(kf=Tf("input")&&(!document.documentMode||9<document.documentMode));var Xj={eventTypes:Ag,_isInputEventSupported:kf,extractEvents:function(a,b,c,d,e){e=b?Pa(b):window;var f=
e.nodeName&&e.nodeName.toLowerCase();if("select"===f||"input"===f&&"file"===e.type)var g=Si;else if(yg(e))if(kf)g=Wi;else{g=Ui;var h=Ti}else(f=e.nodeName)&&"input"===f.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)&&(g=Vi);if(g&&(g=g(a,b)))return zg(g,c,d);h&&h(a,e,b);"blur"===a&&(a=e._wrapperState)&&a.controlled&&"number"===e.type&&Ed(e,"number",e.value)}},dc=R.extend({view:null,detail:null}),Yi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},di=0,ei=0,fi=!1,gi=!1,ec=dc.extend({screenX:null,
screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:fe,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)},movementX:function(a){if("movementX"in a)return a.movementX;var b=di;di=a.screenX;return fi?"mousemove"===a.type?a.screenX-b:0:(fi=!0,0)},movementY:function(a){if("movementY"in a)return a.movementY;var b=ei;ei=a.screenY;return gi?"mousemove"===
a.type?a.screenY-b:0:(gi=!0,0)}}),hi=ec.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),fc={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout",
"pointerover"]}},Yj={eventTypes:fc,extractEvents:function(a,b,c,d,e){var f="mouseover"===a||"pointerover"===a,g="mouseout"===a||"pointerout"===a;if(f&&0===(e&32)&&(c.relatedTarget||c.fromElement)||!g&&!f)return null;f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window;if(g){if(g=b,b=(b=c.relatedTarget||c.toElement)?Bb(b):null,null!==b){var h=Na(b);if(b!==h||5!==b.tag&&6!==b.tag)b=null}}else g=null;if(g===b)return null;if("mouseout"===a||"mouseover"===a){var m=ec;var n=fc.mouseLeave;
var l=fc.mouseEnter;var k="mouse"}else if("pointerout"===a||"pointerover"===a)m=hi,n=fc.pointerLeave,l=fc.pointerEnter,k="pointer";a=null==g?f:Pa(g);f=null==b?f:Pa(b);n=m.getPooled(n,g,c,d);n.type=k+"leave";n.target=a;n.relatedTarget=f;c=m.getPooled(l,b,c,d);c.type=k+"enter";c.target=f;c.relatedTarget=a;d=g;k=b;if(d&&k)a:{m=d;l=k;g=0;for(a=m;a;a=pa(a))g++;a=0;for(b=l;b;b=pa(b))a++;for(;0<g-a;)m=pa(m),g--;for(;0<a-g;)l=pa(l),a--;for(;g--;){if(m===l||m===l.alternate)break a;m=pa(m);l=pa(l)}m=null}else m=
null;l=m;for(m=[];d&&d!==l;){g=d.alternate;if(null!==g&&g===l)break;m.push(d);d=pa(d)}for(d=[];k&&k!==l;){g=k.alternate;if(null!==g&&g===l)break;d.push(k);k=pa(k)}for(k=0;k<m.length;k++)be(m[k],"bubbled",n);for(k=d.length;0<k--;)be(d[k],"captured",c);return 0===(e&64)?[n]:[n,c]}},Qa="function"===typeof Object.is?Object.is:Zi,$i=Object.prototype.hasOwnProperty,Zj=wa&&"documentMode"in document&&11>=document.documentMode,Eg={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},
dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},nb=null,he=null,Pb=null,ge=!1,ak={eventTypes:Eg,extractEvents:function(a,b,c,d,e,f){e=f||(d.window===d?d.document:9===d.nodeType?d:d.ownerDocument);if(!(f=!e)){a:{e=Jd(e);f=rd.onSelect;for(var g=0;g<f.length;g++)if(!e.has(f[g])){e=!1;break a}e=!0}f=!e}if(f)return null;e=b?Pa(b):window;switch(a){case "focus":if(yg(e)||"true"===e.contentEditable)nb=e,he=b,Pb=null;break;case "blur":Pb=he=nb=null;
break;case "mousedown":ge=!0;break;case "contextmenu":case "mouseup":case "dragend":return ge=!1,Dg(c,d);case "selectionchange":if(Zj)break;case "keydown":case "keyup":return Dg(c,d)}return null}},bk=R.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ck=R.extend({clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),dk=dc.extend({relatedTarget:null}),ek={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",
Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",
224:"Meta"},gk=dc.extend({key:function(a){if(a.key){var b=ek[a.key]||a.key;if("Unidentified"!==b)return b}return"keypress"===a.type?(a=Ac(a),13===a?"Enter":String.fromCharCode(a)):"keydown"===a.type||"keyup"===a.type?fk[a.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:fe,charCode:function(a){return"keypress"===a.type?Ac(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===
a.type?Ac(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),hk=ec.extend({dataTransfer:null}),ik=dc.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:fe}),jk=R.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),kk=ec.extend({deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?
-a.wheelDelta:0},deltaZ:null,deltaMode:null}),lk={eventTypes:dg,extractEvents:function(a,b,c,d,e){e=cg.get(a);if(!e)return null;switch(a){case "keypress":if(0===Ac(c))return null;case "keydown":case "keyup":a=gk;break;case "blur":case "focus":a=dk;break;case "click":if(2===c.button)return null;case "auxclick":case "dblclick":case "mousedown":case "mousemove":case "mouseup":case "mouseout":case "mouseover":case "contextmenu":a=ec;break;case "drag":case "dragend":case "dragenter":case "dragexit":case "dragleave":case "dragover":case "dragstart":case "drop":a=
hk;break;case "touchcancel":case "touchend":case "touchmove":case "touchstart":a=ik;break;case $h:case ai:case bi:a=bk;break;case ci:a=jk;break;case "scroll":a=dc;break;case "wheel":a=kk;break;case "copy":case "cut":case "paste":a=ck;break;case "gotpointercapture":case "lostpointercapture":case "pointercancel":case "pointerdown":case "pointermove":case "pointerout":case "pointerover":case "pointerup":a=hi;break;default:a=R}b=a.getPooled(e,b,c,d);lb(b);return b}};(function(a){if(ic)throw Error(k(101));
ic=Array.prototype.slice.call(a);nf()})("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));(function(a,b,c){td=a;rf=b;mf=c})(ae,Hb,Pa);pf({SimpleEventPlugin:lk,EnterLeaveEventPlugin:Yj,ChangeEventPlugin:Xj,SelectEventPlugin:ak,BeforeInputEventPlugin:Wj});var ie=[],ob=-1,Ca={},B={current:Ca},G={current:!1},Ra=Ca,bj=Pd,je=$f,Rg=Lj,aj=Nj,Dc=Oj,Ig=Zh,Jg=ag,Kg=Pj,Lg=Qj,Qg={},yj=Mj,Cj=void 0!==Yh?Yh:function(){},qa=null,
Ec=null,ke=!1,ii=ff(),Y=1E4>ii?ff:function(){return ff()-ii},Ic={current:null},Hc=null,qb=null,Gc=null,Tg=0,Jc=2,Ga=!1,Vb=da.ReactCurrentBatchConfig,$g=(new ea.Component).refs,Mc={isMounted:function(a){return(a=a._reactInternalFiber)?Na(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=ka(),e=Vb.suspense;d=Va(d,a,e);e=Ea(d,e);e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Fa(a,e);Ja(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=ka(),e=Vb.suspense;
d=Va(d,a,e);e=Ea(d,e);e.tag=1;e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Fa(a,e);Ja(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=ka(),d=Vb.suspense;c=Va(c,a,d);d=Ea(c,d);d.tag=Jc;void 0!==b&&null!==b&&(d.callback=b);Fa(a,d);Ja(a,c)}},Qc=Array.isArray,wb=ah(!0),Fe=ah(!1),Sb={},ja={current:Sb},Ub={current:Sb},Tb={current:Sb},D={current:0},Sc=da.ReactCurrentDispatcher,X=da.ReactCurrentBatchConfig,Ia=0,z=null,K=null,J=null,Uc=!1,Tc={readContext:W,useCallback:S,useContext:S,
useEffect:S,useImperativeHandle:S,useLayoutEffect:S,useMemo:S,useReducer:S,useRef:S,useState:S,useDebugValue:S,useResponder:S,useDeferredValue:S,useTransition:S},dj={readContext:W,useCallback:ih,useContext:W,useEffect:eh,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ze(4,2,gh.bind(null,b,a),c)},useLayoutEffect:function(a,b){return ze(4,2,a,b)},useMemo:function(a,b){var c=ub();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=
ub();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=ch.bind(null,z,a);return[d.memoizedState,a]},useRef:function(a){var b=ub();a={current:a};return b.memoizedState=a},useState:xe,useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=xe(a),d=c[0],e=c[1];eh(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=
xe(!1),c=b[0];b=b[1];return[ih(Ce.bind(null,b,a),[b,a]),c]}},ej={readContext:W,useCallback:Yc,useContext:W,useEffect:Xc,useImperativeHandle:hh,useLayoutEffect:fh,useMemo:jh,useReducer:Vc,useRef:dh,useState:function(a){return Vc(Ua)},useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=Vc(Ua),d=c[0],e=c[1];Xc(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=Vc(Ua),c=b[0];b=b[1];return[Yc(Ce.bind(null,
b,a),[b,a]),c]}},fj={readContext:W,useCallback:Yc,useContext:W,useEffect:Xc,useImperativeHandle:hh,useLayoutEffect:fh,useMemo:jh,useReducer:Wc,useRef:dh,useState:function(a){return Wc(Ua)},useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=Wc(Ua),d=c[0],e=c[1];Xc(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=Wc(Ua),c=b[0];b=b[1];return[Yc(Ce.bind(null,b,a),[b,a]),c]}},ra=null,Ka=null,Wa=
!1,gj=da.ReactCurrentOwner,ia=!1,Je={dehydrated:null,retryTime:0};var jj=function(a,b,c,d){for(c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};var wh=function(a){};var ij=function(a,b,c,d,e){var f=a.memoizedProps;if(f!==d){var g=b.stateNode;Ta(ja.current);a=null;switch(c){case "input":f=
Cd(g,f);d=Cd(g,d);a=[];break;case "option":f=Fd(g,f);d=Fd(g,d);a=[];break;case "select":f=M({},f,{value:void 0});d=M({},d,{value:void 0});a=[];break;case "textarea":f=Gd(g,f);d=Gd(g,d);a=[];break;default:"function"!==typeof f.onClick&&"function"===typeof d.onClick&&(g.onclick=uc)}Ud(c,d);var h,m;c=null;for(h in f)if(!d.hasOwnProperty(h)&&f.hasOwnProperty(h)&&null!=f[h])if("style"===h)for(m in g=f[h],g)g.hasOwnProperty(m)&&(c||(c={}),c[m]="");else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==
h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(db.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in d){var k=d[h];g=null!=f?f[h]:void 0;if(d.hasOwnProperty(h)&&k!==g&&(null!=k||null!=g))if("style"===h)if(g){for(m in g)!g.hasOwnProperty(m)||k&&k.hasOwnProperty(m)||(c||(c={}),c[m]="");for(m in k)k.hasOwnProperty(m)&&g[m]!==k[m]&&(c||(c={}),c[m]=k[m])}else c||(a||(a=[]),a.push(h,c)),c=k;else"dangerouslySetInnerHTML"===h?(k=k?k.__html:void 0,g=g?g.__html:void 0,null!=k&&g!==k&&(a=a||
[]).push(h,k)):"children"===h?g===k||"string"!==typeof k&&"number"!==typeof k||(a=a||[]).push(h,""+k):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(db.hasOwnProperty(h)?(null!=k&&oa(e,h),a||g===k||(a=[])):(a=a||[]).push(h,k))}c&&(a=a||[]).push("style",c);e=a;if(b.updateQueue=e)b.effectTag|=4}};var kj=function(a,b,c,d){c!==d&&(b.effectTag|=4)};var pj="function"===typeof WeakSet?WeakSet:Set,wj="function"===typeof WeakMap?WeakMap:Map,sj=Math.ceil,gd=da.ReactCurrentDispatcher,
Uh=da.ReactCurrentOwner,H=0,Ye=8,ca=16,ma=32,Xa=0,hd=1,Oh=2,ad=3,bd=4,Xe=5,p=H,U=null,t=null,P=0,F=Xa,id=null,ta=1073741823,Yb=1073741823,kd=null,Xb=0,jd=!1,Re=0,Ph=500,l=null,cd=!1,Se=null,La=null,ld=!1,Zb=null,$b=90,bb=null,ac=0,af=null,dd=0,Ja=function(a,b){if(50<ac)throw ac=0,af=null,Error(k(185));a=ed(a,b);if(null!==a){var c=Cc();1073741823===b?(p&Ye)!==H&&(p&(ca|ma))===H?Te(a):(V(a),p===H&&ha()):V(a);(p&4)===H||98!==c&&99!==c||(null===bb?bb=new Map([[a,b]]):(c=bb.get(a),(void 0===c||c>b)&&bb.set(a,
b)))}};var zj=function(a,b,c){var d=b.expirationTime;if(null!==a){var e=b.pendingProps;if(a.memoizedProps!==e||G.current)ia=!0;else{if(d<c){ia=!1;switch(b.tag){case 3:sh(b);Ee();break;case 5:bh(b);if(b.mode&4&&1!==c&&e.hidden)return b.expirationTime=b.childExpirationTime=1,null;break;case 1:N(b.type)&&Bc(b);break;case 4:se(b,b.stateNode.containerInfo);break;case 10:d=b.memoizedProps.value;e=b.type._context;y(Ic,e._currentValue);e._currentValue=d;break;case 13:if(null!==b.memoizedState){d=b.child.childExpirationTime;
if(0!==d&&d>=c)return th(a,b,c);y(D,D.current&1);b=sa(a,b,c);return null!==b?b.sibling:null}y(D,D.current&1);break;case 19:d=b.childExpirationTime>=c;if(0!==(a.effectTag&64)){if(d)return vh(a,b,c);b.effectTag|=64}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null);y(D,D.current);if(!d)return null}return sa(a,b,c)}ia=!1}}else ia=!1;b.expirationTime=0;switch(b.tag){case 2:d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;e=pb(b,B.current);rb(b,c);e=we(null,
b,d,a,e,c);b.effectTag|=1;if("object"===typeof e&&null!==e&&"function"===typeof e.render&&void 0===e.$$typeof){b.tag=1;b.memoizedState=null;b.updateQueue=null;if(N(d)){var f=!0;Bc(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;ne(b);var g=d.getDerivedStateFromProps;"function"===typeof g&&Lc(b,d,g,a);e.updater=Mc;b.stateNode=e;e._reactInternalFiber=b;pe(b,d,a,c);b=Ie(null,b,d,!0,f,c)}else b.tag=0,T(null,b,e,c),b=b.child;return b;case 16:a:{e=b.elementType;null!==a&&(a.alternate=
null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;ri(e);if(1!==e._status)throw e._result;e=e._result;b.type=e;f=b.tag=Gj(e);a=aa(e,a);switch(f){case 0:b=He(null,b,e,a,c);break a;case 1:b=rh(null,b,e,a,c);break a;case 11:b=nh(null,b,e,a,c);break a;case 14:b=oh(null,b,e,aa(e.type,a),d,c);break a}throw Error(k(306,e,""));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),He(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),rh(a,b,d,e,c);
case 3:sh(b);d=b.updateQueue;if(null===a||null===d)throw Error(k(282));d=b.pendingProps;e=b.memoizedState;e=null!==e?e.element:null;oe(a,b);Qb(b,d,null,c);d=b.memoizedState.element;if(d===e)Ee(),b=sa(a,b,c);else{if(e=b.stateNode.hydrate)Ka=kb(b.stateNode.containerInfo.firstChild),ra=b,e=Wa=!0;if(e)for(c=Fe(b,null,d,c),b.child=c;c;)c.effectTag=c.effectTag&-3|1024,c=c.sibling;else T(a,b,d,c),Ee();b=b.child}return b;case 5:return bh(b),null===a&&De(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:
null,g=e.children,Yd(d,e)?g=null:null!==f&&Yd(d,f)&&(b.effectTag|=16),qh(a,b),b.mode&4&&1!==c&&e.hidden?(b.expirationTime=b.childExpirationTime=1,b=null):(T(a,b,g,c),b=b.child),b;case 6:return null===a&&De(b),null;case 13:return th(a,b,c);case 4:return se(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=wb(b,null,d,c):T(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),nh(a,b,d,e,c);case 7:return T(a,b,b.pendingProps,c),b.child;case 8:return T(a,
b,b.pendingProps.children,c),b.child;case 12:return T(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;g=b.memoizedProps;f=e.value;var h=b.type._context;y(Ic,h._currentValue);h._currentValue=f;if(null!==g)if(h=g.value,f=Qa(h,f)?0:("function"===typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823)|0,0===f){if(g.children===e.children&&!G.current){b=sa(a,b,c);break a}}else for(h=b.child,null!==h&&(h.return=b);null!==h;){var m=h.dependencies;if(null!==
m){g=h.child;for(var l=m.firstContext;null!==l;){if(l.context===d&&0!==(l.observedBits&f)){1===h.tag&&(l=Ea(c,null),l.tag=Jc,Fa(h,l));h.expirationTime<c&&(h.expirationTime=c);l=h.alternate;null!==l&&l.expirationTime<c&&(l.expirationTime=c);Sg(h.return,c);m.expirationTime<c&&(m.expirationTime=c);break}l=l.next}}else g=10===h.tag?h.type===b.type?null:h.child:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}h=g.sibling;if(null!==h){h.return=g.return;g=h;break}g=g.return}h=
g}T(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,d=f.children,rb(b,c),e=W(e,f.unstable_observedBits),d=d(e),b.effectTag|=1,T(a,b,d,c),b.child;case 14:return e=b.type,f=aa(e,b.pendingProps),f=aa(e.type,f),oh(a,b,e,f,d,c);case 15:return ph(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),b.tag=1,N(d)?(a=!0,Bc(b)):a=!1,rb(b,c),Yg(b,d,e),pe(b,d,e,c),Ie(null,
b,d,!0,a,c);case 19:return vh(a,b,c)}throw Error(k(156,b.tag));};var bf=null,Ne=null,la=function(a,b,c,d){return new Fj(a,b,c,d)};ef.prototype.render=function(a){md(a,this._internalRoot,null,null)};ef.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;md(null,a,null,function(){b[Lb]=null})};var Di=function(a){if(13===a.tag){var b=Fc(ka(),150,100);Ja(a,b);df(a,b)}};var Yf=function(a){13===a.tag&&(Ja(a,3),df(a,3))};var Bi=function(a){if(13===a.tag){var b=ka();b=Va(b,a,null);Ja(a,
b);df(a,b)}};sd=function(a,b,c){switch(b){case "input":Dd(a,c);b=c.name;if("radio"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=ae(d);if(!e)throw Error(k(90));Gf(d);Dd(d,e)}}}break;case "textarea":Lf(a,c);break;case "select":b=c.value,null!=b&&hb(a,!!c.multiple,b,!1)}};(function(a,b,c,d){ee=a;eg=b;vd=c;vf=d})(Qh,function(a,b,c,d,e){var f=p;p|=4;
try{return Da(98,a.bind(null,b,c,d,e))}finally{p=f,p===H&&ha()}},function(){(p&(1|ca|ma))===H&&(uj(),xb())},function(a,b){var c=p;p|=2;try{return a(b)}finally{p=c,p===H&&ha()}});var mk={Events:[Hb,Pa,ae,pf,qd,lb,function(a){Kd(a,Ki)},sf,tf,sc,pc,xb,{current:!1}]};(function(a){var b=a.findFiberByHostInstance;return Ej(M({},a,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:da.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=Sf(a);
return null===a?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:Bb,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"});I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mk;I.createPortal=Xh;I.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternalFiber;if(void 0===
b){if("function"===typeof a.render)throw Error(k(188));throw Error(k(268,Object.keys(a)));}a=Sf(b);a=null===a?null:a.stateNode;return a};I.flushSync=function(a,b){if((p&(ca|ma))!==H)throw Error(k(187));var c=p;p|=1;try{return Da(99,a.bind(null,b))}finally{p=c,ha()}};I.hydrate=function(a,b,c){if(!bc(b))throw Error(k(200));return nd(null,a,b,!0,c)};I.render=function(a,b,c){if(!bc(b))throw Error(k(200));return nd(null,a,b,!1,c)};I.unmountComponentAtNode=function(a){if(!bc(a))throw Error(k(40));return a._reactRootContainer?
(Rh(function(){nd(null,null,a,!1,function(){a._reactRootContainer=null;a[Lb]=null})}),!0):!1};I.unstable_batchedUpdates=Qh;I.unstable_createPortal=function(a,b){return Xh(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)};I.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!bc(c))throw Error(k(200));if(null==a||void 0===a._reactInternalFiber)throw Error(k(38));return nd(a,b,c,!1,d)};I.version="16.13.1"});
</script>
    <script>const e = React.createElement;

function pathToString(path) {
  if (path[0] === '/') {
    return '/' + path.slice(1).join('/');
  } else {
    return path.join('/');
  }
}

function findCommonPath(files) {
  if (!files || !files.length) {
    return [];
  }

  function isPrefix(arr, prefix) {
    if (arr.length < prefix.length) {
      return false;
    }
    for (let i = prefix.length - 1; i >= 0; --i) {
      if (arr[i] !== prefix[i]) {
        return false;
      }
    }
    return true;
  }

  let commonPath = files[0].path.slice(0, -1);
  while (commonPath.length) {
    if (files.every(file => isPrefix(file.path, commonPath))) {
      break;
    }
    commonPath.pop();
  }
  return commonPath;
}

function findFolders(files) {
  if (!files || !files.length) {
    return [];
  }

  let folders = files.filter(file => file.path.length > 1).map(file => file.path[0]);
  folders = [...new Set(folders)]; // unique
  folders.sort();

  folders = folders.map(folder => {
    let filesInFolder = files
      .filter(file => file.path[0] === folder)
      .map(file => ({
        ...file,
        path: file.path.slice(1),
        parent: [...file.parent, file.path[0]],
      }));

    const children = findFolders(filesInFolder); // recursion

    return {
      is_folder: true,
      path: [folder],
      parent: files[0].parent,
      children,
      covered: children.reduce((sum, file) => sum + file.covered, 0),
      coverable: children.reduce((sum, file) => sum + file.coverable, 0),
      prevRun: {
        covered: children.reduce((sum, file) => sum + file.prevRun.covered, 0),
        coverable: children.reduce((sum, file) => sum + file.prevRun.coverable, 0),
      }
    };
  });

  return [
    ...folders,
    ...files.filter(file => file.path.length === 1),
  ];
}

class App extends React.Component {
  constructor(...args) {
    super(...args);

    this.state = {
      current: [],
    };
  }

  componentDidMount() {
    this.updateStateFromLocation();
    window.addEventListener("hashchange", () => this.updateStateFromLocation(), false);
  }

  updateStateFromLocation() {
    if (window.location.hash.length > 1) {
      const current = window.location.hash.substr(1).split('/');
      this.setState({current});
    } else {
      this.setState({current: []});
    }
  }

  getCurrentPath() {
    let file = this.props.root;
    let path = [file];
    for (let p of this.state.current) {
      file = file.children.find(file => file.path[0] === p);
      if (!file) {
        return path;
      }
      path.push(file);
    }
    return path;
  }

  render() {
    const path = this.getCurrentPath();
    const file = path[path.length - 1];

    let w = null;
    if (file.is_folder) {
      w = e(FilesList, {
        folder: file,
        onSelectFile: this.selectFile.bind(this),
        onBack: path.length > 1 ? this.back.bind(this) : null,
      });
    } else {
      w = e(DisplayFile, {
        file,
        onBack: this.back.bind(this),
      });
    }

    return e('div', {className: 'app'}, w);
  }

  selectFile(file) {
    this.setState(({current}) => {
      return {current: [...current, file.path[0]]};
    }, () => this.updateHash());
  }

  back(file) {
    this.setState(({current}) => {
      return {current: current.slice(0, current.length - 1)};
    }, () => this.updateHash());
  }

  updateHash() {
    if (!this.state.current || !this.state.current.length) {
      window.location = '#';
    } else {
      window.location = '#' + this.state.current.join('/');
    }
  }
}

function FilesList({folder, onSelectFile, onBack}) {
  let files = folder.children;
  return e('div', {className: 'display-folder'},
    e(FileHeader, {file: folder, onBack}),
    e('table', {className: 'files-list'},
      e('thead', {className: 'files-list__head'},
        e('tr', null,
          e('th', null, "Path"),
          e('th', null, "Coverage")
        )
      ),
      e('tbody', {className: 'files-list__body'},
        files.map(file => e(File, {file, onClick: onSelectFile}))
      )
    )
  );
}

function File({file, onClick}) {
  const coverage = file.coverable ? file.covered / file.coverable * 100 : -1;
  const coverageDelta = file.prevRun &&
    (file.covered / file.coverable * 100 - file.prevRun.covered / file.prevRun.coverable * 100);

  return e('tr', {
      className: 'files-list__file'
        + (coverage >= 0 && coverage < 50 ? ' files-list__file_low': '')
        + (coverage >= 50 && coverage < 80 ? ' files-list__file_medium': '')
        + (coverage >= 80 ? ' files-list__file_high': '')
        + (file.is_folder ? ' files-list__file_folder': ''),
      onClick: () => onClick(file),
    },
    e('td', null, e('a', null, pathToString(file.path))),
    e('td', null,
      file.covered + ' / ' + file.coverable +
      (coverage >= 0 ? ' (' + coverage.toFixed(2) + '%)' : ''),
      e('span', {title: 'Change from the previous run'},
        (coverageDelta ? ` (${coverageDelta > 0 ? '+' : ''}${coverageDelta.toFixed(2)}%)` : ''))
    )
  );
}

function DisplayFile({file, onBack}) {
  return e('div', {className: 'display-file'},
    e(FileHeader, {file, onBack}),
    e(FileContent, {file})
  );
}

function FileHeader({file, onBack}) {
  const coverage = file.covered / file.coverable * 100;
  const coverageDelta = file.prevRun && (coverage - file.prevRun.covered / file.prevRun.coverable * 100);

  return e('div', {className: 'file-header'},
    onBack ? e('a', {className: 'file-header__back', onClick: onBack}, 'Back') : null,
    e('div', {className: 'file-header__name'}, pathToString([...file.parent, ...file.path])),
    e('div', {className: 'file-header__stat'},
      'Covered: ' + file.covered + ' of ' + file.coverable +
      (file.coverable ? ' (' + coverage.toFixed(2) + '%)' : ''),
      e('span', {title: 'Change from the previous run'},
        (coverageDelta ? ` (${coverageDelta > 0 ? '+' : ''}${coverageDelta.toFixed(2)}%)` : ''))
    )
  );
}

function FileContent({file}) {
  return e('pre', {className: 'file-content'},
    file.content.split(/\r?\n/).map((line, index) => {
      const trace = file.traces.find(trace => trace.line === index + 1);
      const covered = trace && trace.stats.Line;
      const uncovered = trace && !trace.stats.Line;
      return e('code', {
          className: 'code-line'
            + (covered ? ' code-line_covered' : '')
            + (uncovered ? ' code-line_uncovered' : ''),
          title: trace ? JSON.stringify(trace.stats, null, 2) : null,
        }, line);
    })
  );
}

(function(){
  const commonPath = findCommonPath(data.files);
  const prevFilesMap = new Map();

  previousData && previousData.files.forEach((file) => {
    const path = file.path.slice(commonPath.length).join('/');
    prevFilesMap.set(path, file);
  });

  const files = data.files.map((file) => {
    const path = file.path.slice(commonPath.length);
    const { covered = 0, coverable = 0 } = prevFilesMap.get(path.join('/')) || {};
    return {
      ...file,
      path,
      parent: commonPath,
      prevRun: { covered, coverable },
    };
  });

  const children = findFolders(files);

  const root = {
    is_folder: true,
    children,
    path: commonPath,
    parent: [],
    covered: children.reduce((sum, file) => sum + file.covered, 0),
    coverable: children.reduce((sum, file) => sum + file.coverable, 0),
    prevRun: {
      covered: children.reduce((sum, file) => sum + file.prevRun.covered, 0),
      coverable: children.reduce((sum, file) => sum + file.prevRun.coverable, 0),
    }
  };

  ReactDOM.render(e(App, {root, prevFilesMap}), document.getElementById('root'));
}());
</script>
</body>
</html>